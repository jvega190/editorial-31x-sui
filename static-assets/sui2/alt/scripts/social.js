!function(a){"use strict";var b=a.crafter,c="$placeholder$",d={window:a,noop:function(){},define:function(b,e,f,g){f!==!0&&f!==!1&&"string"!=typeof f||(g=f,f=void 0),"undefined"==typeof g&&(g=!0);var h=this,i=[];b=b.replace(/\{.*?\}/g,function(a){a=a.substr(1,a.length-2);var b=a.split(":");return b.length>1?"CONST"===b[0].toUpperCase()&&i.push(h.Constants.get(b[1])):i.push(a),c});for(var j,k=f||this,l=b.split("."),m=l.length,n=m-1,o=0;o<m;o++)j=l[o],j===c&&(j=i.shift()),o===n&&"undefined"!=typeof e?k[j]=e:j in k||(k[j]={}),k=k[j];return"string"==typeof g&&(b=g),g&&d.amd(b,e,f===a),e},noConflict:function(c){return c?b:(a.crafter=b,this)},amd:function(b,c,d){"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=c:(d&&(a[b]=c),"function"==typeof define&&define.amd&&define(b,[],function(){return c}))}};d.amd("crafter",d,!0);var e={};for(var f in a)e[f]=a;var g,h="undefined";d.define("social",{window:a,windowCopy:e,parentScope:d,noop:d.noop,noConflict:function(a){var b=this.window[a];return this.window[a]=this.windowCopy[a],b},define:function(){d.define.apply(this,arguments)},get:function(b,c){1===arguments.length&&(c=this);for(var d,e=b.split("."),f=c||a,g=0,h=e.length;g<h&&(d=e[g],"undefined"!=typeof f);g++)f=f[d];return c!==a&&"undefined"==typeof f?this.get(b,a):f},socialise:function(){var a=this.getDirector();a.socialise.apply(a,arguments)},resource:function(a){return this.string.fmt("%@%@",this.Cfg("url.base"),a)},url:function(b,c,e){if("object"==typeof c){var f={};for(var g in c)f[g]=a.encodeURIComponent(c[g]);c=f}else c&&(c=a.encodeURIComponent(c));var h,j,k,l=this.Cfg("url."+b),m=!1;if("object"==typeof l&&(l.absolute&&(m=!0),l=l.value),l.match(i)&&(m=!0),m||(h=this.Cfg("url.service"),j=(h.match(i)||[""])[0]),k=(m?l:j+this.string.fmt("{base}/{path}/{action}",{base:h.substr(j.length),path:b.replace(/\./g,"/"),action:l}).replace("/.json",".json").replace(/[\/\/]+/g,"/")).fmt(c||{}),e){if("object"==typeof e){if(!d.social.$)throw"app.js method url: Query option not available before social framework initialization";e=d.social.$.param(e)}k+=k.indexOf("?")===-1?"?"+e:"&"+e}return k},getDirector:function(){if(!g){var a=this.Cfg("director"),b=this.get(a.cls);g=new b(a.cfg)}return g},string:{fmt:function(a){if("object"==typeof arguments[1]){var b=arguments[1];return a.replace(/\{.*?\}/g,function(a){return b[a.substr(1,a.length-2)]})}var c=0,d=Array.prototype.slice.call(arguments,1);return a.replace(/%@([0-9]+)?/g,function(a,b){return b=b?parseInt(b,10)-1:c++,c>=d.length&&(c=0),a=d[b],null===a?"(null)":typeof a===h?"":a})},loc:function(a){var b=d.social.util.get(this.LOCALE,a);return"undefined"==typeof b&&(b=this.LOCALE[a]),b},LOCALE:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}}});var i=/^(https?:)?\/\//i}(window),function(a){"use strict";var b={MODERATION_STATUS_UNMODERATED:"UNMODERATED",MODERATION_STATUS_PENDING:"PENDING",MODERATION_STATUS_APPROVED:"APPROVED",MODERATION_STATUS_SPAM:"SPAM",MODERATION_STATUS_TRASH:"TRASH",EVENT_SOCIAL_CONFIG_CHANGED:"crafter.social.configuration.changed",EVENT_AREAS_VISIBILITY_CHANGE:"crater.social.event.areas.visibility.change",EVENT_UNAUTHORISED_RESPONSE:"crafter.social.event.unauthorised.response",EVENT_USER_AUTHENTICATION_SUCCESS:"crafter.social.event.user.authentication.success",EVENT_USER_AUTHENTICATION_FAILED:"crafter.social.event.user.authentication.failed",EVENT_SOCIAL_NOCOMMENT:"crater.social.event.no.comments.action",AREA_VISIBILITY_MODE_REVEAL:"area.visibility.mode.reveal",AREA_VISIBILITY_MODE_HOVER:"area.visibility.mode.hover",AREA_VISIBILITY_MODE_HIDE:"area.visibility.mode.hide",SUPPORTED_IMAGE_FORMATS:/\.(jpg|jpeg|png|gif)$/,SUPPORTED_VIDEO_FORMATS:/\.(mp4)$/,POSTER_URL:"images/poster.png",EVENT_REVEAL_DISCUSSIONS:"crafter.social.reveal.discussions.{context}:{target}",EVENT_DISCUSSION_WATCHED:"crafter.social.discussion.watched.{context}:{target}",DESTROY:{}};a.define("Constants",{get:function(c){if(1===arguments.length)return b[c];var d=Array.prototype.slice.call(arguments,0);return Array.prototype.splice.call(d,0,1,b[c]),a.string.fmt.apply(a.string,d)},define:function(c,d){if("object"==typeof c){d=c;for(c in d)this.define(c,d[c])}else c in b?a.util.log("Constant %@ is already defined (value: %@). Value not changed.",c,a.Constants.get(c)):b[c]=d;return!0}},"social.Constants")}(crafter.social),function(a){"use strict";var b={director:{cls:"component.Director",cfg:{}},global:{threadSortBy:"DESC",threadSortOrder:"createdDate"},url:{base:"/",files:"/attachment/{attachmentId}?context={context}",service:"/api/3/",templates:"/templates/",security:{value:"/crafter-social/crafter-security-login",active:"/crafter-social/crafter-security-current-auth"},subscriptions:{subscribe:"{target}.json",unsubscribe:"{target}.json"},profile:{avatar:"/{id}?context={context}&ts{ts}"},threads:{"{target}":{comments:{value:"?context={context}&sortBy={sortBy}&sortOrder={sortOrder}","{id}":{}},subscribe:"?context={context}",unsubscribe:"?context={context}"},"{_id}":{subscribe:"?context={context}",unsubscribe:"?context={context}"}},comments:{value:"?context={context}","{_id}":{value:"?context={context}",votes:{value:"",neutral:"",down:"",up:""},update:{value:""},flags:{value:"?context={context}","{flagId}":"?context={context}"},attachments:{value:"","{fileId}":{value:"?context={context}","delete":"?context={context}"}},moderate:"?context={context}"}},ugc:{target:".json",create:".json",like:"/{id}.json",unlike:"/{id}.json",dislike:"/{id}.json",undislike:"/{id}.json",flag:"/{id}.json",unflag:"/{id}.json",file:"{attachmentId}.json",get_ugc:"{id}.json?context={context}",moderation:{"{id}":"/status.json","{moderationStatus}":{".json":"",target:".json"}},"{id}":{get_attachments:".json?context={context}",add_attachment:".json"}}}};a.define("Cfg",function(c,d){if(1!==arguments.length)return a.define(c,d,b,!1),!0;if("object"!=typeof c)return a.get(c,b);for(var e in c)a.Cfg(e,c[e])},"social.Cfg");var c=a.window.crafterSocial_cfg;"undefined"!=typeof c&&a.Cfg(c)}(crafter.social),function(a){"use strict";a.window.CKEDITOR_BASEPATH=crafter.social.resource("libs/ckeditor/")}(crafter.social);var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return!a&&0!==a||!(!m(a)||0!==a.length)}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===k.call(a)};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;b<c.length;b++)this[c[b]]=a[c[b]]}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new Error("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;f<h;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){if(m(a)&&(a=a.call(this)),!g.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.1.2";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(b<c){var d=n[c],e=n[b];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new Error("No environment passed to template");var c;c=b.compile?function(a,c,d,e,f,g){var i=h.apply(this,arguments);if(i)return i;var j={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,j)}:function(a,b){var c=h.apply(this,arguments);if(c)return c;throw new l("The partial "+b+" could not be compiled when running in runtime-only mode")};var e={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:f,noop:i,compilerInfo:null};return function(c,f){f=f||{};var g,h,i=f.partial?f:b;f.partial||(g=f.helpers,h=f.partials);var j=a.call(e,i,c,g,h,f.data);return f.partial||d(e.compilerInfo),j}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){"use strict";function b(a,c,d){this.type="program",this.statements=a,this.strip={},d?(this.inverse=new b(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)}function c(a,b,c,d){this.type="mustache",this.hash=b,this.strip=d;var e=c[3]||c[2];this.escaped="{"!==e&&"&"!==e;var f=this.id=a[0],g=this.params=a.slice(1),h=this.eligibleHelper=f.isSimple;this.isHelper=h&&(g.length||b)}function d(a,b,c){this.type="partial",this.partialName=a,this.context=b,this.strip=c}function e(a,b,c,d){if(a.id.original!==d.path.original)throw new p(a.id.original+" doesn't match "+d.path.original);this.type="block",this.mustache=a,this.program=b,this.inverse=c,this.strip={left:a.strip.left,right:d.strip.right},(b||c).strip.left=a.strip.right,(c||b).strip.right=d.strip.left,c&&!b&&(this.isInverse=!0)}function f(a){this.type="content",this.string=a}function g(a){this.type="hash",this.pairs=a}function h(a){this.type="ID";for(var b="",c=[],d=0,e=0,f=a.length;e<f;e++){var g=a[e].part;if(b+=(a[e].separator||"")+g,".."===g||"."===g||"this"===g){if(c.length>0)throw new p("Invalid path: "+b);".."===g?d++:this.isScoped=!0}else c.push(g)}this.original=b,this.parts=c,this.string=c.join("."),this.depth=d,this.isSimple=1===a.length&&!this.isScoped&&0===d,this.stringModeValue=this.string}function i(a){this.type="PARTIAL_NAME",this.name=a.original}function j(a){this.type="DATA",this.id=a}function k(a){this.type="STRING",this.original=this.string=this.stringModeValue=a}function l(a){this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)}function m(a){this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a}function n(a){this.type="comment",this.comment=a}var o={},p=a;return o.ProgramNode=b,o.MustacheNode=c,o.PartialNode=d,o.BlockNode=e,o.ContentNode=f,o.HashNode=g,o.IdNode=h,o.PartialNameNode=i,o.DataNode=j,o.StringNode=k,o.IntegerNode=l,o.BooleanNode=m,o.CommentNode=n,o}(c),h=function(){"use strict";var a,b=function(){function a(a,b){return{left:"~"===a[2],right:"~"===b[0]||"~"===b[1]}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1]);case 2:return new e.ProgramNode([]);case 3:this.$=new e.ProgramNode([],g[i-1],g[i]);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i]);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[]);break;case 6:this.$=new e.ProgramNode(g[i]);break;case 7:this.$=new e.ProgramNode([]);break;case 8:this.$=new e.ProgramNode([]);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i]);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i]);break;case 13:this.$=g[i];break;case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i]);break;case 16:this.$=new e.CommentNode(g[i]);break;case 17:this.$=new e.MustacheNode(g[i-1][0],g[i-1][1],g[i-2],a(g[i-2],g[i]));break;case 18:this.$=new e.MustacheNode(g[i-1][0],g[i-1][1],g[i-2],a(g[i-2],g[i]));break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:this.$=new e.MustacheNode(g[i-1][0],g[i-1][1],g[i-2],a(g[i-2],g[i]));break;case 21:this.$=new e.MustacheNode(g[i-1][0],g[i-1][1],g[i-2],a(g[i-2],g[i]));break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]));break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=[[g[i-2]].concat(g[i-1]),g[i]];break;case 25:this.$=[[g[i]],null];break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i]);break;case 28:this.$=new e.IntegerNode(g[i]);break;case 29:this.$=new e.BooleanNode(g[i]);break;case 30:this.$=g[i];break;case 31:this.$=new e.HashNode(g[i]);break;case 32:this.$=[g[i-2],g[i]];break;case 33:this.$=new e.PartialNameNode(g[i]);break;case 34:this.$=new e.PartialNameNode(new e.StringNode(g[i]));break;case 35:this.$=new e.PartialNameNode(new e.IntegerNode(g[i]));break;case 36:this.$=new e.DataNode(g[i]);break;case 37:this.$=new e.IdNode(g[i]);break;case 38:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 39:this.$=[{part:g[i]}];break;case 42:this.$=[];break;case 43:g[i-1].push(g[i]);break;case 46:this.$=[g[i]];break;case 47:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&e(0,1),14;case 3:return e(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return e(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 22:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return b.yytext=e(1,2),38;case 29:return"INVALID";case 30:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(a){this.value=a}function c(){}var d,e=a.COMPILER_REVISION,f=a.REVISION_CHANGES,g=a.log;c.prototype={nameLookup:function(a,b){var d,e;return 0===a.indexOf("depth")&&(d=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":c.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",d?"("+a+" && "+e+")":e},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},g("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var h=f.length;this.i<h;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],h=0,i=this.environment.depths.list.length;h<i;h++)d.push("depth"+this.environment.depths.list[h]);var j=this.mergeSource();if(!this.isChild){var k=e,l=f[k];j="this.compilerInfo = ["+k+",'"+l+"'];\n"+j}if(a)return d.push(j),Function.apply(this,d);var m="function "+(this.name||"")+"("+d.join(",")+") {\n  "+j+"}";return g("debug",m+"\n\n"),m},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;c<d;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),a[a.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"string"==typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes","{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b,!0),d=this.nameLookup("depth"+this.lastContext,b,"context");this.push(c.name+" || "+d),this.replaceStack(function(a){return a+" ? "+a+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();this.pushSource("if ("+f+" = "+d+") { "+f+" = "+f+".call("+c.callParams+"); }"),this.pushSource("else { "+f+" = "+e+"; "+f+" = typeof "+f+" === functionType ? "+f+".call("+c.callParams+") : "+f+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:c,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;f<g;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;f<g;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new b(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var c,d="",e=this.isInline();if(e){var f=this.popStack(!0);if(f instanceof b)c=f.value;else{var g=this.stackSlot?this.topStackName():this.incrStack();d="("+this.push(g)+" = "+f+"),",c=this.topStack()}}else c=this.topStack();var h=a.call(this,c);return e?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+d+h+")")):(/^stack/.test(c)||(c=this.nextStack()),this.pushSource(c+" = ("+d+h+");")),c},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var c=0,d=a.length;c<d;c++){var e=a[c];e instanceof b?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var c=this.isInline(),d=(c?this.inlineStack:this.compileStack).pop();return!a&&d instanceof b?d.value:(c||this.stackSlot--,d)},topStack:function(a){var c=this.isInline()?this.inlineStack:this.compileStack,d=c[c.length-1];return!a&&d instanceof b?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];this.setupParams(a,d,c);var e=this.nameLookup("helpers",b,"helper");return{params:d,name:e,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupParams:function(a,b,c){var d,e,f,g=[],h=[],i=[];g.push("hash:"+this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(this.context.aliases.self="this",f="self.noop"),e||(this.context.aliases.self="this",e="self.noop"),g.push("inverse:"+e),g.push("fn:"+f));for(var j=0;j<a;j++)d=this.popStack(),b.push(d),this.options.stringParams&&(i.push(this.popStack()),h.push(this.popStack()));return this.options.stringParams&&(g.push("contexts:["+h.join(",")+"]"),g.push("types:["+i.join(",")+"]"),g.push("hashContexts:hashContexts"),g.push("hashTypes:hashTypes")),this.options.data&&g.push("data:data"),g="{"+g.join(",")+"}",c?(this.register("options",g),b.push("options")):b.push(g),b.join(", ")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),i=c.RESERVED_WORDS={},j=0,k=h.length;j<k;j++)i[h[j]]=!0;return c.isValidJavaScriptVariableName=function(a){return!(c.RESERVED_WORDS[a]||!/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a))},d=c}(d),k=function(a,b,c,d){"use strict";function e(){}function f(a,b){if(null==a||"string"!=typeof a&&a.constructor!==l.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var c=j(a),d=(new e).compile(c,b);return(new k).compile(d,b)}function g(a,b,c){function d(){var d=j(a),f=(new e).compile(d,b),g=(new k).compile(f,b,void 0,!0);return c.template(g)}if(null==a||"string"!=typeof a&&a.constructor!==l.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var f;return function(a,b){return f||(f=d()),f.call(this,a,b)}}var h={},i=a,j=b.parse,k=c,l=d;return h.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;f<g;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;c<d;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;e<f;e++)b=c.depths.list[e],b<2||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;e<f;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a),a.escaped&&!b.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleMustache:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;c<d;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new i("Scoped data references are not supported: "+a.original);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;c<d;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw new Error("EWOT");0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this[b.type](b)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("emptyHash"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},h.precompile=f,h.compile=g,h}(c,i,j,g),l=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=m,a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,k,j);return l}();!function(a,b){function c(a){var b=a.length,c=ka.type(a);return!ka.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)))}function d(a){var b=za[a]={};return ka.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ka.acceptData(a)){var f,g,h=ka.expando,i=a.nodeType,j=i?ka.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ba.pop()||ka.guid++:h),j[k]||(j[k]=i?{}:{toJSON:ka.noop}),"object"!=typeof c&&"function"!=typeof c||(e?j[k]=ka.extend(j[k],c):j[k].data=ka.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[ka.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[ka.camelCase(c)])):f=g,f}}function f(a,b,c){if(ka.acceptData(a)){var d,e,f=a.nodeType,g=f?ka.cache:a,i=f?a[ka.expando]:ka.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){ka.isArray(b)?b=b.concat(ka.map(b,ka.camelCase)):b in d?b=[b]:(b=ka.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!ka.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?ka.cleanData([a],!0):ka.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ba,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:Aa.test(d)?ka.parseJSON(d):d)}catch(f){}ka.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ka.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(ka.isFunction(b))return ka.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ka.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qa.test(b))return ka.filter(b,a,c);b=ka.filter(b,a)}return ka.grep(a,function(a){return ka.inArray(a,b)>=0!==c})}function n(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return ka.nodeName(a,"table")&&ka.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==ka.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)ka._data(c,"globalEval",!b||ka._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&ka.hasData(a)){var c,d,e,f=ka._data(a),g=ka._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)ka.event.add(b,c,h[c][d])}g.data&&(g.data=ka.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ka.support.noCloneEvent&&b[ka.expando]){e=ka._data(b);for(d in e.events)ka.removeEvent(b,d,e.handle);b.removeAttribute(ka.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ka.support.html5Clone&&a.innerHTML&&!ka.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ka.nodeName(e,c)?g.push(e):ka.merge(g,u(e,c));return c===b||c&&ka.nodeName(a,c)?ka.merge([a],g):g}function v(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===ka.css(a,"display")||!ka.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ka._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=ka._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&ka._data(d,"olddisplay",e?c:ka.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ka.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ka.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ka.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ka.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ka.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=lb(a,b,f),(e<0||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ka.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=ub[a];return c||(c=D(a,b),"none"!==c&&c||(jb=(jb||ka("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jb.detach()),ub[a]=c),c}function D(a,b){var c=ka(b.createElement(a)).appendTo(b.body),d=ka.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(ka.isArray(b))ka.each(b,function(b,e){c||Ab.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ka.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d)}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(ka.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,b,c,d){function e(h){var i;return f[h]=!0,ka.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function H(a,c){var d,e,f=ka.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ka.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}if(g)return g!==j[0]&&j.unshift(g),d[g]}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$b=b}),$b=ka.now()}function N(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dc.length,h=ka.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ka.extend({},b),opts:ka.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ka.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);f<g;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return ka.map(k,N,j),ka.isFunction(j.opts.start)&&j.opts.start.call(a,j),ka.fx.timer(ka.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=ka.camelCase(c),e=b[d],f=a[c],ka.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ka.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=ka._data(a,"fxshow");c.queue||(h=ka._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,ka.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===ka.css(a,"display")&&"none"===ka.css(a,"float")&&(ka.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",ka.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||ka.style(a,d)}if(!ka.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=ka._data(a,"fxshow",{}),f&&(n.hidden=!m),m?ka(a).show():j.done(function(){ka(a).hide()}),j.done(function(){var b;ka._removeData(a,"fxshow");for(b in k)ka.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return ka.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,aa={},ba=[],ca="1.10.2",da=ba.concat,ea=ba.push,fa=ba.slice,ga=ba.indexOf,ha=aa.toString,ia=aa.hasOwnProperty,ja=ca.trim,ka=function(a,b){return new ka.fn.init(a,b,V)},la=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qa=/^[\],:{}\s]*$/,ra=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ua=/^-ms-/,va=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()},xa=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(ya(),ka.ready())},ya=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xa,!1),a.removeEventListener("load",xa,!1)):(Y.detachEvent("onreadystatechange",xa),a.detachEvent("onload",xa))};ka.fn=ka.prototype={jquery:ca,constructor:ka,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ka?c[0]:c,ka.merge(this,ka.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pa.test(e[1])&&ka.isPlainObject(c))for(e in c)ka.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ka.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ka.makeArray(a,this))},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a){var b=ka.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ka.each(this,a,b)},ready:function(a){return ka.ready.promise().done(a),this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},map:function(a){return this.pushStack(ka.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ea,sort:[].sort,splice:[].splice},ka.fn.init.prototype=ka.fn,ka.extend=ka.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ka.isFunction(h)||(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ka.isPlainObject(d)||(c=ka.isArray(d)))?(c?(c=!1,g=a&&ka.isArray(a)?a:[]):g=a&&ka.isPlainObject(a)?a:{},h[e]=ka.extend(k,g,d)):d!==b&&(h[e]=d));return h},ka.extend({expando:"jQuery"+(ca+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===ka&&(a.$=_),b&&a.jQuery===ka&&(a.jQuery=$),ka},isReady:!1,readyWait:1,holdReady:function(a){a?ka.readyWait++:ka.ready(!0)},ready:function(a){if(a===!0?!--ka.readyWait:!ka.isReady){if(!Y.body)return setTimeout(ka.ready);ka.isReady=!0,a!==!0&&--ka.readyWait>0||(U.resolveWith(Y,[ka]),ka.fn.trigger&&ka(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ka.type(a)},isArray:Array.isArray||function(a){return"array"===ka.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?aa[ha.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==ka.type(a)||a.nodeType||ka.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(ka.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ka.buildFragment([a],b,e),e&&ka(e).remove(),ka.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ka.trim(b),b&&qa.test(b.replace(sa,"@").replace(ta,"]").replace(ra,"")))?new Function("return "+b)():void ka.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ka.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ka.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(va,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ja&&!ja.call("\ufeff ")?function(a){return null==a?"":ja.call(a)}:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ka.merge(d,"string"==typeof a?[a]:a):ea.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ga)return ga.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return da.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ka.isFunction(a)?(d=fa.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fa.call(arguments)));
},e.guid=a.guid=a.guid||ka.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ka.type(d)){f=!0;for(i in d)ka.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ka.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ka(a),c)})),c))for(;i<j;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),ka.ready.promise=function(b){if(!U)if(U=ka.Deferred(),"complete"===Y.readyState)setTimeout(ka.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xa,!1),a.addEventListener("load",xa,!1);else{Y.attachEvent("onreadystatechange",xa),a.attachEvent("onload",xa);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ka.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ya(),ka.ready()}}()}return U.promise(b)},ka.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()}),V=ka(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=ta.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return aa.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return aa.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(ja,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){d&&!(e=la.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ja," ")}),h=h.slice(d.length));for(g in z.filter)!(e=ra[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ca.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):aa.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ca.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];h<e;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ja,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}aa.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ra.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xa,ya),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return aa.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,na.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,aa=Z.push,ba=Z.slice,ca=Z.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ea="[\\x20\\t\\r\\n\\f]",fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ga=fa.replace("w","w#"),ha="\\["+ea+"*("+fa+")"+ea+"*(?:([*^$|!~]?=)"+ea+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ga+")|)|)"+ea+"*\\]",ia=":("+fa+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",ja=new RegExp("^"+ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ea+"+$","g"),la=new RegExp("^"+ea+"*,"+ea+"*"),ma=new RegExp("^"+ea+"*([>+~]|"+ea+")"+ea+"*"),na=new RegExp(ea+"*[+~]"),oa=new RegExp("="+ea+"*([^\\]'\"]*)"+ea+"*\\]","g"),pa=new RegExp(ia),qa=new RegExp("^"+ga+"$"),ra={ID:new RegExp("^#("+fa+")"),CLASS:new RegExp("^\\.("+fa+")"),TAG:new RegExp("^("+fa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ea+"*(even|odd|(([+-]|)(\\d*)n|)"+ea+"*(?:([+-]|)"+ea+"*(\\d+)|))"+ea+"*\\)|)","i"),bool:new RegExp("^(?:"+da+")$","i"),needsContext:new RegExp("^"+ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ea+"*((?:-\\d)?\\d*)"+ea+"*\\)|)(?=[^-]|$)","i")},sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+ea+"?|("+ea+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{aa.apply(Z=ba.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(za){aa={apply:Z.length?function(a,b){_.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},x=c.support={},F=c.setDocument=function(a){var b=a?a.ownerDocument||a:O,c=b.defaultView;return b!==G&&9===b.nodeType&&b.documentElement?(G=b,H=b.documentElement,I=!B(b),c&&c.attachEvent&&c!==c.top&&c.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!b.getElementsByName||!b.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==W)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==W&&I)return b.getElementsByClassName(a)},K=[],J=[],(x.qsa=sa.test(b.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+ea+"*(?:value|"+da+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+ea+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sa.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ia)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),M=sa.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,c){if(a===c)return U=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!x.sortDetached&&c.compareDocumentPosition(a)===d?a===b||M(O,a)?-1:c===b||M(O,c)?1:E?ca.call(E,a)-ca.call(E,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,i=[a],j=[c];if(a===c)return U=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:E?ca.call(E,a)-ca.call(E,c):0;if(f===g)return h(a,c);for(d=a;d=d.parentNode;)i.unshift(d);for(d=c;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},b):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(oa,"='$1']"),x.matchesSelector&&I&&(!K||!K.test(b))&&(!J||!J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ra.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pa.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ea+")"+a+"("+ea+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:!b||(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ca.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ja,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qa.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(da,function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&d.specified?d.value:a[b]===!0?b.toLowerCase():null}),ka.find=c,ka.expr=c.selectors,ka.expr[":"]=ka.expr.pseudos,ka.unique=c.uniqueSort,ka.text=c.getText,ka.isXMLDoc=c.isXML,ka.contains=c.contains}(a);var za={};ka.Callbacks=function(a){a="string"==typeof a?za[a]||d(a):ka.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&h<g;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ka.each(b,function(b,c){var e=ka.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ka.each(arguments,function(a,b){for(var d;(d=ka.inArray(b,j,d))>-1;)j.splice(d,1),c&&(d<=g&&g--,d<=h&&h--)}),this},has:function(a){return a?ka.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ka.extend({Deferred:function(a){var b=[["resolve","done",ka.Callbacks("once memory"),"resolved"],["reject","fail",ka.Callbacks("once memory"),"rejected"],["notify","progress",ka.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ka.Deferred(function(c){ka.each(b,function(b,f){var g=f[0],h=ka.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ka.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ka.extend(a,d):d}},e={};return d.pipe=d.then,ka.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fa.call(arguments),g=f.length,h=1!==g||a&&ka.isFunction(a.promise)?g:0,i=1===h?a:ka.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&ka.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ka.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in ka(b))break;return b.ownLast="0"!==k,ka(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ka.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Aa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ba=/([A-Z])/g;ka.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ka.cache[a[ka.expando]]:a[ka.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ka.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ka.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=ka.data(i),1===i.nodeType&&!ka._data(i,"parsedAttrs"))){for(d=i.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=ka.camelCase(e.slice(5)),g(i,e,f[e]));ka._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){ka.data(this,a)}):arguments.length>1?this.each(function(){ka.data(this,a,c)}):i?g(i,a,ka.data(i,a)):null},removeData:function(a){return this.each(function(){ka.removeData(this,a)})}}),ka.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ka._data(a,b),c&&(!d||ka.isArray(c)?d=ka._data(a,b,ka.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ka.queue(a,b),d=c.length,e=c.shift(),f=ka._queueHooks(a,b),g=function(){ka.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ka._data(a,c)||ka._data(a,c,{empty:ka.Callbacks("once memory").add(function(){ka._removeData(a,b+"queue"),ka._removeData(a,c)})})}}),ka.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ka.queue(this[0],a):c===b?this:this.each(function(){var b=ka.queue(this,a,c);ka._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ka.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ka.dequeue(this,a)})},delay:function(a,b){return a=ka.fx?ka.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ka.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ka._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ca,Da,Ea=/[\t\r\n\f]/g,Fa=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,Ha=/^(?:a|area)$/i,Ia=/^(?:checked|selected)$/i,Ja=ka.support.getSetAttribute,Ka=ka.support.input;ka.fn.extend({attr:function(a,b){return ka.access(this,ka.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ka.removeAttr(this,a)})},prop:function(a,b){return ka.access(this,ka.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ka.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ka.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ka.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ka.isFunction(a)?this.each(function(c){ka(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ka(this),f=a.match(ma)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==W&&"boolean"!==c||(this.className&&ka._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ka._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ea," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ka.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,ka(this).val()):a,null==f?f="":"number"==typeof f?f+="":ka.isArray(f)&&(f=ka.map(f,function(a){return null==a?"":a+""})),d=ka.valHooks[this.type]||ka.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ka.valHooks[f.type]||ka.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fa,""):null==c?"":c)}}}),ka.extend({valHooks:{option:{get:function(a){var b=ka.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(ka.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ka.nodeName(c.parentNode,"optgroup"))){if(b=ka(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ka.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ka.inArray(ka(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===W?ka.prop(a,c,d):(1===g&&ka.isXMLDoc(a)||(c=c.toLowerCase(),e=ka.attrHooks[c]||(ka.expr.match.bool.test(c)?Da:Ca)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=ka.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void ka.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=ka.propFix[c]||c,ka.expr.match.bool.test(c)?Ka&&Ja||!Ia.test(c)?a[d]=!1:a[ka.camelCase("default-"+c)]=a[d]=!1:ka.attr(a,c,""),a.removeAttribute(Ja?c:d)},attrHooks:{type:{set:function(a,b){if(!ka.support.radioValue&&"radio"===b&&ka.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"
},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ka.isXMLDoc(a),g&&(c=ka.propFix[c]||c,f=ka.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=ka.find.attr(a,"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||Ha.test(a.nodeName)&&a.href?0:-1}}}}),Da={set:function(a,b,c){return b===!1?ka.removeAttr(a,c):Ka&&Ja||!Ia.test(c)?a.setAttribute(!Ja&&ka.propFix[c]||c,c):a[ka.camelCase("default-"+c)]=a[c]=!0,c}},ka.each(ka.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ka.expr.attrHandle[c]||ka.find.attr;ka.expr.attrHandle[c]=Ka&&Ja||!Ia.test(c)?function(a,c,e){var f=ka.expr.attrHandle[c],g=e?b:(ka.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return ka.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[ka.camelCase("default-"+c)]?c.toLowerCase():null}}),Ka&&Ja||(ka.attrHooks.value={set:function(a,b,c){return ka.nodeName(a,"input")?void(a.defaultValue=b):Ca&&Ca.set(a,b,c)}}),Ja||(Ca={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ka.expr.attrHandle.id=ka.expr.attrHandle.name=ka.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},ka.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Ca.set},ka.attrHooks.contenteditable={set:function(a,b,c){Ca.set(a,""!==b&&b,c)}},ka.each(["width","height"],function(a,b){ka.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),ka.support.hrefNormalized||ka.each(["href","src"],function(a,b){ka.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ka.support.style||(ka.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ka.support.optSelected||(ka.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ka.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ka.propFix[this.toLowerCase()]=this}),ka.support.enctype||(ka.propFix.enctype="encoding"),ka.each(["radio","checkbox"],function(){ka.valHooks[this]={set:function(a,b){if(ka.isArray(b))return a.checked=ka.inArray(ka(a).val(),b)>=0}},ka.support.checkOn||(ka.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var La=/^(?:input|select|textarea)$/i,Ma=/^key/,Na=/^(?:mouse|contextmenu)|click/,Oa=/^(?:focusinfocus|focusoutblur)$/,Pa=/^([^.]*)(?:\.(.+)|)$/;ka.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ka._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ka.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ka===W||a&&ka.event.triggered===a.type?b:ka.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ma)||[""],i=c.length;i--;)g=Pa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=ka.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ka.event.special[o]||{},m=ka.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ka.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ka.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ka.hasData(a)&&ka._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Pa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ka.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ka.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ka.event.remove(a,n+b[j],c,d,!0);ka.isEmptyObject(k)&&(delete q.handle,ka._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ia.call(c,"type")?c.type:c,p=ia.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Oa.test(o+ka.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ka.expando]?c:new ka.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ka.makeArray(d,[c]),k=ka.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ka.isWindow(e)){for(j=k.delegateType||o,Oa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ka._data(i,"events")||{})[c.type]&&ka._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ka.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&ka.acceptData(e)&&h&&e[o]&&!ka.isWindow(e)){l=e[h],l&&(e[h]=null),ka.event.triggered=o;try{e[o]()}catch(q){}ka.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ka.event.fix(a);var c,d,e,f,g,h=[],i=fa.call(arguments),j=(ka._data(this,"events")||{})[a.type]||[],k=ka.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ka.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(e.namespace)||(a.handleObj=e,a.data=e.data,d=((ka.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;g<i;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ka(d,this).index(j)>=0:ka.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ka.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ka.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ka.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return ka.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ka.extend(new ka.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ka.event.trigger(e,null,b):ka.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ka.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},ka.Event=function(a,b){return this instanceof ka.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ka.extend(this,b),this.timeStamp=a&&a.timeStamp||ka.now(),void(this[ka.expando]=!0)):new ka.Event(a,b)},ka.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ka.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ka.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ka.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ka.support.submitBubbles||(ka.event.special.submit={setup:function(){return!ka.nodeName(this,"form")&&void ka.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ka.nodeName(c,"input")||ka.nodeName(c,"button")?c.form:b;d&&!ka._data(d,"submitBubbles")&&(ka.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ka._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ka.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!ka.nodeName(this,"form")&&void ka.event.remove(this,"._submit")}}),ka.support.changeBubbles||(ka.event.special.change={setup:function(){return La.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ka.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ka.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ka.event.simulate("change",this,a,!0)})),!1):void ka.event.add(this,"beforeactivate._change",function(a){var b=a.target;La.test(b.nodeName)&&!ka._data(b,"changeBubbles")&&(ka.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ka.event.simulate("change",this.parentNode,a,!0)}),ka._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return ka.event.remove(this,"._change"),!La.test(this.nodeName)}}),ka.support.focusinBubbles||ka.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ka.event.simulate(b,a.target,ka.event.fix(a),!0)};ka.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),ka.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ka().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ka.guid++)),this.each(function(){ka.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ka(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=j),this.each(function(){ka.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){ka.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ka.event.trigger(a,b,c,!0)}});var Qa=/^.[^:#\[\.,]*$/,Ra=/^(?:parents|prev(?:Until|All))/,Sa=ka.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ka.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ka(a).filter(function(){for(b=0;b<e;b++)if(ka.contains(d[b],this))return!0}));for(b=0;b<e;b++)ka.find(a,d[b],c);return c=this.pushStack(e>1?ka.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=ka(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(ka.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sa.test(a)?ka(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ka(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ka.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?ka.unique(f):f)},index:function(a){return a?"string"==typeof a?ka.inArray(this[0],ka(a)):ka.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ka(a,b):ka.makeArray(a&&a.nodeType?[a]:a),d=ka.merge(this.get(),c);return this.pushStack(ka.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ka.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ka.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ka.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return ka.dir(a,"nextSibling")},prevAll:function(a){return ka.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ka.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ka.dir(a,"previousSibling",c)},siblings:function(a){return ka.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ka.sibling(a.firstChild)},contents:function(a){return ka.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ka.merge([],a.childNodes)}},function(a,b){ka.fn[a]=function(c,d){var e=ka.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ka.filter(d,e)),this.length>1&&(Ta[a]||(e=ka.unique(e)),Ra.test(a)&&(e=e.reverse())),this.pushStack(e)}}),ka.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ka.find.matchesSelector(d,a)?[d]:[]:ka.find.matches(a,ka.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ka(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ka.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=n(Y),ib=hb.appendChild(Y.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ka.fn.extend({text:function(a){return ka.access(this,function(a){return a===b?ka.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ka.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ka.cleanData(u(c)),c.parentNode&&(b&&ka.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ka.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ka.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ka.clone(this,a,b)})},html:function(a){return ka.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if("string"==typeof a&&!ab.test(a)&&(ka.support.htmlSerialize||!Wa.test(a))&&(ka.support.leadingWhitespace||!Xa.test(a))&&!gb[(Za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ya,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(ka.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=ka.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),ka(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=da.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=ka.isFunction(n);if(o||!(k<=1||"string"!=typeof n||ka.support.checkClone)&&cb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=ka.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=ka.map(u(i,"script"),p),f=g.length;j<k;j++)e=i,j!==m&&(e=ka.clone(e,!0,!0),f&&ka.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,ka.map(g,q),j=0;j<f;j++)e=g[j],db.test(e.type||"")&&!ka._data(e,"globalEval")&&ka.contains(h,e)&&(e.src?ka._evalUrl(e.src):ka.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fb,"")));i=d=null}return this}}),ka.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ka.fn[a]=function(a){for(var c,d=0,e=[],f=ka(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),ka(f[d])[b](c),ea.apply(e,c.get());return this.pushStack(e)}}),ka.extend({clone:function(a,b,c){var d,e,f,g,h,i=ka.contains(a.ownerDocument,a);if(ka.support.html5Clone||ka.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ka.support.noCloneEvent&&ka.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ka.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;p<l;p++)if(f=a[p],f||0===f)if("object"===ka.type(f))ka.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ka.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ka.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ka.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ka.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),ka.support.appendChecked||ka.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||ka.inArray(f,d)===-1)&&(g=ka.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ka.expando,i=ka.cache,j=ka.support.deleteExpando,k=ka.event.special;null!=(c=a[g]);g++)if((b||ka.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ka.event.remove(c,d):ka.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,ba.push(e))}},_evalUrl:function(a){return ka.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ka.fn.extend({wrapAll:function(a){if(ka.isFunction(a))return this.each(function(b){ka(this).wrapAll(a.call(this,b))});if(this[0]){var b=ka(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ka.isFunction(a)?this.each(function(b){ka(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ka(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ka.isFunction(a);return this.each(function(c){ka(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ka.nodeName(this,"body")||ka(this).replaceWith(this.childNodes)}).end()}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+la+")(.*)$","i"),sb=new RegExp("^("+la+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+la+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ka.fn.extend({css:function(a,c){return ka.access(this,function(a,c,d){var e,f,g={},h=0;if(ka.isArray(c)){for(f=kb(a),e=c.length;h<e;h++)g[c[h]]=ka.css(a,c[h],!1,f);return g}return d!==b?ka.style(a,c,d):ka.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){x(this)?ka(this).show():ka(this).hide()})}}),ka.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ka.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ka.camelCase(c),j=a.style;if(c=ka.cssProps[i]||(ka.cssProps[i]=w(j,i)),h=ka.cssHooks[c]||ka.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ka.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ka.cssNumber[i]||(d+="px"),ka.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ka.camelCase(c);return c=ka.cssProps[i]||(ka.cssProps[i]=w(a.style,i)),h=ka.cssHooks[c]||ka.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ka.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ka.contains(a.ownerDocument,a)||(i=ka.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ka.each(["height","width"],function(a,b){ka.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&pb.test(ka.css(a,"display"))?ka.swap(a,vb,function(){return B(a,b,d)}):B(a,b,d)},set:function(a,c,d){var e=d&&kb(a);return z(a,c,d?A(a,b,d,ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,e),e):0)}}}),ka.support.opacity||(ka.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ka.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ka.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ka(function(){ka.support.reliableMarginRight||(ka.cssHooks.marginRight={get:function(a,b){if(b)return ka.swap(a,{display:"inline-block"},lb,[a,"marginRight"])}}),!ka.support.pixelPosition&&ka.fn.position&&ka.each(["top","left"],function(a,b){ka.cssHooks[b]={get:function(a,c){if(c)return c=lb(a,b),sb.test(c)?ka(a).position()[b]+"px":c}}})}),ka.expr&&ka.expr.filters&&(ka.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ka.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka.css(a,"display"))},ka.expr.filters.visible=function(a){return!ka.expr.filters.hidden(a)}),ka.each({margin:"",padding:"",border:"Width"},function(a,b){ka.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ka.cssHooks[a+b].set=z)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ka.fn.extend({serialize:function(){return ka.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ka.prop(this,"elements");return a?ka.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ka(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ka(this).val();return null==c?null:ka.isArray(c)?ka.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ka.param=function(a,c){var d,e=[],f=function(a,b){b=ka.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ka.ajaxSettings&&ka.ajaxSettings.traditional),ka.isArray(a)||a.jquery&&!ka.isPlainObject(a))ka.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zb,"+")},ka.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ka.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ka.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb,Fb,Gb=ka.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ka.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=Y.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ka.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ka.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ka.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ka("<div>").append(ka.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ka.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ka.fn[b]=function(a){return this.on(b,a)}}),ka.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ka.parseJSON,"text xml":ka.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,ka.ajaxSettings),b):H(ka.ajaxSettings,a)},ajaxPrefilter:F(Qb),ajaxTransport:F(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&a<300||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ka.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ka.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,!a&&x||(x="error",a<0&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ka.active||ka.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ka.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ka(n):ka.event,p=ka.Deferred(),q=ka.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()];
}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ka.trim(m.dataType||"*").toLowerCase().match(ma)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Eb[3]||("http:"===Eb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ka.param(m.data,m.traditional)),G(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ka.active++&&ka.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ka.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ka.lastModified[g]),ka.etag[g]&&w.setRequestHeader("If-None-Match",ka.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(u<2))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return ka.get(a,b,c,"json")},getScript:function(a,c){return ka.get(a,b,c,"script")}}),ka.each(["get","post"],function(a,c){ka[c]=function(a,d,e,f){return ka.isFunction(d)&&(f=f||e,e=d,d=b),ka.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ka.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ka.globalEval(a),a}}}),ka.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ka.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||ka("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ka.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ka.expando+"_"+Gb++;return this[a]=!0,a}}),ka.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");if(i||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=ka.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ka.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ka.isFunction(g)&&g(h[0]),h=g=b}),"script"});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ka.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xb=ka.ajaxSettings.xhr(),ka.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ka.support.ajax=!!Xb,Xb&&ka.ajaxTransport(function(c){if(!c.crossDomain||ka.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ka.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ka(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+la+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[Q],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(ka.cssNumber[a]?"":"px"),g=(ka.cssNumber[a]||"px"!==f&&+d)&&bc.exec(ka.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ka.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ka.Animation=ka.extend(O,{tweener:function(a,b){ka.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ka.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ka.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.options.duration?this.pos=b=ka.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ka.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ka.fx.step[a.prop]?ka.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ka.cssProps[a.prop]]||ka.cssHooks[a.prop])?ka.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ka.each(["toggle","show","hide"],function(a,b){var c=ka.fn[b];ka.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),ka.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ka.isEmptyObject(a),f=ka.speed(b,c,d),g=function(){var b=O(this,ka.extend({},a),f);(e||ka._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ka.timers,g=ka._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||ka.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ka._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ka.timers,g=d?d.length:0;for(c.finish=!0,ka.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ka.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ka.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ka.speed=function(a,b,c){var d=a&&"object"==typeof a?ka.extend({},a):{complete:c||!c&&b||ka.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ka.isFunction(b)&&b};return d.duration=ka.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ka.fx.speeds?ka.fx.speeds[d.duration]:ka.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ka.isFunction(d.old)&&d.old.call(this),d.queue&&ka.dequeue(this,d.queue)},d},ka.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ka.timers=[],ka.fx=R.prototype.init,ka.fx.tick=function(){var a,c=ka.timers,d=0;for($b=ka.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ka.fx.stop(),$b=b},ka.fx.timer=function(a){a()&&ka.timers.push(a)&&ka.fx.start()},ka.fx.interval=13,ka.fx.start=function(){_b||(_b=setInterval(ka.fx.tick,ka.fx.interval))},ka.fx.stop=function(){clearInterval(_b),_b=null},ka.fx.speeds={slow:600,fast:200,_default:400},ka.fx.step={},ka.expr&&ka.expr.filters&&(ka.expr.filters.animated=function(a){return ka.grep(ka.timers,function(b){return a===b.elem}).length}),ka.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ka.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ka.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ka.offset={setOffset:function(a,b,c){var d=ka.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ka(a),h=g.offset(),i=ka.css(a,"top"),j=ka.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ka.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ka.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ka.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ka.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ka.nodeName(a[0],"html")||(c=a.offset()),c.top+=ka.css(a[0],"borderTopWidth",!0),c.left+=ka.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ka.css(d,"marginTop",!0),left:b.left-c.left-ka.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!ka.nodeName(a,"html")&&"static"===ka.css(a,"position");)a=a.offsetParent;return a||Z})}}),ka.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ka.fn[a]=function(e){return ka.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ka(g).scrollLeft():f,d?f:ka(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ka.each({Height:"height",Width:"width"},function(a,c){ka.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ka.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ka.access(this,function(c,d,e){var f;return ka.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ka.css(c,d,h):ka.style(c,d,e,h)},c,g?e:b,g,null)}})}),ka.fn.size=function(){return this.length},ka.fn.andSelf=ka.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ka:(a.jQuery=a.$=ka,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ka}))}(window),!function(a,b){"use strict";var c,d;if(a.uaMatch=function(a){a=a.toLowerCase();var b=/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c=/(ipad)/.exec(a)||/(iphone)/.exec(a)||/(android)/.exec(a)||/(windows phone)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||[];return{browser:b[3]||b[1]||"",version:b[2]||"0",platform:c[0]||""}},c=a.uaMatch(b.navigator.userAgent),d={},c.browser&&(d[c.browser]=!0,d.version=c.version,d.versionNumber=parseInt(c.version)),c.platform&&(d[c.platform]=!0),(d.chrome||d.opr||d.safari)&&(d.webkit=!0),d.rv){var e="msie";c.browser=e,d[e]=!0}if(d.opr){var f="opera";c.browser=f,d[f]=!0}if(d.safari&&d.android){var g="android";c.browser=g,d[g]=!0}d.name=c.browser,d.platform=c.platform,a.browser=d}(jQuery,window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;e<f;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};x.contains=x.include=function(a,b){return null!=a&&(s&&a.indexOf===s?a.indexOf(b)!=-1:A(a,function(a){return a===b}))},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;f<g;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;c<a;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);e<d;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;j<b?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;e<a;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null!=a){var c=a[b];return x.isFunction(c)?c.call(a):c}},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;i<k;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;
for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return!!b.set(b.parse(c,a),a)&&(d&&d(b,c,a),void b.trigger("sync",b,c,a))},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),!(c.isObject(b)&&!i.set(b,d))&&(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;e<f;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!(o||!u||!w)&&[];for(e=0,f=a.length;e<f;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;e<f;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;e<f;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;e<f;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;e<f;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b!==this.fragment&&(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,b={timestamp:"L4KA",version:"4.16.1 (Standard)",revision:"cae20318d4",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var e=c[d].src.match(a);if(e){b=e[1];break}}if(-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b),!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),window.removeEventListener("load",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),window.detachEvent("onload",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(d,1)}a()}if(c.push(b),"complete"===document.readyState&&setTimeout(a,1),1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),b=!1;try{b=!window.frameElement}catch(e){}document.documentElement.doScroll&&b&&d()}}}()},c=window.CKEDITOR_GETURL;if(c){var d=b.getUrl;b.getUrl=function(a){return c.call(b,a)||d.call(b,a)}}return b}()),function(){var a={};CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var b,c=CKEDITOR.event.prototype;for(b in c)null==a[b]&&(a[b]=c[b])},CKEDITOR.event.prototype=function(){function b(a){var b=c(this);return b[a]||(b[a]=new d(a))}var c=function(a){return a=a.getPrivate&&a.getPrivate()||a._||(a._={}),a.events||(a.events={})},d=function(a){this.name=a,this.listeners=[]};return d.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{define:function(a,c){var d=b.call(this,a);CKEDITOR.tools.extend(d,c,!0)},on:function(c,d,e,f,g){function h(b,g,h,j){return b={name:c,sender:this,editor:b,data:g,listenerData:f,stop:h,cancel:j,removeListener:i},!1===d.call(e,b)?a:b.data}function i(){j.removeListener(c,d)}var j=this,k=b.call(this,c);if(0>k.getListenerIndex(d)){k=k.listeners,e||(e=this),isNaN(g)&&(g=10),h.fn=d,h.priority=g;for(var l=k.length-1;0<=l;l--)if(k[l].priority<=g)return k.splice(l+1,0,h),{removeListener:i};k.unshift(h)}return{removeListener:i}},once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];return a[1]=function(a){return a.removeListener(),b.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var b=0,d=function(){b=1},e=0,f=function(){e=1};return function(g,h,i){var j=c(this)[g];g=b;var k=e;if(b=e=0,j){var l=j.listeners;if(l.length)for(var m,l=l.slice(0),n=0;n<l.length;n++){if(j.errorProof)try{m=l[n].call(this,i,h,d,f)}catch(o){}else m=l[n].call(this,i,h,d,f);if(m===a?e=1:"undefined"!=typeof m&&(h=m),b||e)break}}return h=!e&&("undefined"==typeof h||h),b=g,e=k,h}}(),fireOnce:function(a,b,d){return b=this.fire(a,b,d),delete c(this)[a],b},removeListener:function(a,b){var d=c(this)[a];if(d){var e=d.getListenerIndex(b);0<=e&&d.listeners.splice(e,1)}},removeAllListeners:function(){var a,b=c(this);for(a in b)delete b[a]},hasListeners:function(a){return(a=c(this)[a])&&0<a.listeners.length}}}())}(),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,b){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,b,this)},CKEDITOR.editor.prototype.fireOnce=function(a,b){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,b,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/edge[ \/](\d+.?\d*)/),c=-1<a.indexOf("trident/"),c=!(!b&&!c),c={ie:c,edge:!!b,webkit:!c&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.ie,c.webkit&&(-1<a.indexOf("chrome")?c.chrome=!0:c.safari=!0);var d=0;return c.ie&&(d=b?parseFloat(b[1]):c.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,c.ie9Compat=9==d,c.ie8Compat=8==d,c.ie7Compat=7==d,c.ie6Compat=7>d||c.quirks),c.gecko&&(b=a.match(/rv:([\d\.]+)/))&&(b=b[1].split("."),d=1e4*b[0]+100*(b[1]||0)+1*(b[2]||0)),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!(c.ie&&7>d||c.gecko&&4e4>d||c.webkit&&534>d),c.hidpi=2<=window.devicePixelRatio,c.needsBrFiller=c.gecko||c.webkit||c.ie&&10<d,c.needsNbspFiller=c.ie&&11>d,c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" cke_browser_quirks"),c.ie&&(c.cssClass+=" cke_browser_ie"+(c.quirks?"6 cke_browser_iequirks":c.version)),c.air&&(c.cssClass+=" cke_browser_air"),c.iOS&&(c.cssClass+=" cke_browser_ios"),c.hidpi&&(c.cssClass+=" cke_hidpi"),c}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,b=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():b&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*b))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(a,b){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:b})},CKEDITOR.error=function(a,b){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:b})},CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var b=console[a.data.type]?a.data.type:"log",c=a.data.errorCode;(a=a.data.additionalData)?console[b]("[CKEDITOR] Error code: "+c+".",a):console[b]("[CKEDITOR] Error code: "+c+"."),console[b]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+c)}},null,null,999),CKEDITOR.dom={},function(){function a(a,b,c){this._minInterval=a,this._context=c,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(b,c||{});var d=this;this.input=function(){function a(){d._lastOutput=(new Date).getTime(),d._scheduledTimer=0,d._call()}if(!d._scheduledTimer||!1!==d._reschedule()){var b=(new Date).getTime()-d._lastOutput;b<d._minInterval?d._scheduledTimer=setTimeout(a,d._minInterval-b):a()}}}function b(b,c,d){a.call(this,b,c,d),this._args=[];var e=this;this.input=CKEDITOR.tools.override(this.input,function(a){return function(){e._args=Array.prototype.slice.call(arguments),a.call(this)}})}var c=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",e=/&/g,f=/>/g,g=/</g,h=/"/g,i=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,j={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},k=function(a,b){return"#"==b[0]?String.fromCharCode(parseInt(b.slice(1),10)):j[b]};CKEDITOR.on("reset",function(){c=[]}),CKEDITOR.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},getIndex:function(a,b){for(var c=0;c<a.length;++c)if(b(a[c]))return c;return-1},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=CKEDITOR.tools.clone(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;b=new a.constructor;for(c in a)b[c]=CKEDITOR.tools.clone(a[c]);return b},capitalize:function(a,b){return a.charAt(0).toUpperCase()+(b?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var b,c,d=arguments.length;"boolean"==typeof(b=arguments[d-1])?d--:"boolean"==typeof(b=arguments[d-2])&&(c=arguments[d-1],d-=2);for(var e=1;e<d;e++){var f=arguments[e]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(f),function(d){!0!==b&&null!=a[d]||(!c||d in c)&&(a[d]=f[d])})}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},copy:function(a){var b,c={};for(b in a)c[b]=a[b];return c},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssVendorPrefix:function(a,b,c){return c?d+a+":"+b+";"+a+":"+b:(c={},c[a]=b,c[d+a]=b,c)},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var b,c=[],d=0;d<a.length;d++)(b=a[d])&&(/@import|[{}]/.test(b)?c.push("<style>"+b+"</style>"):c.push('<link type="text/css" rel=stylesheet href="'+b+'">'));return c.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(e,"&amp;").replace(f,"&gt;").replace(g,"&lt;")},htmlDecode:function(a){return a.replace(i,k)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(h,"&quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},transformPlainTextToHtml:function(a,b){var c=b==CKEDITOR.ENTER_BR,d=this.htmlEncode(a.replace(/\r\n/g,"\n")),d=d.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),e=b==CKEDITOR.ENTER_P?"p":"div";if(!c){var f=/\n{2}/g;if(f.test(d))var g="<"+e+">",h="</"+e+">",d=g+d.replace(f,function(){return h+g})+h}return d=d.replace(/\n/g,"<br>"),c||(d=d.replace(new RegExp("<br>(?=</"+e+">)"),function(a){return CKEDITOR.tools.repeat(a,2)})),d=d.replace(/^ | $/g,"&nbsp;"),d=d.replace(/(>|\s) /g,function(a,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",b=0;8>b;b++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,b){var c=b(a);return c.prototype=a.prototype,c},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},throttle:function(a,b,c){return new this.buffers.throttle(a,b,c)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:function(a,b){if("function"==typeof b){for(var c=0,d=a.length;c<d;c++)if(b(a[c]))return c}else{if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c}return-1},search:function(a,b){var c=CKEDITOR.tools.indexOf(a,b);return 0<=c?a[c]:null},bind:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,c.concat(Array.prototype.slice.call(arguments)))}},createClass:function(a){var b=a.$,c=a.base,d=a.privates||a._,e=a.proto;if(a=a.statics,!b&&(b=function(){c&&this.base.apply(this,arguments)}),d)var f=b,b=function(){var a,b=this._||(this._={});for(a in d){var c=d[a];b[a]="function"==typeof c?CKEDITOR.tools.bind(c,this):c}f.apply(this,arguments)};return c&&(b.prototype=this.prototypedCopy(c.prototype),b.prototype.constructor=b,b.base=c,b.baseProto=c.prototype,b.prototype.base=function g(){this.base=c.prototype.base,c.apply(this,arguments),this.base=g}),e&&this.extend(b.prototype,e,!0),a&&this.extend(b,a,!0),b},addFunction:function(a,b){return c.push(function(){return a.apply(b||this,arguments)})-1},removeFunction:function(a){c[a]=null},callFunction:function(a){var b=c[a];return b&&b.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a,b=/^-?\d+\.?\d*px$/;return function(c){return a=CKEDITOR.tools.trim(c+"")+"px",b.test(a)?a:c||""}}(),convertToPx:function(){var a;return function(b){if(a||(a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(a)),!/%$/.test(b)){var c=0>parseFloat(b);return c&&(b=b.replace("-","")),a.setStyle("width",b),b=a.$.clientWidth,c?-b:b}return b}}(),repeat:function(a,b){return Array(b+1).join(a)},tryThese:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,c=this;window.setTimeout(function(){a.apply(c,b)},0)}},normalizeCssText:function(a,b){var c,d=[],e=CKEDITOR.tools.parseCssText(a,!0,b);for(c in e)d.push(c+":"+e[c]);return d.sort(),d.length?d.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,d){for(a=[b,c,d],b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);return"#"+a.join("")})},normalizeHex:function(a){return a.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(a,b,c,d){return a=b.toLowerCase(),3==a.length&&(a=a.split(""),a=[a[0],a[0],a[1],a[1],a[2],a[2]].join("")),"#"+a+d})},_isValidColorFormat:function(a){return!!a&&(a=a.replace(/\s+/g,""),/^[a-z0-9()#%,./]+$/i.test(a))},parseCssText:function(a,b,c){var d={};return c&&(a=new CKEDITOR.dom.element("span").setAttribute("style",a).getAttribute("style")||""),a&&(a=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(a))),a&&";"!=a?(a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,e){b&&(c=c.toLowerCase(),"font-family"==c&&(e=e.replace(/\s*,\s*/g,",")),e=CKEDITOR.tools.trim(e)),d[c]=e}),d):d},writeCssText:function(a,b){var c,d=[];for(c in a)d.push(c+":"+a[c]);return b&&d.sort(),d.join("; ")},objectCompare:function(a,b,c){var d;if(!a&&!b)return!0;if(!a||!b)return!1;for(d in a)if(a[d]!=b[d])return!1;if(!c)for(d in b)if(a[d]!=b[d])return!1;return!0},objectKeys:function(a){return CKEDITOR.tools.object.keys(a)},convertArrayToObject:function(a,b){var c={};1==arguments.length&&(b=!0);for(var d=0,e=a.length;d<e;++d)c[a[d]]=b;return c},getStyledSpans:function(a,b){var c=CKEDITOR.env.ie&&8==CKEDITOR.env.version?a.toUpperCase():a,c=b.find("span[style*="+c+"]").toArray();return CKEDITOR.tools.array.filter(c,function(b){return!!b.getStyle(a)})},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){if(a=a?a.replace(/.+?(?:\.|$)/,""):document.domain,!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b,c){return new this.buffers.event(a,b,c)},enableHtml5Elements:function(a,b){for(var c,d="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),e=d.length;e--;)c=a.createElement(d[e]),b&&a.appendChild(c)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},keystrokeToString:function(a,b){var c=this.keystrokeToArray(a,b);return c.display=c.display.join("+"),c.aria=c.aria.join("+"),c},keystrokeToArray:function(a,b){var c=16711680&b,d=65535&b,e=CKEDITOR.env.mac,f=[],g=[];return c&CKEDITOR.CTRL&&(f.push(e?"⌘":a[17]),g.push(e?a[224]:a[17])),c&CKEDITOR.ALT&&(f.push(e?"⌥":a[18]),g.push(a[18])),c&CKEDITOR.SHIFT&&(f.push(e?"⇧":a[16]),g.push(a[16])),d&&(a[d]?(f.push(a[d]),
g.push(a[d])):(f.push(String.fromCharCode(d)),g.push(String.fromCharCode(d)))),{display:f,aria:g}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(a){a=a.toLowerCase();for(var b,c,d=document.cookie.split(";"),e=0;e<d.length;e++)if(b=d[e].split("="),c=decodeURIComponent(CKEDITOR.tools.trim(b[0]).toLowerCase()),c===a)return decodeURIComponent(1<b.length?b[1]:"");return null},setCookie:function(a,b){document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path=/"},getCsrfToken:function(){var a=CKEDITOR.tools.getCookie("ckCsrfToken");if(!a||40!=a.length){var a=[],b="";if(window.crypto&&window.crypto.getRandomValues)a=new Uint8Array(40),window.crypto.getRandomValues(a);else for(var c=0;40>c;c++)a.push(Math.floor(256*Math.random()));for(c=0;c<a.length;c++)var d="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%36),b=b+(.5<Math.random()?d.toUpperCase():d);a=b,CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a},escapeCss:function(a){return a?window.CSS&&CSS.escape?CSS.escape(a):isNaN(parseInt(a.charAt(0),10))?a:"\\3"+a.charAt(0)+" "+a.substring(1,a.length):""},getMouseButton:function(a){return!!(a=a&&a.data?a.data.$:a)&&CKEDITOR.tools.normalizeMouseButton(a.button)},normalizeMouseButton:function(a,b){if(!CKEDITOR.env.ie||9<=CKEDITOR.env.version&&!CKEDITOR.env.ie6Compat)return a;for(var c=[[CKEDITOR.MOUSE_BUTTON_LEFT,1],[CKEDITOR.MOUSE_BUTTON_MIDDLE,4],[CKEDITOR.MOUSE_BUTTON_RIGHT,2]],d=0;d<c.length;d++){var e=c[d];if(e[0]===a&&b)return e[1];if(!b&&e[1]===a)return e[0]}},convertHexStringToBytes:function(a){var b,c=[],d=a.length/2;for(b=0;b<d;b++)c.push(parseInt(a.substr(2*b,2),16));return c},convertBytesToBase64:function(a){var b,c="",d=a.length;for(b=0;b<d;b+=3){var e,f=a.slice(b,b+3),g=f.length,h=[];if(3>g)for(e=g;3>e;e++)f[e]=0;for(h[0]=(252&f[0])>>2,h[1]=(3&f[0])<<4|f[1]>>4,h[2]=(15&f[1])<<2|(192&f[2])>>6,h[3]=63&f[2],e=0;4>e;e++)c=e<=g?c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h[e]):c+"="}return c},style:{parse:{_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(a){var b={},c=this._findColor(a);return c.length&&(b.color=c[0],CKEDITOR.tools.array.forEach(c,function(b){a=a.replace(b,"")})),(a=CKEDITOR.tools.trim(a))&&(b.unprocessed=a),b},margin:function(a){return CKEDITOR.tools.style.parse.sideShorthand(a,function(a){return a.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]})},sideShorthand:function(a,b){function c(a){d.top=e[a[0]],d.right=e[a[1]],d.bottom=e[a[2]],d.left=e[a[3]]}var d={},e=b?b(a):a.split(/\s+/);switch(e.length){case 1:c([0,0,0,0]);break;case 2:c([0,1,0,1]);break;case 3:c([0,1,2,1]);break;case 4:c([0,1,2,3])}return d},border:function(a){return CKEDITOR.tools.style.border.fromCssRule(a)},_findColor:function(a){var b=[],c=CKEDITOR.tools.array,b=b.concat(a.match(this._rgbaRegExp)||[]),b=b.concat(a.match(this._hslaRegExp)||[]);return b=b.concat(c.filter(a.split(/\s+/),function(a){return!!a.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||a.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(a,b,c){var d=[];return this.forEach(a,function(e,f){b.call(c,e,f,a)&&d.push(e)}),d},find:function(a,b,c){for(var d=a.length,e=0;e<d;){if(b.call(c,a[e],e,a))return a[e];e++}},forEach:function(a,b,c){var d,e=a.length;for(d=0;d<e;d++)b.call(c,a[d],d,a)},map:function(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push(b.call(c,a[e],e,a));return d},reduce:function(a,b,c,d){for(var e=0;e<a.length;e++)c=b.call(d,c,a[e],e,a);return c},every:function(a,b,c){return!a.length||(b=this.filter(a,b,c),a.length===b.length)},some:function(a,b,c){for(var d=0;d<a.length;d++)if(b.call(c,a[d],d,a))return!0;return!1},zip:function(a,b){return CKEDITOR.tools.array.map(a,function(a,c){return[a,b[c]]})},unique:function(a){return this.filter(a,function(b,c){return c===CKEDITOR.tools.array.indexOf(a,b)})}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(a){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(a),function(b){return[b,a[b]]})},values:function(a){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(a),function(b){return a[b]})},keys:function(a){var b=Object.prototype.hasOwnProperty,c=[],d=CKEDITOR.tools.object.DONT_ENUMS;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(!a||"object"!=typeof a)){if(b=[],"string"==typeof a)for(c=0;c<a.length;c++)b.push(String(c));return b}for(var e in a)c.push(e);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(e=0;e<d.length;e++)b.call(a,d[e])&&c.push(d[e]);return c},findKey:function(a,b){if("object"!=typeof a)return null;for(var c in a)if(a[c]===b)return c;return null},merge:function(a,b){var c=CKEDITOR.tools,d=c.clone(a),e=c.clone(b);return c.array.forEach(c.object.keys(e),function(a){d[a]="object"==typeof e[a]&&"object"==typeof d[a]?c.object.merge(d[a],e[a]):e[a]}),d}},getAbsoluteRectPosition:function(a,b){function c(a){if(a){var b=a.getClientRect();d.top+=b.top,d.left+=b.left,"x"in d&&"y"in d&&(d.x+=b.x,d.y+=b.y),c(a.getWindow().getFrame())}}var d=CKEDITOR.tools.copy(b);c(a.getFrame());var e=CKEDITOR.document.getWindow().getScrollPosition();return d.top+=e.y,d.left+=e.x,"x"in d&&"y"in d&&(d.y+=e.y,d.x+=e.x),d.right=d.left+d.width,d.bottom=d.top+d.height,d}},a.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},b.prototype=CKEDITOR.tools.prototypedCopy(a.prototype),b.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},b.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=a,CKEDITOR.tools.buffers.throttle=b,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(a){a=a||{},this.width=a.width,this.style=a.style,this.color=a.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var a in this._.normalizeMap){var b=this[a];b&&(this[a]=CKEDITOR.tools.array.reduce(this._.normalizeMap[a],function(a,b){return a.replace(b[0],b[1])},b))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],function(a){return!!a}).join(" ")}},statics:{fromCssRule:function(a){var b={},c=a.split(/\s+/g);return a=CKEDITOR.tools.style.parse._findColor(a),a.length&&(b.color=a[0]),CKEDITOR.tools.array.forEach(c,function(a){b.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,a)?!b.width&&CKEDITOR.tools.style.parse._widthRegExp.test(a)&&(b.width=a):b.style=a}),new CKEDITOR.tools.style.border(b)},splitCssValues:function(a,b){b=b||{};var c=CKEDITOR.tools.array.reduce(["width","style","color"],function(c,d){var e=a["border-"+d]||b[d];return c[d]=e?CKEDITOR.tools.style.parse.sideShorthand(e):null,c},{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],function(b,d){var e,f={};for(e in c){var g=a["border-"+d+"-"+e];f[e]=g?g:c[e]&&c[e][d]}return b["border-"+d]=new CKEDITOR.tools.style.border(f),b},{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,b=function(a,b){for(var c=CKEDITOR.tools.clone(a),d=1;d<arguments.length;d++){b=arguments[d];for(var e in b)delete c[e]}return c},c={},d={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},f={command:1,link:1,meta:1,noscript:1,script:1,style:1},g={},h={"#":1},i={center:1,dir:1,noframes:1};return a(c,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},h,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(d,e,c,i),b={a:b(c,{a:1,button:1}),abbr:c,address:d,area:g,article:d,aside:d,audio:a({source:1,track:1},d),b:c,base:g,bdi:c,bdo:c,blockquote:d,body:d,br:g,button:b(c,{a:1,button:1}),canvas:c,caption:d,cite:c,code:c,col:g,colgroup:{col:1},command:g,datalist:a({option:1},c),dd:d,del:c,details:a({summary:1},d),dfn:c,div:d,dl:{dt:1,dd:1},dt:d,em:c,embed:g,fieldset:a({legend:1},d),figcaption:d,figure:a({figcaption:1},d),footer:d,form:d,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:a({title:1,base:1},f),header:d,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:g,html:a({head:1,body:1},d,f),i:c,iframe:h,img:g,input:g,ins:c,kbd:c,keygen:g,label:c,legend:c,li:d,link:g,main:d,map:d,mark:c,menu:a({li:1},d),meta:g,meter:b(c,{meter:1}),nav:d,noscript:a({link:1,meta:1,style:1},c),object:a({param:1},c),ol:{li:1},optgroup:{option:1},option:h,output:c,p:c,param:g,pre:c,progress:b(c,{progress:1}),q:c,rp:c,rt:c,ruby:a({rp:1,rt:1},c),s:c,samp:c,script:h,section:d,select:{optgroup:1,option:1},small:c,source:g,span:c,strong:c,style:h,sub:c,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},c),sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:d,textarea:h,tfoot:{tr:1},th:d,thead:{tr:1},time:b(c,{time:1}),title:h,tr:{th:1,td:1},track:g,u:c,ul:{li:1},"var":c,video:a({source:1,track:1},d),wbr:g,acronym:c,applet:a({param:1},d),basefont:g,big:c,center:d,dialog:g,dir:{li:1},font:c,isindex:g,noframes:d,strike:c,tt:c},a(b,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,i),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},b.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),b}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(b){var c=this.getCustomData("_cke_nativeListeners");return c||(c={},this.setCustomData("_cke_nativeListeners",c)),c[b]||(c=c[b]=a(this,b),this.$.addEventListener?this.$.addEventListener(b,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+b,c)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){try{var a,b=this.getCustomData("_cke_nativeListeners");for(a in b){var c=b[a];this.$.detachEvent?this.$.detachEvent("on"+a,c):this.$.removeEventListener&&this.$.removeEventListener(a,c,!1),delete b[a]}}catch(d){if(!CKEDITOR.env.edge||-2146828218!==d.number)throw d}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var b={};CKEDITOR.on("reset",function(){b={}}),a.equals=function(a){try{return a&&a.$===this.$}catch(b){return!1}},a.setCustomData=function(a,c){var d=this.getUniqueId();return(b[d]||(b[d]={}))[a]=c,this},a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&b[c])&&a in c?c[a]:null},a.removeCustomData=function(a){var c,d,e=this.$["data-cke-expando"],e=e&&b[e];return e&&(c=e[a],d=a in e,delete e[a]),d?c:null},a.clearCustomData=function(){this.removeAllListeners();var a=this.getUniqueId();a&&delete b[a]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){function c(d){if(d["data-cke-expando"]&&(d["data-cke-expando"]=!1),(d.nodeType==CKEDITOR.NODE_ELEMENT||d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(b||d.nodeType!=CKEDITOR.NODE_ELEMENT||d.removeAttribute("id",!1),a)){d=d.childNodes;for(var e=0;e<d.length;e++)c(d[e])}}function d(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var c=b.getName();":"==c[0]&&b.renameNode(c.substring(1))}if(a)for(c=0;c<b.getChildCount();c++)d(b.getChild(c))}}var e=this.$.cloneNode(a);return c(e),e=new CKEDITOR.dom.node(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&d(e),e},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var b=[],c=this.getDocument().$.documentElement,d=this;d&&d!=c;){var e=d.getParent();e&&b.unshift(this.getIndex.call(d,a)),d=e}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function b(a,c){var d=c?a.getNext():a.getPrevious();return d&&d.type==CKEDITOR.NODE_TEXT?d.isEmpty()?b(d,c):d:null}var c,d=this,e=-1;if(!this.getParent()||a&&d.type==CKEDITOR.NODE_TEXT&&d.isEmpty()&&!b(d)&&!b(d,!0))return-1;do a&&!d.equals(this)&&d.type==CKEDITOR.NODE_TEXT&&(c||d.isEmpty())||(e++,c=d.type==CKEDITOR.NODE_TEXT);while(d=d.getPrevious());return e},getNextSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}a=!a&&this.getFirst&&this.getFirst();var e;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null;a=this.getNext()}for(;!a&&(e=(e||this).getParent());){if(c&&!1===c(e,!0))return null;a=e.getNext()}return!a||c&&!1===c(a)?null:b&&b!=a.type?a.getNextSourceNode(!1,b,c):a},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}a=!a&&this.getLast&&this.getLast();var e;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null;a=this.getPrevious()}for(;!a&&(e=(e||this).getParent());){if(c&&!1===c(e,!0))return null;a=e.getPrevious()}return!a||c&&!1===c(a)?null:b&&a.type!=b?a.getPreviousSourceNode(!1,b,c):a},getPrevious:function(a){var b,c=this.$;do b=(c=c.previousSibling)&&10!=c.nodeType&&new CKEDITOR.dom.node(c);while(b&&a&&!a(b));return b},getNext:function(a){var b,c=this.$;do b=(c=c.nextSibling)&&new CKEDITOR.dom.node(c);while(b&&a&&!a(b));return b},getParent:function(a){var b=this.$.parentNode;return b&&(b.nodeType==CKEDITOR.NODE_ELEMENT||a&&b.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(b):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var b=this.contains?this:this.getParent();do if(b.contains(a))return b;while(b=b.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(b.contains){if(b.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(b))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in b)return 0>b.sourceIndex||0>c.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:b.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}b=this.getAddress(),a=a.getAddress();for(var c=Math.min(b.length,a.length),d=0;d<c;d++)if(b[d]!=a[d])return b[d]<a[d]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return b.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,b){var c,d,e=this.$;b||(e=e.parentNode),"function"==typeof a?(d=!0,c=a):(d=!1,c=function(b){return b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"","string"==typeof a?b==a:b in a});for(;e;){if(c(d?new CKEDITOR.dom.node(e):e))return new CKEDITOR.dom.node(e);try{e=e.parentNode}catch(f){e=null}}return null},hasAscendant:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(;a=b.firstChild;)c.insertBefore(b.removeChild(a),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(!b){a.remove();continue}b.length<c&&(a.split(c-b.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.rtrim(a.getText()),c=a.getLength();if(!b){a.remove();continue}b.length<c&&(a.split(b.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var b=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(b=this.getParent()),CKEDITOR.env.edge&&b&&b.is("textarea","input")&&(a=!0),!a&&b&&"undefined"!=typeof b.$.isContentEditable)return!(b.$.isContentEditable||b.data("cke-editable"));for(;b;){if(b.data("cke-editable"))return!1;if(b.hasAttribute("contenteditable"))return"false"==b.getAttribute("contenteditable");b=b.getParent()}return!0}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:(a=a.document,{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0})},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new CKEDITOR.dom.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},appendStyleText:function(a){if(this.$.createStyleSheet){var b=this.$.createStyleSheet("");b.cssText=a}else{var c=new CKEDITOR.dom.element("style",this);c.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(c)}return b||c.$.sheet},createElement:function(a,b){var c=new CKEDITOR.dom.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.styles&&c.setStyles(b.styles)),c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(b){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,b){for(var c=this.$.documentElement,d=0;c&&d<a.length;d++){var e=a[d];if(b)for(var f=-1,g=0;g<c.childNodes.length;g++){var h=c.childNodes[g];if((!0!==b||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)&&(f++,f==e)){c=h;break}}else c=c.childNodes[e]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,b){return CKEDITOR.env.ie&&8>=document.documentMode||!b||(a=b+":"+a),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(a),this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(a){return new CKEDITOR.dom.node(a)})}},CKEDITOR.dom.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,b){var c=new CKEDITOR.dom.element("div",b);return c.setHtml(a),c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,b,c,d){var e=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),f=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[e]=b,f[c]=1,b.setCustomData(c,d)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var b in a)CKEDITOR.dom.element.clearMarkers(a,a[b],1)},CKEDITOR.dom.element.clearMarkers=function(a,b,c){var d,e=b.getCustomData("list_marker_names"),f=b.getCustomData("list_marker_id");for(d in e)b.removeCustomData(d);b.removeCustomData("list_marker_names"),c&&(b.removeCustomData("list_marker_id"),delete a[f])},function(){function a(a,b){return-1<(" "+a+" ").replace(f," ").indexOf(" "+b+" ")}function b(a){var b=!0;return a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1),function(){b||a.removeAttribute("id")}}function c(a,b){var c=CKEDITOR.tools.escapeCss(a.$.id);return"#"+c+" "+b.split(/,\s*/).join(", #"+c+" ")}function d(a){for(var b=0,c=0,d=g[a].length;c<d;c++)b+=parseFloat(this.getComputedStyle(g[a][c])||0,10)||0;return b}var e=document.createElement("_").classList,e="undefined"!=typeof e&&null!==String(e.add).match(/\[Native code\]/gi),f=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:e?function(a){return this.$.classList.add(a),this}:function(b){var c=this.$.className;return c&&(a(c,b)||(c+=" "+b)),this.$.className=c||b,this},removeClass:e?function(a){var b=this.$;return b.classList.remove(a),b.className||b.removeAttribute("class"),this}:function(b){var c=this.getAttribute("class");return c&&a(c,b)&&((c=c.replace(new RegExp("(?:^|\\s+)"+b+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",c):this.removeAttribute("class")),this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){return"string"==typeof a&&(a=this.getDocument().createElement(a)),b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$),a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a),b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this),c.setEndAfter(a);var d,e=c.extractContents(!1,b||!1);if(c.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(c=new CKEDITOR.dom.element("div");d=e.getFirst();)d.$.style.backgroundColor&&(d.$.style.backgroundColor=d.$.style.backgroundColor),c.append(d);c.insertAfter(this),c.remove(!0)}else e.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(16&this.$.compareDocumentPosition(a.$))}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");return a.appendChild(this.$.cloneNode(!0)),a.innerHTML},getClientRect:function(a){var b=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!b.width&&(b.width=b.right-b.left),!b.height&&(b.height=b.bottom-b.top),a?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),b):b},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();return c.appendChild(b),b.innerHTML=a,c.removeChild(b),a}catch(d){for(this.$.innerHTML="",b=new CKEDITOR.dom.element("body",this.getDocument()),b.$.innerHTML=a,b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");return a.innerHTML="x",a=a.textContent,function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case"checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getAttributes:function(a){var b,c={},d=this.$.attributes;for(a=CKEDITOR.tools.isArray(a)?a:[],b=0;b<d.length;b++)-1===CKEDITOR.tools.indexOf(a,d[b].name)&&(c[d[b].name]=d[b].value);return c},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getClientSize:function(){return{width:this.$.clientWidth,height:this.$.clientHeight}},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow();
},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return this.getName=function(){return a},this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a)),b},getLast:function(a){var b=this.$.lastChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a)),b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===a||(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])))},isIdentical:function(a){var b=this.clone(0,1);if(a=a.clone(0,1),b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);if(b=b.getOuterHtml(),a=a.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a,b,c=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return c&&CKEDITOR.env.webkit&&(a=this.getWindow(),!a.equals(CKEDITOR.document.getWindow())&&(b=a.$.frameElement)&&(c=new CKEDITOR.dom.element(b).isVisible())),!!c},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var d=a.getItem(b);if((d.type!=CKEDITOR.NODE_ELEMENT||!d.data("cke-bookmark"))&&(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(a){var b=this.$.attributes.getNamedItem(a);if("input"==this.getName())switch(a){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return a=this.getAttribute("type"),"checkbox"==a||"radio"==a?"on"!=this.$.value:!!this.$.value}return!!b&&b.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;if(a=a.$,c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},mergeSiblings:function(){function a(a,b,c){if(b&&b.type==CKEDITOR.NODE_ELEMENT){for(var d=[];b.data("cke-bookmark")||b.isEmptyInlineRemoveable();)if(d.push(b),b=c?b.getNext():b.getPrevious(),!b||b.type!=CKEDITOR.NODE_ELEMENT)return;if(a.isIdentical(b)){for(var e=c?a.getLast():a.getFirst();d.length;)d.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),e&&e.type==CKEDITOR.NODE_ELEMENT&&e.mergeSiblings()}}}return function(b){(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this,this.getNext(),!0),a(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){return"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(d){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable"),this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a=a||this.getAttributes())a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c,d=["top","left","right","bottom"];"border"==a&&(c=["color","style","width"]);for(var b=[],e=0;e<d.length;e++)if(c)for(var f=0;f<c.length;f++)b.push([a,d[e],c[f]].join("-"));else b.push([a,d[e]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,d=b.count();c<d;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,d=this.getDocument(),e=d.getBody(),f="BackCompat"==d.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var g=this.$.getBoundingClientRect(),h=d.$.documentElement,i=h.clientTop||e.$.clientTop||0,j=h.clientLeft||e.$.clientLeft||0,k=!0;CKEDITOR.env.ie&&(k=d.getDocumentElement().contains(this),d=d.getBody().contains(this),k=f&&d||!f&&k),k&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=e.$.scrollLeft||h.scrollLeft,c=e.$.scrollTop||h.scrollTop):(c=f?e.$:h,b=c.scrollLeft,c=c.scrollTop),b=g.left+b-j,c=g.top+c-i)}else for(i=this,j=null;i&&"body"!=i.getName()&&"html"!=i.getName();){for(b+=i.$.offsetLeft-i.$.scrollLeft,c+=i.$.offsetTop-i.$.scrollTop,i.equals(this)||(b+=i.$.clientLeft||0,c+=i.$.clientTop||0);j&&!j.equals(i);)b-=j.$.scrollLeft,c-=j.$.scrollTop,j=j.getParent();j=i,i=(g=i.$.offsetParent)?new CKEDITOR.dom.element(g):null}return a&&(g=this.getWindow(),i=a.getWindow(),!g.equals(i)&&g.$.frameElement&&(a=new CKEDITOR.dom.element(g.$.frameElement).getDocumentPosition(a),b+=a.x,c+=a.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||f||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b)do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var d=c.$.frameElement;d&&(b=new CKEDITOR.dom.element(d))}catch(e){}}while(b=b.getParent())},scrollIntoParent:function(a,b,c){function d(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function e(a,b){var c={x:0,y:0};if(!a.is(k?"body":"html")){var d=a.$.getBoundingClientRect();c.x=d.left,c.y=d.top}return d=a.getWindow(),d.equals(b)||(d=e(CKEDITOR.dom.element.get(d.$.frameElement),b),c.x+=d.x,c.y+=d.y),c}function f(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}var g,h,i,j;!a&&(a=this.getWindow()),i=a.getDocument();var k="BackCompat"==i.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=k?i.getBody():i.getDocumentElement()),CKEDITOR.env.webkit&&(i=this.getEditor(!1))&&(i._.previousScrollTop=null),i=a.getWindow(),h=e(this,i);var l=e(a,i),m=this.$.offsetHeight;g=this.$.offsetWidth;var n=a.$.clientHeight,o=a.$.clientWidth;i=h.x-f(this,"left")-l.x||0,j=h.y-f(this,"top")-l.y||0,g=h.x+g+f(this,"right")-(l.x+o)||0,h=h.y+m+f(this,"bottom")-(l.y+n)||0,(0>j||0<h)&&d(0,!0===b?j:!1===b?h:0>j?j:h),c&&(0>i||0<g)&&d(0>i?i:g,0)},setState:function(a,b,c){switch(b=b||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on"),this.removeClass(b+"_off"),this.removeClass(b+"_disabled"),c&&this.setAttribute("aria-pressed",!0),c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled"),this.removeClass(b+"_off"),this.removeClass(b+"_on"),c&&this.setAttribute("aria-disabled",!0),c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var d=0;d<c.length;d++){var e,f=c[d],g=f.nodeName.toLowerCase();g in b||("checked"==g&&(e=this.getAttribute(g))?a.setAttribute(g,e):CKEDITOR.env.ie&&!this.hasAttribute(g)||(e=this.getAttribute(g),null===e&&(e=f.nodeValue),a.setAttribute(g,e)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b),this.copyAttributes(a),this.moveChildren(a),this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(a,b){var c=a.childNodes;if(0<=b&&b<c.length)return c[b]}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(!1===b?this.removeAttribute(a):this.setAttribute(a,b),null)},getEditor:function(a){var b,c,d,e=CKEDITOR.instances;a=a||void 0===a;for(b in e)if(c=e[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!a&&(d=c.editable())&&(d.equals(this)||d.contains(this)))return c;return null},find:function(a){var d=b(this);return a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(c(this,a))),d(),a},findOne:function(a){var d=b(this);return a=this.$.querySelector(c(this,a)),d(),a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.getChildren();for(var e=0;e<c.count();e++)d=c.getItem(e),d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},fireEventHandler:function(a,b){var c="on"+a,d=this.$;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){var e,f=d.ownerDocument.createEventObject();for(e in b)f[e]=b[e];d.fireEvent(c,f)}else d[d[a]?a:c](b)},isDetached:function(){var a=this.getDocument(),b=a.getDocumentElement();return!b.equals(this)&&!b.contains(this)||(!CKEDITOR.env.ie||8<CKEDITOR.env.version&&!CKEDITOR.env.quirks)&&!a.$.defaultView}});var g={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,c){"number"==typeof b&&(!c||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=d.call(this,a)),this.setStyle(a,b+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,b){var c=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return b&&(c-=d.call(this,a)),c}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(a),a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,e=c.startContainer;d=c.endContainer;var f,g=c.startOffset,h=c.endOffset,i=this.guard,j=this.type,k=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var l=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),m=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(h):d.getNext();this._.guardLTR=function(a,b){return!(b&&l.equals(a)||m&&a.equals(m)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}if(a&&!this._.guardRTL){var n=e.type==CKEDITOR.NODE_ELEMENT?e:e.getParent(),o=e.type==CKEDITOR.NODE_ELEMENT?g?e.getChild(g-1):null:e.getPrevious();this._.guardRTL=function(a,b){return!(b&&n.equals(a)||o&&a.equals(o)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}var p=a?this._.guardRTL:this._.guardLTR;for(f=i?function(a,b){return!1!==p(a,b)&&i(a,b)}:p,this.current?d=this.current[k](!1,j,f):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=0<h?d.getChild(h-1):!1===f(d,!0)?null:d.getPreviousSourceNode(!0,j,f)):(d=e,d.type==CKEDITOR.NODE_ELEMENT&&((d=d.getChild(g))||(d=!1===f(e,!0)?null:e.getNextSourceNode(!0,j,f)))),d&&!1===f(d)&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&!1===this.evaluator(d)){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[k](!1,j,f)}return this.end(),this.current=null}function b(b){for(var c,d=null;c=a.call(this,b);)d=c;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current,this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},d={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in d||!c[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a))},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var e,f;return e=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(f=d.getParent())&&c(f),e=a?e:e||c(d),!!(b^e)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;return b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(a^c)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(d){return b(d)?d=1:(d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent()),d=d.$.offsetWidth<=c),!!(a^d)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!f(a)&&!g(a)}return function(c){var d=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&e.test(c.getText());return d&&(d=c.getParent(),c=c.getNext(b),d=d.isBlockBoundary()&&(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary())),!!(a^d)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,f=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.bookmark(),h=CKEDITOR.dom.walker.temp(),i=function(a){return g(a)||f(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=f(b)||g(b)||h(b),!!(a^b)}};var j=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var c=0,d=b.getChildCount();c<d;++c)if(!j(b.getChild(c)))return!!a;return!a}};var k=CKEDITOR.dom.walker.empty(),l=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var b,c={};for(b in a)CKEDITOR.dtd[b]["#"]&&(c[b]=1);return c}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){return b=!j(b)&&!!(b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(l)&&k(b))),!!(a^b)}},CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(i(a));return!(!a||!(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&e.test(a.getText())))&&a}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var b=a instanceof CKEDITOR.dom.document;this.document=b?a:a.getDocument(),this.root=b?a.getBody():a},function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function b(a,b,c,d,e){function f(a,b,c,d){var f=c?a.getPrevious():a.getNext();return d&&i?f:(k||d?b.append(a.clone(!0,e),c):(a.remove(),j&&b.append(a,c)),f)}function g(){var a,b,c,d=Math.min(y.length,z.length);for(a=0;a<d;a++)if(b=y[a],c=z[a],!b.equals(c))return a;return a-1}function h(){var b=A-1,c=n&&o&&!r.equals(s);b<B-1||b<C-1||c?(c?a.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START):C==b+1&&m?a.moveToPosition(z[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(z[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=y[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var i=0===b,j=1==b,k=2==b;b=k||j;var l,m,n,o,p,q,r=a.startContainer,s=a.endContainer,t=a.startOffset,u=a.endOffset;if(k&&s.type==CKEDITOR.NODE_TEXT&&(r.equals(s)||r.type===CKEDITOR.NODE_ELEMENT&&r.getFirst().equals(s)))c.append(a.document.createText(s.substring(t,u)));else{s.type==CKEDITOR.NODE_TEXT?k?q=!0:s=s.split(u):0<s.getChildCount()?u>=s.getChildCount()?(s=s.getChild(u-1),m=!0):s=s.getChild(u):o=m=!0,r.type==CKEDITOR.NODE_TEXT?k?p=!0:r.split(t):0<r.getChildCount()?0===t?(r=r.getChild(t),l=!0):r=r.getChild(t-1):n=l=!0;for(var v,w,x,y=r.getParents(),z=s.getParents(),A=g(),B=y.length-1,C=z.length-1,D=c,E=-1,F=A;F<=B;F++){for(w=y[F],x=w.getNext(),F!=B||w.equals(z[F])&&B<C?b&&(v=D.append(w.clone(0,e))):l?f(w,D,!1,n):p&&D.append(a.document.createText(w.substring(t)));x;){if(x.equals(z[F])){E=F;break}x=f(x,D)}D=v}for(D=c,F=A;F<=C;F++)if(c=z[F],x=c.getPrevious(),c.equals(y[F]))b&&(D=D.getChild(0));else{if(F!=C||c.equals(y[F])&&C<B?b&&(v=D.append(c.clone(0,e))):m?f(c,D,!1,o):q&&D.append(a.document.createText(c.substring(0,u))),F>E)for(;x;)x=f(x,D,!0);D=v}k||h()}}function c(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(e){return!(!c(e)&&!b(e))||(d(e)&&!a?a=!0:!(e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(f)))}}function d(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return!(!c(d)&&!b(d))||(!a&&g(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty))}}function e(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){return!b&&j(a)&&(b=a),i(a)&&!(g(a)&&a.equals(b))})}}var f={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},g=CKEDITOR.dom.walker.bogus(),h=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,i=CKEDITOR.dom.walker.editable(),j=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a._setStartContainer(this.startContainer),a.startOffset=this.startOffset,a._setEndContainer(this.endContainer),a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(a){var c=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,2,c,!1,"undefined"==typeof a||a),c},deleteContents:function(a){this.collapsed||b(this,0,null,a)},extractContents:function(a,c){var d=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,1,d,a,"undefined"==typeof c||c),d},equals:function(a){return this.startOffset===a.startOffset&&this.endOffset===a.endOffset&&this.startContainer.equals(a.startContainer)&&this.endContainer.equals(a.endContainer)},createBookmark:function(a){function b(a){return a.getAscendant(function(a){var b;return(b=a.data&&a.data("cke-temp"))&&(b=-1===CKEDITOR.tools.array.indexOf(["cke_copybin","cke_pastebin"],a.getAttribute("id"))),b},!0)}var c,d,e,f,g=this.startContainer,h=this.endContainer,i=this.collapsed;return c=this.document.createElement("span"),c.data("cke-bookmark",1),c.setStyle("display","none"),c.setHtml("&nbsp;"),a&&(e="cke_bm_"+CKEDITOR.tools.getNextNumber(),c.setAttribute("id",e+(i?"C":"S"))),i||(d=c.clone(),d.setHtml("&nbsp;"),a&&d.setAttribute("id",e+"E"),f=this.clone(),b(h)&&(h=b(h),f.moveToPosition(h,CKEDITOR.POSITION_AFTER_END)),f.collapse(),f.insertNode(d)),f=this.clone(),b(g)&&(h=b(g),f.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START)),f.collapse(!0),f.insertNode(c),d?(this.setStartAfter(c),this.setEndBefore(d)):this.moveToPosition(c,CKEDITOR.POSITION_AFTER_END),{startNode:a?e+(i?"C":"S"):c,endNode:a?e+"E":d,serializable:a,collapsed:i}},createBookmark2:function(){function a(a){var b,d=a.container,e=a.offset;b=d;var f=e;if(b=b.type!=CKEDITOR.NODE_ELEMENT||0===f||f==b.getChildCount()?0:b.getChild(f-1).type==CKEDITOR.NODE_TEXT&&b.getChild(f).type==CKEDITOR.NODE_TEXT,b&&(d=d.getChild(e-1),e=d.getLength()),d.type==CKEDITOR.NODE_ELEMENT&&0<e){a:{for(b=d;e--;)if(f=b.getChild(e).getIndex(!0),0<=f){e=f;break a}e=-1}e+=1}if(d.type==CKEDITOR.NODE_TEXT){for(b=d,f=0;(b=b.getPrevious())&&b.type==CKEDITOR.NODE_TEXT;)f+=b.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;b=f,d.isEmpty()?(f=d.getPrevious(c),b?(e=b,d=f?f.getNext():d.getParent().getFirst()):(d=d.getParent(),e=f?f.getIndex(!0)+1:0)):e+=b}a.container=d,a.offset=e}function b(a,b){var c=b.getCustomData("cke-fillingChar");if(c){var d=a.container;c.equals(d)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=d.getIndex(),a.container=d.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(c){var d=this.collapsed,e={container:this.startContainer,offset:this.startOffset},f={container:this.endContainer,offset:this.endOffset};return c&&(a(e),b(e,this.root),d||(a(f),b(f,this.root))),{start:e.container.getAddress(c),end:d?null:f.container.getAddress(c),startOffset:e.offset,endOffset:f.offset,normalized:c,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset,this.setStart(b,c),d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var a,b=this.startContainer,c=this.endContainer,d=this.startOffset,e=this.endOffset;if(b.type==CKEDITOR.NODE_ELEMENT)if(a=b.getChildCount(),a>d)b=b.getChild(d);else if(1>a)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b),b=b.getNextSourceNode()||b}if(c.type==CKEDITOR.NODE_ELEMENT)if(a=c.getChildCount(),a>e)c=c.getChild(e).getPreviousSourceNode(!0);else if(1>a)c=c.getPreviousSourceNode();else{for(c=c.$;c.lastChild;)c=c.lastChild;c=new CKEDITOR.dom.node(c)}return b.getPosition(c)&CKEDITOR.POSITION_FOLLOWING&&(b=c),{startNode:b,endNode:c}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var f=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(f,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();if(this.setStart(c,d),e)return void this.collapse(!0)}c=this.endContainer,d=this.endOffset,b||e||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:var f=function(a,b){var c=new CKEDITOR.dom.range(o);c.setStart(a,b),c.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);var e,c=new CKEDITOR.dom.walker(c);for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};e=c.next();){if(e.type!=CKEDITOR.NODE_TEXT)return!1;if(m=e!=a?e.getText():e.substring(b),d.test(m))return!1}return!0};if(this.collapsed)break;var g,h,i,j,k,l,m,n=this.getCommonAncestor(),o=this.root,p=!1;l=this.startContainer;var q=this.startOffset;for(l.type==CKEDITOR.NODE_TEXT?(q&&(l=!CKEDITOR.tools.trim(l.substring(0,q)).length&&l,p=!!l),l&&((j=l.getPrevious())||(i=l.getParent()))):(q&&(j=l.getChild(q-1)||l.getLast()),j||(i=l)),i=c(i);i||j;){if(i&&!j){if(!k&&i.equals(n)&&(k=!0),e?i.isBlockBoundary():!o.contains(i))break;p&&"inline"==i.getComputedStyle("display")||(p=!1,k?g=i:this.setStartBefore(i)),j=i.getPrevious()}for(;j;)if(l=!1,j.type==CKEDITOR.NODE_COMMENT)j=j.getPrevious();else{if(j.type==CKEDITOR.NODE_TEXT)m=j.getText(),d.test(m)&&(j=null),l=/[\s\ufeff]$/.test(m);else if((j.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&j.is("br"))&&!j.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[j.getName()]){if(m=j.getText(),d.test(m))j=null;else for(var r,q=j.$.getElementsByTagName("*"),s=0;r=q[s++];)if(!CKEDITOR.dtd.$removeEmpty[r.nodeName.toLowerCase()]){j=null;break}j&&(l=!!m.length)}else j=null;if(l&&(p?k?g=i:i&&this.setStartBefore(i):p=!0),j){if(l=j.getPrevious(),!i&&!l){i=j,j=null;break}j=l}else i=null}i&&(i=c(i.getParent()))}for(l=this.endContainer,q=this.endOffset,i=j=null,k=p=!1,l.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(l.substring(q)).length?p=!0:(p=!l.getLength(),q==l.getLength()?(j=l.getNext())||(i=l.getParent()):f(l,q)&&(i=l.getParent())):(j=l.getChild(q))||(i=l);i||j;){if(i&&!j){if(!k&&i.equals(n)&&(k=!0),e?i.isBlockBoundary():!o.contains(i))break;p&&"inline"==i.getComputedStyle("display")||(p=!1,k?h=i:i&&this.setEndAfter(i)),j=i.getNext()}for(;j;){if(l=!1,j.type==CKEDITOR.NODE_TEXT)m=j.getText(),f(j,0)||(j=null),l=/^[\s\ufeff]/.test(m);else if(j.type==CKEDITOR.NODE_ELEMENT){if((0<j.$.offsetWidth||b&&j.is("br"))&&!j.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[j.getName()]){if(m=j.getText(),d.test(m))j=null;else for(q=j.$.getElementsByTagName("*"),s=0;r=q[s++];)if(!CKEDITOR.dtd.$removeEmpty[r.nodeName.toLowerCase()]){j=null;break}j&&(l=!!m.length)}else j=null}else l=1;if(l&&p&&(k?h=i:this.setEndAfter(i)),j){if(l=j.getNext(),!i&&!l){i=j,j=null;break}j=l}else i=null}i&&(i=c(i.getParent()))}g&&h&&(n=g.contains(h)?h:g,this.setStartBefore(n),this.setEndAfter(n));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:i=new CKEDITOR.dom.range(this.root),o=this.root,i.setStartAt(o,CKEDITOR.POSITION_AFTER_START),i.setEnd(this.startContainer,this.startOffset),i=new CKEDITOR.dom.walker(i);var t,u,v=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),w=null,x=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(w){if(w.equals(a))return void(w=null)}else w=a;else if(w)return;var b=v(a);return b||(t=a),b},e=function(a){var b=x(a);return!b&&a.is&&a.is("br")&&(u=a),b};if(i.guard=x,i=i.lastBackward(),t=t||o,this.setStartAt(t,!t.is("br")&&(!i&&this.checkStartOfBlock()||i&&t.contains(i))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){i=this.clone(),i=new CKEDITOR.dom.walker(i);var y=CKEDITOR.dom.walker.whitespaces(),z=CKEDITOR.dom.walker.bookmark();if(i.evaluator=function(a){return!y(a)&&!z(a)},(i=i.previous())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("br"))break;
}i=this.clone(),i.collapse(),i.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:x,t=w=u=null,i=i.lastForward(),t=t||o,this.setEndAt(t,!i&&this.checkEndOfBlock()||i&&t.contains(i)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),u&&this.setEndAfter(u)}},shrink:function(a,b,c){var d="boolean"==typeof c?c:!c||"boolean"!=typeof c.shrinkOnBlockBoundary||c.shrinkOnBlockBoundary,e=c&&c.skipBogus;if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var f=this.clone(),g=this.startContainer,h=this.endContainer,i=this.startOffset,j=this.endOffset,k=c=1;g&&g.type==CKEDITOR.NODE_TEXT&&(i?i>=g.getLength()?f.setStartAfter(g):(f.setStartBefore(g),c=0):f.setStartBefore(g)),h&&h.type==CKEDITOR.NODE_TEXT&&(j?j>=h.getLength()?f.setEndAfter(h):(f.setEndAfter(h),k=0):f.setEndBefore(h));var f=new CKEDITOR.dom.walker(f),l=CKEDITOR.dom.walker.bookmark(),m=CKEDITOR.dom.walker.bogus();f.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var n;return f.guard=function(b,c){return!!(e&&m(b)||l(b))||!(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||c&&b.equals(n)||!1===d&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))&&(c||b.type!=CKEDITOR.NODE_ELEMENT||(n=b),!0)},c&&(g=f[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(g,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),k&&(f.reset(),(f=f[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(f,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!c&&!k)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent()),this._setStartContainer(b),this.startOffset=c,this.endContainer||(this._setEndContainer(b),this.endOffset=c),a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent()),this._setEndContainer(b),this.endOffset=c,this.startContainer||(this._setStartContainer(b),this.startOffset=c),a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),this.insertNode(d);var e=d.getBogus();return e&&e.remove(),d.appendBogus(),this.moveToBookmark(c),d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),e=c.block,f=d.block,g=null;return c.blockLimit.equals(d.blockLimit)?("br"!=a&&(e||(e=this.fixBlock(!0,a),f=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),f||(f=this.fixBlock(!1,a))),c=e&&this.checkStartOfBlock(),d=f&&this.checkEndOfBlock(),this.deleteContents(),e&&e.equals(f)&&(d?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(f,CKEDITOR.POSITION_AFTER_END),f=null):c?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e=null):(f=this.splitElement(e,b||!1),e.is("ul","ol")||e.appendBogus())),{previousBlock:e,nextBlock:f,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:g}):null},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);return c.appendTo(d),d.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),d},removeEmptyBlocksAtEnd:function(){function a(a){return function(d){return!(b(d)||c(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isEmptyInlineRemoveable()||a.is("table")&&d.is("caption"))}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c,d=this.createBookmark(),e=this[b?"endPath":"startPath"](),f=e.block||e.blockLimit;f&&!f.equals(e.root)&&!f.getFirst(a(f));)c=f.getParent(),this[b?"setEndAt":"setStartAt"](f,CKEDITOR.POSITION_AFTER_END),f.remove(1),f=c;this.moveToBookmark(d)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var c=b==CKEDITOR.START,e=this.clone();return e.collapse(c),e[c?"setStartAt":"setEndAt"](a,c?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=d(c),e[c?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,b=this.startOffset;return CKEDITOR.env.ie&&b&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,b)),h.test(a)&&this.trim(0,1)),this.trim(),a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),b=this.clone(),b.collapse(!0),b.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(b),a.evaluator=c(),a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,b=this.endOffset;return CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(b)),h.test(a)&&this.trim(1,0)),this.trim(),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),b=this.clone(),b.collapse(!1),b.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(b),a.evaluator=c(),a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.next()},checkReadOnly:function(){function a(a,b){for(;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if("false"==a.getAttribute("contentEditable")&&!a.data("cke-editable"))return 0;if(a.is("html")||"true"==a.getAttribute("contentEditable")&&(a.contains(b)||a.equals(b)))break}a=a.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&h.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var d=a,e=c,f=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(f=d[b?"getLast":"getFirst"](j)),e||f||(f=d[b?"getPrevious":"getNext"](j)),a=f}return!!c},moveToClosestEditablePosition:function(a,b){var c,d,e,f=0,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,g[b?0:1])):c=this.clone(),a&&!a.is(CKEDITOR.dtd.$block)?f=1:(d=c[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(f=1,(e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is(CKEDITOR.dtd.$block)&&"false"==d.getAttribute("contenteditable")?(c.setStartAt(d,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(d,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&e&&d.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(d,0),c.collapse()):c.moveToPosition(d,g[b?1:0])),f&&this.moveToRange(c),!!f},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:e(),getPreviousEditableNode:e(1),_getTableElement:function(a){a=a||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var b=this.getTouchedStartNode(),c=this.getTouchedEndNode(),d=b.getAscendant("table",!0),c=c.getAscendant("table",!0);return d&&!this.root.contains(d)?null:this.getEnclosedNode()?this.getEnclosedNode().getAscendant(a,!0):d&&c&&(d.equals(c)||d.contains(c)||c.contains(d))?b.getAscendant(a,!0):null},scrollIntoView:function(){var a,b,c,d=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),e=this.clone();e.optimize(),(c=e.startContainer.type==CKEDITOR.NODE_TEXT)?(b=e.startContainer.getText(),a=e.startContainer.split(e.startOffset),d.insertAfter(e.startContainer)):e.insertNode(d),d.scrollIntoView(),c&&(e.startContainer.setText(b),a.remove()),d.remove()},getClientRects:function(){function a(a,b){var c,d,e,f=CKEDITOR.tools.array.map(a,function(a){return a}),g=new CKEDITOR.dom.range(b.root);if(b.startContainer instanceof CKEDITOR.dom.element&&(d=0===b.startOffset&&b.startContainer.hasAttribute("data-widget")),b.endContainer instanceof CKEDITOR.dom.element&&(e=(e=b.endOffset===(b.endContainer.getChildCount?b.endContainer.getChildCount():b.endContainer.length))&&b.endContainer.hasAttribute("data-widget")),d&&g.setStart(b.startContainer.getParent(),b.startContainer.getIndex()),e&&g.setEnd(b.endContainer.getParent(),b.endContainer.getIndex()+1),(d||e)&&(b=g),g=b.cloneContents().find("[data-cke-widget-id]").toArray(),g=CKEDITOR.tools.array.map(g,function(a){var c=b.root.editor;return a=a.getAttribute("data-cke-widget-id"),c.widgets.instances[a].element}))return g=CKEDITOR.tools.array.map(g,function(a){var b;return b=a.getParent().hasClass("cke_widget_wrapper")?a.getParent():a,c=this.root.getDocument().$.createRange(),c.setStart(b.getParent().$,b.getIndex()),c.setEnd(b.getParent().$,b.getIndex()+1),b=c.getClientRects(),b.widgetRect=a.getClientRect(),b},b),CKEDITOR.tools.array.forEach(g,function(a){function b(d){CKEDITOR.tools.array.forEach(f,function(b,e){var g=CKEDITOR.tools.objectCompare(a[d],b);g||(g=CKEDITOR.tools.objectCompare(a.widgetRect,b)),g&&(Array.prototype.splice.call(f,e,a.length-d,a.widgetRect),c=!0)}),c||(d<f.length-1?b(d+1):f.push(a.widgetRect))}var c;b(0)}),f}function b(a,b,c){var e;return b.collapsed?c.startContainer instanceof CKEDITOR.dom.element?(a=c.checkStartOfBlock(),e=new CKEDITOR.dom.text("​"),a?c.startContainer.append(e,!0):0===c.startOffset?e.insertBefore(c.startContainer.getFirst()):(c=c.startContainer.getChildren().getItem(c.startOffset-1),e.insertAfter(c)),b.setStart(e.$,0),b.setEnd(e.$,0),a=b.getClientRects(),e.remove()):c.startContainer instanceof CKEDITOR.dom.text&&(""===c.startContainer.getText()?(c.startContainer.setText("​"),a=b.getClientRects(),c.startContainer.setText("")):a=[d(c.createBookmark())]):a=[d(c.createBookmark())],a}function c(a,b,c){return a=CKEDITOR.tools.extend({},a),b&&(a=CKEDITOR.tools.getAbsoluteRectPosition(c.document.getWindow(),a)),!a.width&&(a.width=a.right-a.left),!a.height&&(a.height=a.bottom-a.top),a}function d(a){var b=a.startNode;a=a.endNode;var c;return b.setText("​"),b.removeStyle("display"),a?(a.setText("​"),a.removeStyle("display"),c=[b.getClientRect(),a.getClientRect()],a.remove()):c=[b.getClientRect(),b.getClientRect()],b.remove(),{right:Math.max(c[0].right,c[1].right),bottom:Math.max(c[0].bottom,c[1].bottom),left:Math.min(c[0].left,c[1].left),top:Math.min(c[0].top,c[1].top),width:Math.abs(c[0].left-c[1].left),height:Math.max(c[0].bottom,c[1].bottom)-Math.min(c[0].top,c[1].top)}}return void 0!==this.document.getSelection?function(d){var e,f=this.root.getDocument().$.createRange();return f.setStart(this.startContainer.$,this.startOffset),f.setEnd(this.endContainer.$,this.endOffset),e=f.getClientRects(),e=a(e,this),e.length||(e=b(e,f,this)),CKEDITOR.tools.array.map(e,function(a){return c(a,d,this)},this)}:function(a){return[c(d(this.createBookmark()),a,this)]}}(),_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a},_find:function(a,b){var c,d,e,f,g=this.getCommonAncestor(),h=this.getBoundaryNodes(),i=[];if(g&&g.find)for(d=g.find(a),c=0;c<d.count();c++)g=d.getItem(c),(b||!g.isReadOnly())&&(e=g.getPosition(h.startNode)&CKEDITOR.POSITION_FOLLOWING||h.startNode.equals(g),f=g.getPosition(h.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||h.endNode.equals(g),e&&f&&i.push(g));return i}},CKEDITOR.dom.range.mergeRanges=function(a){return CKEDITOR.tools.array.reduce(a,function(a,b){var c=a[a.length-1],d=!1;if(b=b.clone(),b.enlarge(CKEDITOR.ENLARGE_ELEMENT),c){var e=new CKEDITOR.dom.range(b.root),d=new CKEDITOR.dom.walker(e),f=CKEDITOR.dom.walker.whitespaces();for(e.setStart(c.endContainer,c.endOffset),e.setEnd(b.startContainer,b.startOffset),e=d.next();f(e)||b.endContainer.equals(e);)e=d.next();d=!e}return d?c.setEnd(b.endContainer,b.endOffset):a.push(b),a},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function b(a){var b=[];return a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0),b}function c(a,d,e,f){a:{null==f&&(f=b(e));for(var g;g=f.shift();)if(g.getDtd().p){f={element:g,remaining:f};break a}f=null}return f?(g=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!g.check(d)?c(a,d,e,f.remaining):(d=new CKEDITOR.dom.range(f.element),d.selectNodeContents(f.element),d=d.createIterator(),d.enlargeBr=a.enlargeBr,d.enforceRealBlocks=a.enforceRealBlocks,d.activeFilter=d.filter=g,a._.nestedEditable={element:f.element,container:e,remaining:f.remaining,iterator:d},1):0}function d(a,b,c){return!!b&&(a=a.clone(),a.collapse(!c),a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END))}var e=/^[\r\n\t ]+$/,f=CKEDITOR.dom.walker.bookmark(!1,!0),g=CKEDITOR.dom.walker.whitespaces(!0),h=function(a){return f(a)&&g(a)},i={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var b,g,j,k,l;if(a=a||"p",this._.nestedEditable){if(b=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,b;if(this.activeFilter=this.filter,c(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var m=this.range.clone();g=m.startPath();var n=m.endPath(),o=!m.collapsed&&d(m,g.block),p=!m.collapsed&&d(m,n.block,1);m.shrink(CKEDITOR.SHRINK_ELEMENT,!0),o&&m.setStartAt(g.block,CKEDITOR.POSITION_BEFORE_END),p&&m.setEndAt(n.block,CKEDITOR.POSITION_AFTER_START),g=m.endContainer.hasAscendant("pre",!0)||m.startContainer.hasAscendant("pre",!0),m.enlarge(this.forceBrBreak&&!g||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),m.collapsed||(g=new CKEDITOR.dom.walker(m.clone()),n=CKEDITOR.dom.walker.bookmark(!0,!0),g.evaluator=n,this._.nextNode=g.next(),g=new CKEDITOR.dom.walker(m.clone()),g.evaluator=n,g=g.previous(),this._.lastNode=g.getNextSourceNode(!0,null,m.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(n=this.range.clone(),n.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),n.checkEndOfBlock()&&(n=new CKEDITOR.dom.elementPath(n.endContainer,n.root),this._.lastNode=(n.block||n.blockLimit).getNextSourceNode(!0))),this._.lastNode&&m.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=m.document.createText(""),this._.lastNode.insertAfter(g)),m=null),this._.started=1,g=m}for(n=this._.nextNode,m=this._.lastNode,this._.nextNode=null;n;){var o=0,p=n.hasAscendant("pre"),q=n.type!=CKEDITOR.NODE_ELEMENT,r=0;if(q)n.type==CKEDITOR.NODE_TEXT&&e.test(n.getText())&&(q=0);else{var s=n.getName();if(CKEDITOR.dtd.$block[s]&&"false"==n.getAttribute("contenteditable")){b=n,c(this,a,b);break}if(n.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){if("br"==s)q=1;else if(!g&&!n.getChildCount()&&"hr"!=s){b=n,j=n.equals(m);break}g&&(g.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),"br"!=s&&(this._.nextNode=n)),o=1}else{if(n.getFirst()){g||(g=this.range.clone(),g.setStartAt(n,CKEDITOR.POSITION_BEFORE_START)),n=n.getFirst();continue}q=1}}if(q&&!g&&(g=this.range.clone(),g.setStartAt(n,CKEDITOR.POSITION_BEFORE_START)),j=(!o||q)&&n.equals(m),g&&!o)for(;!n.getNext(h)&&!j;){if(s=n.getParent(),s.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){o=1,q=0,j||s.equals(m),g.setEndAt(s,CKEDITOR.POSITION_BEFORE_END);break}n=s,q=1,j=n.equals(m),r=1}if(q&&g.setEndAt(n,CKEDITOR.POSITION_AFTER_END),n=this._getNextSourceNode(n,r,m),(j=!n)||o&&g)break}if(!b){if(!g)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;b=new CKEDITOR.dom.elementPath(g.startContainer,g.root),n=b.blockLimit,o={div:1,th:1,td:1},b=b.block,!b&&n&&!this.enforceRealBlocks&&o[n.getName()]&&g.checkStartOfBlock()&&g.checkEndOfBlock()&&!n.equals(g.root)?b=n:!b||this.enforceRealBlocks&&b.is(i)?(b=this.range.document.createElement(a),g.extractContents().appendTo(b),b.trim(),g.insertNode(b),k=l=!0):"li"!=b.getName()?g.checkStartOfBlock()&&g.checkEndOfBlock()||(b=b.clone(!1),g.extractContents().appendTo(b),b.trim(),l=g.splitBlock(),k=!l.wasStartOfBlock,l=!l.wasEndOfBlock,g.insertNode(b)):j||(this._.nextNode=b.equals(m)?null:this._getNextSourceNode(g.getBoundaryNodes().endNode,1,m))}return k&&(k=b.getPrevious())&&k.type==CKEDITOR.NODE_ELEMENT&&("br"==k.getName()?k.remove():k.getLast()&&"br"==k.getLast().$.nodeName.toLowerCase()&&k.getLast().remove()),l&&(k=b.getLast())&&k.type==CKEDITOR.NODE_ELEMENT&&"br"==k.getName()&&(!CKEDITOR.env.needsBrFiller||k.getPrevious(f)||k.getNext(f))&&k.remove(),this._.nextNode||(this._.nextNode=j||b.equals(m)||!m?null:this._getNextSourceNode(b,1,m)),b},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(e))}var e=this.range.root;for(a=a.getNextSourceNode(b,null,d);!f(a);)a=a.getNextSourceNode(b,null,d);return a}},CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,b){this.uiItems=[],this.exec=function(c){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&a.focus(),!1===this.fire("exec")||!1!==b.exec.call(this,a,c))},this.refresh=function(a,c){return!(this.readOnly||!a.readOnly)||(this.context&&!c.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),!1===this.fire("refresh",{editor:a,path:c})||b.refresh&&!1!==b.refresh.apply(this,arguments)))};var c;this.checkAllowed=function(b){return b||"boolean"!=typeof c?c=a.activeFilter.checkFeature(this):c},CKEDITOR.tools.extend(this,b,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!b.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return!(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=a,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,c,d,e){var f,h;a=[];for(f in b){h=b[f],h="boolean"==typeof h?{}:"function"==typeof h?{match:h}:B(h),"$"!=f.charAt(0)&&(h.elements=f),c&&(h.featureName=c.toLowerCase());var i=h;i.elements=g(i.elements,/\s+/)||null,i.propertiesOnly=i.propertiesOnly||!0===i.elements;var j=/\s*,\s*/,k=void 0;for(k in F){i[k]=g(i[k],j)||null;var l=i,m=G[k],n=g(i[G[k]],j),o=i[k],p=[],q=!0,s=void 0;n?q=!1:n={};for(s in o)"!"==s.charAt(0)&&(s=s.slice(1),p.push(s),n[s]=!0,q=!1);for(;s=p.pop();)o[s]=o["!"+s],delete o["!"+s];l[m]=!q&&n||null}i.match=i.match||null,d.push(h),a.push(h)}b=e.elements,e=e.generic;var t;for(c=0,d=a.length;c<d;++c){f=B(a[c]),h=!0===f.classes||!0===f.styles||!0===f.attributes,i=f,k=m=j=void 0;for(j in F)i[j]=r(i[j]);l=!0;for(k in G){j=G[k],m=i[j],n=[],o=void 0;for(o in m)-1<o.indexOf("*")?n.push(new RegExp("^"+o.replace(/\*/g,".*")+"$")):n.push(o);m=n,m.length&&(i[j]=m,l=!1)}if(i.nothingRequired=l,i.noProperties=!(i.attributes||i.classes||i.styles),!0===f.elements||null===f.elements)e[h?"unshift":"push"](f);else for(t in i=f.elements,delete f.elements,i)b[t]?b[t][h?"unshift":"push"](f):b[t]=[f]}}function b(a,b,d,e){if((!a.match||a.match(b))&&(e||h(a,b))&&(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=c(a.attributes,b.attributes,d.validAttributes)),d.allStyles||(d.allStyles=c(a.styles,b.styles,d.validStyles)),!d.allClasses)){if(a=a.classes,b=b.classes,e=d.validClasses,a)if(!0===a)a=!0;else{for(var f,g=0,i=b.length;g<i;++g)f=b[g],e[f]||(e[f]=a(f));a=!1}else a=!1;d.allClasses=a}}function c(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function d(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;if(c.hadInvalidAttribute=e(a.attributes,b.attributes)||c.hadInvalidAttribute,c.hadInvalidStyle=e(a.styles,b.styles)||c.hadInvalidStyle,a=a.classes,b=b.classes,a){for(var d=!1,f=!0===a,g=b.length;g--;)(f||a(b[g]))&&(b.splice(g,1),d=!0);a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function e(a,b){if(!a)return!1;var c,d=!1,e=!0===a;for(c in b)(e||a(c))&&(delete b[c],d=!0);return d}function f(a,b,c){return!(a.disabled||a.customConfig&&!c||!b)&&(a._.cachedChecks={},!0)}function g(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=C(a),"*"==a||CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return!!a.length&&CKEDITOR.tools.convertArrayToObject(a);var c,d={},e=0;for(c in a)d[c]=a[c],e++;return!!e&&d}function h(a,b){if(a.nothingRequired)return!0;var c,d,e,f;if(e=a.requiredClasses)for(f=b.classes,c=0;c<e.length;++c)if(d=e[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(f,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(f,d))return!1;return i(b.styles,a.requiredStyles)&&i(b.attributes,a.requiredAttributes)}function i(a,b){if(!b)return!0;for(var c,d=0;d<b.length;++d)if(c=b[d],"string"==typeof c){if(!(c in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,c))return!1;return!0}function j(a){if(!a)return{};a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function k(a){var b,c,d,e,f={},g=1;for(a=C(a);b=a.match(H);)(c=b[2])?(d=l(c,"styles"),e=l(c,"attrs"),c=l(c,"classes")):d=e=c=null,f["$"+g++]={elements:b[1],classes:c,styles:d,attributes:e},a=a.slice(b[0].length);return f}function l(a,b){var c=a.match(I[b]);return c?C(c[1]):null}function m(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1)),a.classes||(a.classes=c?c.split(/\s+/):[])}function n(a,c,e,f){var g,h=0;if(f.toHtml&&(c.name=c.name.replace(J,"$1")),f.doCallbacks&&a.elementCallbacks){a:{g=a.elementCallbacks;for(var i,j=0,k=g.length;j<k;++j)if(i=g[j](c)){g=i;break a}g=void 0}if(g)return g}if(f.doTransform&&(g=a._.transformations[c.name])){for(m(c),j=0;j<g.length;++j)v(a,c,g[j]);p(c)}if(f.doFilter){a:{j=c.name,k=a._,a=k.allowedRules.elements[j],g=k.allowedRules.generic,j=k.disallowedRules.elements[j],k=k.disallowedRules.generic,i=f.skipRequired;var l,n,o={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(a||g){if(m(c),j)for(l=0,n=j.length;l<n;++l)if(!1===d(j[l],c,o)){a=null;break a}if(k)for(l=0,n=k.length;l<n;++l)d(k[l],c,o);if(a)for(l=0,n=a.length;l<n;++l)b(a[l],c,o,i);if(g)for(l=0,n=g.length;l<n;++l)b(g[l],c,o,i);a=o}else a=null}if(!a||!a.valid)return e.push(c),1;n=a.validAttributes;var r=a.validStyles;g=a.validClasses;var j=c.attributes,s=c.styles,k=c.classes;i=c.classBackup;var t,u,w=c.styleBackup,x=[],o=[],y=/^data-cke-/;if(l=!1,delete j.style,delete j["class"],delete c.classBackup,delete c.styleBackup,!a.allAttributes)for(t in j)n[t]||(y.test(t)?t==(u=t.replace(/^data-cke-saved-/,""))||n[u]||(delete j[t],l=!0):(delete j[t],l=!0));if(!a.allStyles||a.hadInvalidStyle){for(t in s)a.allStyles||r[t]?x.push(t+":"+s[t]):l=!0;x.length&&(j.style=x.sort().join("; "))}else w&&(j.style=w);if(!a.allClasses||a.hadInvalidClass){for(t=0;t<k.length;++t)(a.allClasses||g[k[t]])&&o.push(k[t]);o.length&&(j["class"]=o.sort().join(" ")),i&&o.length<i.split(/\s+/).length&&(l=!0)}else i&&(j["class"]=i);if(l&&(h=1),!f.skipFinalValidation&&!q(c))return e.push(c),1}return f.toHtml&&(c.name=c.name.replace(K,"cke:$1")),h}function o(a){var b,c=[];for(b in a)-1<b.indexOf("*")&&c.push(b.replace(/\*/g,".*"));return c.length?new RegExp("^(?:"+c.join("|")+")$"):null}function p(a){var b,c=a.attributes;delete c.style,delete c["class"],(b=CKEDITOR.tools.writeCssText(a.styles,!0))&&(c.style=b),a.classes.length&&(c["class"]=a.classes.sort().join(" "))}function q(a){switch(a.name){case"a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function r(a){if(!a)return!1;if(!0===a)return!0;var b=o(a);return function(c){return c in a||b&&c.match(b)}}function s(){return new CKEDITOR.htmlParser.element("br")}function t(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||A.$block[a.name])}function u(a,b,c){var d=a.name;if(A.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(s()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(A.$block[d]||"tr"==d)if("br"==b)a.previous&&!t(a.previous)&&(b=s(),b.insertBefore(a)),a.next&&!t(a.next)&&(b=s(),b.insertAfter(a)),a.replaceWithChildren();else{var e,d=a.children;a:{e=A[b];for(var f,g=0,h=d.length;g<h;++g)if(f=d[g],f.type==CKEDITOR.NODE_ELEMENT&&!e[f.name]){e=!1;break a}e=!0}if(e)a.name=b,a.attributes={},c.push({check:"parent-down",el:a});else{e=a.parent;for(var i,j,g=e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==e.name,h=d.length;0<h;)f=d[--h],g&&(f.type==CKEDITOR.NODE_TEXT||f.type==CKEDITOR.NODE_ELEMENT&&A.$inline[f.name])?(i||(i=new CKEDITOR.htmlParser.element(b),i.insertAfter(a),c.push({check:"parent-down",el:i})),i.add(f,0)):(i=null,j=A[e.name]||A.span,f.insertAfter(a),e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||f.type!=CKEDITOR.NODE_ELEMENT||j[f.name]||c.push({check:"el-up",el:f}));a.remove()}}else d in{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function v(a,b,c){var d,e;for(d=0;d<c.length;++d)if(e=c[d],!(e.check&&!a.check(e.check,!1)||e.left&&!e.left(b))){e.right(b,E);break}}function w(a,b){var c,d,e,f,g=b.getDefinition(),h=g.attributes,i=g.styles;if(a.name!=g.element)return!1;for(c in h)if("class"==c){for(g=h[c].split(/\s+/),e=a.classes.join("|");f=g.pop();)if(-1==e.indexOf(f))return!1}else if(a.attributes[c]!=h[c])return!1;for(d in i)if(a.styles[d]!=i[d])return!1;return!0}function x(a,b){var c,d;return"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]),[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function y(a){return function(b){return w(b,a)}}function z(a){return function(b,c){c[a](b)}}var A=CKEDITOR.dtd,B=CKEDITOR.tools.copy,C=CKEDITOR.tools.trim,D=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(a,b){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var c=this.editor=a instanceof CKEDITOR.editor?a:null;if(c&&!b){this.customConfig=!0;var d=c.config.allowedContent;!0===d?this.disabled=!0:(d||(this.customConfig=!1),this.allow(d,"config",1),this.allow(c.config.extraAllowedContent,"extra",1),this.allow(D[c.enterMode]+" "+D[c.shiftEnterMode],"default",1),this.disallow(c.config.disallowedContent))}else this.customConfig=!1,this.allow(b||a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(b,c,d){if(!f(this,b,d))return!1;var e,g;if("string"==typeof b)b=k(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);e=b.getDefinition(),b={},d=e.attributes,b[e.element]=e={styles:e.styles,requiredStyles:e.styles&&CKEDITOR.tools.object.keys(e.styles)},d&&(d=B(d),e.classes=d["class"]?d["class"].split(/\s+/):null,e.requiredClasses=e.classes,delete d["class"],
e.attributes=d,e.requiredAttributes=d&&CKEDITOR.tools.object.keys(d))}else if(CKEDITOR.tools.isArray(b)){for(e=0;e<b.length;++e)g=this.allow(b[e],c,d);return g}return a(this,b,c,this.allowedContent,this._.allowedRules),!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var e,f=this,g=[],h=this.editor&&this.editor.config.protectedSource,i=!1,j={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.object.keys(a.attributes).join("|").indexOf("data-cke-"))if(e=n(f,a,g,j),1&e)i=!0;else if(2&e)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var k,l,m;if(h)for(l=0;l<h.length;++l)if((m=d.match(h[l]))&&m[0].length==d.length){c=!0;break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d),1==d.children.length&&(k=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&n(f,k,c,j),c=!c.length}c||g.push(a)}},null,!0),g.length&&(i=!0);var k;a=[],d=D[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var l;c=g.pop();)c.type==CKEDITOR.NODE_ELEMENT?u(c,d,a):c.remove();for(;k=a.pop();)if(c=k.el,c.parent)switch(l=A[c.parent.name]||A.span,k.check){case"it":A.$removeEmpty[c.name]&&!c.children.length?u(c,d,a):q(c)||u(c,d,a);break;case"el-up":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||l[c.name]||u(c,d,a);break;case"parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||l[c.name]||u(c.parent,d,a)}return i},checkFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},disallow:function(b){return!!f(this,b,!0)&&("string"==typeof b&&(b=k(b)),a(this,b,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(a){if(!this.disabled&&a){var b,c,d,e=[];for(b=0;b<a.length&&!d;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(d=c);if(d){for(b=0;b<a.length;++b)e.push(x(a[b],d));this.addTransformations(e)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(a)},addFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),!a.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(a.requiredContent))},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d,e=this._.transformations;for(d=0;d<a.length;++d){b=a[d];var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0;for(c=[],g=0;g<b.length;++g)h=b[g],"string"==typeof h?(h=h.split(/\s*:\s*/),i=h[0],j=null,k=h[1]):(i=h.check,j=h.left,k=h.right),f||(f=h,f=f.element?f.element:i?i.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element),j instanceof CKEDITOR.style&&(j=y(j)),c.push({check:i==f?null:i,left:j,right:"string"==typeof k?z(k):k});b=f,e[b]||(e[b]=[]),e[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var e,f;if("string"==typeof a){if(f=a+"<"+(!1===b?"0":"1")+(c?"1":"0")+">",f in this._.cachedChecks)return this._.cachedChecks[f];e=k(a).$1;var g=e.styles,d=e.classes;e.name=e.elements,e.classes=d=d?d.split(/\s*,\s*/):[],e.styles=j(g),e.attributes=j(e.attributes),e.children=[],d.length&&(e.attributes["class"]=d.join(" ")),g&&(e.attributes.style=CKEDITOR.tools.writeCssText(e.styles))}else e=a.getDefinition(),g=e.styles,d=e.attributes||{},g&&!CKEDITOR.tools.isEmpty(g)?(g=B(g),d.style=CKEDITOR.tools.writeCssText(g,!0)):g={},e={name:e.element,attributes:d,classes:d["class"]?d["class"].split(/\s+/):[],styles:g,children:[]};var h,g=CKEDITOR.tools.clone(e),i=[];if(!1!==b&&(h=this._.transformations[e.name])){for(d=0;d<h.length;++d)v(this,e,h[d]);p(e)}return n(this,g,i,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c}),0<i.length?c=!1:((b=e.attributes["class"])&&(e.attributes["class"]=e.attributes["class"].split(" ").sort().join(" ")),c=CKEDITOR.tools.objectCompare(e.attributes,g.attributes,!0),b&&(e.attributes["class"]=b)),"string"==typeof a&&(this._.cachedChecks[f]=c),c},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var e,f=a.slice();if(this.check(D[c]))return c;for(d||(f=f.reverse());e=f.pop();)if(this.check(e))return b[e];return CKEDITOR.ENTER_BR}}(),clone:function(){var a=new CKEDITOR.filter,b=CKEDITOR.tools.clone;return a.allowedContent=b(this.allowedContent),a._.allowedRules=b(this._.allowedRules),a.disallowedContent=b(this.disallowedContent),a._.disallowedRules=b(this._.disallowedRules),a._.transformations=b(this._.transformations),a.disabled=this.disabled,a.editor=this.editor,a},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var E,F={styles:1,attributes:1,classes:1},G={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},H=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,I={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},J=/^cke:(object|embed|param)$/,K=/^(object|embed|param)$/;E=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(c=c||b,!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(c=c||b,!(c in a.attributes)){var d=a.styles[b],e=d&&d.match(/^(\d+)(?:\.\d*)?px$/);e?a.attributes[c]=e[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;"left"!=b&&"right"!=b||(a.styles["float"]=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];"left"!=b&&"right"!=b||(a.attributes.align=b)}delete a.styles["float"]},splitBorderShorthand:function(a){if(a.styles.border){var b=CKEDITOR.tools.style.parse.border(a.styles.border);b.color&&(a.styles["border-color"]=b.color),b.style&&(a.styles["border-style"]=b.style),b.width&&(a.styles["border-width"]=b.width),delete a.styles.border}},listTypeToStyle:function(a){if(a.attributes.type)switch(a.attributes.type){case"a":a.styles["list-style-type"]="lower-alpha";break;case"A":a.styles["list-style-type"]="upper-alpha";break;case"i":a.styles["list-style-type"]="lower-roman";break;case"I":a.styles["list-style-type"]="upper-roman";break;case"1":a.styles["list-style-type"]="decimal";break;default:a.styles["list-style-type"]=a.attributes.type}},splitMarginShorthand:function(a){function b(b){a.styles["margin-top"]=c[b[0]],a.styles["margin-right"]=c[b[1]],a.styles["margin-bottom"]=c[b[2]],a.styles["margin-left"]=c[b[3]]}if(a.styles.margin){var c=a.styles.margin.match(/(auto|0|(?:\-?[\.\d]+(?:\w+|%)))/g)||["0px"];switch(c.length){case 1:b([0,0,0,0]);break;case 2:b([0,1,0,1]);break;case 3:b([0,1,2,1]);break;case 4:b([0,1,2,3])}delete a.styles.margin}},matchesStyle:w,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c,d,e,f,g=b.getDefinition(),h=g.styles,i=g.attributes;a.name=g.element;for(c in i)if("class"==c)for(g=a.classes.join("|"),e=i[c].split(/\s+/);f=e.pop();)-1==g.indexOf(f)&&a.classes.push(f);else a.attributes[c]=i[c];for(d in h)a.styles[d]=h[d]}}}}(),function(){CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function b(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;a||!c?b.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,b.call(this)},c,this)}},add:function(a,b){var c=a.getCustomData("focusmanager");if(!c||c!=this){c&&c.remove(a);var c="focus",d="blur";b&&(CKEDITOR.env.ie?(c="focusin",d="focusout"):CKEDITOR.event.useCapture=1);var e={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(c,e.focus,this),a.on(d,e.blur,this),b&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",e)}},remove:function(a){a.removeCustomData("focusmanager");var b=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",b.blur),a.removeListener("focus",b.focus)}}}(),CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,b=function(b){b=b.data;var c=b.getKeystroke(),d=this.keystrokes[c],e=this._.editor;return a=!1===e.fire("key",{keyCode:c,domEvent:b}),a||(d&&(a=!1!==e.execCommand(d,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[c])),a&&b.preventDefault(!0),!a},c=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",b,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",c,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,b,c){a&&CKEDITOR.lang.languages[a]||(a=this.detect(b,a));var d=this;b=function(){d[a].dir=d.rtl[a]?"rtl":"ltr",c(a,d[a])},this[a]?b():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),b,this)},detect:function(a,b){var c=this.languages;b=b||navigator.userLanguage||navigator.language||a;var d=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=d[1],d=d[2];return c[e+"-"+d]?e=e+"-"+d:c[e]||(e=null),CKEDITOR.lang.detect=e?function(){return e}:function(a){return a},e||a}}}(),CKEDITOR.scriptLoader=function(){var a={},b={};return{load:function(c,d,e,f){var g="string"==typeof c;g&&(c=[c]),e||(e=CKEDITOR);var h=c.length,i=h,j=[],k=[],l=function(a){d&&(g?d.call(e,a):d.call(e,j,k))};if(0===i)l(!0);else{var m=function(a,b){(b?j:k).push(a),0>=--i&&(f&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),l(b))},n=function(c,d){a[c]=1;var e=b[c];delete b[c];for(var f=0;f<e.length;f++)e[f](c,d)},o=function(c){if(a[c])m(c,!0);else{var e=b[c]||(b[c]=[]);if(e.push(m),!(1<e.length)){var f=new CKEDITOR.dom.element("script");f.setAttributes({type:"text/javascript",src:c}),d&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?f.$.onreadystatechange=function(){"loaded"!=f.$.readyState&&"complete"!=f.$.readyState||(f.$.onreadystatechange=null,n(c,!0))}:(f.$.onload=function(){setTimeout(function(){f.$.onload=null,f.$.onerror=null,n(c,!0)},0)},f.$.onerror=function(){f.$.onload=null,f.$.onerror=null,n(c,!1)})),f.appendTo(CKEDITOR.document.getHead())}}};f&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var p=0;p<h;p++)o(c[p])}},queue:function(){function a(){var a;(a=b[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var b=[];return function(c,d){var e=this;b.push({scriptUrl:c,callback:function(){d&&d.apply(this,arguments),b.shift(),a.call(e)}}),1==b.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,b){this.basePath=a,this.fileName=b,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,b){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var c=this.registered[a]=b||{};return c.name=a,c.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",c),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(b&&b.dir||this.basePath+a+"/")},getFilePath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(b?b.file:this.fileName+".js"))},addExternal:function(a,b,c){c||(b=b.replace(/[^\/]+$/,function(a){return c=a,""})),c=c||this.fileName+".js",a=a.split(",");for(var d=0;d<a.length;d++)this.externals[a[d]]={dir:b,file:c}},load:function(a,b,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var d=this.loaded,e=this.registered,f=[],g={},h={},i=0;i<a.length;i++){var j=a[i];if(j)if(d[j]||e[j])h[j]=this.get(j);else{var k=this.getFilePath(j);f.push(k),k in g||(g[k]=[]),g[k].push(j)}}CKEDITOR.scriptLoader.load(f,function(a,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+g[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var f=0;f<a.length;f++)for(var i=g[a[f]],j=0;j<i.length;j++){var k=i[j];h[k]=this.get(k),d[k]=1}b.call(c,h)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var b={};return function(c,d,e){var f={},g=function(c){a.call(this,c,function(a){CKEDITOR.tools.extend(f,a);var c,h=[];for(c in a){var i=a[c],j=i&&i.requires;if(!b[c]){if(i.icons)for(var k=i.icons.split(","),l=k.length;l--;)CKEDITOR.skin.addIcon(k[l],i.path+"icons/"+(CKEDITOR.env.hidpi&&i.hidpi?"hidpi/":"")+k[l]+".png");i.isSupportedEnvironment=i.isSupportedEnvironment||function(){return!0},b[c]=1}if(j)for(j.split&&(j=j.split(",")),i=0;i<j.length;i++)f[j[i]]||h.push(j[i])}if(h.length)g.call(this,h);else{for(c in f)i=f[c],i.onLoad&&!i.onLoad._called&&(!1===i.onLoad()&&delete f[c],i.onLoad._called=1);d&&d.call(e||window,f)}},this)};g.call(this,c)}}),CKEDITOR.plugins.setLang=function(a,b,c){var d=this.get(a);a=d.langEntries||(d.langEntries={}),d=d.lang||(d.lang=[]),d.split&&(d=d.split(",")),-1==CKEDITOR.tools.indexOf(d,b)&&d.push(b),a[b]=c},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,b,c){c.name=a.toLowerCase();var d=this.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(d,c)},get:function(a){return this.instances[a]},create:function(a){var b=this.items[a],c=b&&this._.handlers[b.type],d=b&&b.command&&this.editor.getCommand(b.command),c=c&&c.create.apply(this,b.args);return this.instances[a]=c,d&&d.uiItems.push(c),c&&!c.type&&(c.type=b.type),c},addHandler:function(a,b){this._.handlers[a]=b},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,e,g){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!g)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!c(e,g))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');this.element=e,this.elementMode=g,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||b(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",d),this.on("selectionChange",function(a){f(this,a.data.path)}),this.on("activeFilterChange",function(){f(this,this.elementPath(),!0)}),this.on("mode",d),CKEDITOR.dom.selection.setupEditorOptimization(this),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var a=this.createRange();a.selectNodeContents(this.editable()),a.shrink(CKEDITOR.SHRINK_ELEMENT,!0),a.collapse(),this.getSelection().selectRanges([a])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){this.isDestroyed()||this.isDetached()||h(this,a)},0,this)}function b(){do var a="editor"+ ++o;while(CKEDITOR.instances[a]);return a}function c(a,b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function d(){var a,b=this.commands;for(a in b)e(this,b[a])}function e(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function f(a,b,c){if(b){var d,e,f=a.commands;for(e in f)d=f[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function g(a){var b=a.config.customConfig;if(!b)return!1;var b=CKEDITOR.getUrl(b),c=p[b]||(p[b]={});return c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&g(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=c.fn||CKEDITOR.editorConfig||function(){},g(a)}),!0}function h(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}c=a.config,a.readOnly=!!c.readOnly||(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"))),a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p),a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode,c.skin&&(CKEDITOR.skinName=c.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),i(a)}),b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig),g(a)||a.fireOnce("customConfigLoaded")}function i(a){CKEDITOR.skin.loadPart("editor",function(){j(a)})}function j(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", "),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),k(a)})}function k(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1),l(a)})}function l(a){function b(a){return a?(CKEDITOR.tools.isArray(a)&&(a=a.join(",")),a.replace(/\s/g,"")):""}var c=a.config,d=b(c.plugins),e=b(c.extraPlugins),f=b(c.removePlugins);if(e)var g=new RegExp("(?:^|,)(?:"+e.replace(/,/g,"|")+")(?=,|$)","g"),d=d.replace(g,""),d=d+(","+e);if(f)var h=new RegExp("(?:^|,)(?:"+f.replace(/,/g,"|")+")(?=,|$)","g"),d=d.replace(h,"");CKEDITOR.env.air&&(d+=",adobeair"),CKEDITOR.plugins.load(d.split(","),function(b){var d=[],e=[],f=[];a.plugins=CKEDITOR.tools.extend({},a.plugins,b);for(var g in b){var i,j=b[g],k=j.lang,l=null,m=j.requires;if(CKEDITOR.tools.isArray(m)&&(m=m.join(",")),m&&(i=m.match(h)))for(;m=i.pop();)CKEDITOR.error("editor-plugin-required",{plugin:m.replace(",",""),requiredBy:g});k&&!a.lang[g]&&(k.split&&(k=k.split(",")),0<=CKEDITOR.tools.indexOf(k,a.langCode)?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&0<=CKEDITOR.tools.indexOf(k,l)?l:0<=CKEDITOR.tools.indexOf(k,"en")?"en":k[0]),j.langEntries&&j.langEntries[l]?(a.lang[g]=j.langEntries[l],l=null):f.push(CKEDITOR.getUrl(j.path+"lang/"+l+".js"))),e.push(l),d.push(j)}CKEDITOR.scriptLoader.load(f,function(){if(!a.isDestroyed()&&!a.isDetached()){for(var b=["beforeInit","init","afterInit"],f=0;f<b.length;f++)for(var g=0;g<d.length;g++){var h=d[g];0===f&&e[g]&&h.lang&&h.langEntries&&(a.lang[h.name]=h.langEntries[e[g]]),h[b[f]]&&h[b[f]](a)}for(a.fireOnce("pluginsLoaded"),c.keystrokes&&a.setKeystroke(a.config.keystrokes),g=0;g<a.config.blockedKeystrokes.length;g++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[g]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)}})})}function m(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}function n(a,b){function c(a){var b=a.startContainer,c=a.endContainer;return!(!b.is||!(b.is("tr")||b.is("td")&&b.equals(c)&&a.endOffset===b.getChildCount()))}function d(a){var b=a.startContainer;return b.is("tr")?a.cloneContents():b.clone(!0)}for(var e,f,g,h=new CKEDITOR.dom.documentFragment,i=0;i<a.length;i++){var j=a[i],k=j.startContainer.getAscendant("tr",!0);c(j)?(e||(e=k.getAscendant("table").clone(),e.append(k.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),h.append(e),e=e.findOne("thead, tbody, tfoot")),f&&f.equals(k)||(f=k,g=k.clone(),e.append(g)),g.append(d(j))):h.append(j.cloneContents())}return e?h:b.getHtmlFromRange(a[0])}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var o=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(this[d])return CKEDITOR.warn("editor-plugin-conflict",{plugin:a,replacedWith:d}),!0}return!1}},addCommand:function(a,b){b.name=a.toLowerCase();var c=b instanceof CKEDITOR.command?b:new CKEDITOR.command(this,b);return this.mode&&e(this,c),this.commands[a]=c},_attachToForm:function(){function a(a){c.updateElement(),c._.required&&!d.getValue()&&!1===c.fire("required")&&a.data.preventDefault()}function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,e=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&e&&(e.on("submit",a),b(e.$.submit)&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(b){return function(){a(),b.apply?b.apply(this):b()}})),c.on("destroy",function(){e.removeListener("submit",a)}))},destroy:function(a){var b=CKEDITOR.filter.instances,c=this;this.fire("beforeDestroy"),!a&&m.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(b),function(a){a=b[a],c===a.editor&&a.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(a=this.getSelection(),!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b||{},command:c};return!(!c||c.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",d)||(d.returnValue=c.exec(d.commandData),c.async||!1===this.fire("afterCommandExec",d)))&&d.returnValue},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");return"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():""),a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot),!c&&d&&this.fire("saveSnapshot"),!e&&c||this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot"),e&&e.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();return b&&c&&0!==c.length?(b=n(c,b),a?b.getHtml():b):null},extractSelectedHtml:function(a,b){var c,d=this.editable(),e=this.getSelection().getRanges(),f=new CKEDITOR.dom.documentFragment;if(!d||0===e.length)return null;for(c=0;c<e.length;c++)f.append(d.extractHtmlFromRange(e[c],b));return b||this.getSelection().selectRanges([e[0]]),a?f.getHtml():f},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return m.call(this)},setKeystroke:function(){for(var a,b,c=this.keystrokeHandler.keystrokes,d=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],e=d.length;e--;)a=d[e],b=0,CKEDITOR.tools.isArray(a)&&(b=a[1],a=a[0]),b?c[a]=b:delete c[a]},getCommandKeystroke:function(a,b){var c="string"==typeof a?this.getCommand(a):a,d=[];if(c){var e=CKEDITOR.tools.object.findKey(this.commands,c),f=this.keystrokeHandler.keystrokes;if(c.fakeKeystroke)d.push(c.fakeKeystroke);else for(var g in f)f[g]===e&&d.push(g)}return b?d:d[0]||null},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,this.activeEnterMode==a&&this.activeShiftEnterMode==b||(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))},showNotification:function(a){alert(a)},isDetached:function(){return!!this.container&&this.container.isDetached()},isDestroyed:function(){return"destroyed"===this.status}}),CKEDITOR.editor._getEditorElement=function(a){if(!CKEDITOR.env.isCompatible)return null;var b=CKEDITOR.dom.element.get(a);return b?b.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:b.getEditor().name}),null):b:(CKEDITOR.error("editor-incorrect-element",{element:a}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--!?>)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,b={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var d,e,f,g=0;d=this._.htmlPartsRegex.exec(c);)if(e=d.index,e>g&&(g=c.substring(g,e),f?f.push(g):this.onText(g)),g=this._.htmlPartsRegex.lastIndex,!(e=d[1])||(e=e.toLowerCase(),f&&CKEDITOR.dtd.$cdata[e]&&(this.onCDATA(f.join("")),f=null),f))if(f)f.push(d[0]);else if(e=d[3]){if(e=e.toLowerCase(),!/="/.test(e)){var h,i={},j=d[4];if(d=!!d[5],j)for(;h=a.exec(j);){var k=h[1].toLowerCase();h=h[2]||h[3]||h[4]||"",i[k]=!h&&b[k]?k:CKEDITOR.tools.htmlDecodeAttr(h)}this.onTagOpen(e,i,d),!f&&CKEDITOR.dtd.$cdata[e]&&(f=[])}}else(e=d[2])&&this.onComment(e);else this.onTagClose(e);c.length>g&&this.onText(c.substring(g,c.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,b){b?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,b){"string"==typeof b&&(b=CKEDITOR.tools.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var b=this._.output.join("");return a&&this.reset(),b}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,b=CKEDITOR.tools.indexOf(a,this),c=this.previous,d=this.next;c&&(c.next=d),d&&(d.previous=c),a.splice(b,1),this.parent=null},replaceWith:function(a){var b=this.parent.children,c=CKEDITOR.tools.indexOf(b,this),d=a.previous=this.previous,e=a.next=this.next;d&&(d.next=a),e&&(e.previous=a),b[c]=a,a.parent=this.parent,this.parent=null},insertAfter:function(a){var b=a.parent.children,c=CKEDITOR.tools.indexOf(b,a),d=a.next;b.splice(c+1,0,this),this.next=a.next,this.previous=a,a.next=this,d&&(d.previous=this),this.parent=a.parent},insertBefore:function(a){var b=a.parent.children,c=CKEDITOR.tools.indexOf(b,a);b.splice(c,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),a.previous=this,this.parent=a.parent},getAscendant:function(a){for(var b=("function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a}),c=this.parent;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(b(c))return c;c=c.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}}(),CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,b){var c=this.value;return(c=a.onComment(b,c,this))?"string"!=typeof c?(this.replaceWith(c),!1):(this.value=c,!0):(this.remove(),!1)},writeHtml:function(a,b){b&&this.filter(b),a.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,b){if(!(this.value=a.onText(b,this.value,this)))return this.remove(),!1},writeHtml:function(a,b){b&&this.filter(b),a.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){
this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return!a.attributes["data-cke-survive"]&&("a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name])}var b=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},d=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),e={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(f,g,h){function i(a){var b;if(0<q.length)for(var c=0;c<q.length;c++){var d=q[c],e=d.name,f=CKEDITOR.dtd[e],g=s.name&&CKEDITOR.dtd[s.name];g&&!g[e]||a&&f&&!f[a]&&CKEDITOR.dtd[a]?e==s.name&&(l(s,s.parent,1),c--):(b||(j(),b=1),d=d.clone(),d.parent=s,s=d,q.splice(c,1),c--)}}function j(){for(;r.length;)l(r.shift(),s)}function k(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b,c=a.children.length,d=a.children[c-1];d&&d.type==CKEDITOR.NODE_TEXT&&((b=CKEDITOR.tools.rtrim(d.value))?d.value=b:a.children.length=c-1)}}function l(b,c,d){c=c||s||p;var e=s;void 0===b.previous&&(m(c,b)&&(s=c,o.onTagOpen(h,{}),b.returnPoint=c=s),k(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(u=!1),"textarea"==b.name&&(t=!1)),b.returnPoint?(s=b.returnPoint,delete b.returnPoint):s=d?c:e}function m(a,b){if((a==p||"body"==a.name)&&h&&(!a.name||CKEDITOR.dtd[a.name][h])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function n(a,b){return(a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent)&&(a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b)}var o=new CKEDITOR.htmlParser,p=g instanceof CKEDITOR.htmlParser.element?g:"string"==typeof g?new CKEDITOR.htmlParser.element(g):new CKEDITOR.htmlParser.fragment,q=[],r=[],s=p,t="textarea"==p.name,u="pre"==p.name;o.onTagOpen=function(e,f,g,h){if(f=new CKEDITOR.htmlParser.element(e,f),f.isUnknown&&g&&(f.isEmpty=!0),f.isOptionalClose=h,a(f))q.push(f);else{if("pre"==e)u=!0;else{if("br"==e&&u)return void s.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==e&&(t=!0)}if("br"==e)r.push(f);else{for(;h=(g=s.name)?CKEDITOR.dtd[g]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):d,!(f.isUnknown||s.isUnknown||h[e]);)if(s.isOptionalClose)o.onTagClose(g);else if(e in c&&g in c)g=s.children,(g=g[g.length-1])&&"li"==g.name||l(g=new CKEDITOR.htmlParser.element("li"),s),!f.returnPoint&&(f.returnPoint=s),s=g;else if(e in CKEDITOR.dtd.$listItem&&!n(e,g))o.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(g in b&&!n(e,g))!f.returnPoint&&(f.returnPoint=s),s=s.parent;else{if(g in CKEDITOR.dtd.$inline&&q.unshift(s),!s.parent){f.isOrphan=1;break}l(s,s.parent,1)}i(e),j(),f.parent=s,f.isEmpty?l(f):s=f}}},o.onTagClose=function(a){for(var b=q.length-1;0<=b;b--)if(a==q[b].name)return void q.splice(b,1);for(var c=[],d=[],e=s;e!=p&&e.name!=a;)e._.isBlockLike||d.unshift(e),c.push(e),e=e.returnPoint||e.parent;if(e!=p){for(b=0;b<c.length;b++){var f=c[b];l(f,f.parent)}s=e,e._.isBlockLike&&j(),l(e,e.parent),e==s&&(s=s.parent),q=q.concat(d)}"body"==a&&(h=!1)},o.onText=function(a){if(s._.hasInlineStarted&&!r.length||u||t||(a=CKEDITOR.tools.ltrim(a),0!==a.length)){var c=s.name,f=c?CKEDITOR.dtd[c]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):d;!t&&!f["#"]&&c in b?(o.onTagOpen(e[c]||""),o.onText(a)):(j(),i(),u||t||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),a=new CKEDITOR.htmlParser.text(a),m(s,a)&&this.onTagOpen(h,{},0,1),s.add(a))}},o.onCDATA=function(a){s.add(new CKEDITOR.htmlParser.cdata(a))},o.onComment=function(a){j(),i(),s.add(new CKEDITOR.htmlParser.comment(a))},o.parse(f);for(j();s!=p;)l(s,s.parent,1);return k(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id)for(c=this.getFilterContext(c),b&&!this.parent&&a.onRoot(c,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)!1===this.children[b].filter(a,c)&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();for(c&&!this.parent&&b&&b.onRoot(d,this),b&&this.filterChildren(b,!1,d),b=0,c=this.children,d=c.length;b<d;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||{}}}}(),function(){function a(){this.rules=[]}function b(b,c,d,e){var f,g;for(f in c)(g=b[f])||(g=b[f]=new a),g.add(c[f],d,e)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,this.rootRules=new a,b&&this.addRules(b,10)},proto:{addRules:function(a,c){var d;"number"==typeof c?d=c:c&&"priority"in c&&(d=c.priority),"number"!=typeof d&&(d=10),"object"!=typeof c&&(c={}),a.elementNames&&this.elementNameRules.addMany(a.elementNames,d,c),a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,d,c),a.elements&&b(this.elementsRules,a.elements,d,c),a.attributes&&b(this.attributesRules,a.attributes,d,c),a.text&&this.textRules.add(a.text,d,c),a.comment&&this.commentRules.add(a.comment,d,c),a.root&&this.rootRules.add(a.root,d,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,b){return this.elementNameRules.execOnName(a,b)},onAttributeName:function(a,b){return this.attributeNameRules.execOnName(a,b)},onText:function(a,b,c){return this.textRules.exec(a,b,c)},onComment:function(a,b,c){return this.commentRules.exec(a,b,c)},onRoot:function(a,b){return this.rootRules.exec(a,b)},onElement:function(a,b){for(var c,d=[this.elementsRules["^"],this.elementsRules[b.name],this.elementsRules.$],e=0;3>e;e++)if(c=d[e]){if(c=c.exec(a,b,this),!1===c)return null;if(c&&c!=b)return this.onNode(a,c);if(b.parent&&!b.name)break}return b},onNode:function(a,b){var c=b.type;return c==CKEDITOR.NODE_ELEMENT?this.onElement(a,b):c==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,b.value,b)):c==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,b.value,b)):null},onAttribute:function(a,b,c,d){return(c=this.attributesRules[c])?c.exec(a,d,b,this):d}}}),CKEDITOR.htmlParser.filterRulesGroup=a,a.prototype={add:function(a,b,c){this.rules.splice(this.findIndex(b),0,{value:a,priority:b,options:c})},addMany:function(a,b,c){for(var d=[this.findIndex(b),0],e=0,f=a.length;e<f;e++)d.push({value:a[e],priority:b,options:c});this.rules.splice.apply(this.rules,d)},findIndex:function(a){for(var b=this.rules,c=b.length-1;0<=c&&a<b[c].priority;)c--;return c+1},exec:function(a,b){var c,d,e,f,g=b instanceof CKEDITOR.htmlParser.node||b instanceof CKEDITOR.htmlParser.fragment,h=Array.prototype.slice.call(arguments,1),i=this.rules,j=i.length;for(f=0;f<j;f++)if(g&&(c=b.type,d=b.name),e=i[f],!(a.nonEditable&&!e.options.applyToAll||a.nestedEditable&&e.options.excludeNestedEditable)){if(e=e.value.apply(null,h),!1===e||g&&e&&(e.name!=d||e.type!=c))return e;null!=e&&(h[0]=b=e)}return b},execOnName:function(a,b){for(var c,d=0,e=this.rules,f=e.length;b&&d<f;d++)c=e[d],a.nonEditable&&!c.options.applyToAll||a.nestedEditable&&c.options.excludeNestedEditable||(b=b.replace(c.value[0],c.value[1]));return b}}}(),function(){function a(a,b){function h(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function i(a,b){return function(e){if(e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var g,i,k=[],l=c(e);if(l)for(j(l,1)&&k.push(l);l;)f(l)&&(g=d(l))&&j(g)&&((i=d(g))&&!f(i)?k.push(g):(h(m).insertAfter(g),g.remove())),l=l.previous;for(l=0;l<k.length;l++)k[l].remove();(k=!a||!1!==("function"==typeof b?b(e):b))&&((m||CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(m||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||e.name in CKEDITOR.dtd.tr||e.name in CKEDITOR.dtd.$listItem))?(k=c(e),k=!k||"form"==e.name&&"input"==k.name):k=!1),k&&e.add(h(a))}}}function j(a,b){if((!m||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return!!(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(r))&&(c.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a),a.value=c[0]),!CKEDITOR.env.needsBrFiller&&m&&(!b||a.parent.name in n)||!m&&((c=a.previous)&&"br"==c.name||!c||f(c))))}var k,l={elements:{}},m="html"==b,n=CKEDITOR.tools.extend({},v);for(k in n)"#"in t[k]||delete n[k];for(k in n)l.elements[k]=i(m,a.config.fillEmptyBlocks);return l.root=i(m,!1),l.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var c=b.attributes;if("data-cke-bogus"in c||"data-cke-eol"in c)delete c["data-cke-bogus"];else{for(c=b.next;c&&e(c);)c=c.next;var i=d(b);!c&&f(b.parent)?g(b.parent,h(a)):f(c)&&i&&!f(i)&&h(a).insertBefore(c)}}}}(m),l}function b(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b&&(a==CKEDITOR.ENTER_DIV?"div":"p")}function c(a){for(a=a.children[a.children.length-1];a&&e(a);)a=a.previous;return a}function d(a){for(a=a.previous;a&&e(a);)a=a.previous;return a}function e(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function f(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in v||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function g(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&(c.next=b,b.previous=c)}function h(a){a=a.attributes,"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function i(a){switch(a=a.attributes,a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function j(a){return a.replace(A,function(a,b,c){return"<"+b+c.replace(B,function(a,b){return C.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+">"})}function k(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+n(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function l(a){return a.replace(F,function(a,b){return decodeURIComponent(b)})}function m(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(a){return"<!--"+s+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function n(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function o(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function p(a,b){var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"});for(var g=0;g<d.length;g++)a=a.replace(d[g],function(a){return a=a.replace(f,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(f,function(a,b,d){return"<!--"+s+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){return e[e.id]=decodeURIComponent(b),"{cke_protected_"+e.id++ +"}"})}),a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,e){return"<"+c+d+">"+o(n(e),b)+"</"+c+">"})}var q;CKEDITOR.htmlDataProcessor=function(c){var d,e,f=this;this.editor=c,this.dataFilter=d=new CKEDITOR.htmlParser.filter,this.htmlFilter=e=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,d.addRules(w),d.addRules(x,{applyToAll:!0}),d.addRules(a(c,"data"),{applyToAll:!0}),e.addRules(y),e.addRules(z,{applyToAll:!0}),e.addRules(a(c,"html"),{applyToAll:!0}),c.on("toHtml",function(a){a=a.data;var d,e=a.dataValue,e=q(e),e=p(e,c),e=k(e,E),e=j(e),e=k(e,D),e=e.replace(G,"$1cke:$2"),e=e.replace(I,"<cke:$1$2></cke:$1>"),e=e.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),e=e.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");d=a.context||c.editable().getName();var f;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==d&&(d="div",e="<pre>"+e+"</pre>",f=1),d=c.document.createElement(d),d.setHtml("a"+e),e=d.getHtml().substr(1),e=e.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),f&&(e=e.replace(/^<pre>|<\/pre>$/gi,"")),e=e.replace(H,"$1$2"),e=l(e),e=n(e),d=!1!==a.fixForBody&&b(a.enterMode,c.config.autoParagraph),e=CKEDITOR.htmlParser.fragment.fromHtml(e,a.context,d),d&&(f=e,!f.children.length&&CKEDITOR.dtd[f.name][d]&&(d=new CKEDITOR.htmlParser.element(d),f.add(d))),a.dataValue=e},null,null,5),c.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&c.fire("dataFiltered")},null,null,6),c.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10),c.on("toHtml",function(a){a=a.data;var b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c),b=c.getHtml(!0),a.dataValue=m(b)},null,null,15),c.on("toDataFormat",function(a){var d=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(d=d.replace(/^<br *\/?>/i,"")),a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(d,a.data.context,b(a.data.enterMode,c.config.autoParagraph))},null,null,5),c.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10),c.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11),c.on("toDataFormat",function(a){var b=a.data.dataValue,d=f.writer;d.reset(),b.writeChildrenHtml(d),b=d.getHtml(!0),b=n(b),b=o(b,c),a.data.dataValue=b},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var e,f,g,h,i=this.editor;return b&&"object"==typeof b?(e=b.context,c=b.fixForBody,d=b.dontFilter,f=b.filter,g=b.enterMode,h=b.protectedWhitespaces):e=b,e||null===e||(e=i.editable().getName()),i.fire("toHtml",{dataValue:a,context:e,fixForBody:c,dontFilter:d,filter:f||i.filter,enterMode:g||i.enterMode,protectedWhitespaces:h}).dataValue},toDataFormat:function(a,b){var c,d,e;return b&&(c=b.context,d=b.filter,e=b.enterMode),c||null===c||(c=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:e||this.editor.enterMode}).dataValue},protectSource:function(a){return p(a,this.editor)},unprotectSource:function(a){return o(a,this.editor)}};var r=/(?:&nbsp;|\xa0)$/,s="{cke_protected}",t=CKEDITOR.dtd,u="caption colgroup col thead tfoot tbody".split(" "),v=CKEDITOR.tools.extend({},t.$blockLimit,t.$block),w={elements:{input:h,textarea:h}},x={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(a){if(a.attributes&&a.attributes.src){var b=a.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==b.indexOf("javascript")&&0!==b.indexOf("data")||(a.attributes["data-cke-pa-src"]=a.attributes.src,delete a.attributes.src)}}}},y={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},z={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c,d=["name","href","src"],e=0;e<d.length;e++)c="data-cke-saved-"+d[e],c in b&&delete b[d[e]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(u,a.name),d=CKEDITOR.tools.indexOf(u,b.name)),-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1),c>d?1:-1})},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&g(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:i,textarea:i},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(z.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var A=/<(a|area|img|input|source)\b([^>]*)>/gi,B=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,C=/^(href|src|name)$/i,D=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,E=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,F=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,G=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,H=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,I=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;q=function(){function a(a){return CKEDITOR.tools.array.reduce(a.split(""),function(a,c){var d=c.toLowerCase(),e=c.toUpperCase(),f=b(d);return d!==e&&(f+="|"+b(e)),a+("("+f+")")},"")}function b(a){var b;b=a.charCodeAt(0);var c=b.toString(16);b={htmlCode:"&#"+b+";?",hex:"&#x0*"+c+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[a]};for(var d in b)b[d]&&(a+="|"+b[d]);return a}var c=new RegExp("("+a("<cke:encoded>")+"(.*?)"+a("</cke:encoded>")+")|("+a("<")+a("/")+"?"+a("cke:encoded>")+")","gi"),d=new RegExp("(("+a("{cke_protected")+")(_[0-9]*)?"+a("}")+")","gi");return function(a){return a.replace(c,"").replace(d,"")}}()}(),CKEDITOR.htmlParser.element=function(a,b){this.name=a,this.attributes=b||{},this.children=[];var c=a||"",d=c.match(/^cke:(.*)/);d&&(c=d[1]),c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(a){var b={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){"font-family"==c&&(d=d.replace(/["']/g,"")),b[c.toLowerCase()]=d}),{rules:b,populate:function(a){var b=this.toString();b&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",b):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=b:a.style=b)},toString:function(){var a,c=[];for(a in b)b[a]&&c.push(a,":",b[a],";");return c.join("")}}},function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var b=function(a,b){return a=a[0],b=b[0],a<b?-1:a>b?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var c,d,e=this;for(b=e.getFilterContext(b),e.parent||a.onRoot(b,e);;){if(c=e.name,!(d=a.onElementName(b,c)))return this.remove(),!1;if(e.name=d,!(e=a.onElement(b,e)))return this.remove(),!1;if(e!==this)return this.replaceWith(e),!1;if(e.name==c)break;if(e.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(e),!1;if(!e.name)return this.replaceWithChildren(),!1}c=e.attributes;var f,g;for(f in c){for(d=c[f];;){if(!(g=a.onAttributeName(b,f))){delete c[f];break}if(g==f)break;delete c[f],f=g}g&&(!1===(d=a.onAttribute(b,e,g,d))?delete c[g]:c[g]=d)}return e.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:c.filterChildren,writeHtml:function(a,c){c&&this.filter(c);var d,e,f=this.name,g=[],h=this.attributes;a.openTag(f,h);for(d in h)g.push([d,h[d]]);for(a.sortAttributes&&g.sort(b),d=0,e=g.length;d<e;d++)h=g[d],a.attribute(h[0],h[1]);a.openTagClose(f,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(f)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var c=0,d=this.children.length;c<d;++c)if(b(this.children[c]))return this.children[c];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,c=a.length;b<c;++b)a[b].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),c=this.clone(),d=0;d<b.length;++d)b[d].parent=c;return c.children=b,b[0]&&(b[0].previous=null),0<a&&(this.children[a-1].next=null),this.parent.add(c,this.getIndex()+1),c},find:function(a,b){void 0===b&&(b=!1);var c,d=[];for(c=0;c<this.children.length;c++){var e=this.children[c];"function"==typeof a&&a(e)?d.push(e):"string"==typeof a&&e.name===a&&d.push(e),b&&e.find&&(d=d.concat(e.find(a,b)))}return d},findOne:function(a,b){var c=null,d=CKEDITOR.tools.array.find(this.children,function(d){var e="function"==typeof a?a(d):d.name===a;return e||!b?e:(d.children&&d.findOne&&(c=d.findOne(a,!0)),!!c)});return c||d||null},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return!!b&&new RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b)},getFilterContext:function(a){var b=[];if(a||(a={nonEditable:!1,nestedEditable:!1}),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0),b.length){a=CKEDITOR.tools.copy(a);for(var c=0;c<b.length;c+=2)a[b[c]]=b[c+1]}return a}},!0)}(),function(){var a=/{([^}]+)}/g;CKEDITOR.template=function(a){this.source="function"==typeof a?a:String(a)},CKEDITOR.template.prototype.output=function(b,c){var d=("function"==typeof this.source?this.source(b):this.source).replace(a,function(a,c){return void 0!==b[c]?b[c]:a});return c?c.push(d):d}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){function b(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[a.name]=a,a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))}),a.on("blur",b),a.on("destroy",b),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(b,c){var d=a[b];return d?d:(d={name:b,source:c},CKEDITOR.fire("template",d),a[b]=new CKEDITOR.template(d.source))},CKEDITOR.getTemplate=function(b){return a[b]}}(),function(){var a=[];CKEDITOR.addCss=function(b){a.push(b)},CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(a,b){if(a=CKEDITOR.editor._getEditorElement(a),!a)return null;var c=new CKEDITOR.editor(b,a,CKEDITOR.ELEMENT_MODE_INLINE),d=a.is("textarea")?a:null;return d?(c.setData(d.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!c.readOnly+'" class="cke_textarea_inline">'+d.getValue()+"</div>",CKEDITOR.document),a.insertAfter(d),d.hide(),d.$.form&&c._attachToForm()):(b&&"undefined"!=typeof b.readOnly&&!b.readOnly&&a.setAttribute("contenteditable","true"),c.setData(a.getHtml(),null,!0)),c.on("loaded",function(){c.fire("uiReady"),c.editable(a),c.container=a,c.ui.contentsElement=a,c.setData(c.getData(1)),c.resetDirty(),c.fire("contentDom"),c.mode="wysiwyg",c.fire("mode"),c.status="ready",c.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,c)},null,null,1e4),c.on("destroy",function(){var a=c.container;d&&a&&(a.clearCustomData(),a.remove()),d&&d.show(),c.element.clearCustomData(),delete c.element}),c},CKEDITOR.inlineAll=function(){var a,b,c;for(c in CKEDITOR.dtd.$editable)for(var d=CKEDITOR.document.getElementsByTag(c),e=0,f=d.count();e<f;e++)a=d.getItem(e),"true"!=a.getAttribute("contenteditable")||a.getEditor()||(b={element:a,config:{}},!1!==CKEDITOR.fire("inline",b)&&CKEDITOR.inline(a,b.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function a(a,d,e,f){if(a=CKEDITOR.editor._getEditorElement(a),!a)return null;var g=new CKEDITOR.editor(d,a,f);return f==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),g._.required=a.hasAttribute("required"),a.removeAttribute("required")),e&&g.setData(e,null,!0),g.on("loaded",function(){g.isDestroyed()||g.isDetached()||(c(g),f==CKEDITOR.ELEMENT_MODE_REPLACE&&g.config.autoUpdateElement&&a.$.form&&g._attachToForm(),g.setMode(g.config.startupMode,function(){g.resetDirty(),g.status="ready",g.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,g)}))}),g.on("destroy",b),g}function b(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function c(a){var b=a.name,c=a.element,d=a.elementMode,e=a.fire("uiSpace",{space:"top",html:""}).html,f=a.fire("uiSpace",{space:"bottom",html:""}).html,g=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),b=CKEDITOR.dom.element.createFromHtml(g.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:e?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+e+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:f?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+f+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));d==CKEDITOR.ELEMENT_MODE_REPLACE?(c.hide(),b.insertAfter(c)):c.append(b),a.container=b,a.ui.contentsElement=a.ui.space("contents"),e&&a.ui.space("top").unselectable(),f&&a.ui.space("bottom").unselectable(),c=a.config.width,d=a.config.height,c&&b.setStyle("width",CKEDITOR.tools.cssLength(c)),d&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(d)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()}),a.fireOnce("uiReady")}CKEDITOR.replace=function(b,c){return a(b,c,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(b,c,d){return a(b,c,d,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,d=a[b];if(d.name||d.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(d.className))continue}else if("function"==typeof arguments[0]&&(c={},!1===arguments[0](d,c)))continue;this.replace(d,c)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var c=this,d=this._.modes;if(a!=c.mode&&d&&d[a]){if(c.fire("beforeSetMode",a),c.mode){var e,f=c.checkDirty(),d=c._.previousModeData,g=0;c.fire("beforeModeUnload"),c.editable(0),c._.previousMode=c.mode,c._.previousModeData=e=c.getData(1),"source"==c.mode&&d==e&&(c.fire("lockSnapshot",{forceUpdate:!0}),g=1),c.ui.space("contents").setHtml(""),c.mode=""}else c._.previousModeData=c.getData(1);this._.modes[a](function(){c.mode=a,void 0!==f&&!f&&c.resetDirty(),g?c.fire("unlockSnapshot"):"wysiwyg"==a&&c.fire("saveSnapshot"),setTimeout(function(){c.isDestroyed()||c.isDetached()||(c.fire("mode"),b&&b.call(c))},0)})}},CKEDITOR.editor.prototype.resize=function(a,b,c,d){var e=this.container,f=this.ui.space("contents"),g=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;d=d?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):e,(a||0===a)&&(a=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(a))),d.setSize("width",a,!0),g&&(g.style.width="1%"),b=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(b));var h=(d.$.offsetHeight||0)-(f.$.clientHeight||0),e=Math.max(b-(c?0:h),0);b=c?b+h:b,f.setStyle("height",CKEDITOR.tools.cssLength(e)),g&&(g.style.width="100%"),this.fire("resize",{outerHeight:b,contentsHeight:e,outerWidth:a||d.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var c,e=a.editor,f=a.data.path,h=f.blockLimit,i=a.data.selection,j=i.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(i=b(i,f))&&(i.appendBogus(),c=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.edge&&e._.previousActive),g(e,f.block,h)&&j.collapsed&&!j.getCommonAncestor().isReadOnly()&&(f=j.clone(),f.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),h=new CKEDITOR.dom.walker(f),h.guard=function(a){return!d(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!h.checkForward()||f.checkStartOfBlock()&&f.checkEndOfBlock())&&(e=j.fixBlock(!0,e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(e=e.getFirst(d))&&e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()).match(/^(?:&nbsp;|\xa0)$/)&&e.remove(),c=1,a.cancel()),c&&j.select()}function b(a,b){if(a.isFake)return 0;var c=b.block||b.blockLimit,e=c&&c.getLast(d);return!c||!c.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||c.is("pre")||c.getBogus()?void 0:c;
}function c(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function d(a){return l(a)&&m(a)}function e(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function f(a){function b(a){return function(b,e){if(e&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(c=b),!(e||!d(b)||a&&o(b)))return!1}}var c,e=a.getRanges()[0];a=a.root;var f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var g=e.clone();if(g.collapse(1),g.setStartAt(a,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(g),a.guard=b(),a.checkBackward(),c)return g=e.clone(),g.collapse(),g.setEndAt(c,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(g),a.guard=b(!0),c=!1,a.checkForward(),c}return null}function g(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}function h(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph&&(a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function i(a){a&&a.isEmptyInlineRemoveable()&&a.remove()}function j(a){var b=a.editor;b.getSelection().scrollIntoView(),setTimeout(function(){b.fire("saveSnapshot")},0)}function k(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}var l,m,n,o,p,q,r,s,t,u;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))return void a.focus();CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var b=this.$.scrollTop;this.$.focus(),this.$.scrollTop=b}else this.$.focus();else this.$.setActive()}catch(c){if(!CKEDITOR.env.ie)throw c}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var c=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=e(b,this),c[0]=a,c[1]=b),CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);return this._.listeners.push(b),b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a,b,c=this._.attrChanges;for(b in c)c.hasOwnProperty(b)&&(a=c[b],null!==a?this.setAttribute(b,a):this.removeAttribute(b))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(a),"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=this.editor;d.focus(),d.fire("saveSnapshot"),c||(c=d.getSelection().getRanges()[0]),q(this,b||"html",a,c),c.select(),j(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){q(this,c||"html",a,b),this.editor.fire("afterInsertHtml",{intoRange:b})},insertElement:function(a,b){var c=this.editor;c.focus(),c.fire("saveSnapshot");var e=c.activeEnterMode,c=c.getSelection(),f=a.getName(),f=CKEDITOR.dtd.$block[f];b||(b=c.getRanges()[0]),this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return d(a)&&!o(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?b.moveToElementEditStart(f):b.moveToElementEditEnd(a):f||e==CKEDITOR.ENTER_BR||(f=b.fixBlock(!0,e==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(f)))),c.selectRanges([b]),j(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&(b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?r(b):b.startContainer.is(CKEDITOR.dtd.$list)&&s(b));var g,h;if(f)for(;(g=b.getCommonAncestor(0,1))&&(h=CKEDITOR.dtd[g.getName()])&&(!h||!h[e]);)if(g.getName()in CKEDITOR.dtd.span){var f=b.splitElement(g),j=b.createBookmark();i(g),i(f),b.moveToBookmark(j)}else b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());return b.insertNode(a),!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.status="detached",this.editor.setData(this.editor.getData(),{internal:!0}),this.clearListeners();try{this._.cleanCustomData()}catch(a){if(!CKEDITOR.env.ie||-2146828218!==a.number)throw a}this.editor.fire("contentDomUnload"),delete this.editor.document,delete this.editor.window,delete this.editor},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var a,b=c.getDocument().$,d=b.getSelection();a:if(d.anchorNode&&d.anchorNode==c.$)a=!0;else{if(CKEDITOR.env.webkit&&(a=c.getDocument().getActive())&&a.equals(c)&&!d.anchorNode){a=!0;break a}a=void 0}a&&(a=new CKEDITOR.dom.range(c),a.moveToElementEditStart(c),b=b.createRange(),b.setStart(a.startContainer.$,a.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,b=a.selection,d=c.getDocument().getActive();"None"==b.type&&d.equals(c)&&(b=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),b.moveToElementEditStart(c),b=b.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),a.moveToElementText(b.$),a.collapse(!0),a.select())}var c=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),b()):this.hasFocus?(this.focus(),a()):this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){return a.collapsed?new CKEDITOR.dom.documentFragment(a.document):(a={doc:this.getDocument(),range:a.clone()},t.eol.detect(a,this),t.bogus.exclude(a),t.cell.shrink(a),a.fragment=a.range.cloneContents(),t.tree.rebuild(a,this),t.eol.fix(a,this),new CKEDITOR.dom.documentFragment(a.fragment.$))},extractHtmlFromRange:function(a,b){var c=u,d={range:a,doc:a.document},e=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),e;a.enlarge(CKEDITOR.ENLARGE_INLINE,1),c.table.detectPurge(d),d.bookmark=a.createBookmark(),delete d.range;var f=this.editor.createRange();if(f.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),d.targetBookmark=f.createBookmark(),c.list.detectMerge(d,this),c.table.detectRanges(d,this),c.block.detectMerge(d,this),d.tableContentsRanges?(c.table.deleteRanges(d),a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d))),a.moveToBookmark(d.targetBookmark),a.optimize(),c.fixUneditableRangePosition(a),c.list.merge(d,this),c.table.purge(d,this),c.block.merge(d,this),b){if(c=a.startPath(),d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var g,d=c.block.getElementsByTag("span"),f=0;if(d)for(;g=d.getItem(f++);)if(!m(g)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),n(a.startContainer)&&a.startContainer.appendBogus();return a.startContainer.mergeSiblings(),e},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(p,function(a,b){return b})),a.setData(b,null,1)},this),this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this),this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this),this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this),this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(a.readOnly),this.attachClass("cke_editable"),a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){a._.previousScrollTop=a.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var b=function(){var c=a.editable();null!=a._.previousScrollTop&&c.getDocument().equals(CKEDITOR.document)&&(c.$.scrollTop=a._.previousScrollTop,a._.previousScrollTop=null,this.removeListener("scroll",b))};this.on("scroll",b)}if(a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var e=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var g=a.config.contentsLangDirection;this.getDirection(1)!=g&&this.changeAttr("dir",g);var h=CKEDITOR.getCss();if(h){var g=e.getHead(),i=g.getCustomData("stylesheet");i?h!=i.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?i.$.styleSheet.cssText=h:i.setText(h)):(h=e.appendStyleText(h),h=new CKEDITOR.dom.element(h.ownerNode||h.owningElement),g.setCustomData("stylesheet",h),h.data("cke-temp",1))}g=e.getCustomData("stylesheet_ref")||0,e.setCustomData("stylesheet_ref",g+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),this.attachListener(this,"click",function(a){a=a.data;var b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var j={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c,d=b.data.domEvent.getKey();if(b=a.getSelection(),0!==b.getRanges().length){if(d in j){var e,g,h,i,k=b.getRanges()[0],m=k.startPath(),d=8==d;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(e=b.getSelectedElement())||(e=f(b))?(a.fire("saveSnapshot"),k.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),k.select(),a.fire("saveSnapshot"),c=1):k.collapsed&&((g=m.block)&&(i=g[d?"getPrevious":"getNext"](l))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table")&&k[d?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),k[d?"checkEndOfBlock":"checkStartOfBlock"]()&&g.remove(),k["moveToElementEdit"+(d?"End":"Start")](i),k.select(),a.fire("saveSnapshot"),c=1):m.blockLimit&&m.blockLimit.is("td")&&(h=m.blockLimit.getAscendant("table"))&&k.checkBoundaryOfElement(h,d?CKEDITOR.START:CKEDITOR.END)&&(i=h[d?"getPrevious":"getNext"](l))?(a.fire("saveSnapshot"),k["moveToElementEdit"+(d?"End":"Start")](i),k.checkStartOfBlock()&&k.checkEndOfBlock()?i.remove():k.select(),a.fire("saveSnapshot"),c=1):(h=m.contains(["td","th","caption"]))&&k.checkBoundaryOfElement(h,d?CKEDITOR.START:CKEDITOR.END)&&(c=1))}return!c}}),a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in j&&!this.getFirst(d)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())}),this.attachListener(this,"dblclick",function(b){return!a.readOnly&&(b={element:b.data.getTarget()},void a.fire("doubleclick",b))}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&!b.isReadOnly()&&a.getSelection().selectElement(b)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getAscendant("table")&&!b.getOuterHtml().replace(p,""))){var c=a.createRange();c.moveToElementEditStart(b),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c=b.data.domEvent.getKey();if(c in j&&(b=a.getSelection(),0!==b.getRanges().length)){var c=8==c,d=b.getRanges()[0];if(b=d.startPath(),d.collapsed)a:{var e=b.block;if(e&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(e,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var f=d.startContainer.getChild(d.startOffset-(c?1:0));if(f&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("hr")){a.fire("saveSnapshot"),f.remove(),b=!0;break a}}if(d=d.startPath().block,!d||d&&d.contains(e))b=void 0;else{a.fire("saveSnapshot");var g;(g=(c?d:e).getBogus())&&g.remove(),g=a.getSelection(),f=g.createBookmarks(),(c?e:d).moveChildren(c?d:e,!1),b.lastElement.mergeSiblings(),k(e,d,!c),g.selectBookmarks(f),b=!0}}else b=!1}else c=d,g=b.block,d=c.endPath().block,g&&d&&!g.equals(d)?(a.fire("saveSnapshot"),(e=g.getBogus())&&e.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),d.getParent()&&(d.moveChildren(g,!1),b.lastElement.mergeSiblings(),k(g,d,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;return a.getSelection().scrollIntoView(),a.fire("saveSnapshot"),!1}},this,null,100)}},getUniqueId:function(){var a;try{this._.expandoNumber=a=CKEDITOR.dom.domObject.prototype.getUniqueId.call(this)}catch(b){a=this._&&this._.expandoNumber}return a}},_:{cleanCustomData:function(){this.removeClass("cke_editable"),this.restoreAttrs();for(var a=this.removeCustomData("classes");a&&a.length;)this.removeClass(a.pop());if(!this.is("textarea")){var a=this.getDocument(),b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:arguments.length?(a?b=a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),b=null),this._.editable=b):b},CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data,a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox"),a.changeAttr("aria-multiline","true"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+d+"</span>");c.append(d),a.changeAttr("aria-describedby",e)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),l=CKEDITOR.dom.walker.whitespaces(!0),m=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.empty(),o=CKEDITOR.dom.walker.bogus(),p=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,q=function(){function a(a){return a.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var e,f,g,h,i=[],j=d.range.startContainer;e=d.range.startPath();for(var j=l[j.getName()],k=0,m=c.getChildren(),n=m.count(),o=-1,p=-1,q=0,r=e.contains(l.$list);k<n;++k)e=m.getItem(k),a(e)?(g=e.getName(),r&&g in CKEDITOR.dtd.$list?i=i.concat(b(e,d)):(h=!!j[g],"br"!=g||!e.data("cke-eol")||k&&k!=n-1||(q=(f=k?i[k-1].node:m.getItem(k+1))&&(!a(f)||!f.is("br")),f=f&&a(f)&&l.$block[f.getName()]),-1!=o||h||(o=k),h||(p=k),i.push({isElement:1,isLineBreak:q,isBlock:e.isBlockBoundary(),hasBlockSibling:f,node:e,name:g,allowed:h}),f=q=0)):i.push({isElement:0,node:e,allowed:1});return-1<o&&(i[o].firstNotAllowed=1),-1<p&&(i[p].lastNotAllowed=1),i}function c(b,d){var e,f=[],g=b.getChildren(),h=g.count(),i=0,j=l[d],k=!b.is(l.$inline)||b.is("br");for(k&&f.push(" ");i<h;i++)e=g.getItem(i),a(e)&&!e.is(j)?f=f.concat(c(e,d)):f.push(e);return k&&f.push(" "),f}function e(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function f(b){return b&&a(b)&&(b.is(l.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function j(b,c,d,e){var f,g,h=b.clone();h.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(f=new CKEDITOR.dom.walker(h).next())&&a(f)&&m[f.getName()]&&(g=f.getPrevious())&&a(g)&&!g.getParent().equals(b.startContainer)&&d.contains(g)&&e.contains(f)&&f.isIdentical(g)&&(f.moveChildren(g),f.remove(),j(b,c,d,e))}function k(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var e=c.endContainer.getChild(c.endOffset),f=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]),f&&d(f,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var l=CKEDITOR.dtd,m={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},n={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},o=CKEDITOR.tools.extend({},l.$inline);return delete o.br,function(m,q,r,s){var t,u=m.editor,v=!1;if("unfiltered_html"==q&&(q="html",v=!0),!s.checkReadOnly()){var w=new CKEDITOR.dom.elementPath(s.startContainer,s.root).blockLimit||s.root;q={type:q,dontFilter:v,editable:m,editor:u,range:s,blockLimit:w,mergeCandidates:[],zombies:[]};var x,y,z,A,B,v=q.range,w=q.mergeCandidates,C="html"===q.type;if("text"==q.type&&v.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(y=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",v.document),v.insertNode(y),v.setStartAfter(y)),z=new CKEDITOR.dom.elementPath(v.startContainer),q.endPath=A=new CKEDITOR.dom.elementPath(v.endContainer),!v.collapsed){x=A.block||A.blockLimit;var D=v.getCommonAncestor();x&&!x.equals(D)&&!x.contains(D)&&v.checkEndOfBlock()&&q.zombies.push(x),v.deleteContents()}for(;(B=e(v))&&a(B)&&B.isBlockBoundary()&&z.contains(B);)v.moveToPosition(B,CKEDITOR.POSITION_BEFORE_END);for(j(v,q.blockLimit,z,A),y&&(v.setEndBefore(y),v.collapse(),y.remove()),y=v.startPath(),(x=y.contains(f,!1,1))&&(t=v.splitElement(x),q.inlineStylesRoot=x,q.inlineStylesPeak=y.lastElement),y=v.createBookmark(),C&&(i(x),i(t)),(x=y.startNode.getPrevious(d))&&a(x)&&f(x)&&w.push(x),(x=y.startNode.getNext(d))&&a(x)&&f(x)&&w.push(x),x=y.startNode;(x=x.getParent())&&f(x);)w.push(x);if(v.moveToBookmark(y),t=m.getHtml(),t=""===t||t.match(p),u.enterMode===CKEDITOR.ENTER_DIV&&t&&((u=m.getFirst())&&u.remove(),s.setStartAt(m,CKEDITOR.POSITION_AFTER_START),s.collapse(!0)),m=r){if(m=q.range,"text"==q.type&&q.inlineStylesRoot){for(s=q.inlineStylesPeak,u=s.getDocument().createText("{cke-peak}"),t=q.inlineStylesRoot.getParent();!s.equals(t);)u=u.appendTo(s.clone()),s=s.getParent();r=u.getOuterHtml().split("{cke-peak}").join(r)}if(s=q.blockLimit.getName(),/^\s+|\s+$/.test(r)&&"span"in CKEDITOR.dtd[s]){var E='<span data-cke-marker="1">&nbsp;</span>';r=E+r+E}if(r=q.editor.dataProcessor.toHtml(r,{context:null,fixForBody:!1,protectedWhitespaces:!!E,dontFilter:q.dontFilter,filter:q.editor.activeFilter,enterMode:q.editor.activeEnterMode}),s=m.document.createElement("body"),s.setHtml(r),E&&(s.getFirst().remove(),s.getLast().remove()),(E=m.startPath().block)&&(1!=E.getChildCount()||!E.getBogus()))a:{var F;if(1==s.getChildCount()&&a(F=s.getFirst())&&F.is(n)&&!F.hasAttribute("contenteditable")){for(E=F.getElementsByTag("*"),m=0,t=E.count();m<t;m++)if(u=E.getItem(m),!u.is(o))break a;F.moveChildren(F.getParent(1)),F.remove()}}q.dataWrapper=s,m=r}if(m){F=q.range,m=F.document,s=q.blockLimit,t=0;var G,H,I,E=[];r=y=0;var J,u=F.startContainer;B=q.endPath.elements[0];var K,v=B.getPosition(u),w=!(!B.getCommonAncestor(u)||v==CKEDITOR.POSITION_IDENTICAL||v&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),u=b(q.dataWrapper,q);for(k(u,F);t<u.length;t++)if(v=u[t],(C=v.isLineBreak)&&(C=F,x=s,A=z=void 0,v.hasBlockSibling?C=1:(z=C.startContainer.getAscendant(l.$block,1))&&z.is({div:1,p:1})?(A=z.getPosition(x),A==CKEDITOR.POSITION_IDENTICAL||A==CKEDITOR.POSITION_CONTAINS?C=0:(x=C.splitElement(z),C.moveToPosition(x,CKEDITOR.POSITION_AFTER_START),C=1)):C=0),C)r=0<t;else{if(C=F.startPath(),!v.isBlock&&g(q.editor,C.block,C.blockLimit)&&(I=h(q.editor))&&(I=m.createElement(I),I.appendBogus(),F.insertNode(I),CKEDITOR.env.needsBrFiller&&(G=I.getBogus())&&G.remove(),F.moveToPosition(I,CKEDITOR.POSITION_BEFORE_END)),(C=F.startPath().block)&&!C.equals(H)&&((G=C.getBogus())&&(G.remove(),E.push(C)),H=C),v.firstNotAllowed&&(y=1),y&&v.isElement){for(C=F.startContainer,x=null;C&&!l[C.getName()][v.name];){if(C.equals(s)){C=null;break}x=C,C=C.getParent()}if(C)x&&(J=F.splitElement(x),q.zombies.push(J),q.zombies.push(x));else{x=s.getName(),K=!t,C=t==u.length-1,x=c(v.node,x),z=[],A=x.length;for(var D=0,L=void 0,M=0,N=-1;D<A;D++)L=x[D]," "==L?(M||K&&!D||(z.push(new CKEDITOR.dom.text(" ")),N=z.length),M=1):(z.push(L),M=0);C&&N==z.length&&z.pop(),K=z}}if(K){for(;C=K.pop();)F.insertNode(C);K=0}else F.insertNode(v.node);v.lastNotAllowed&&t<u.length-1&&((J=w?B:J)&&F.setEndAt(J,CKEDITOR.POSITION_AFTER_START),y=0),F.collapse()}1!=u.length?G=!1:(G=u[0],G=G.isElement&&"false"==G.node.getAttribute("contenteditable")),G&&(r=!0,C=u[0].node,F.setStartAt(C,CKEDITOR.POSITION_BEFORE_START),F.setEndAt(C,CKEDITOR.POSITION_AFTER_END)),q.dontMoveCaret=r,q.bogusNeededBlocks=E}G=q.range;var O;for(K=q.bogusNeededBlocks,H=G.createBookmark();I=q.zombies.pop();)I.getParent()&&(J=G.clone(),J.moveToElementEditStart(I),J.removeEmptyBlocksAtEnd());if(K)for(;I=K.pop();)CKEDITOR.env.needsBrFiller?I.appendBogus():I.append(G.document.createText(" "));for(;I=q.mergeCandidates.pop();)I.mergeSiblings();if(CKEDITOR.env.webkit&&G.startPath()&&(I=G.startPath(),I.block?I.block.$.normalize():I.blockLimit&&I.blockLimit.$.normalize()),G.moveToBookmark(H),!q.dontMoveCaret){for(I=e(G);I&&a(I)&&!I.is(l.$empty);){if(I.isBlockBoundary())G.moveToPosition(I,CKEDITOR.POSITION_BEFORE_END);else{if(f(I)&&I.getHtml().match(/(\s|&nbsp;)$/g)){O=null;break}O=G.clone(),O.moveToPosition(I,CKEDITOR.POSITION_BEFORE_END)}I=I.getLast(d)}O&&G.moveToRange(O)}}}}(),r=function(){function a(a){return a=new CKEDITOR.dom.walker(a),a.guard=function(a,b){return!b&&(a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0)},a.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},a}function b(a,b,c){return b=a.getDocument().createElement(b),a.append(b,c),b}function c(a){var b,c=a.count();for(c;0<c--;)b=a.getItem(c),CKEDITOR.tools.trim(b.getHtml())||(b.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&b.getChildCount()&&b.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),g=!1;c(f.getElementsByTag("td")),c(f.getElementsByTag("th")),f=d.clone(),f.setStart(e,0),f=a(f).lastBackward(),f||(f=d.clone(),f.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0),f||(f=e),f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),s=function(){function a(a){return a=new CKEDITOR.dom.walker(a),a.guard=function(a,b){return!b&&(a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$list)||a.is(CKEDITOR.dtd.$listItem):void 0)},a.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$listItem)},a}return function(b){var c,d=b.startContainer,e=!1;c=b.clone(),c.setStart(d,0),c=a(c).lastBackward(),c||(c=b.clone(),c.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),c=a(c).lastForward(),e=!0),c||(c=d),c.is(CKEDITOR.dtd.$list)?(b.setStartAt(c,CKEDITOR.POSITION_BEFORE_START),b.collapse(!0),c.remove()):((d=c.getBogus())&&d.remove(),b.moveToPosition(c,e?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),b.select())}}(),t={eol:{detect:function(a,b){var c=a.range,d=c.clone(),e=c.clone(),f=new CKEDITOR.dom.elementPath(c.startContainer,b),g=new CKEDITOR.dom.elementPath(c.endContainer,b);d.collapse(1),e.collapse(),f.block&&d.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(c.setStartAfter(f.block),a.prependEolBr=1),g.block&&e.checkBoundaryOfElement(g.block,CKEDITOR.START)&&(c.setEndBefore(g.block),a.appendEolBr=1)},fix:function(a,b){var c,d=b.getDocument();a.appendEolBr&&(c=this.createEolBr(d),a.fragment.append(c)),!a.prependEolBr||c&&!c.getPrevious()||a.fragment.append(this.createEolBr(d),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!o(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var c,d=a.range,e=d.getCommonAncestor(),f=new CKEDITOR.dom.elementPath(e,b),g=new CKEDITOR.dom.elementPath(d.startContainer,b),d=new CKEDITOR.dom.elementPath(d.endContainer,b);if(e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),f.blockLimit.is({tr:1,table:1})){var h=f.contains("table").getParent();c=function(a){return!a.equals(h)}}else if(f.block&&f.block.is(CKEDITOR.dtd.$listItem)&&(g=g.contains(CKEDITOR.dtd.$list),d=d.contains(CKEDITOR.dtd.$list),!g.equals(d))){var i=f.contains(CKEDITOR.dtd.$list).getParent();c=function(a){return!a.equals(i)}}c||(c=function(a){return!a.equals(f.block)&&!a.equals(f.blockLimit)}),this.rebuildFragment(a,b,e,c)},rebuildFragment:function(a,b,c,d){for(var e;c&&!c.equals(b)&&d(c);)e=c.clone(0,1),a.fragment.appendTo(e),a.fragment=e,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,d=a.startOffset,e=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==e&&a.shrink(CKEDITOR.SHRINK_TEXT)}}},u=function(){function a(a,b){var c=a.getParent();c.is(CKEDITOR.dtd.$inline)&&a[b?"insertBefore":"insertAfter"](c)}function b(b,c,d){a(c),a(d,1);for(var e;e=d.getNext();)e.insertAfter(c),c=e;n(b)&&b.remove()}function c(a,b){var c=new CKEDITOR.dom.range(a);return c.setStartAfter(b.startNode),c.setEndBefore(b.endNode),c}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),e=d.startPath(),f=d.endPath(),g=e.contains(CKEDITOR.dtd.$list),h=f.contains(CKEDITOR.dtd.$list);a.mergeList=g&&h&&g.getParent().equals(h.getParent())&&!g.equals(h),a.mergeListItems=e.block&&f.block&&e.block.is(CKEDITOR.dtd.$listItem)&&f.block.is(CKEDITOR.dtd.$listItem),(a.mergeList||a.mergeListItems)&&(d=d.clone(),d.setStartBefore(a.bookmark.startNode),d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark())},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,e=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c);if(a.mergeList){var h=f.contains(CKEDITOR.dtd.$list),i=g.contains(CKEDITOR.dtd.$list);h.equals(i)||(i.moveChildren(h),i.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$listItem),f.equals(g)||b(g,d,e)),d.remove(),e.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode),c.setEndAfter(a.bookmark.endNode),a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,e=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c),f=f.block,g=g.block;f&&g&&!f.equals(g)&&b(g,d,e),d.remove(),e.remove()}}},table:function(){function a(a){var c,e=[],f=new CKEDITOR.dom.walker(a),g=a.startPath().contains(d),h=a.endPath().contains(d),i={};return f.guard=function(f,j){if(f.type==CKEDITOR.NODE_ELEMENT){var k="visited_"+(j?"out":"in");if(f.getCustomData(k))return;CKEDITOR.dom.element.setMarker(i,f,k,1)}if(j&&g&&f.equals(g))c=a.clone(),c.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e.push(c);else if(!j&&h&&f.equals(h))c=a.clone(),c.setStartAt(h,CKEDITOR.POSITION_AFTER_START),e.push(c);else{if((k=!j)&&(k=f.type==CKEDITOR.NODE_ELEMENT&&f.is(d)&&(!g||b(f,g))&&(!h||b(f,h))),!k&&(k=j))if(f.is(d))var k=g&&g.getAscendant("table",!0),l=h&&h.getAscendant("table",!0),m=f.getAscendant("table",!0),k=k&&k.contains(m)||l&&l.contains(m);else k=void 0;k&&(c=a.clone(),c.selectNodeContents(f),e.push(c))}},f.lastForward(),CKEDITOR.dom.element.clearAllMarkers(i),e}function b(a,b){var c=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,d=a.getPosition(b);return d!==CKEDITOR.POSITION_IDENTICAL&&0===(d&c)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),e=0;if(c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++e},c.checkForward(),1<e){var c=b.startPath().contains("table"),f=b.endPath().contains("table");c&&f&&b.checkBoundaryOfElement(c,CKEDITOR.START)&&b.checkBoundaryOfElement(f,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(f),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(e,f){var g,h,i=c(f,e.bookmark),j=i.clone(),k=i.getCommonAncestor();k.is(CKEDITOR.dtd.$tableContent)&&!k.is(d)&&(k=k.getAscendant("table",!0)),h=k,k=new CKEDITOR.dom.elementPath(i.startContainer,h),h=new CKEDITOR.dom.elementPath(i.endContainer,h),k=k.contains("table"),h=h.contains("table"),(k||h)&&(k&&h&&b(k,h)?(e.tableSurroundingRange=j,j.setStartAt(k,CKEDITOR.POSITION_AFTER_END),j.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),j=i.clone(),j.setEndAt(k,CKEDITOR.POSITION_AFTER_END),g=i.clone(),g.setStartAt(h,CKEDITOR.POSITION_BEFORE_START),g=a(j).concat(a(g))):k?h||(e.tableSurroundingRange=j,
j.setStartAt(k,CKEDITOR.POSITION_AFTER_END),i.setEndAt(k,CKEDITOR.POSITION_AFTER_END)):(e.tableSurroundingRange=j,j.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),i.setStartAt(h,CKEDITOR.POSITION_AFTER_START)),e.tableContentsRanges=g?g:a(i))},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),n(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode),c.moveToBookmark(a.purgeTableBookmark),c.deleteContents(),a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var c,d=b.startPath();g(a,d.block,d.blockLimit)&&(c=h(a))&&(c=b.document.createElement(c),c.appendBogus(),b.insertNode(c),b.moveToPosition(c,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(a){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(a)}function b(b,c){if(0===b.length||a(b[0].getEnclosedNode()))return!1;var d,e;if((d=!c&&1===b.length)&&!(d=b[0].collapsed)){var f=b[0];d=f.startContainer.getAscendant({td:1,th:1},!0);var g=f.endContainer.getAscendant({td:1,th:1},!0);e=CKEDITOR.tools.trim,d&&d.equals(g)&&!d.findOne("td, th, tr, tbody, table")?(f=f.cloneContents(),d=!f.getFirst()||e(f.getFirst().getText())!==e(d.getText())):d=!1}if(d)return!1;for(e=0;e<b.length;e++)if(d=b[e]._getTableElement(),!d)return!1;return!0}function c(a){function b(a){a=a.find("td, th");var b,c=[];for(b=0;b<a.count();b++)c.push(a.getItem(b));return c}var c,d,e=[];for(d=0;d<a.length;d++)c=a[d]._getTableElement(),c.is&&c.is({td:1,th:1})?e.push(c):e=e.concat(b(c));return e}function d(a){a=c(a);var b,d,e="",f=[];for(d=0;d<a.length;d++)b&&!b.equals(a[d].getAscendant("tr"))?(e+=f.join("\t")+"\n",b=a[d].getAscendant("tr"),f=[]):0===d&&(b=a[d].getAscendant("tr")),f.push(a[d].getText());return e+=f.join("\t")}function e(a){var b=this.root.editor,c=b.getSelection(1);this.reset(),q=!0,c.root.once("selectionchange",function(a){a.cancel()},null,null,0),c.selectRanges([a[0]]),c=this._.cache,c.ranges=new CKEDITOR.dom.rangeList(a),c.type=CKEDITOR.SELECTION_TEXT,c.selectedElement=a[0]._getTableElement(),c.selectedText=d(a),c.nativeSel=null,this.isFake=1,this.rev=u++,b._.fakeSelection=this,q=!1,this.root.fire("selectionchange")}function f(){var c,d=this._.fakeSelection;if(d){c=this.getSelection(1);var e;if(!(e=!c)&&(e=!c.isHidden())){e=d;var f=c.getRanges(),g=e.getRanges(),h=f.length&&f[0]._getTableElement()&&f[0]._getTableElement().getAscendant("table",!0),i=g.length&&g[0]._getTableElement()&&g[0]._getTableElement().getAscendant("table",!0),j=1===f.length&&f[0]._getTableElement()&&f[0]._getTableElement().is("table"),k=1===g.length&&g[0]._getTableElement()&&g[0]._getTableElement().is("table");if(a(e.getSelectedElement()))e=!1;else{var l=1===f.length&&f[0].collapsed,g=b(f,!!CKEDITOR.env.webkit)&&b(g);h=!(!h||!i)&&(h.equals(i)||i.contains(h)),h&&(l||g)?(j&&!k&&e.selectRanges(f),e=!0):e=!1}e=!e}e&&(d.reset(),d=0)}(d||(d=c||this.getSelection(1),d&&d.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",d),c=this.elementPath(),c.compare(this._.selectionPreviousPath)||(e=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(c.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||e||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=c,this.fire("selectionChange",{selection:d,path:c})))}function g(){s=!0,r||(h.call(this),r=CKEDITOR.tools.setTimeout(h,200,this))}function h(){r=null,s&&(CKEDITOR.tools.setTimeout(f,0,this),s=!1)}function i(a){return!(!x(a)&&(a.type!=CKEDITOR.NODE_ELEMENT||a.is(CKEDITOR.dtd.$empty)))}function j(a){function b(b,c){return!(!b||b.type==CKEDITOR.NODE_TEXT)&&a.clone()["moveToElementEdit"+(c?"End":"Start")](b)}if(!(a.root instanceof CKEDITOR.editable))return!1;var c=a.startContainer,d=a.getPreviousNode(i,null,c),e=a.getNextNode(i,null,c);return!(!b(d)&&!b(e,1)&&(d||e||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus()))}function k(a){l(a,!1);var b=a.getDocument().createText(v);return a.setCustomData("cke-fillingChar",b),b}function l(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d=a.getDocument().getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0),f=v.length;if(c.getLength()>f&&e&&e.intersectsNode(c.$)){var g=[{node:d.anchorNode,offset:d.anchorOffset},{node:d.focusNode,offset:d.focusOffset}];d.anchorNode==c.$&&d.anchorOffset>f&&(g[0].offset-=f),d.focusNode==c.$&&d.focusOffset>f&&(g[1].offset-=f)}}c.setText(m(c.getText(),1)),g&&(c=a.getDocument().$,d=c.getSelection(),c=c.createRange(),c.setStart(g[0].node,g[0].offset),c.collapse(!0),d.removeAllRanges(),d.addRange(c),d.extend(g[1].node,g[1].offset))}}function m(a,b){return b?a.replace(w,function(a,b){return b?" ":""}):a.replace(v,"")}function n(a,b){var c=b&&CKEDITOR.tools.htmlEncode(b)||"&nbsp;",c=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+c+"</div>",a.document);a.fire("lockSnapshot"),a.editable().append(c);var d=a.getSelection(1),e=a.createRange(),f=d.root.on("selectionchange",function(a){a.cancel()},null,null,0);e.setStartAt(c,CKEDITOR.POSITION_AFTER_START),e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),d.selectRanges([e]),f.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=c}function o(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection(),f=e.getRanges()[0];e.isCollapsed()&&(f=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&f.type==CKEDITOR.NODE_ELEMENT&&"false"==f.getAttribute("contenteditable")&&(e=e.getStartElement(),!e.isBlockBoundary()||""!==(void 0===e.$.textContent?e.$.innerText:e.$.textContent)||8!==d&&46!==d||(e.remove(),a.fire("saveSnapshot")),a.getSelection().fake(f),c.data.preventDefault(),c.cancel())}}}function p(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.getCommonAncestor().isReadOnly()&&a.splice(b,1),!c.collapsed){if(c.startContainer.isReadOnly())for(var d,e=c.startContainer;e&&!((d=e.type==CKEDITOR.NODE_ELEMENT)&&e.is("body")||!e.isReadOnly());)d&&"false"==e.getAttribute("contentEditable")&&c.setStartAfter(e),e=e.getParent();e=c.startContainer,d=c.endContainer;var f=c.startOffset,g=c.endOffset,h=c.clone();e&&e.type==CKEDITOR.NODE_TEXT&&(f>=e.getLength()?h.setStartAfter(e):h.setStartBefore(e)),d&&d.type==CKEDITOR.NODE_TEXT&&(g?h.setEndAfter(d):h.setEndBefore(d)),e=new CKEDITOR.dom.walker(h),e.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();return c.setEndBefore(d),c.collapsed&&a.splice(b--,1),d.getPosition(h.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e)),!0}return!1},e.next()}}return a}var q,r,s,t="function"!=typeof window.getSelection,u=1,v=CKEDITOR.tools.repeat("​",7),w=new RegExp(v+"( )?","g"),x=CKEDITOR.dom.walker.invisible(1),y=function(){function a(a){return function(b){var c=b.editor.createRange();return c.moveToClosestEditablePosition(b.selected,a)&&b.editor.getSelection().selectRanges([c]),!1}}function b(a){return function(b){var c,d=b.editor,e=d.createRange();if(!d.readOnly)return(c=e.moveToClosestEditablePosition(b.selected,a))||(c=e.moveToClosestEditablePosition(b.selected,!a)),c&&d.getSelection().selectRanges([e]),d.fire("saveSnapshot"),b.selected.remove(),c||(e.moveToElementEditablePosition(d.editable()),d.getSelection().selectRanges([e])),d.fire("saveSnapshot"),!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(a){function b(){var a=c.getSelection();a&&a.removeAllRanges()}var c=a.editor;c.on("contentDom",function(){function a(){i=new CKEDITOR.dom.selection(c.getSelection()),i.lock()}function b(){k.removeListener("mouseup",b),p.removeListener("mouseup",b);var a=CKEDITOR.document.$.selection,c=a.createRange();"None"!=a.type&&c.parentElement()&&c.parentElement().ownerDocument==j.$&&c.select()}function d(a){var b,c;b=!!(b=this.document.getActive())&&("input"===b.getName()||"textarea"===b.getName()),b||(b=this.getSelection(1),(c=e(b))&&!c.equals(m)&&(b.selectElement(c),a.data.preventDefault()))}function e(a){return a=a.getRanges()[0],a&&(a=a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")},!0))&&"false"===a.getAttribute("contenteditable")?a:null}var h,i,j=c.document,k=CKEDITOR.document,m=c.editable(),n=j.getBody(),p=j.getDocumentElement(),q=m.isInline();if(CKEDITOR.env.gecko&&m.attachListener(m,"focus",function(a){a.removeListener(),0!==h&&(a=c.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==m.$&&(a=c.createRange(),a.moveToElementEditStart(m),a.select())},null,null,-2),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){if(h&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){h=c._.previousActive&&c._.previousActive.equals(j.getActive());var a=null!=c._.previousScrollTop&&c._.previousScrollTop!=m.$.scrollTop;CKEDITOR.env.webkit&&h&&a&&(m.$.scrollTop=c._.previousScrollTop)}c.unlockSelection(h),h=0},null,null,-1),m.attachListener(m,"mousedown",function(){h=0}),(CKEDITOR.env.ie||CKEDITOR.env.gecko||q)&&(t?m.attachListener(m,"beforedeactivate",a,null,null,-1):m.attachListener(c,"selectionCheck",a,null,null,-1),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){var a=i&&(i.isFake||2>i.getRanges().length);CKEDITOR.env.gecko&&!q&&a||(c.lockSelection(i),h=1)},null,null,-1),m.attachListener(m,"mousedown",function(){h=0})),CKEDITOR.env.ie&&!q){var r;if(m.attachListener(m,"mousedown",function(a){2==a.data.$.button&&((a=c.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(r=c.window.getScrollPosition()))}),m.attachListener(m,"mouseup",function(a){2==a.data.$.button&&r&&(c.document.$.documentElement.scrollLeft=r.x,c.document.$.documentElement.scrollTop=r.y),r=null}),"BackCompat"!=j.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var s,u;p.on("mousedown",function(a){function b(a){if(a=a.data.$,s){var b=n.$.createTextRange();try{b.moveToPoint(a.clientX,a.clientY)}catch(c){}s.setEndPoint(0>u.compareEndPoints("StartToStart",b)?"EndToEnd":"StartToStart",b),s.select()}}function c(){p.removeListener("mousemove",b),k.removeListener("mouseup",c),p.removeListener("mouseup",c),s.select()}if(a=a.data,a.getTarget().is("html")&&a.$.y<p.$.clientHeight&&a.$.x<p.$.clientWidth){s=n.$.createTextRange();try{s.moveToPoint(a.$.clientX,a.$.clientY)}catch(d){}u=s.duplicate(),p.on("mousemove",b),k.on("mouseup",c),p.on("mouseup",c)}})}7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&p.on("mousedown",function(a){a.data.getTarget().is("html")&&(k.on("mouseup",b),p.on("mouseup",b))})}}if(m.attachListener(m,"selectionchange",f,c),m.attachListener(m,"keyup",g,c),m.attachListener(m,"touchstart",g,c),m.attachListener(m,"touchend",g,c),CKEDITOR.env.ie&&m.attachListener(m,"keydown",d,c),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){c.forceNextSelectionCheck(),c.selectionChange(1)}),q&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var v;m.attachListener(m,"mousedown",function(){v=1}),m.attachListener(j.getDocumentElement(),"mouseup",function(){v&&g.call(c),v=0})}else m.attachListener(CKEDITOR.env.ie?m:j.getDocumentElement(),"mouseup",g,c);CKEDITOR.env.webkit&&m.attachListener(j,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:m.hasFocus&&l(m)}},null,null,-1),m.attachListener(m,"keydown",o(c),null,null,-1)}),c.on("setData",function(){c.unlockSelection(),CKEDITOR.env.webkit&&b()}),c.on("contentDomUnload",function(){c.unlockSelection()}),CKEDITOR.env.ie9Compat&&c.on("beforeDestroy",b,null,null,9),c.on("dataReady",function(){delete c._.fakeSelection,delete c._.hiddenSelectionContainer,c.selectionChange(1)}),c.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=c.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=c.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100),c.on("key",function(a){if("wysiwyg"==c.mode){var b=c.getSelection();if(b.isFake){var d=y[a.data.keyCode];if(d)return d({editor:c,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),c=a.getCustomData("cke-fillingChar");c&&(c.getCustomData("ready")?(l(a),a.editor.fire("selectionCheck")):c.setCustomData("ready",1))},null,null,-1),b.on("beforeSetMode",function(){l(b.editable())},null,null,-1),b.on("getSnapshot",function(a){a.data&&(a.data=m(a.data))},b,null,20),b.on("toDataFormat",function(a){a.data.dataValue=m(a.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(a){(a?f:g).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.getSelectedRanges=function(a){var b=this.getSelection();return b&&b.getRanges(a)||[]},CKEDITOR.editor.prototype.lockSelection=function(a){return a=a||this.getSelection(1),a.getType()!=CKEDITOR.SELECTION_NONE&&(!a.isLocked&&a.lock(),this._.savedSelection=a,!0)},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return!!b&&(b.unlock(a),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:u++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=c?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}return(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var z={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:m,_createFillingCharSequenceNode:k,FILLING_CHAR_SEQUENCE:v}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=t?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:t?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(c&&c.rangeCount){if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&z[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=t?function(){function a(a){return new CKEDITOR.dom.node(a).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e,f,g,h,i=d.children,j=b.duplicate(),k=0,l=i.length-1,m=-1;k<=l;)if(m=Math.floor((k+l)/2),e=i[m],j.moveToElementText(e),g=j.compareEndPoints("StartToStart",b),0<g)l=m-1;else{if(!(0>g))return{container:d,offset:a(e)};k=m+1}if(-1==m||m==i.length-1&&0>g){if(j.moveToElementText(d),j.setEndPoint("StartToStart",b),j=j.text.replace(/(\r\n|\r)/g,"\n").length,i=d.childNodes,!j)return e=i[i.length-1],e.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:i.length}:{container:e,offset:e.nodeValue.length};for(d=i.length;0<j&&0<d;)f=i[--d],f.nodeType==CKEDITOR.NODE_TEXT&&(h=f,j-=f.nodeValue.length);return{container:h,offset:-j}}if(j.collapse(0<g),j.setEndPoint(0<g?"StartToStart":"EndToStart",b),j=j.text.replace(/(\r\n|\r)/g,"\n").length,!j)return{container:d,offset:a(e)+(0<g?0:1)};for(;0<j;)try{f=e[0<g?"previousSibling":"nextSibling"],f.nodeType==CKEDITOR.NODE_TEXT&&(j-=f.nodeValue.length,h=f),e=f}catch(n){return{container:d,offset:a(e)}}return{container:h,offset:0<g?-j:h.nodeValue.length+j}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),g=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<g.childNodes.length&&g.childNodes[h]!=f;h++);a.setStart(new CKEDITOR.dom.node(g),h),a.setEnd(new CKEDITOR.dom.node(g),h+1),d.push(a)}return d}return[]}}():function(){var a,b=[],c=this.getNative();if(!c)return b;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);a=new CKEDITOR.dom.range(this.root),a.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset),a.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset),b.push(a)}return b};return function(b){var c=this._.cache,d=c.ranges;return d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this))),b?p(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if(b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a,c,d=b.getRanges()[0].clone(),e=2;e&&!((a=d.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&z[a.getName()]&&(c=a));e--)d.shrink(CKEDITOR.SHRINK_ELEMENT);return c&&c.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=t?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var c=this.getSelectedElement(),d=this.getRanges(),f=this.isFake;this.isLocked=0,this.reset(),a&&(a=c||d[0]&&d[0].getCommonAncestor())&&a.getAscendant("body",1)&&((a=this.root.editor)&&a.plugins.tableselection&&a.plugins.tableselection.isSupportedEnvironment(a)&&b(d)?e.call(this,d):f?this.fake(c):c&&2>d.length?this.selectElement(c):this.selectRanges(d))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot"),!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=u++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(a){var c=this.root.editor,d=c&&c._.hiddenSelectionContainer;if(this.reset(),d)for(var f,d=this.root,g=0;g<a.length;++g)f=a[g],f.endContainer.equals(d)&&(f.endOffset=Math.min(f.endOffset,d.getChildCount()));if(a.length)if(this.isLocked){var h=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),h&&!h.equals(this.root)&&h.focus()}else{var i,m,n;if(1==a.length&&!(n=a[0]).collapsed&&(i=n.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(m=n.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&(i=m),"false"==i.getAttribute("contenteditable"))||(i=void 0),i)this.fake(i);else if(c&&c.plugins.tableselection&&c.plugins.tableselection.isSupportedEnvironment(c)&&b(a)&&!q&&!a[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))e.call(this,a);else{if(t){m=CKEDITOR.dom.walker.whitespaces(!0),i=/\ufeff|\u00a0/,n={table:1,tbody:1,tr:1},1<a.length&&(c=a[a.length-1],a[0].setEnd(c.endContainer,c.endOffset)),c=a[0],a=c.collapsed;var o,p,r;if((d=c.getEnclosedNode())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in z&&(!d.is("a")||!d.getText()))try{return r=d.$.createControlRange(),r.addElement(d.$),void r.select()}catch(s){}(c.startContainer.type==CKEDITOR.NODE_ELEMENT&&c.startContainer.getName()in n||c.endContainer.type==CKEDITOR.NODE_ELEMENT&&c.endContainer.getName()in n)&&(c.shrink(CKEDITOR.NODE_ELEMENT,!0),a=c.collapsed),r=c.createBookmark(),n=r.startNode,a||(h=r.endNode),r=c.document.$.body.createTextRange(),r.moveToElementText(n.$),r.moveStart("character",1),h?(i=c.document.$.body.createTextRange(),i.moveToElementText(h.$),r.setEndPoint("EndToEnd",i),r.moveEnd("character",-1)):(o=n.getNext(m),p=n.hasAscendant("pre"),o=!(o&&o.getText&&o.getText().match(i))&&(p||!n.hasPrevious()||n.getPrevious().is&&n.getPrevious().is("br")),p=c.document.createElement("span"),p.setHtml("&#65279;"),p.insertBefore(n),o&&c.document.createText("\ufeff").insertBefore(n)),c.setStartBefore(n),n.remove(),a?(o?(r.moveStart("character",-1),r.select(),c.document.$.selection.clear()):r.select(),c.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START),p.remove()):(c.setEndBefore(h),h.remove(),r.select())}else{if(h=this.getNative(),!h)return;for(this.removeAllRanges(),r=0;r<a.length;r++)if(r<a.length-1&&(o=a[r],p=a[r+1],i=o.clone(),i.setStart(o.endContainer,o.endOffset),i.setEnd(p.startContainer,p.startOffset),!i.collapsed&&(i.shrink(CKEDITOR.NODE_ELEMENT,!0),c=i.getCommonAncestor(),i=i.getEnclosedNode(),c.isReadOnly()||i&&i.isReadOnly())))p.setStart(o.startContainer,o.startOffset),a.splice(r--,1);else{c=a[r],p=this.document.$.createRange(),c.collapsed&&CKEDITOR.env.webkit&&j(c)&&(i=k(this.root),c.insertNode(i),(o=i.getNext())&&!i.getPrevious()&&o.type==CKEDITOR.NODE_ELEMENT&&"br"==o.getName()?(l(this.root),c.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START)):c.moveToPosition(i,CKEDITOR.POSITION_AFTER_END)),p.setStart(c.startContainer.$,c.startOffset);try{p.setEnd(c.endContainer.$,c.endOffset)}catch(u){if(!(0<=u.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw u;c.collapse(1),p.setEnd(c.endContainer.$,c.endOffset)}h.addRange(p)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a,b){var c=this.root.editor;void 0===b&&a.hasAttribute("aria-label")&&(b=a.getAttribute("aria-label")),this.reset(),n(c,b);var d=this._.cache,e=new CKEDITOR.dom.range(this.root);e.setStartBefore(a),e.setEndAfter(a),d.ranges=new CKEDITOR.dom.rangeList(e),d.selectedElement=d.startElement=a,d.type=CKEDITOR.SELECTION_ELEMENT,d.selectedText=d.nativeSel=null,this.isFake=1,this.rev=u++,c._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))},isInTable:function(a){return b(this.getRanges(),a)},isCollapsed:function(){var a=this.getRanges();return 1===a.length&&a[0].collapsed},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var c,d=[],e=0;e<a.length;e++){var f=new CKEDITOR.dom.range(this.root);f.moveToBookmark(a[e]),d.push(f)}return a.isFake&&(c=b(d)?d[0]._getTableElement():d[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0)),a.isFake&&!b(d)?this.fake(c):this.selectRanges(d),this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.getType()!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[t?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function b(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function c(d){var f=d.document;if(d.collapsed)f=r(this,f),d.insertNode(f),d.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);else{var g,h=this.element,i=this._.definition,j=i.ignoreReadonly,k=j||i.includeReadonly;null==k&&(k=d.root.getCustomData("cke_includeReadonly"));var l=CKEDITOR.dtd[h];l||(g=!0,l=CKEDITOR.dtd.span),d.enlarge(CKEDITOR.ENLARGE_INLINE,1),d.trim();var m,n=d.createBookmark(),p=n.startNode,q=n.endNode,s=p;if(!j){var t=d.getCommonAncestor(),j=a(p,t),t=a(q,t);j&&(s=j.getNextSourceNode(!0)),t&&(q=t)}for(s.getPosition(q)==CKEDITOR.POSITION_FOLLOWING&&(s=0);s;){if(j=!1,s.equals(q))s=null,j=!0;else{var u=s.type==CKEDITOR.NODE_ELEMENT?s.getName():null,t=u&&"false"==s.getAttribute("contentEditable"),v=u&&-1!==CKEDITOR.tools.array.indexOf(CKEDITOR.style.unstylableElements,u),v=u&&(s.getAttribute("data-nostyle")||v);if(u&&s.data("cke-bookmark")||s.type===CKEDITOR.NODE_COMMENT){s=s.getNextSourceNode(!0);continue}if(t&&k&&CKEDITOR.dtd.$block[u])for(var w=s,x=e(w),y=void 0,z=x.length,A=0,w=z&&new CKEDITOR.dom.range(w.getDocument());A<z;++A){var y=x[A],B=CKEDITOR.filter.instances[y.data("cke-filter")];(B?B.check(this):1)&&(w.selectNodeContents(y),c.call(this,w))}if(x=u?!l[u]||v?0:t&&!k?0:b(s,q,i,E):1){if(y=s.getParent(),x=i,z=h,A=g,!y||!(y.getDtd()||CKEDITOR.dtd.span)[z]&&!A||x.parentRule&&!x.parentRule(y))j=!0;else if(m||u&&CKEDITOR.dtd.$removeEmpty[u]&&(s.getPosition(q)|E)!=E||(m=d.clone(),m.setStartBefore(s)),u=s.type,u==CKEDITOR.NODE_TEXT||t||u==CKEDITOR.NODE_ELEMENT&&!s.getChildCount()){for(var D,u=s;(j=!u.getNext(C))&&(D=u.getParent(),l[D.getName()])&&b(D,p,i,F);)u=D;m.setEndAfter(u)}}else j=!0;s=s.getNextSourceNode(v||t)}if(j&&m&&!m.collapsed){for(var G,H,I,j=r(this,f),t=j.hasAttributes(),v=m.getCommonAncestor(),u={},x={},y={},z={};j&&v;){if(v.getName()==h){for(G in i.attributes)!z[G]&&(I=v.getAttribute(H))&&(j.getAttribute(G)==I?x[G]=1:z[G]=1);for(H in i.styles)!y[H]&&(I=v.getStyle(H))&&(j.getStyle(H)==I?u[H]=1:y[H]=1)}v=v.getParent()}for(G in x)j.removeAttribute(G);for(H in u)j.removeStyle(H);t&&!j.hasAttributes()&&(j=null),j?(m.extractContents().appendTo(j),m.insertNode(j),o.call(this,j),j.mergeSiblings(),CKEDITOR.env.ie||j.$.normalize()):(j=new CKEDITOR.dom.element("span"),m.extractContents().appendTo(j),m.insertNode(j),o.call(this,j),j.remove(!0)),m=null}}d.moveToBookmark(n),d.shrink(CKEDITOR.SHRINK_TEXT),d.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function d(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),b=new CKEDITOR.dom.elementPath(k.getParent()),c=null,e=null,f=0;f<a.elements.length;f++){var g=a.elements[f];if(g==a.block||g==a.blockLimit)break;l.checkElementRemovable(g,!0)&&(c=g)}for(f=0;f<b.elements.length&&(g=b.elements[f],g!=b.block&&g!=b.blockLimit);f++)l.checkElementRemovable(g,!0)&&(e=g);e&&k.breakParent(e),c&&d.breakParent(c)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode,e=this._.definition.alwaysRemoveElement;if(a.collapsed){for(var f,g,h=new CKEDITOR.dom.elementPath(d.getParent(),a.root),i=0;i<h.elements.length&&(g=h.elements[i])&&g!=h.block&&g!=h.blockLimit;i++)if(this.checkElementRemovable(g)){var j;!e&&a.collapsed&&(a.checkBoundaryOfElement(g,CKEDITOR.END)||(j=a.checkBoundaryOfElement(g,CKEDITOR.START)))?(f=g,f.match=j?"start":"end"):(g.mergeSiblings(),g.is(this.element)?n.call(this,g):p(g,u(this)[g.getName()]))}if(f){for(e=d,i=0;g=h.elements[i],!g.equals(f);i++)g.match||(g=g.clone(),g.append(e),e=g);e["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var k=c.endNode,l=this;for(b(),h=d;!h.equals(k);)f=h.getNextSourceNode(),h.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(h)&&(h.getName()==this.element?n.call(this,h):p(h,u(this)[h.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),h=f}a.moveToBookmark(c),a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function e(a){var b=[];return a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0),b}function f(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&s(a,this)}function g(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&a.removeStyle(e)}}function h(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e,f=a.document;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(e=r(this,f,d),j(d,e));a.moveToBookmark(b)}function i(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),j(d,e)):n.call(this,d));a.moveToBookmark(b)}function j(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),
a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;if(d&&!e){if(e=b,(f=a.getBogus())&&f.remove(),f=a.getHtml(),f=l(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),f=f.replace(/([ \t\n\r]+|&nbsp;)/g," "),f=f.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var g=a.getDocument().createElement("div");g.append(e),e.$.outerHTML="<pre>"+f+"</pre>",e.copyAttributes(g.getFirst()),e=g.getFirst().remove()}else e.setHtml(f);b=e}else f?b=m(c?[a.getHtml()]:k(a),b):a.moveChildren(b);if(b.replace(a),d){var h,c=b;(h=c.getPrevious(D))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("pre")&&(d=l(h.getHtml(),/\n$/,"")+"\n\n"+l(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),h.remove())}else c&&q(b)}function k(a){var b=[];return l(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}function l(a,b,c){var d="",e="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""}),d+a.replace(b,c)+e}function m(a,b){var c;1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=l(e,/^[ \t]*\n/,""),e=l(e,/\n$/,""),e=l(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e),c.append(f)}else b.setHtml(e)}return c||b}function n(a,b){var c,d=this._.definition,e=d.attributes,d=d.styles,f=u(this)[a.getName()],g=CKEDITOR.tools.isEmpty(e)&&CKEDITOR.tools.isEmpty(d);for(c in e)("class"!=c&&!this._.definition.fullMatch||a.getAttribute(c)==v(c,e[c]))&&(b&&"data-"==c.slice(0,5)||(g=a.hasAttribute(c),a.removeAttribute(c)));for(var h in d)this._.definition.fullMatch&&a.getStyle(h)!=v(h,d[h],!0)||(g=g||!!a.getStyle(h),a.removeStyle(h));p(a,f,y[a.getName()]),g&&(this._.definition.alwaysRemoveElement?q(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?q(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function o(a){for(var b,c=u(this),d=a.getElementsByTag(this.element),e=d.count();0<=--e;)b=d.getItem(e),b.isReadOnly()||n.call(this,b,!0);for(var f in c)if(f!=this.element)for(d=a.getElementsByTag(f),e=d.count()-1;0<=e;e--)b=d.getItem(e),b.isReadOnly()||p(b,c[f])}function p(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e,f=b[d][0];if(e=a.getAttribute(f)){var g=b[d][1];(null===g||g.test&&g.test(e)||"string"==typeof g&&e==g)&&a.removeAttribute(f)}}c||q(a)}function q(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(D),d=a.getNext(D);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1),!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br"),a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function r(a,b,c){var d;return d=a.element,"*"==d&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=s(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function s(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);return c&&a.setAttribute("style",c),a.getDocument().removeCustomData("doc_processing_style"),a}function t(a,b){for(var c in a)a[c]=a[c].replace(B,function(a,c){return b[c]})}function u(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e,f,g=c[d];if("string"==typeof g?e=g.toLowerCase():(e=g.element?g.element.toLowerCase():a.element,f=g.attributes),g=b[e]||(b[e]={}),f){var h,g=g.attributes=g.attributes||[];for(h in f)g.push([h.toLowerCase(),f[h]])}}}return b}function v(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function w(a,b){function c(a,b){return"font-family"==b.toLowerCase()?a.replace(/["']/g,""):a}"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a)),"string"==typeof b&&(b=CKEDITOR.tools.parseCssText(b,!0));for(var d in a)if(!(d in b)||c(b[d],d)!=c(a[d],d)&&"inherit"!=a[d]&&"inherit"!=b[d])return!1;return!0}function x(a,b,c){var d=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var e,f=d.createIterator();e=f.getNextRange();)b.call(this,e,c);a.selectRanges(d)}var y={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},z={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},A=/\s*(?:;\s*|$)/,B=/#\((.+?)\)/g,C=CKEDITOR.dom.walker.bookmark(0,1),D=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(a=CKEDITOR.tools.clone(a),t(a.attributes,b),t(a.styles,b)),c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(y[c]?CKEDITOR.STYLE_BLOCK:z[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return x.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),x.call(this,a.getSelection(),0,a),this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return x.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),x.call(this,a.getSelection(),1,a),this._.enterMode=b}},applyToRange:function(a){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?h:this.type==CKEDITOR.STYLE_OBJECT?f:null,this.applyToRange(a)},removeFromRange:function(a){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?d:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?g:null,this.removeFromRange(a)},applyToObject:function(a){s(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c,d=a.elements,e=0;e<d.length;e++)if(c=d[e],this.type!=CKEDITOR.STYLE_INLINE||c!=a.block&&c!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=c.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(c,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){if(b&&b instanceof CKEDITOR.filter&&(c=b),c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];(g=CKEDITOR.style.getStyleText(c))&&(d.style||e++,d.style=g),d._length=e,c=c._AC=d}if(!c._length)return!0;for(var h in c)if("_length"!=h)if(d=a.getAttribute(h)||"","style"==h?w(c[h],d):c[h]==d){if(!b)return!0}else if(b)return!1;if(b)return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=u(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];if(null===e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["<",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');return(e=CKEDITOR.style.getStyleText(b))&&c.push(' style="',e,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(A,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(A,";");"inherit"==f?d+=g:c+=g}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d},CKEDITOR.style.customHandlers={},CKEDITOR.style.unstylableElements=[],CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a},this.setup&&this.setup(a)};return b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,!0),this.customHandlers[a.type]=b};var E=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,F=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,b){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,b,c){CKEDITOR.stylesSet.addExternal(a,b,""),CKEDITOR.stylesSet.load(a,c)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,b){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;d.fn.call(this,e)}})),c.push({style:a,fn:b})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var b=this,c=b.config.stylesCombo_stylesSet||b.config.stylesSet;if(!1===c)a(null);else if(c instanceof Array)b._.stylesDefinitions=c,a(c);else{c||(c="default");var c=c.split(":"),d=c[0];CKEDITOR.stylesSet.addExternal(d,c[1]?c.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(d,function(c){b._.stylesDefinitions=c[d],a(b._.stylesDefinitions)})}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var a=CKEDITOR.getUrl("vendor/promise.js");if("function"==typeof window.define&&window.define.amd&&"function"==typeof window.require)return window.require([a],function(a){CKEDITOR.tools.promise=a});CKEDITOR.scriptLoader.load(a,function(b){return b?"undefined"!=typeof window.ES6Promise?CKEDITOR.tools.promise=ES6Promise:void 0:CKEDITOR.error("no-vendor-lib",{path:a})})}}(),function(){function a(a,d,e){a.once("selectionCheck",function(a){if(!b){var f=a.data.getRanges()[0];e.equals(f)?a.cancel():d.equals(f)&&(c=!0)}},null,null,-1)}var b=!0,c=!1;CKEDITOR.dom.selection.setupEditorOptimization=function(a){a.on("selectionCheck",function(a){a.data&&!c&&a.data.optimizeInElementEnds(),c=!1}),a.on("contentDom",function(){var b=a.editable();b&&(b.attachListener(b,"keydown",function(a){this._.shiftPressed=a.data.$.shiftKey},this),b.attachListener(b,"keyup",function(a){this._.shiftPressed=a.data.$.shiftKey},this))})},CKEDITOR.dom.selection.prototype.optimizeInElementEnds=function(){var c,d=this.getRanges()[0],e=this.root.editor;if(this.root.editor._.shiftPressed||this.isFake||d.isCollapsed||d.startContainer.equals(d.endContainer))c=!1;else if(0===d.endOffset)c=!0;else{c=d.startContainer.type===CKEDITOR.NODE_TEXT;var f=d.endContainer.type===CKEDITOR.NODE_TEXT,g=c?d.startContainer.getLength():d.startContainer.getChildCount();c=d.startOffset===g||c^f}c&&(c=d.clone(),d.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!CKEDITOR.env.webkit}),b=!1,a(e,d,c),d.select(),b=!0)}}(),function(){function a(a,b){return c(a)?a=Math.round(b*(parseFloat(a)/100)):"string"==typeof a&&a.match(/^\d+$/gm)&&(a=parseInt(a,10)),a}function b(a,b){return c(a)?a=b*(parseFloat(a)/100):"string"==typeof a&&a.match(/^\d?\.\d+/gm)&&(a=parseFloat(a)),a}function c(a){return"string"==typeof a&&a.match(/^((\d*\.\d+)|(\d+))%{1}$/gm)}function d(a,b,c){return!isNaN(a)&&a>=b&&a<=c}function e(a){return a=a.toString(16),1==a.length?"0"+a:a}CKEDITOR.tools.color=CKEDITOR.tools.createClass({$:function(a,b){this._.initialColorCode=a,this._.defaultValue=b,this._.parseInput(a)},proto:{getHex:function(){if(!this._.isValidColor)return this._.defaultValue;var a=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha);return this._.formatHexString(a[0],a[1],a[2])},getHexWithAlpha:function(){if(!this._.isValidColor)return this._.defaultValue;var a=Math.round(this._.alpha*CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE);return this._.formatHexString(this._.red,this._.green,this._.blue,a)},getRgb:function(){if(!this._.isValidColor)return this._.defaultValue;var a=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha);return this._.formatRgbString("rgb",a[0],a[1],a[2])},getRgba:function(){return this._.isValidColor?this._.formatRgbString("rgba",this._.red,this._.green,this._.blue,this._.alpha):this._.defaultValue},getHsl:function(){if(!this._.isValidColor)return this._.defaultValue;var a=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha),a=this._.rgbToHsl(a[0],a[1],a[2]);return this._.formatHslString("hsl",a[0],a[1],a[2])},getHsla:function(){if(!this._.isValidColor)return this._.defaultValue;var a=this._.rgbToHsl(this._.red,this._.green,this._.blue);return this._.formatHslString("hsla",a[0],a[1],a[2],this._.alpha)},getInitialValue:function(){return this._.initialColorCode}},_:{initialColorCode:"",isValidColor:!0,red:0,green:0,blue:0,alpha:1,blendAlphaColor:function(a,b,c,d){return CKEDITOR.tools.array.map([a,b,c],function(a){return Math.round(CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE-d*(CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE-a))})},formatHexString:function(a,b,c,d){return a="#"+e(a)+e(b)+e(c),void 0!==d&&(a+=e(d)),a.toUpperCase()},formatRgbString:function(a,b,c,d,e){return b=[b,c,d],void 0!==e&&b.push(e),a+"("+b.join(",")+")"},formatHslString:function(a,b,c,d,e){return a+"("+b+","+c+"%,"+d+"%"+(void 0!==e?","+e:"")+")"},parseInput:function(a){if("string"!=typeof a)this._.isValidColor=!1;else{a=CKEDITOR.tools.trim(a);var b=this._.matchStringToNamedColor(a);b&&(a=b);var b=this._.extractColorChannelsFromHex(a),c=this._.extractColorChannelsFromRgba(a);a=this._.extractColorChannelsFromHsla(a),(a=b||c||a)?(this._.red=a[0],this._.green=a[1],this._.blue=a[2],this._.alpha=a[3]):this._.isValidColor=!1}},matchStringToNamedColor:function(a){return CKEDITOR.tools.color.namedColors[a.toLowerCase()]||null},extractColorChannelsFromHex:function(a){if(a.match(CKEDITOR.tools.color.hex3CharsRegExp)&&(a=this._.hex3ToHex6(a)),!a.match(CKEDITOR.tools.color.hex6CharsRegExp)&&!a.match(CKEDITOR.tools.color.hex8CharsRegExp))return null;a=a.split("");var b=1;return a[7]&&a[8]&&(b=parseInt(a[7]+a[8],16),b/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,b=Number(b.toFixed(1))),[parseInt(a[1]+a[2],16),parseInt(a[3]+a[4],16),parseInt(a[5]+a[6],16),b]},extractColorChannelsFromRgba:function(c){var d=this._.extractColorChannelsByPattern(c,CKEDITOR.tools.color.rgbRegExp);if(!d||(c=0===c.indexOf("rgba"))&&4!==d.length||!c&&3!==d.length)return null;var e=a(d[0],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE),f=a(d[1],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE),g=a(d[2],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE),h=1;return c&&(h=b(d[3],CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)),this._.areColorChannelsValid(e,f,g,h)?[e,f,g,h]:null},extractColorChannelsFromHsla:function(c){var d=this._.extractColorChannelsByPattern(c,CKEDITOR.tools.color.hslRegExp);if(!d||(c=0===c.indexOf("hsla"))&&4!==d.length||!c&&3!==d.length)return null;var e=a(d[0],CKEDITOR.tools.color.MAX_HUE_CHANNEL_VALUE),f=b(d[1],CKEDITOR.tools.color.MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE),g=b(d[2],CKEDITOR.tools.color.MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE),h=1,e=this._.hslToRgb(e,f,g);return c&&(h=b(d[3],CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)),e.push(h),this._.areColorChannelsValid(e[0],e[1],e[2],e[3])?e:null},hex3ToHex6:function(a){return a=a.split(""),"#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]},extractColorChannelsByPattern:function(a,b){var c=a.match(b);return c?(c=c[2].split(","),c=CKEDITOR.tools.array.map(c,function(a){return CKEDITOR.tools.trim(a)})):null},areColorChannelsValid:function(a,b,c,e){return d(a,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&d(b,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&d(c,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&d(e,0,CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)},hslToRgb:function(a,b,c){var d=function(d){var e=(d+a/30)%12;return d=b*Math.min(c,1-c),e=Math.min(e-3,9-e,1),e=Math.max(-1,e),Math.round((c-d*e)*CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)};return[d(0),d(8),d(4)]},rgbToHsl:function(a,b,c){a/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,b/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE;var d=c/CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,e=Math.max(a,b,d),f=Math.min(a,b,d);c=e-f;var g=0;switch(e){case a:g=(b-d)/c%6;break;case b:g=(d-a)/c+2;break;case d:g=(a-b)/c+4}return a=0===c?0:60*g,b=(e+f)/2,e=0,1!==b&&0!==b&&(e=c/(1-Math.abs(2*b-1))),a=Math.round(a),e=100*Math.round(e),[a,e,100*b]}},statics:{MAX_RGB_CHANNEL_VALUE:255,MAX_ALPHA_CHANNEL_VALUE:1,MAX_HUE_CHANNEL_VALUE:360,MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE:1,hex3CharsRegExp:/#([0-9a-f]{3}$)/gim,hex6CharsRegExp:/#([0-9a-f]{6}$)/gim,hex8CharsRegExp:/#([0-9a-f]{8}$)/gim,rgbRegExp:/(rgb[a]?)\(([.,\d\s%]*)\)/i,hslRegExp:/(hsl[a]?)\(([.,\d\s%]*)\)/i,namedColors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}}}),CKEDITOR.tools.style.parse._colors=CKEDITOR.tools.color.namedColors}(),CKEDITOR.dom.comment=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var a,b={},c={};for(a in CKEDITOR.dtd.$blockLimit)a in CKEDITOR.dtd.$list||(b[a]=1);for(a in CKEDITOR.dtd.$block)a in CKEDITOR.dtd.$blockLimit||a in CKEDITOR.dtd.$empty||(c[a]=1);CKEDITOR.dom.elementPath=function(a,d){var e,f=null,g=null,h=[],i=a;d=d||a.getDocument().getBody(),i||(i=d);do if(i.type==CKEDITOR.NODE_ELEMENT){if(h.push(i),!this.lastElement&&(this.lastElement=i,i.is(CKEDITOR.dtd.$object)||"false"==i.getAttribute("contenteditable")))continue;if(i.equals(d))break;if(!g&&(e=i.getName(),"true"==i.getAttribute("contenteditable")?g=i:!f&&c[e]&&(f=i),b[e])){if(e=!f&&"div"==e){a:{e=i.getChildren();for(var j=0,k=e.count();j<k;j++){var l=e.getItem(j);if(l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[l.getName()]){e=!0;break a}}e=!1}e=!e}e?f=i:g=i}}while(i=i.getParent());g||(g=d),this.block=f,this.blockLimit=g,this.root=d,this.elements=h}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var b=this.elements;if(a=a&&a.elements,!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++)if(!b[c].equals(a[c]))return!1;return!0},contains:function(a,b,c){var d,e=0;"string"==typeof a&&(d=function(b){return b.getName()==a}),a instanceof CKEDITOR.dom.element?d=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?d=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?d=a:"object"==typeof a&&(d=function(b){return b.getName()in a});var f=this.elements,g=f.length;for(b&&(c?e+=1:--g),c&&(f=Array.prototype.slice.call(f,0),f.reverse());e<g;e++)if(d(f[e]))return f[e];return null},isContextFor:function(a){var b;return!(a in CKEDITOR.dtd.$block)||(b=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!b.getDtd()[a])},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},isEmpty:function(a){var b=this.getText();return a&&(b=CKEDITOR.tools.trim(b)),!b||b===CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE},split:function(a){var b=this.$.parentNode,c=b.childNodes.length,d=this.getLength(),e=this.getDocument(),f=new CKEDITOR.dom.text(this.$.splitText(a),e);return b.childNodes.length==c&&(a>=d?(f=e.createText(""),f.insertAfter(this)):(a=e.createText(""),a.insertAfter(f),a.remove())),f},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),function(){function a(a,b,c){var d=a.serializable,e=b[c?"endContainer":"startContainer"],f=c?"endOffset":"startOffset",g=d?b.document.getById(a.startNode):a.startNode;return a=d?b.document.getById(a.endNode):a.endNode,e.equals(g.getPrevious())?(b.startOffset=b.startOffset-e.getLength()-a.getPrevious().getLength(),e=a.getNext()):e.equals(a.getPrevious())&&(b.startOffset-=e.getLength(),e=a.getNext()),e.equals(g.getParent())&&b[f]++,e.equals(a.getParent())&&b[f]++,b[c?"endContainer":"startContainer"]=e,b}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],CKEDITOR.tools.extend(a,b))};var b={createIterator:function(){var a,b=this,c=CKEDITOR.dom.walker.bookmark(),d=[];return{getNextRange:function(e){a=void 0===a?0:a+1;var f=b[a];if(f&&1<b.length){if(!a)for(var g=b.length-1;0<=g;g--)d.unshift(b[g].createBookmark(!0));if(e)for(var h=0;b[a+h+1];){var i=f.document;for(e=0,g=i.getById(d[h].endNode),i=i.getById(d[h+1].startNode);;){if(g=g.getNextSourceNode(!1),i.equals(g))e=1;else if(c(g)||g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary())continue;break}if(!e)break;h++}for(f.moveToBookmark(d.shift());h--;)g=b[++a],g.moveToBookmark(d.shift()),f.setEnd(g.endContainer,g.endOffset)}return f}}},createBookmarks:function(b){for(var c,d=[],e=0;e<this.length;e++){d.push(c=this[e].createBookmark(b,!0));for(var f=e+1;f<this.length;f++)this[f]=a(c,this[f]),this[f]=a(c,this[f],!0)}return d},createBookmarks2:function(a){for(var b=[],c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function b(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var e,c=c.split(",").sort(function(a,b){return a>b?-1:1}),f=0;f<c.length;f++)if(e=c[f],d.ie&&(e.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==e)&&(e="ie"),d[e]){b+="_"+c[f];break}return CKEDITOR.getUrl(a()+b+".css")}function c(a,c){f[a]||(CKEDITOR.document.appendStyleSheet(b(a)),f[a]=1),c&&c()}function d(a){var b=a.getById(g);return b||(b=a.getHead().append("style"),b.setAttribute("id",g),b.setAttribute("type","text/css")),b}function e(a,b,c){var d,e,f;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var g=0;g<a.length;g++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[g].$.sheet.addRule(b[e][0],f)}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?a[g].$.styleSheet.cssText+=f:a[g].$.innerHTML+=f}}var f={};CKEDITOR.skin={path:a,loadPart:function(b,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){c(b,d)}):c(b,d)},getPath:function(a){return CKEDITOR.getUrl(b(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var f;return a&&(a=a.toLowerCase(),b&&(f=this.icons[a+"-rtl"]),f||(f=this.icons[a])),a=c||f&&f.path||"",d=d||f&&f.offset,e=e||f&&f.bgsize||"16px",a&&(a=a.replace(/'/g,"\\'")),a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=d(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,d="",f="";"function"==typeof c&&(d=c(this,"editor"),f=c(this,"panel")),a=[[i,a]],e([b],d,a),e(h,f,a)}).call(this,a)}});var g="cke_ui_color",h=[],i=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){if(a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!a.getById("cke_ui_color")){var c=d(a);h.push(c),b.on("destroy",function(){h=CKEDITOR.tools.array.filter(h,function(a){return c!==a})}),(a=b.getUiColor())&&e([c],CKEDITOR.skin.chameleon(b,"panel"),[[i,a]])}},b.on("panelShow",a),b.on("menuShow",a),b.config.uiColor&&b.setUiColor(b.config.uiColor)}})}(),function(){var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var b=a.getComputedStyle("border-top-color"),c=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!b||b!=c)}catch(d){CKEDITOR.env.hc=!1}if(a.remove(),CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,b=0;b<a.length;b++)CKEDITOR.editor.prototype.constructor.apply(a[b][0],a[b][1]),CKEDITOR.add(a[b][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var a=function(){return function(a,b){for(var c=a.match(/[^#]./g),d=0;3>d;d++){var e,f=d;e=parseInt(c[d],16),e=("0"+(0>b?0|e*(1+b):0|e+(255-e)*b).toString(16)).slice(-2),c[f]=e}return"#"+c.join("")}}(),b={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")
};return function(c,d){var e=a(c.uiColor,.4),e={id:"."+c.id,defaultBorder:a(e,-.2),toolbarElementsBorder:a(e,-.25),defaultBackground:e,lightBackground:a(e,.8),darkBackground:a(e,-.15),ckeButtonOn:a(e,.4),ckeResizer:a(e,-.4),ckeColorauto:a(e,.8),dialogBody:a(e,.7),dialogTab:a(e,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:a(e,-.6),menubuttonHover:a(e,.1),menubuttonIcon:a(e,.5),menubuttonIconHover:a(e,.3)};return b[d].output(e).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={}),this._["default"]=this._.initValue=a["default"]||"",this._.required=a.required||!1;for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},b={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},c={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},d={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},e=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),f=/^on([A-Z]\w+)/,g=function(a){for(var b in a)(f.test(b)||"title"==b||"type"==b)&&delete a[b];return a},h=function(a){a=a.data.getKeystroke(),a==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):a==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,c,d,e){if(!(4>arguments.length)){var f=a.call(this,c);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var g={role:c.role||"presentation"};c.includeLabel&&(g["aria-labelledby"]=f.labelId),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"div",null,g,function(){var a=[],d=c.required?" cke_required":"";return"horizontal"!=c.labelLayout?a.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',c.controlStyle?' style="'+c.controlStyle+'"':"",' role="presentation">',e.call(this,b,c),"</div>"):(d={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(c.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+e.call(this,b,c)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,d,a)),a.join("")})}},textInput:function(b,c,d){if(!(3>arguments.length)){a.call(this,c);var e=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",f={"class":"cke_dialog_ui_input_"+c.type,id:e,type:c.type};c.validate&&(this.validate=c.validate),c.maxLength&&(f.maxlength=c.maxLength),c.size&&(f.size=c.size),c.inputStyle&&(f.style=c.inputStyle);var g=this,i=!1;b.on("load",function(){g.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(i=!0)}),g.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&i&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),i=!1),g.bidi&&h.call(g,a)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=['<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'];c.width&&a.push('style="width:'+c.width+'" '),a.push("><input "),f["aria-labelledby"]=this._.labelId,this._.required&&(f["aria-required"]=this._.required);for(var b in f)a.push(b+'="'+f[b]+'" ');return a.push(" /></div>"),a.join("")})}},textarea:function(b,c,d){if(!(3>arguments.length)){a.call(this,c);var e=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",g={};c.validate&&(this.validate=c.validate),g.rows=c.rows||5,g.cols=c.cols||20,g["class"]="cke_dialog_ui_input_textarea "+(c["class"]||""),"undefined"!=typeof c.inputStyle&&(g.style=c.inputStyle),c.dir&&(g.dir=c.dir),e.bidi&&b.on("load",function(){e.getInputElement().on("keyup",h)},e),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){g["aria-labelledby"]=this._.labelId,this._.required&&(g["aria-required"]=this._.required);var a,b=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',f,'" '];for(a in g)b.push(a+'="'+CKEDITOR.tools.htmlEncode(g[a])+'" ');return b.push(">",CKEDITOR.tools.htmlEncode(e._["default"]),"</textarea></div>"),b.join("")})}},checkbox:function(b,c,d){if(!(3>arguments.length)){var e=a.call(this,c,{"default":!!c["default"]});c.validate&&(this.validate=c.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"span",null,null,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],f=CKEDITOR.tools.getNextId()+"_label",h={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":f};return g(a),c["default"]&&(h.checked="checked"),"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.checkbox=new CKEDITOR.ui.dialog.uiElement(b,a,d,"input",null,h),d.push(' <label id="',f,'" for="',h.id,'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(c.label),"</label>"),d.join("")})}},radio:function(b,c,d){if(!(3>arguments.length)){a.call(this,c),this._["default"]||(this._["default"]=this._.initValue=c.items[0][1]),c.validate&&(this.validate=c.validate);var e=[],f=this;c.role="radiogroup",c.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){for(var a=[],d=[],h=(c.id?c.id:CKEDITOR.tools.getNextId())+"_radio",i=0;i<c.items.length;i++){var j=c.items[i],k=void 0!==j[2]?j[2]:j[0],l=void 0!==j[1]?j[1]:j[0],m=CKEDITOR.tools.getNextId()+"_radio_input",n=m+"_label",m=CKEDITOR.tools.extend({},c,{id:m,title:null,type:null},!0),k=CKEDITOR.tools.extend({},m,{title:k},!0),o={type:"radio","class":"cke_dialog_ui_radio_input",name:h,value:l,"aria-labelledby":n},p=[];f._["default"]==l&&(o.checked="checked"),g(m),g(k),"undefined"!=typeof m.inputStyle&&(m.style=m.inputStyle),m.keyboardFocusable=!0,e.push(new CKEDITOR.ui.dialog.uiElement(b,m,p,"input",null,o)),p.push(" "),new CKEDITOR.ui.dialog.uiElement(b,k,p,"label",null,{id:n,"for":o.id},j[0]),a.push(p.join(""))}return new CKEDITOR.ui.dialog.hbox(b,e,a,d),d.join("")}),this._.children=e}},button:function(b,c,d){if(arguments.length){"function"==typeof c&&(c=c(b.getParentEditor())),a.call(this,c,{disabled:c.disabled||!1}),CKEDITOR.event.implementOn(this);var e=this;b.on("load",function(){var a=this.getElement();!function(){a.on("click",function(a){e.click(),a.data.preventDefault()}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(e.click(),a.data.preventDefault())})}(),a.unselectable()},this);var f=CKEDITOR.tools.extend({},c);delete f.style;var g=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,f,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true","class":c["class"],role:"button","aria-labelledby":g},'<span id="'+g+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(c.label)+"</span>")}},select:function(b,c,d){if(!(3>arguments.length)){var e=a.call(this,c);c.validate&&(this.validate=c.validate),e.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],f=[],h={id:e.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};d.push('<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'),c.width&&d.push('style="width:'+c.width+'" '),d.push(">"),void 0!==c.size&&(h.size=c.size),void 0!==c.multiple&&(h.multiple=c.multiple),g(a);for(var i,j=0;j<c.items.length&&(i=c.items[j]);j++)f.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==i[1]?i[1]:i[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(i[0]));return"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.select=new CKEDITOR.ui.dialog.uiElement(b,a,d,"select",null,h,f.join("")),d.push("</div>"),d.join("")})}},file:function(b,c,d){if(!(3>arguments.length)){void 0===c["default"]&&(c["default"]="");var e=CKEDITOR.tools.extend(a.call(this,c),{definition:c,buttons:[]});c.validate&&(this.validate=c.validate),b.on("load",function(){CKEDITOR.document.getById(e.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){e.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',e.frameId,'" title="',c.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")})}},fileButton:function(b,c,d){var e=this;if(!(3>arguments.length)){a.call(this,c),c.validate&&(this.validate=c.validate);var f=CKEDITOR.tools.extend({},c),g=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(a){var d=c["for"];a=!!g&&g.call(this,a),!1!==a&&("xhr"!==a&&b.getContentElement(d[0],d[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(c["for"][0],c["for"][1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,b,f,d)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(3>arguments.length)){var g=[],h=e.html;"<"!=h.charAt(0)&&(h="<span>"+h+"</span>");var i=e.focus;if(i){var j=this.focus;this.focus=function(){("function"==typeof i?i:j).call(this),this.fire("focus")},e.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,d,e,g,"span",null,null,""),g=g.join("").match(a),h=h.match(b)||["","",""],c.test(h[1])&&(h[1]=h[1].slice(0,-1),h[2]="/"+h[2]),f.push([h[1]," ",g[1]||"",h[2]].join(""))}}}(),fieldset:function(a,b,c,d,e){var f=e.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);return 1>b.getChildCount()?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||1>a.getChildCount()?"":a.getChild(0).getText()},eventProcessors:e},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){if(this.bidi){var b=a&&a.charAt(0);(b="‪"==b?"ltr":"‫"==b?"rtl":null)&&(a=a.slice(1)),this.setDirectionMarker(b)}return a||(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var a=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&a){var b=this.getDirectionMarker();b&&(a=("ltr"==b?"‪":"‫")+a)}return a},setDirectionMarker:function(a){var b=this.getInputElement();a?b.setAttributes({dir:a,"data-cke-dir-marker":a}):this.getDirectionMarker()&&b.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?CKEDITOR.env.ie?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?e.onChange.apply(this,arguments):(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null)}},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var c,d=this._.children,e=0;e<d.length&&(c=d[e]);e++)c.getElement().$.checked=c.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a,b=this._.children;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked)return void b[a].getElement().focus();b[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?e.onChange.apply(this,arguments):(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",b),null)}}},d,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,d,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b,c,d=/^on([A-Z]\w+)/,e=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(c in a)(b=c.match(d))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,a[c]):e(this,this._.dialog,b[1].toLowerCase(),a[c]));return this},reset:function(){function a(){c.$.open();var a="";d.size&&(a=d.size-(CKEDITOR.env.ie?7:0));var j=b.frameId+"_input";for(c.$.write(['<html dir="'+h+'" lang="'+i+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+h+'" lang="'+i+'" action="',CKEDITOR.tools.htmlEncode(d.action),'"><label id="',b.labelId,'" for="',j,'" style="display:none">',CKEDITOR.tools.htmlEncode(d.label),'</label><input style="width:100%" id="',j,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(d.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<a?a:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+g+")}","</script>"].join("")),c.$.close(),a=0;a<e.length;a++)e[a].enable()}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),d=b.definition,e=b.buttons,f=this.formLoadedNumber,g=this.formUnloadNumber,h=b.dialog._.editor.lang.dir,i=b.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),g=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(g)})),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",b),CKEDITOR.dialog.addUIElement("password",b),CKEDITOR.dialog.addUIElement("tel",b),CKEDITOR.dialog.addUIElement("textarea",c),CKEDITOR.dialog.addUIElement("checkbox",c),CKEDITOR.dialog.addUIElement("radio",c),CKEDITOR.dialog.addUIElement("button",c),CKEDITOR.dialog.addUIElement("select",c),CKEDITOR.dialog.addUIElement("file",c),CKEDITOR.dialog.addUIElement("fileButton",c),CKEDITOR.dialog.addUIElement("html",c),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var d,e=b.children,f=[],g=[],h=0;h<e.length&&(d=e[h]);h++){var i=[];f.push(i),g.push(CKEDITOR.dialog._.uiElementBuilders[d.type].build(a,d,i))}return new CKEDITOR.ui.dialog[b.type](a,g,f,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(a){a._.tabBarMode=!0,a._.tabs[a._.currentTabId][0].focus(),a._.currentFocusIndex=-1}function b(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function c(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function d(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;d<e;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function e(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function f(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function g(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",C).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);return a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+a+'" tabIndex="-1"></iframe>').appendTo(c.getParent())),d.unselectable(),e.unselectable(),{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),footer:c.getChild([3,0,1,0])}}}function h(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function i(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}function j(a,b){this.dialog=a;for(var c,d=b.contents,e=0;c=d[e];e++)d[e]=c&&new k(a,c);CKEDITOR.tools.extend(this,b)}function k(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function l(a){function b(b){var c=a.getSize(),i=a.parts.dialog.getParent().getClientSize(),j=b.data.$.screenX,k=b.data.$.screenY,l=j-d.x,m=k-d.y;d={x:j,y:k},e.x+=l,e.y+=m,j=e.x+h[3]<g?-h[3]:e.x-h[1]>i.width-c.width-g?i.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,c=e.y+h[0]<g?-h[0]:e.y-h[2]>i.height-c.height-g?i.height-c.height+h[2]:e.y,j=Math.floor(j),c=Math.floor(c),a.move(j,c,1),b.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=y.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null,f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20),a.parts.title.on("mousedown",function(f){if(!a._.moved){var g=a._.element;g.getFirst().setStyle("position","absolute"),g.removeStyle("display"),a._.moved=!0,a.layout()}d={x:f.data.$.screenX,y:f.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat&&(g=y.getChild(0).getFrameDocument(),g.on("mousemove",b),g.on("mouseup",c)),f.data.preventDefault()},a)}function m(a){function b(b){var c="rtl"==l.lang.dir,k=j.width,m=j.height,o=k+(b.data.$.screenX-i.x)*(c?-1:1)*(a._.moved?1:2),p=m+(b.data.$.screenY-i.y)*(a._.moved?1:2),q=a._.element.getFirst(),q=c&&parseInt(q.getComputedStyle("right"),10),r=a.getPosition();r.x=r.x||0,r.y=r.y||0,r.y+p>h.height&&(p=h.height-r.y),(c?q:r.x)+o>h.width&&(o=h.width-(c?q:r.x)),p=Math.floor(p),o=Math.floor(o),e!=CKEDITOR.DIALOG_RESIZE_WIDTH&&e!=CKEDITOR.DIALOG_RESIZE_BOTH||(k=Math.max(d.minWidth||0,o-f)),e!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&e!=CKEDITOR.DIALOG_RESIZE_BOTH||(m=Math.max(d.minHeight||0,p-g)),a.resize(k,m),a._.moved&&n(a,a._.position.x,a._.position.y),a._.moved||a.layout(),b.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.document.removeListener("mousemove",b),k&&(k.remove(),k=null),CKEDITOR.env.ie6Compat){var a=y.getChild(0).getFrameDocument();a.removeListener("mouseup",c),a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f,g,h,i,j,k,l=a.getParentEditor(),m=CKEDITOR.tools.addFunction(function(d){function e(a){return a.isVisible()}j=a.getSize();var l=a.parts.contents,m=l.$.getElementsByTagName("iframe").length,n=!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks);m&&(k=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%; left:0; top:0;"></div>'),l.append(k)),g=j.height-a.parts.contents.getFirst(e).getSize("height",n),f=j.width-a.parts.contents.getFirst(e).getSize("width",1),i={x:d.screenX,y:d.screenY},h=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),CKEDITOR.env.ie6Compat&&(l=y.getChild(0).getFrameDocument(),l.on("mousemove",b),l.on("mouseup",c)),d.preventDefault&&d.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+l.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(l.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+m+', event )">'+("ltr"==l.lang.dir?"◢":"◣")+"</div>"),a.parts.footer.append(b,1)}),l.on("destroy",function(){CKEDITOR.tools.removeFunction(m)})}}function n(a,b,c){var d=a.parts.dialog.getParent().getClientSize(),e=a.getSize(),f=a._.viewportRatio,g=Math.max(d.width-e.width,0),d=Math.max(d.height-e.height,0);f.width=g?b/g:f.width,f.height=d?c/d:f.height,a._.viewportRatio=f}function o(a){a.data.preventDefault(1)}function p(a){var b=a.config,c=CKEDITOR.skinName||a.config.skin,d=b.dialog_backgroundCoverColor||("moono-lisa"==c?"black":"white"),c=b.dialog_backgroundCoverOpacity,e=b.baseFloatZIndex,b=CKEDITOR.tools.genKey(d,c,e),f=G[b];CKEDITOR.document.getBody().addClass("cke_dialog_open"),f?f.show():(e=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",e,"; top: 0px; left: 0px; ","; width: 100%; height: 100%;",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(d="<html><body style=\\'background-color:"+d+";\\'></body></html>",e.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),e.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),e.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),e.push("</div>"),f=CKEDITOR.dom.element.createFromHtml(e.join("")),f.setOpacity(void 0!==c?c:.5),f.on("keydown",o),f.on("keypress",o),f.on("keyup",o),f.appendTo(CKEDITOR.document.getBody()),G[b]=f),a.focusManager.add(f),y=f,CKEDITOR.env.mac&&CKEDITOR.env.webkit||f.focus()}function q(a){CKEDITOR.document.getBody().removeClass("cke_dialog_open"),y&&(a.focusManager.remove(y),y.hide())}function r(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=H[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())}function s(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=H[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))}function t(a,b,c,d,e){(H[c]||(H[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})}function u(a){for(var b in H){for(var c=H[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete H[b]}}function v(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])}function w(){}var x,y,z=CKEDITOR.tools.cssLength,A=!1,B=!CKEDITOR.env.ie||CKEDITOR.env.edge,C='<div class="cke_reset_all cke_dialog_container {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" style="'+(B?"display:flex":"")+'" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="'+(B?"margin:auto":"position:absolute")+'" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(d,h){function i(){var a=y._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}function k(a){var b=y._.focusList;if(a=a||0,!(1>b.length)){var c=y._.currentFocusIndex;y._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(d){}var e=c,f=1<y._.pageCount;do{if(e+=a,f&&!y._.tabBarMode&&(e==b.length||-1==e))return y._.tabBarMode=!0,y._.tabs[y._.currentTabId][0].focus(),void(y._.currentFocusIndex=-1);if(e=(e+b.length)%b.length,e==c)break}while(a&&!b[e].isFocusable());b[e].focus(),"text"==b[e].type&&b[e].select()}}function n(e){if(y==CKEDITOR.dialog._.currentTop){var f=e.data.getKeystroke(),g="rtl"==d.lang.dir,h=[37,38,39,40];if(p=q=0,9==f||f==CKEDITOR.SHIFT+9)k(f==CKEDITOR.SHIFT+9?-1:1),p=1;else if(f==CKEDITOR.ALT+121&&!y._.tabBarMode&&1<y.getPageCount())a(y),p=1;else if(-1!=CKEDITOR.tools.indexOf(h,f)&&y._.tabBarMode)f=-1!=CKEDITOR.tools.indexOf([g?39:37,38],f)?b.call(y):c.call(y),y.selectPage(f),y._.tabs[f][0].focus(),p=1;else if(13!=f&&32!=f||!y._.tabBarMode)if(13==f)f=e.data.getTarget(),f.is("a","button","select","textarea")||f.is("input")&&"button"==f.$.type||((f=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(f.click,0,f),p=1),q=1;else{if(27!=f)return;(f=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(f.click,0,f):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),q=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,k(1),p=1;o(e)}}function o(a){p?a.data.preventDefault(1):q&&a.data.stopPropagation()}var p,q,r=CKEDITOR.dialog._.dialogDefinitions[h],s=CKEDITOR.tools.clone(x),t=d.config.dialog_buttonsOrder||"OS",u=d.lang.dir,v={};if(("OS"==t&&CKEDITOR.env.mac||"rtl"==t&&"ltr"==u||"ltr"==t&&"rtl"==u)&&s.buttons.reverse(),r=CKEDITOR.tools.extend(r(d),s),r=CKEDITOR.tools.clone(r),r=new j(this,r),s=g(d),this._={editor:d,element:s.element,name:h,model:null,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},viewportRatio:{width:.5,height:.5},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=s.parts,CKEDITOR.tools.setTimeout(function(){d.fire("ariaWidget",this.parts.contents)},0,this),s={top:0,visibility:"hidden"},CKEDITOR.env.ie6Compat&&(s.position="absolute"),s["rtl"==u?"right":"left"]=0,this.parts.dialog.setStyles(s),CKEDITOR.event.call(this),this.definition=r=CKEDITOR.fire("dialogDefinition",{
name:h,definition:r,dialog:this},d).definition,!("removeDialogTabs"in d._)&&d.config.removeDialogTabs){for(s=d.config.removeDialogTabs.split(";"),u=0;u<s.length;u++)if(t=s[u].split(":"),2==t.length){var w=t[0];v[w]||(v[w]=[]),v[w].push(t[1])}d._.removeDialogTabs=v}if(d._.removeDialogTabs&&(v=d._.removeDialogTabs[h]))for(u=0;u<v.length;u++)r.removeContents(v[u]);r.onLoad&&this.on("load",r.onLoad),r.onShow&&this.on("show",r.onShow),r.onHide&&this.on("hide",r.onHide),r.onOk&&this.on("ok",function(a){d.fire("saveSnapshot"),setTimeout(function(){d.fire("saveSnapshot")},0),!1===r.onOk.call(this,a)&&(a.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,r.onCancel&&this.on("cancel",function(a){!1===r.onCancel.call(this,a)&&(a.data.hide=!1)});var y=this,z=function(a){var b,c=y._.contents,d=!1;for(b in c)for(var e in c[b])if(d=a.call(this,c[b][e]))return};this.on("ok",function(a){z(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;return d&&(a.data.hide=!1,a.stop()),e.call(b,!d,"string"==typeof c?c:void 0),d}})},this,null,0),this.on("cancel",function(a){z(function(b){if(b.isChanged())return d.config.dialog_noConfirmCancel||confirm(d.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a.data.preventDefault()},this),this.changeFocus=k;var A=this._.element;for(d.focusManager.add(A,1),this.on("show",function(){A.on("keydown",n,this),CKEDITOR.env.gecko&&A.on("keypress",o,this)}),this.on("hide",function(){A.removeListener("keydown",n),CKEDITOR.env.gecko&&A.removeListener("keypress",o),z(function(a){f.apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",n,this,null,0)}),this.on("show",function(){i();var a=1<y._.pageCount;d.config.dialog_startupFocusTab&&a?(y._.tabBarMode=!0,y._.tabs[y._.currentTabId][0].focus(),y._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=a?-1:this._.focusList.length-1,r.onFocus?(a=r.onFocus.call(this))&&a.focus():k(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),l(this),m(this),new CKEDITOR.dom.text(r.title,CKEDITOR.document).appendTo(this.parts.title),u=0;u<r.contents.length;u++)(v=r.contents[u])&&this.addPage(v);for(this.parts.tabs.on("click",function(b){var c=b.data.getTarget();c.hasClass("cke_dialog_tab")&&(c=c.$.id,this.selectPage(c.substring(4,c.lastIndexOf("_"))),a(this),b.data.preventDefault())},this),u=[],v=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:r.buttons},u).getChild(),this.parts.footer.setHtml(u.join("")),u=0;u<v.length;u++)this._.buttons[v[u].id]=v[u]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(a,b){if(!this._.contentSize||this._.contentSize.width!=a||this._.contentSize.height!=b){if(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position){var c=this.parts.dialog.getParent().getClientSize().width;this._.position.x=c-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:a,height:b}}},getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir;CKEDITOR.env.ie&&d.setStyle("zoom","100%");var f=this.parts.dialog.getParent().getClientSize(),g=this.getSize(),h=this._.viewportRatio,i=Math.max(f.width-g.width,0),f=Math.max(f.height-g.height,0);this._.position&&this._.position.x==a&&this._.position.y==b?(a=Math.floor(i*h.width),b=Math.floor(f*h.height)):n(this,a,b),this._.position={x:a,y:b},e&&(a=i-a),b={top:(0<b?b:0)+"px"},b[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition,c=CKEDITOR.document.getBody(),d=this._.editor.config.baseFloatZIndex;a.getParent()&&a.getParent().equals(c)?a.setStyle("display",B?"flex":"block"):a.appendTo(c),this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=d),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),this.getElement().setStyle("z-index",CKEDITOR.dialog._.currentZIndex),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,p(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,c=this._.parentDialog.getElement().getFirst(),c.$.style.zIndex-=Math.floor(d/2),this._.parentDialog.getElement().setStyle("z-index",c.$.style.zIndex),CKEDITOR.dialog._.currentTop=this),a.on("keydown",r),a.on("keyup",s),this._.hasFocus=!1;for(var e in b.contents)if(b.contents[e]){var a=b.contents[e],d=this._.tabs[a.id],c=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var h=this._.contents[a.id][g];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),f++))}!f||c&&!this._.editor.activeFilter.check(c)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),i(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog;if(this._.moved||!B){var b,c=this.getSize(),d=CKEDITOR.document.getWindow().getViewPaneSize();this._.moved&&this._.position?(b=this._.position.x,c=this._.position.y):(b=(d.width-c.width)/2,c=(d.height-c.height)/2),CKEDITOR.env.ie6Compat||(a.setStyle("position","absolute"),a.removeStyle("margin")),b=Math.floor(b),c=Math.floor(c),this.move(b,c)}},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),u(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();this._.parentDialog.getElement().removeStyle("z-index"),b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else q(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",r),a.removeListener("keyup",s);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock(),CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),g=0;d=f.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0),b=CKEDITOR.dom.element.createFromHtml(b.join("")),b.setAttribute("role","tabpanel"),b.setStyle("min-height","100%"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),this.parts.tabs.append(c),a.accessKey&&(t(this,this,"CTRL+"+a.accessKey,w,v),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],e=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),c.removeAttribute("aria-selected"),e.hide()),e.setAttribute("aria-hidden",b!=a)}var f=this._.tabs[a];f[0].addClass("cke_dialog_tab_selected"),f[0].setAttribute("aria-selected",!0),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(d(f[1]),f[1].show(),setTimeout(function(){d(f[1],1)},0)):f[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var c=this._.tabs[a]&&this._.tabs[a][0];c&&1!=this._.pageCount&&c.isVisible()&&(a==this._.currentTabId&&this.selectPage(b.call(this)),c.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new h(this,a,b));else{this._.focusList.splice(b,0,new h(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){if(this.state=a,a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",c),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}},getModel:function(a){return this._.model?this._.model:this.definition.getModel?this.definition.getModel(a):null},setModel:function(a){this._.model=a},getMode:function(a){return this.definition.getMode?this.definition.getMode(a):(a=this.getModel(a),!a||a instanceof CKEDITOR.dom.element&&!a.getParent()?CKEDITOR.dialog.CREATION_MODE:CKEDITOR.dialog.EDITING_MODE)}},CKEDITOR.tools.extend(CKEDITOR.dialog,{CREATION_MODE:0,EDITING_MODE:1,add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return a=a.config.removeDialogTabs,!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog,!1!==a.fire("ok",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog,!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype),x={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var D=function(a,b,c){for(var d,e=0;d=a[e];e++)if(d.id==b||c&&d[c]&&(d=D(d[c],b,c)))return d;return null},E=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]&&(f=E(f[d],b,c,d,!0)))return f}if(e)return null}return a.push(b),b},F=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return a.splice(e,1);if(c&&d[c]&&(d=F(d[c],b,c)))return d}return null};j.prototype={getContents:function(a){return D(this.contents,a)},getButton:function(a){return D(this.buttons,a)},addContents:function(a,b){return E(this.contents,a,b)},addButton:function(a,b){return E(this.buttons,a,b)},removeContents:function(a){F(this.contents,a)},removeButton:function(a){F(this.buttons,a)}},k.prototype={get:function(a){return D(this.elements,a,"children")},add:function(a,b){return E(this.elements,a,b,"children")},remove:function(a){F(this.elements,a,"children")}};var G={},H={};!function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(4>arguments.length)){var h=(d.call?d(b):d)||"div",i=["<",h," "],j=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},l=(g&&g.call?g.call(this,a,b):g)||"",m=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(j.display="none",this.notAllowed=!0),k.id=m;var n={};b.type&&(n["cke_dialog_ui_"+b.type]=1),b.className&&(n[b.className]=1),b.disabled&&(n.cke_disabled=1);for(var o=k["class"]&&k["class"].split?k["class"].split(" "):[],m=0;m<o.length;m++)o[m]&&(n[o[m]]=1);o=[];for(m in n)o.push(m);k["class"]=o.join(" "),b.title&&(k.title=b.title),n=(b.style||"").split(";"),b.align&&(o=b.align,j["margin-left"]="left"==o?0:"auto",j["margin-right"]="right"==o?0:"auto");for(m in j)n.push(m+":"+j[m]);for(b.hidden&&n.push("display:none"),m=n.length-1;0<=m;m--)""===n[m]&&n.splice(m,1);0<n.length&&(k.style=(k.style?k.style+"; ":"")+n.join("; "));for(m in k)i.push(m+'="'+CKEDITOR.tools.htmlEncode(k[m])+'" ');i.push(">",l,"</",h,">"),c.push(i.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&t(this,a,"CTRL+"+b.accessKey);var p=this;a.on("load",function(){var b=p.getInputElement();if(b){var c=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,p.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){p.fire("blur"),c&&this.removeClass(c)})}}),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=p.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var f,g=this._.children=b,h=e&&e.widths||null,i=e&&e.height||null,j={role:"presentation"};e&&e.align&&(j.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},j,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(f=0;f<c.length;f++){var b="cke_dialog_ui_hbox_child",d=[];0===f&&(b="cke_dialog_ui_hbox_first"),f==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),h?h[f]&&d.push("width:"+z(h[f])):d.push("width:"+Math.floor(100/c.length)+"%"),i&&d.push("height:"+z(i)),e&&void 0!==e.padding&&d.push("padding:"+z(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[f].align&&d.push("text-align:"+g[f].align),0<d.length&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[f],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+z(g||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var i=[];b.push('<tr><td role="presentation" '),g&&i.push("width:"+z(g||"100%")),h?i.push("height:"+z(h[d])):e&&e.expand&&i.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!==e.padding&&i.push("padding:"+z(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&i.push("text-align:"+f[d].align),0<i.length&&b.push('style="',i.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var b,c,d=/^on([A-Z]\w+)/,e=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(c in a)(b=c.match(d))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,a[c]):e(this,this._.dialog,b[1].toLowerCase(),a[c]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return 1>arguments.length?this._.children.concat():(a.splice||(a=[a]),2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,c){for(var d,e=b.children,f=[],g=[],h=0;h<e.length&&(d=e[h]);h++){var i=[];f.push(i),g.push(CKEDITOR.dialog._.uiElementBuilders[d.type].build(a,d,i))}return new CKEDITOR.ui.dialog[b.type](a,g,f,c,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){var b=this.tabId;a.openDialog(this.dialogName,function(a){b&&a.selectPage(b)})},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(--|-?([a-zA-Z_]|\\))(\\|[a-zA-Z0-9-_])*\s*?:\s*?[^:;]+$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var b,c,d=this&&this.getValue?this.getValue():a[0],e=CKEDITOR.VALIDATE_AND,f=[];for(c=0;c<a.length&&"function"==typeof a[c];c++)f.push(a[c]);c<a.length&&"string"==typeof a[c]&&(b=a[c],c++),c<a.length&&"number"==typeof a[c]&&(e=a[c]);var g=e==CKEDITOR.VALIDATE_AND;for(c=0;c<f.length;c++)g=e==CKEDITOR.VALIDATE_AND?g&&f[c](d):g||f[c](d);return!!g||b}},regex:function(a,b){return function(c){return c=this&&this.getValue?this.getValue():c,!!a.test(c)||b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return a=CKEDITOR.tools.trim(a).split(";"),""===a[a.length-1]&&a.pop(),CKEDITOR.tools.array.every(a,function(a){return f.test(CKEDITOR.tools.trim(a))})},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in G)G[c].remove();G={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b,c){var d=null,e=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&p(this),"function"==typeof e)e=this._.storedDialogs||(this._.storedDialogs={}),d=e[a]||(e[a]=new CKEDITOR.dialog(this,a)),d.setModel(c),b&&b.call(d,d),d.show();else{if("failed"==e)throw q(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof e&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b,c)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),d&&d.once("hide",function(){d.setModel(null)},null,null,999),d}}),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){A||(CKEDITOR.document.appendStyleSheet(this.path+"styles/dialog.css"),A=!0),a.on("doubleclick",function(b){b.data.dialog&&a.openDialog(b.data.dialog)},null,null,999)}})}(),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var b=this;a.addCommand("a11yHelp",{exec:function(){var c=a.langCode,c=b.availableLangs[c]?c:b.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"dialogs/lang/"+c+".js"),function(){a.lang.a11yhelp=b.langEntries[c],a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),a.on("ariaEditorHelpLabel",function(b){b.data.label=a.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1},b.canUndo=!1,b.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var b=0,c=function(c,e,f,g){if(g){g=new CKEDITOR.style(g);var h=d[f];h.unshift(g),a.attachStyleStateChange(g,function(b){!a.readOnly&&a.getCommand(f).setState(b)}),a.addCommand(f,new CKEDITOR.styleCommand(g,{contentForms:h})),a.ui.addButton&&a.ui.addButton(c,{label:e,command:f,toolbar:"basicstyles,"+(b+=10)})}},d={bold:["strong","b",["span",function(a){return a=a.styles["font-weight"],"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},e=a.config,f=a.lang.basicstyles;c("Bold",f.bold,"bold",e.coreStyles_bold),c("Italic",f.italic,"italic",e.coreStyles_italic),c("Underline",f.underline,"underline",e.coreStyles_underline),c("Strike",f.strike,"strike",e.coreStyles_strike),c("Subscript",f.subscript,"subscript",e.coreStyles_subscript),c("Superscript",f.superscript,"superscript",e.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var a={exec:function(a){var b=a.getCommand("blockquote").state,c=a.getSelection(),d=c&&c.getRanges()[0];if(d){var e=c.createBookmarks();if(CKEDITOR.env.ie){var f,g=e[0].startNode,h=e[0].endNode;if(g&&"blockquote"==g.getParent().getName())for(f=g;f=f.getNext();)if(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()){g.move(f,!0);break}if(h&&"blockquote"==h.getParent().getName())for(f=h;f=f.getPrevious();)if(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()){h.move(f);break}}var i=d.createIterator();if(i.enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR,b==CKEDITOR.TRISTATE_OFF){for(g=[];b=i.getNextParagraph();)g.push(b);for(1>g.length&&(b=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),h=e.shift(),d.insertNode(b),b.append(new CKEDITOR.dom.text("\ufeff",a.document)),d.moveToBookmark(h),d.selectNodeContents(b),d.collapse(!0),h=d.createBookmark(),g.push(b),e.unshift(h)),f=g[0].getParent(),d=[],h=0;h<g.length;h++)b=g[h],f=f.getCommonAncestor(b.getParent());for(b={table:1,tbody:1,tr:1,ol:1,ul:1};b[f.getName()];)f=f.getParent();for(h=null;0<g.length;){for(b=g.shift();!b.getParent().equals(f);)b=b.getParent();b.equals(h)||d.push(b),h=b}for(;0<d.length;)if(b=d.shift(),"blockquote"==b.getName()){for(h=new CKEDITOR.dom.documentFragment(a.document);b.getFirst();)h.append(b.getFirst().remove()),g.push(h.getLast());h.replace(b)}else g.push(b);for(d=a.document.createElement("blockquote"),d.insertBefore(g[0]);0<g.length;)b=g.shift(),d.append(b)}else if(b==CKEDITOR.TRISTATE_ON){for(h=[],f={};b=i.getNextParagraph();){for(g=d=null;b.getParent();){if("blockquote"==b.getParent().getName()){d=b.getParent(),g=b;break}b=b.getParent()}d&&g&&!g.getCustomData("blockquote_moveout")&&(h.push(g),CKEDITOR.dom.element.setMarker(f,g,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(f),b=[],g=[],f={};0<h.length;)i=h.shift(),d=i.getParent(),i.getPrevious()?i.getNext()?(i.breakParent(i.getParent()),g.push(i.getNext())):i.remove().insertAfter(d):i.remove().insertBefore(d),d.getCustomData("blockquote_processed")||(g.push(d),CKEDITOR.dom.element.setMarker(f,d,"blockquote_processed",!0)),b.push(i);for(CKEDITOR.dom.element.clearAllMarkers(f),h=g.length-1;0<=h;h--){d=g[h];a:{f=d;for(var i=0,j=f.getChildCount(),k=void 0;i<j&&(k=f.getChild(i));i++)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){f=!1;break a}f=!0}f&&d.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(d=!0;b.length;)if(i=b.shift(),"div"==i.getName()){for(h=new CKEDITOR.dom.documentFragment(a.document),!d||!i.getPrevious()||i.getPrevious().type==CKEDITOR.NODE_ELEMENT&&i.getPrevious().isBlockBoundary()||h.append(a.document.createElement("br")),d=i.getNext()&&!(i.getNext().type==CKEDITOR.NODE_ELEMENT&&i.getNext().isBlockBoundary());i.getFirst();)i.getFirst().remove().appendTo(h);d&&h.append(a.document.createElement("br")),h.replace(i),d=!1}}c.selectBookmarks(e),a.focus()}},refresh:function(a,b){this.setState(a.elementPath(b.block||b.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(b){b.blockless||(b.addCommand("blockquote",a),b.ui.addButton&&b.ui.addButton("Blockquote",{label:b.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function a(a,b){CKEDITOR.tools.extend(this,b,{editor:a,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:a._.notificationArea}),b.type||(this.type="info"),this.element=this._createElement(),a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function b(a){var b=this;this.editor=a,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),a.on("destroy",function(){b._removeListeners(),b.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(a){function c(a){var b=new CKEDITOR.dom.element("div");b.setStyles({position:"fixed","margin-left":"-9999px"}),b.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),b.setText(a),CKEDITOR.document.getBody().append(b),setTimeout(function(){b.remove()},100)}a._.notificationArea=new b(a),a.showNotification=function(b,c,d){var e,f;return"progress"==c?e=d:f=d,b=new CKEDITOR.plugins.notification(a,{message:b,type:c,progress:e,duration:f}),b.show(),b},a.on("key",function(b){if(27==b.data.keyCode){var d=a._.notificationArea.notifications;d.length&&(c(a.lang.notification.closed),d[d.length-1].hide(),
b.cancel())}})}}),a.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(a){var b=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:a})&&(b=!1);var c=this.element,d=c.findOne(".cke_notification_message"),e=c.findOne(".cke_notification_progress"),f=a.type;c.removeAttribute("role"),a.progress&&"progress"!=this.type&&(f="progress"),f&&(c.removeClass(this._getClass()),c.removeAttribute("aria-label"),this.type=f,c.addClass(this._getClass()),c.setAttribute("aria-label",this.type),"progress"!=this.type||e?"progress"!=this.type&&e&&e.remove():(e=this._createProgressElement(),e.insertBefore(d))),void 0!==a.message&&(this.message=a.message,d.setHtml(this.message)),void 0!==a.progress&&(this.progress=a.progress,e&&e.setStyle("width",this._getPercentageProgress())),b&&a.important&&(c.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=a.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var a,b,c=this,d=this.editor.lang.common.close;return a=new CKEDITOR.dom.element("div"),a.addClass("cke_notification"),a.addClass(this._getClass()),a.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&a.append(this._createProgressElement()),b=new CKEDITOR.dom.element("p"),b.addClass("cke_notification_message"),b.setHtml(this.message),a.append(b),b=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+d+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),a.append(b),b.on("click",function(){c.editor.focus(),c.hide()}),a},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var a=new CKEDITOR.dom.element("span");return a.addClass("cke_notification_progress"),a.setStyle("width",this._getPercentageProgress()),a},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var a,b=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?a=this.duration:"info"!=this.type&&"success"!=this.type||(a="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),a&&(b._hideTimeoutId=setTimeout(function(){b.hide()},a))}},b.prototype={add:function(a){this.notifications.push(a),this.element.append(a.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(a){var b=CKEDITOR.tools.indexOf(this.notifications,a);0>b||(this.notifications.splice(b,1),a.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var a=this.editor,b=a.config,c=new CKEDITOR.dom.element("div");return c.addClass("cke_notifications_area"),c.setAttribute("id","cke_notifications_area_"+a.name),c.setStyle("z-index",b.baseFloatZIndex-2),c},_attachListeners:function(){var a=CKEDITOR.document.getWindow(),b=this.editor;a.on("scroll",this._uiBuffer.input),a.on("resize",this._uiBuffer.input),b.on("change",this._changeBuffer.input),b.on("floatingSpaceLayout",this._layout,this,null,20),b.on("blur",this._layout,this,null,20)},_removeListeners:function(){var a=CKEDITOR.document.getWindow(),b=this.editor;a.removeListener("scroll",this._uiBuffer.input),a.removeListener("resize",this._uiBuffer.input),b.removeListener("change",this._changeBuffer.input),b.removeListener("floatingSpaceLayout",this._layout),b.removeListener("blur",this._layout)},_layout:function(){function a(){e.setStyle("left",p(q+g.width-j-k))}var b,c,d,e=this.element,f=this.editor,g=f.ui.contentsElement.getClientRect(),h=f.ui.contentsElement.getDocumentPosition(),i=e.getClientRect(),j=this._notificationWidth,k=this._notificationMargin;d=CKEDITOR.document.getWindow();var l=d.getScrollPosition(),m=d.getViewPaneSize(),n=CKEDITOR.document.getBody(),o=n.getDocumentPosition(),p=CKEDITOR.tools.cssLength;j&&k||(d=this.element.getChild(0),j=this._notificationWidth=d.getClientRect().width,k=this._notificationMargin=parseInt(d.getComputedStyle("margin-left"),10)+parseInt(d.getComputedStyle("margin-right"),10)),f.toolbar&&(b=f.ui.space(f.config.toolbarLocation),c=b.getClientRect()),b&&b.isVisible()&&c.bottom>g.top&&c.bottom<g.bottom-i.height?e.setStyles({position:"fixed",top:p(c.bottom)}):0<g.top?e.setStyles({position:"absolute",top:p(h.y)}):h.y+g.height-i.height>l.y?e.setStyles({position:"fixed",top:0}):e.setStyles({position:"absolute",top:p(h.y+g.height-i.height)});var q="fixed"==e.getStyle("position")?g.left:"static"!=n.getComputedStyle("position")?h.x-o.x:h.x;g.width<j+k?h.x+j+k>l.x+m.width?a():e.setStyle("left",p(q)):h.x+j+k>l.x+m.width?e.setStyle("left",p(q)):h.x+g.width/2+j/2+k>l.x+m.width?e.setStyle("left",p(q-h.x+l.x+m.width-j-k)):0>g.left+g.width-j-k?a():0>g.left+g.width/2-j/2?e.setStyle("left",p(q-h.x+l.x)):e.setStyle("left",p(q+g.width/2-j/2-k/2))}},CKEDITOR.plugins.notification=a}(),function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var b="";CKEDITOR.env.ie&&(b='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+b+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"')+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcutSpace}{ariaShortcut}</span>{arrowHtml}</a>',c=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),d=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,b){function e(){var b=a.mode;b&&(b=this.modes[b]?void 0!==i[b]?i[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())}var f,g,h,i=null,j=CKEDITOR.env,k=this._.id=CKEDITOR.tools.getNextId(),l="",m=this.command;this._.editor=a;var n={id:k,button:this,editor:a,focus:function(){CKEDITOR.document.getById(k).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},o=CKEDITOR.tools.addFunction(function(a){if(n.onkey)return a=new CKEDITOR.dom.event(a),!1!==n.onkey(n,a.getKeystroke())}),p=CKEDITOR.tools.addFunction(function(a){var b;return n.onfocus&&(b=!1!==n.onfocus(n,new CKEDITOR.dom.event(a))),b}),q=0;n.clickFn=f=CKEDITOR.tools.addFunction(function(){q&&(a.unlockSelection(1),q=0),n.execute(),j.iOS&&a.focus()}),this.modes?(i={},a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(i[a.mode]=this._.state)},this),a.on("activeFilterChange",e,this),a.on("mode",e,this),!this.readOnly&&a.on("readOnly",e,this)):m&&(m=a.getCommand(m))&&(m.on("state",function(){this.setState(m.state)},this),l+=m.state==CKEDITOR.TRISTATE_ON?"on":m.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");var r;this.directional&&a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();b=b.data,b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl"),d.setAttribute("style",CKEDITOR.skin.getIconStyle(r,"rtl"==b,this.icon,this.iconOffset))},this),m?(g=a.getCommandKeystroke(m))&&(h=CKEDITOR.tools.keystrokeToString(a.lang.common.keyboard,g)):l+="off",g=this.name||this.command;var s=null,t=this.icon;return r=g,this.icon&&!/\./.test(this.icon)?(r=this.icon,t=null):(this.icon&&(s=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(s=this.iconHiDpi)),s?(CKEDITOR.skin.addIcon(s,s),t=null):s=r,l={id:k,name:g,iconName:r,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:l,ariaDisabled:"disabled"==l?"true":"false",title:this.title+(h?" ("+h.display+")":""),ariaShortcutSpace:h?"&nbsp;":"",ariaShortcut:h?a.lang.common.keyboardShortcut+" "+h.aria:"",titleJs:j.gecko&&!j.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:o,focusFn:p,clickFn:f,style:CKEDITOR.skin.getIconStyle(s,"rtl"==a.lang.dir,t,this.iconOffset),arrowHtml:this.hasArrow?c.output():""},d.output(l,b),this.onRender&&this.onRender(),n},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return!!b&&(b.setState(a,"cke_button"),b.setAttribute("aria-disabled",a==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?b.setAttribute("aria-expanded",a==CKEDITOR.TRISTATE_ON):a===CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),function(){function a(a){function c(){for(var c=d(),f=CKEDITOR.tools.clone(a.config.toolbarGroups)||b(a),g=0;g<f.length;g++){var h=f[g];if("/"!=h){"string"==typeof h&&(h=f[g]={name:h});var i,j=h.groups;if(j)for(var k=0;k<j.length;k++)i=j[k],(i=c[i])&&e(h,i);(i=c[h.name])&&e(h,i)}}return f}function d(){var b,c,d,e={};for(b in a.ui.items)c=a.ui.items[b],d=c.toolbar||"others",d=d.split(","),c=d[0],d=parseInt(d[1]||-1,10),e[c]||(e[c]=[]),e[c].push({name:b,order:d});for(c in e)e[c]=e[c].sort(function(a,b){return a.order==b.order?0:0>b.order?-1:0>a.order?1:a.order<b.order?-1:1});return e}function e(b,c){if(c.length){b.items?b.items.push(a.ui.create("-")):b.items=[];for(var d;d=c.shift();)d="string"==typeof d?d:d.name,g&&-1!=CKEDITOR.tools.indexOf(g,d)||(d=a.ui.create(d))&&a.addFeature(d)&&b.items.push(d)}}function f(a){var b,c,d,f=[];for(b=0;b<a.length;++b)c=a[b],d={},"/"==c?f.push(c):CKEDITOR.tools.isArray(c)?(e(d,CKEDITOR.tools.clone(c)),f.push(d)):c.items&&(e(d,CKEDITOR.tools.clone(c.items)),d.name=c.name,f.push(d));return f}var g=a.config.removeButtons,g=g&&g.split(","),h=a.config.toolbar;return"string"==typeof h&&(h=a.config["toolbar_"+h]),a.toolbar=h?f(h):c()}function b(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var c=function(){this.toolbars=[],this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var a,b=0;a=this.toolbars[b++];)for(var c,d=0;c=a.items[d++];)if(c.focus)return void c.focus()};var d={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(b){var e,f=function(a,c){var d,g="rtl"==b.lang.dir,h=b.config.toolbarGroupCycling,i=g?37:39,g=g?39:37,h=void 0===h||h;switch(c){case 9:case CKEDITOR.SHIFT+9:for(;!d||!d.items.length;)if(d=9==c?(d?d.next:a.toolbar.next)||b.toolbox.toolbars[0]:(d?d.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1],d.items.length)for(a=d.items[e?d.items.length-1:0];a&&!a.focus;)(a=e?a.previous:a.next)||(d=0);return a&&a.focus(),!1;case i:d=a;do d=d.next,!d&&h&&(d=a.toolbar.items[0]);while(d&&!d.focus);return d?d.focus():f(a,9),!1;case 40:return a.button&&a.button.hasArrow?a.execute():f(a,40==c?i:g),!1;case g:case 38:d=a;do d=d.previous,!d&&h&&(d=a.toolbar.items[a.toolbar.items.length-1]);while(d&&!d.focus);return d?d.focus():(e=1,f(a,CKEDITOR.SHIFT+9),e=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("uiSpace",function(d){if(d.data.space==b.config.toolbarLocation){d.removeListener(),b.toolbox=new c;var e,g,h=CKEDITOR.tools.getNextId(),i=['<span id="',h,'" class="cke_voice_label">',b.lang.toolbar.toolbars,"</span>",'<span id="'+b.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',h,'" onmousedown="return false;">'],h=!1!==b.config.toolbarStartupExpanded;b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&i.push('<span class="cke_toolbox_main"'+(h?">":' style="display:none">'));for(var j=b.toolbox.toolbars,k=a(b),l=k.length,m=0;m<l;m++){var n,o,p,q=0,r=k[m],s="/"!==r&&("/"===k[m+1]||m==l-1);if(r)if(e&&(i.push("</span>"),g=e=0),"/"===r)i.push('<span class="cke_toolbar_break"></span>');else{p=r.items||r;for(var t=0;t<p.length;t++){var u,v=p[t];if(v){var w=function(a){a=a.render(b,i),x=q.items.push(a)-1,0<x&&(a.previous=q.items[x-1],a.previous.next=a),a.toolbar=q,a.onkey=f,a.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}};if(v.type==CKEDITOR.UI_SEPARATOR)g=e&&v;else{if(u=!1!==v.canGroup,!q){n=CKEDITOR.tools.getNextId(),q={id:n,items:[]},o=r.name&&(b.lang.toolbar.toolbarGroups[r.name]||r.name),i.push('<span id="',n,'" class="cke_toolbar'+(s?' cke_toolbar_last"':'"'),o?' aria-labelledby="'+n+'_label"':"",' role="toolbar">'),o&&i.push('<span id="',n,'_label" class="cke_voice_label">',o,"</span>"),i.push('<span class="cke_toolbar_start"></span>');var x=j.push(q)-1;0<x&&(q.previous=j[x-1],q.previous.next=q)}u?e||(i.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(i.push("</span>"),e=0),g&&(w(g),g=0),w(v)}}}e&&(i.push("</span>"),g=e=0),q&&i.push('<span class="cke_toolbar_end"></span></span>')}}if(b.config.toolbarCanCollapse&&i.push("</span>"),b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var y=CKEDITOR.tools.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){CKEDITOR.tools.removeFunction(y)}),b.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),c=b.getPrevious(),d=a.ui.space("contents"),e=c.getParent(),f=parseInt(d.$.style.height,10),g=e.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(c.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(c.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(h?"▲":"◀"),d.setStyle("height",f-(e.$.offsetHeight-g)+"px"),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:d.$.offsetHeight,outerWidth:a.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),b.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),i.push('<a title="'+(h?b.lang.toolbar.toolbarCollapse:b.lang.toolbar.toolbarExpand)+'" id="'+b.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),h||i.push(" cke_toolbox_collapser_min"),i.push('" onclick="CKEDITOR.tools.callFunction('+y+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}i.push("</span>"),d.data.html+=i.join("")}}),b.on("destroy",function(){if(this.toolbox){var a,b,c,d,e=0;for(a=this.toolbox.toolbars;e<a.length;e++)for(c=a[e].items,b=0;b<c.length;b++)d=c[b],d.clickFn&&CKEDITOR.tools.removeFunction(d.clickFn),d.keyDownFn&&CKEDITOR.tools.removeFunction(d.keyDownFn)}}),b.on("uiReady",function(){var a=b.ui.space("toolbox");a&&b.focusManager.add(a,1)}),b.addCommand("toolbarFocus",d),b.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),b.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),b.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,c,d){var e=b(this.editor),f=0===c,g={name:a};if(d){if(d=CKEDITOR.tools.search(e,function(a){return a.name==d}))return!d.groups&&(d.groups=[]),c&&(c=CKEDITOR.tools.indexOf(d.groups,c),0<=c)?void d.groups.splice(c+1,0,a):void(f?d.groups.splice(0,0,a):d.groups.push(a));c=null}c&&(c=CKEDITOR.tools.indexOf(e,function(a){return a.name==c})),f?e.splice(0,0,a):"number"==typeof c?e.splice(c+1,0,g):e.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function a(a,b,c){return b.type||(b.type="auto"),!(c&&!1===a.fire("beforePaste",b)||!b.dataValue&&b.dataTransfer.isEmpty())&&(b.dataValue||(b.dataValue=""),CKEDITOR.env.gecko&&"drop"==b.method&&a.toolbox&&a.once("afterPaste",function(){a.toolbox.focus()}),a.fire("paste",b))}function b(b){function c(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var c=function(a){b.getSelection().isCollapsed()||(b.readOnly&&"cut"==a.name||p.initPasteDataTransfer(a,b),a.data.preventDefault())};a.on("copy",c),a.on("cut",c),a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(p.mainPasteEvent,function(a){"beforepaste"==p.mainPasteEvent&&q||m(a)}),"beforepaste"==p.mainPasteEvent&&(a.on("paste",function(a){r||(f(),a.data.preventDefault(),m(a),h("paste"))}),a.on("contextmenu",g,null,null,0),a.on("beforepaste",function(a){!a.data||a.data.$.ctrlKey||a.data.$.shiftKey||g()},null,null,0)),a.on("beforecut",function(){!q&&i(b)});var d;a.attachListener(CKEDITOR.env.ie?a:b.document.getDocumentElement(),"mouseup",function(){d=setTimeout(n,0)}),b.on("destroy",function(){clearTimeout(d)}),a.on("keyup",n)}function d(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,fakeKeystroke:"cut"==a?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&i();var a,c=this.type;if(CKEDITOR.env.ie)a=h(c);else try{a=b.document.$.execCommand(c,!1,null)}catch(d){a=!1}return a||b.showNotification(b.lang.clipboard[this.type+"Error"]),a}}}function e(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(b,c){function d(c,d){d="undefined"==typeof d||d,c?(c.method="paste",c.dataTransfer||(c.dataTransfer=p.initPasteDataTransfer()),a(b,c,d)):f&&!b._.forcePasteDialog&&b.showNotification(i,"info",b.config.clipboard_notificationDuration),b._.forcePasteDialog=!1,b.fire("afterCommandExec",{name:"paste",command:e,returnValue:!!c})}c="undefined"!=typeof c&&null!==c?c:{};var e=this,f="undefined"==typeof c.notification||c.notification,g=c.type,h=CKEDITOR.tools.keystrokeToString(b.lang.common.keyboard,b.getCommandKeystroke(this)),i="string"==typeof f?f:b.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+h.aria+'">'+h.display+"</kbd>"),h="string"==typeof c?c:c.dataValue;g&&!0!==b.config.forcePasteAsPlainText&&"allow-word"!==b.config.forcePasteAsPlainText?b._.nextPasteType=g:delete b._.nextPasteType,"string"==typeof h?d({dataValue:h}):b.getClipboardData(d)}}}function f(){r=1,setTimeout(function(){r=0},100)}function g(){q=1,setTimeout(function(){q=0},10)}function h(a){var c=b.document,d=c.getBody(),e=!1,f=function(){e=!0};return d.on(a,f),7<CKEDITOR.env.version?c.$.execCommand(a):c.$.selection.createRange().execCommand(a),d.removeListener(a,f),e}function i(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var a,c,d,e=b.getSelection();e.getType()==CKEDITOR.SELECTION_ELEMENT&&(a=e.getSelectedElement())&&(c=e.getRanges()[0],d=b.document.createText(""),d.insertBefore(a),c.setStartBefore(d),c.setEndAfter(a),e.selectRanges([c]),setTimeout(function(){a.getParent()&&(d.remove(),e.selectElement(a))},0))}}function j(a,c){var d,e=b.document,f=b.editable(),g=function(a){a.cancel()};if(!e.getById("cke_pastebin")){var h=b.getSelection(),i=h.createBookmarks();CKEDITOR.env.ie&&h.root.fire("selectionchange");var j=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!f.is("body")||CKEDITOR.env.ie?"div":"body",e);j.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,e=e.getWindow();CKEDITOR.env.webkit?(f.append(j),j.addClass("cke_editable"),f.is("body")||(k="static"!=f.getComputedStyle("position")?f:CKEDITOR.dom.element.get(f.$.offsetParent),k=k.getDocumentPosition().y)):f.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(j),j.setStyles({position:"absolute",top:e.getScrollPosition().y-k+10+"px",width:"1px",height:Math.max(1,e.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&j.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(k=j.getParent().isReadOnly())?(j.setOpacity(0),j.setAttribute("contenteditable",!0)):j.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-10000px"),b.on("selectionChange",g,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(d=f.once("blur",g,null,null,-100)),k&&j.focus(),k=new CKEDITOR.dom.range(j),k.selectNodeContents(j);var l=k.select();CKEDITOR.env.ie&&(d=f.once("blur",function(){b.lockSelection(l)}));var m=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=m),d&&d.removeListener(),CKEDITOR.env.ie&&f.focus(),h.selectBookmarks(i),j.remove();var a;CKEDITOR.env.webkit&&(a=j.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(j=a),b.removeListener("selectionChange",g),c(j.getHtml())},0)}}function k(){if("paste"==p.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus(),f();var a=b.focusManager;return a.lock(),b.editable().fire(p.mainPasteEvent)&&!h("paste")?(a.unlock(),!1):(a.unlock(),!0)}function l(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable(),f(),"paste"==p.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},50)}}function m(c){var d={type:"auto",method:"paste",dataTransfer:p.initPasteDataTransfer(c)};d.dataTransfer.cacheData();var e=!1!==b.fire("beforePaste",d);e&&p.canClipboardApiBeTrusted(d.dataTransfer,b)?(c.data.preventDefault(),setTimeout(function(){a(b,d)},0)):j(c,function(c){d.dataValue=c.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),e&&a(b,d)})}function n(){if("wysiwyg"==b.mode){var a=o("paste");b.getCommand("cut").setState(o("cut")),b.getCommand("copy").setState(o("copy")),b.getCommand("paste").setState(a),b.fire("pasteState",a)}}function o(a){var c=b.getSelection(),c=c&&c.getRanges()[0];return(b.readOnly||c&&c.checkReadOnly())&&a in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==a?CKEDITOR.TRISTATE_OFF:(a=b.getSelection(),c=a.getRanges(),a.getType()==CKEDITOR.SELECTION_NONE||1==c.length&&c[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var p=CKEDITOR.plugins.clipboard,q=0,r=0;!function(){if(b.on("key",l),b.on("contentDom",c),b.on("selectionChange",n),b.contextMenu){b.contextMenu.addListener(function(){return{cut:o("cut"),copy:o("copy"),paste:o("paste")}});var a=null;b.on("menuShow",function(){a&&(a.removeListener(),a=null);var c=b.contextMenu.findItemByCommandName("paste");c&&c.element&&(a=c.element.on("touchend",function(){b._.forcePasteDialog=!0}))})}b.ui.addButton&&b.once("instanceReady",function(){b._.pasteButtons&&CKEDITOR.tools.array.forEach(b._.pasteButtons,function(a){(a=b.ui.get(a))&&(a=CKEDITOR.document.getById(a._.id))&&a.on("touchend",function(){b._.forcePasteDialog=!0})})})}(),function(){function a(a,c,d,e,f){var g=b.lang.clipboard[c];b.addCommand(c,d),b.ui.addButton&&b.ui.addButton(a,{label:g,command:c,toolbar:"clipboard,"+e}),b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:f})}a("Cut","cut",d("cut"),10,1),a("Copy","copy",d("copy"),20,4),a("Paste","paste",e(),30,8),b._.pasteButtons||(b._.pasteButtons=[]),b._.pasteButtons.push("Paste")}(),b.getClipboardData=function(a,c){function d(a){a.removeListener(),a.cancel(),c(a.data)}function e(a){a.removeListener(),a.cancel(),c({type:g,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}var f=!1,g="auto";c||(c=a,a=null),b.on("beforePaste",function(a){a.removeListener(),f=!0,g=a.data.type},null,null,1e3),b.on("paste",d,null,null,0),!1===k()&&(b.removeListener("paste",d),b._.forcePasteDialog&&f&&b.fire("pasteDialog")?(b.on("pasteDialogCommit",e),b.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",e),a.data._.committed||c(null)})):c(null))}}function c(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function d(a,b){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(1==a%2?"<br>":"")}return b=b.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()}),b.match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&-1<b.indexOf("<div>")&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),b.match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1)})+"</p>"),b=b.replace(/<\/div><div>/g,"<br>"),b=b.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),-1<b.indexOf("<br><br>")&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"</p>")),g(a,b))}function e(a){function b(){var a,b={};for(a in CKEDITOR.dtd)"$"!=a.charAt(0)&&"div"!=a&&"span"!=a&&(b[a]=1);return b}var c={};return{get:function(d){return"plain-text"==d?c.plainText||(c.plainText=new CKEDITOR.filter(a,"br")):"semantic-content"==d?((d=c.semanticContent)||(d=new CKEDITOR.filter(a,{}),d.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),d=c.semanticContent=d),d):d?new CKEDITOR.filter(a,d):null}}}function f(a,b,c){b=CKEDITOR.htmlParser.fragment.fromHtml(b);var d=new CKEDITOR.htmlParser.basicWriter;return c.applyTo(b,!0,!1,a.activeEnterMode),b.writeHtml(d),d.getHtml()}function g(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}function h(a){a.data.preventDefault(),a.data.$.dataTransfer.dropEffect="none"}function i(b){var c=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function d(c,d,e){d.select(),a(b,{dataTransfer:e,method:"drop"},1),e.sourceEditor.fire("saveSnapshot"),e.sourceEditor.editable().extractHtmlFromRange(c),e.sourceEditor.getSelection().selectRanges([c]),e.sourceEditor.fire("saveSnapshot")}function e(d,e){d.select(),a(b,{dataTransfer:e,method:"drop"},1),c.resetDragDataTransfer()}function f(a,c,d){var e={$:a.data.$,target:a.data.getTarget()};c&&(e.dragRange=c),d&&(e.dropRange=d),!1===b.fire(a.name,e)&&a.data.preventDefault()}function g(a){return a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),a.getChildCount()}var h=b.editable(),i=CKEDITOR.plugins.clipboard.getDropTarget(b),j=b.ui.space("top"),k=b.ui.space("bottom");c.preventDefaultDropOnElement(j),c.preventDefaultDropOnElement(k),h.attachListener(i,"dragstart",f),h.attachListener(b,"dragstart",c.resetDragDataTransfer,c,null,1),h.attachListener(b,"dragstart",function(a){c.initDragDataTransfer(a,b)},null,null,2),h.attachListener(b,"dragstart",function(){var a=c.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c.dragStartContainerChildCount=a?g(a.startContainer):null,c.dragEndContainerChildCount=a?g(a.endContainer):null)},null,null,100),h.attachListener(i,"dragend",f),h.attachListener(b,"dragend",c.initDragDataTransfer,c,null,1),h.attachListener(b,"dragend",c.resetDragDataTransfer,c,null,100),h.attachListener(i,"dragover",function(a){if(CKEDITOR.env.edge)a.data.preventDefault();else{var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()}}),h.attachListener(i,"drop",function(a){if(!a.data.$.defaultPrevented&&(a.data.preventDefault(),!b.readOnly)){var d=a.data.getTarget();if(!d.isReadOnly()||d.type==CKEDITOR.NODE_ELEMENT&&d.is("html")){var d=c.getRangeAtDropPosition(a,b),e=c.dragRange;d&&f(a,e,d)}}},null,null,9999),h.attachListener(b,"drop",c.initDragDataTransfer,c,null,1),h.attachListener(b,"drop",function(a){if(a=a.data){var f=a.dropRange,g=a.dragRange,h=a.dataTransfer;h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){c.internalDrop(g,f,h,b)},0):h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?d(g,f,h):e(f,h)}},null,null,9999)})}var j;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(a){function g(a){if(!a||k===a.id)return!1;var b=a.getTypes(),b=1===b.length&&"Files"===b[0];return a=1===a.getFilesCount(),b&&a}var h,j=e(a);if(a.config.forcePasteAsPlainText?h="plain-text":a.config.pasteFilter?h=a.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in a.config||(h="semantic-content"),a.pasteFilter=j.get(h),b(a),i(a),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var k,l=["image/png","image/jpeg","image/gif"];a.on("paste",function(b){var c=b.data,d=c.dataTransfer;if(!c.dataValue&&"paste"==c.method&&g(d)&&(d=d.getFile(0),-1!=CKEDITOR.tools.indexOf(l,d.type))){var e=new FileReader;e.addEventListener("load",function(){b.data.dataValue='<img src="'+e.result+'" />',a.fire("paste",b.data)},!1),e.addEventListener("abort",function(){a.fire("paste",b.data)},!1),e.addEventListener("error",function(){a.fire("paste",b.data)},!1),e.readAsDataURL(d),k=c.dataTransfer.id,b.stop()}},null,null,1)}a.on("paste",function(b){if(b.data.dataTransfer||(b.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!b.data.dataValue){var c=b.data.dataTransfer,d=c.getData("text/html");d?(b.data.dataValue=d,b.data.type="html"):(d=c.getData("text/plain"))&&(b.data.dataValue=a.editable().transformPlainTextToHtml(d),b.data.type="text")}},null,null,1),a.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;if(-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var d,e,f=new CKEDITOR.dom.element("div");for(f.setHtml(b);1==f.getChildCount()&&(d=f.getFirst())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.hasClass("cke_editable")||d.hasClass("cke_contents"));)f=e=d;
e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){return d.toLowerCase()in c?(a.data.preSniffing="html","<"+d):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){return d in c?(a.data.endsWithEOL=1,"</"+d+">"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),a.on("paste",function(b){b=b.data;var e,g=a._.nextPasteType||b.type,h=b.dataValue,i=a.config.clipboard_defaultContentType||"html",k=b.dataTransfer.getTransferType(a)==CKEDITOR.DATA_TRANSFER_EXTERNAL,l=!0===a.config.forcePasteAsPlainText;e="html"==g||"html"==b.preSniffing?"html":c(h),delete a._.nextPasteType,"htmlifiedtext"==e&&(h=d(a.config,h)),"text"==g&&"html"==e?h=f(a,h,j.get("plain-text")):(k&&a.pasteFilter&&!b.dontFilter||l)&&(h=f(a,h,a.pasteFilter)),b.startsWithEOL&&(h='<br data-cke-eol="1">'+h),b.endsWithEOL&&(h+='<br data-cke-eol="1">'),"auto"==g&&(g="html"==e||"html"==i?"html":"text"),b.type=g,b.dataValue=h,delete b.preSniffing,delete b.startsWithEOL,delete b.endsWithEOL},null,null,6),a.on("paste",function(b){b=b.data,b.dataValue&&(a.insertHtml(b.dataValue,b.type,b.range),setTimeout(function(){a.fire("afterPaste")},0))},null,null,1e3),a.on("pasteDialog",function(b){setTimeout(function(){a.openDialog("paste",b.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!(CKEDITOR.env.ie&&16>CKEDITOR.env.version||CKEDITOR.env.iOS&&605>CKEDITOR.env.version),isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(a,b,c){a.ui.addButton&&(a.ui.addButton(b,c),a._.pasteButtons||(a._.pasteButtons=[]),a._.pasteButtons.push(b))},canClipboardApiBeTrusted:function(a,b){return!!(a.getTransferType(b)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!a.isEmpty()||CKEDITOR.env.gecko&&(a.getData("text/html")||a.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.iOS&&605<=CKEDITOR.env.version||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(a){var b=a.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||b.isInline()?b:a.document},fixSplitNodesAfterDrop:function(a,b,c,d){function e(a,c,d){var e=a;if(e.type==CKEDITOR.NODE_TEXT&&(e=a.getParent()),e.equals(c)&&d!=c.getChildCount())return a=b.startContainer.getChild(b.startOffset-1),c=b.startContainer.getChild(b.startOffset),a&&a.type==CKEDITOR.NODE_TEXT&&c&&c.type==CKEDITOR.NODE_TEXT&&(d=a.getLength(),a.setText(a.getText()+c.getText()),c.remove(),b.setStart(a,d),b.collapse(!0)),!0}var f=b.startContainer;"number"==typeof d&&"number"==typeof c&&f.type==CKEDITOR.NODE_ELEMENT&&(e(a.startContainer,f,c)||e(a.endContainer,f,d))},isDropRangeAffectedByDragRange:function(a,b){var c=b.startContainer,d=b.endOffset;return!!(a.endContainer.equals(c)&&a.endOffset<=d||a.startContainer.getParent().equals(c)&&a.startContainer.getIndex()<d||a.endContainer.getParent().equals(c)&&a.endContainer.getIndex()<d)},internalDrop:function(b,c,d,e){var f,g,h=CKEDITOR.plugins.clipboard,i=e.editable();e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,c,h.dragStartContainerChildCount,h.dragEndContainerChildCount),(g=this.isDropRangeAffectedByDragRange(b,c))||(f=b.createBookmark(!1)),h=c.clone().createBookmark(!1),g&&(f=b.createBookmark(!1)),b=f.startNode,c=f.endNode,g=h.startNode,c&&b.getPosition(g)&CKEDITOR.POSITION_PRECEDING&&c.getPosition(g)&CKEDITOR.POSITION_FOLLOWING&&g.insertBefore(b),b=e.createRange(),b.moveToBookmark(f),i.extractHtmlFromRange(b,1),c=e.createRange(),h.startNode.getCommonAncestor(i)||(h=e.getSelection().createBookmarks()[0]),c.moveToBookmark(h),a(e,{dataTransfer:d,method:"drop",range:c},1),e.fire("unlockSnapshot")},getRangeAtDropPosition:function(a,b){var c=a.data.$,d=c.clientX,e=c.clientY,f=b.getSelection(!0).getRanges()[0],g=b.createRange();if(a.data.testRange)return a.data.testRange;if(document.caretRangeFromPoint&&b.document.$.caretRangeFromPoint(d,e))c=b.document.$.caretRangeFromPoint(d,e),g.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),g.collapse(!0);else if(c.rangeParent)g.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),g.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&f&&b.editable().hasFocus)return f;if(!document.body.createTextRange)return null;b.focus(),c=b.document.getBody().$.createTextRange();try{for(var h=!1,i=0;20>i&&!h;i++){if(!h)try{c.moveToPoint(d,e-i),h=!0}catch(j){}if(!h)try{c.moveToPoint(d,e+i),h=!0}catch(k){}}if(h){var l="cke-temp-"+(new Date).getTime();c.pasteHTML('<span id="'+l+'">​</span>');var m=b.document.getById(l);g.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m.remove()}else{var n,o=b.document.$.elementFromPoint(d,e),p=new CKEDITOR.dom.element(o);if(p.equals(b.editable())||"html"==p.getName())return f&&f.startContainer&&!f.startContainer.equals(b.editable())?f:null;n=p.getClientRect(),d<n.left?g.setStartAt(p,CKEDITOR.POSITION_AFTER_START):g.setStartAt(p,CKEDITOR.POSITION_BEFORE_END),g.collapse(!0)}}catch(q){return null}}return g},initDragDataTransfer:function(a,b){var c=a.data.$?a.data.$.dataTransfer:null,d=new this.dataTransfer(c,b);"dragstart"===a.name&&d.storeId(),c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d,a.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(a,b){if(this.isCustomCopyCutSupported){if(a&&a.data&&a.data.$){var c=a.data.$.clipboardData,d=new this.dataTransfer(c,b);return"copy"!==a.name&&"cut"!==a.name||d.storeId(),this.copyCutData&&d.id==this.copyCutData.id?(d=this.copyCutData,d.$=c):this.copyCutData=d,d}return new this.dataTransfer(null,b)}return new this.dataTransfer(CKEDITOR.env.edge&&a&&a.data.$&&a.data.$.clipboardData||null,b)},preventDefaultDropOnElement:function(a){a&&a.on("dragover",h)}},j=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(a,b){a&&(this.$=a),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\s*\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e\s*/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(a){return a=a.toLowerCase(),"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(j),this.id||(this.id="Text"==j?"":"cke-"+CKEDITOR.tools.getUniqueId()),b&&(this.sourceEditor=b,this.setData("text/html",b.getSelectedHtml(1)),"Text"==j||this.getData("text/plain")||this.setData("text/plain",b.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(a,b){a=this._.normalizeType(a);var c="text/html"==a&&b?this._.nativeHtmlCache:this._.data[a];if(void 0===c||null===c||""===c){if(this._.fallbackDataTransfer.isRequired())c=this._.fallbackDataTransfer.getData(a,b);else try{c=this.$.getData(a)||""}catch(d){c=""}"text/html"!=a||b||(c=this._stripHtml(c))}if("Text"==a&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==c.substring(0,7)&&(c=""),"string"==typeof c)var e=c.indexOf("</html>"),c=-1!==e?c.substring(0,e+7):c;return c},setData:function(a,b){if(a=this._.normalizeType(a),"text/html"==a?(this._.data[a]=this._stripHtml(b),this._.nativeHtmlCache=b):this._.data[a]=b,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==a||"Text"==a)if("Text"==j&&"Text"==a&&(this.id=b),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(a,b);else try{this.$.setData(a,b)}catch(c){}},storeId:function(){"Text"!==j&&this.setData(j,this.id)},getTransferType:function(a){return this.sourceEditor?this.sourceEditor==a?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function a(a){a=d._.normalizeType(a);var b=d.getData(a);"text/html"==a&&(d._.nativeHtmlCache=d.getData(a,!0),b=d._stripHtml(b)),b&&(d._.data[a]=b)}if(this.$){var b,c,d=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(b=0;b<this.$.types.length;b++)a(this.$.types[b])}else a("Text"),a("URL");if(c=this._getImageFromClipboard(),this.$&&this.$.files||c){if(this._.files=[],this.$.files&&this.$.files.length)for(b=0;b<this.$.files.length;b++)this._.files.push(this.$.files[b]);0===this._.files.length&&c&&this._.files.push(c)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(a){return this._.files.length?this._.files[a]:this.$&&this.$.files&&this.$.files.length?this.$.files[a]:0===a?this._getImageFromClipboard():void 0},isEmpty:function(){var a,b={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),function(a){b[a]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)b[this.$.types[c]]=1}else b.Text=1,b.URL=1;"Text"!=j&&(b[j]=0);for(a in b)if(b[a]&&""!==this.getData(a))return!1;return!0},getTypes:function(){return this.$&&this.$.types?[].slice.call(this.$.types):[]},_getImageFromClipboard:function(){var a;try{if(this.$&&this.$.items&&this.$.items[0]&&(a=this.$.items[0].getAsFile())&&a.type)return a}catch(b){}},_stripHtml:function(a){if(a&&a.length){a=a.replace(this._.metaRegExp,"");var b=this._.bodyRegExp.exec(a);b&&b.length&&(a=b[1],a=a.replace(this._.fragmentRegExp,""))}return a}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(a){this._dataTransfer=a,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var a=CKEDITOR.plugins.clipboard.fallbackDataTransfer,b=this._dataTransfer.$;if(null===a._isCustomMimeTypeSupported){if(!b)return!1;if(a._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{b.setData("cke/mimetypetest","cke test value"),a._isCustomMimeTypeSupported="cke test value"===b.getData("cke/mimetypetest"),b.clearData("cke/mimetypetest")}catch(c){}}return!a._isCustomMimeTypeSupported},getData:function(a,b){var c=this._getData(this._customDataFallbackType,!0);if(b)return c;var c=this._extractDataComment(c),d=null,d=a===this._customDataFallbackType?c.content:c.data&&c.data[a]?c.data[a]:this._getData(a,!0);return null!==d?d:""},setData:function(a,b){var c=a===this._customDataFallbackType;c&&(b=this._applyDataComment(b,this._getFallbackTypeData()));var d=b,e=this._dataTransfer.$;try{e.setData(a,d),c&&(this._dataTransfer._.nativeHtmlCache=d)}catch(f){if(this._isUnsupportedMimeTypeError(f)){c=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(c._customTypes,a)&&c._customTypes.push(a);var c=this._getFallbackTypeContent(),g=this._getFallbackTypeData();g[a]=d;try{d=this._applyDataComment(c,g),e.setData(this._customDataFallbackType,d),this._dataTransfer._.nativeHtmlCache=d}catch(h){d=""}}}return d},_getData:function(a,b){var c=this._dataTransfer._.data;if(!b&&c[a])return c[a];try{return this._dataTransfer.$.getData(a)}catch(d){return null}},_getFallbackTypeContent:function(){var a=this._dataTransfer._.data[this._customDataFallbackType];return a||(a=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),a},_getFallbackTypeData:function(){var a=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,b=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},c=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(a,function(a){void 0!==c[a]?b[a]=c[a]:void 0!==b[a]&&(b[a]=b[a])},this),b},_isUnsupportedMimeTypeError:function(a){return a.message&&-1!==a.message.search(/element not found/gi)},_extractDataComment:function(a){var b={data:null,content:a||""};if(a&&16<a.length){var c;(c=/\x3c!--cke-data:(.*?)--\x3e/g.exec(a))&&c[1]&&(b.data=JSON.parse(decodeURIComponent(c[1])),b.content=a.replace(c[0],""))}return b},_applyDataComment:function(a,b){var c="";return b&&CKEDITOR.tools.object.keys(b).length&&(c="<!--cke-data:"+encodeURIComponent(JSON.stringify(b))+"-->"),c+(a&&a.length?a:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),b=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(d,e){var f={editorId:d.id,id:this.id,langCode:d.langCode,dir:d.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":d.config.baseFloatZIndex+1};if(this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},f))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");("input"!==a.data.getTarget().getName()||37!==b&&39!==b)&&(this._.onKeyDown&&!1===this._.onKeyDown(b)?"input"===a.data.getTarget().getName()&&32===b||a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault())},this),a=a.getBody(),a.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a},this.isFramed){var g=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";f.frame=b.output({id:this.id+"_frame",src:g})}return g=a.output(f),e&&e.push(g),g},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",c),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this._.getItems().getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))},markFirstDisplayed:function(a){for(var b,c,d=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"none"==a.getStyle("display")},e=this._.getItems(),f=e.count()-1;0<=f;f--)if(b=e.getItem(f),b.getAscendant(d)||(c=b,this._.focusIndex=f),"true"==b.getAttribute("aria-selected")){c=b,this._.focusIndex=f;break}c&&(a&&a(),CKEDITOR.env.webkit&&c.getDocument().getWindow().focus(),c.focus(),this.onMark&&this.onMark(c))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var c=this.keys[a];switch(c){case"next":for(var d,e=this._.focusIndex,c=this._.getItems();d=c.getItem(++e);)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=e,d.focus(!0);break}return!d&&!b&&(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(e=this._.focusIndex,c=this._.getItems();0<e&&(d=c.getItem(--e));){if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=e,d.focus(!0);break}d=null}return!d&&!b&&(this._.focusIndex=c.count(),this.onKeyDown(a,1));case"click":case"mouseup":return e=this._.focusIndex,(d=0<=e&&this._.getItems().getItem(e))&&d.fireEventHandler(c,{button:CKEDITOR.tools.normalizeMouseButton(CKEDITOR.MOUSE_BUTTON_LEFT,!0)}),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(a,c,d,e,f){f=CKEDITOR.tools.genKey(c.getUniqueId(),d.getUniqueId(),a.lang.dir,a.uiColor||"",e.css||"",f||"");var g=b[f];return g||(g=b[f]=new CKEDITOR.ui.panel(c,e),g.element=d.append(CKEDITOR.dom.element.createFromHtml(g.render(a),c)),g.element.setStyles({display:"none",position:"absolute"})),g}var b={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(b,c,d,e){function f(){j.hide()}d.forceIFrame=1,d.toolbarRelated&&b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(c=CKEDITOR.document.getById("cke_"+b.name));var g=c.getDocument();e=a(b,g,c,d,e||0);var h=e.element,i=h.getFirst(),j=this;h.disableContextMenu(),this.element=h,this._={editor:b,panel:e,parentElement:c,definition:d,document:g,iframe:i,children:[],dir:b.lang.dir,showBlockParams:null,markFirst:void 0===d.markFirst||d.markFirst},b.on("mode",f),b.on("resize",f),g.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,d,e,f){var g=this._.panel,h=g.showBlock(a);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var i=this._.editor.editable();this._.returnFocus=i.hasFocus?i:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var j=this.element,i=this._.iframe,i=CKEDITOR.env.ie&&!CKEDITOR.env.edge?i:new CKEDITOR.dom.window(i.$.contentWindow),k=j.getDocument(),l=this._.parentElement.getPositionedAncestor(),m=b.getDocumentPosition(k),k=l?l.getDocumentPosition(k):{x:0,y:0},n="rtl"==this._.dir,o=m.x+(d||0)-k.x,p=m.y+(e||0)-k.y;!n||1!=c&&4!=c?n||2!=c&&3!=c||(o+=b.$.offsetWidth-1):o+=b.$.offsetWidth,3!=c&&4!=c||(p+=b.$.offsetHeight-1),this._.panel._.offsetParentId=b.getId(),j.setStyles({top:p+"px",left:0,display:""}),j.setOpacity(0),j.getFirst().removeStyle("width"),this._.editor.focusManager.add(i),this._.blurSet||(CKEDITOR.event.useCapture=!0,i.on("blur",function(a){function b(){delete this._.returnFocus,this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))},this),i.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(i.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),i.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),g.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this),CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=j;if(a.removeStyle("width"),h.autoSize){var b=h.element.getDocument(),b=(CKEDITOR.env.webkit||CKEDITOR.env.edge?h.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),a.setStyle("width",b+10+"px"),b=h.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",b+"px"),g._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");n&&(o-=j.$.offsetWidth),j.setStyle("left",o+"px");var b=g.element.getWindow(),a=j.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,d=a.height||a.bottom-a.top,e=n?a.right:b.width-a.left,i=n?b.width-a.right:a.left;n?e<c&&(o=i>c?o+c:b.width>c?o-a.left:o-a.right+b.width):e<c&&(o=i>c?o-c:b.width>c?o-a.right+b.width:o-a.left),c=a.top,b.height-a.top<d&&(p=c>d?p-d:b.height>d?p-a.bottom+b.height:p-a.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&((b=a=j.$.offsetParent&&new CKEDITOR.dom.element(j.$.offsetParent))&&"html"==b.getName()&&(b=b.getDocument().getBody()),b&&"rtl"==b.getComputedStyle("direction")&&(o=CKEDITOR.env.ie8Compat?o-2*j.getDocument().getDocumentElement().$.scrollLeft:o-(a.$.scrollWidth-a.$.clientWidth)));var k,a=j.getFirst();(k=a.getCustomData("activePanel"))&&k.onHide&&k.onHide.call(this,1),a.setCustomData("activePanel",this),j.setStyles({top:p+"px",left:o+"px"}),j.setOpacity(1),f&&f()},this);g.isLoaded?a():g.onLoad=a,CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),h.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){h.markFirstDisplayed?h.markFirstDisplayed():h._.markFirstDisplayed()},0):h.markFirstDisplayed?h.markFirstDisplayed():h._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(a){var b=this._.panel;return void 0!==a&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,b,c,d,e,f){this._.activeChild==a&&a._.panel._.offsetParentId==c.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,d,e,f),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var a,c=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(a in b){var d=b[a];c?d.destroy():d.element.hide()}c&&(b={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var b=a.config.menu_groups.split(","),c=a._.menuGroups={},d=a._.menuItems={},e=0;e<b.length;e++)c[b[e]]=e+1;a.addMenuGroup=function(a,b){c[a]=b||100},a.addMenuItem=function(a,b){c[b.group]&&(d[a]=new CKEDITOR.menuItem(this,a,b))},a.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},a.getMenuItem=function(a){return d[a]},a.removeMenuItem=function(a){delete d[a]}}}),function(){function a(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}var b='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{attrLabel}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"',c="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(b+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(b+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),CKEDITOR.env.ie&&(c='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&');var b=b+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" onclick="'+c+'CKEDITOR.tools.callFunction({clickFn},{index}); return false;">')+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>',d=CKEDITOR.addTemplate("menuItem",b),e=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),f=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),d=c.block.attributes=c.attributes||{};!d.role&&(d.role="menu"),this._.panelDefinition=c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),d=this._.listeners;this.removeAll();for(var e=0;e<d.length;e++){var f=d[e](b,a,c);if(f)for(var g in f){var h=this.editor.getMenuItem(g);!h||h.command&&!this.editor.getCommand(h.command).state||(h.state=f[g],this.add(h))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;return b?b._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var d in c){var e=this.editor.getMenuItem(d);e&&(e.state=c[d],b.add(e))}var f=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(a));setTimeout(function(){b.show(f,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,c,d,e){if(this.parent||(this._.onShow(),this.items.length)){c=c||("rtl"==this.editor.lang.dir?2:1);var f=this.items,g=this.editor,h=this._.panel,i=this._.element;if(!h){h=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),h.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this),h.onShow=function(){h._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},h.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),i=h.addBlock(this.id,this._.panelDefinition.block),i.autoSize=!0;var j=i.keys;j[40]="next",j[9]="next",j[38]="prev",j[CKEDITOR.SHIFT+9]="prev",j["rtl"==g.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",j[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(j[13]="mouseup"),i=this._.element=i.element,j=i.getDocument(),j.getBody().setStyle("overflow","hidden"),j.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,g.config.menu_subMenuDelay||400,this,[a])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this)}a(f);for(var j=g.elementPath(),j=['<div class="cke_menu'+(j&&j.direction()!=g.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],k=f.length,l=k&&f[0].group,m=0;m<k;m++){var n=f[m];l!=n.group&&(j.push('<div class="cke_menuseparator" role="separator"></div>'),l=n.group),n.render(this,m,j)}j.push("</div>"),i.setHtml(j.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(h,this.id,b,c,d,e):h.showBlock(this.id,b,c,d,e),g.fire("menuShow",[h])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)},findItemByCommandName:function(a){var b=CKEDITOR.tools.array.filter(this.items,function(b){return a===b.command});return b.length?(b=b[0],{item:b,element:this._.element.findOne("."+b.className)}):null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=b},proto:{render:function(a,b,c){var g,h,i=a.id+String(b),j="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,k="",l=this.editor,m=j==CKEDITOR.TRISTATE_ON?"on":j==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(k=' aria-checked="'+(j==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var n=this.getItems,o="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",p=this.name;this.icon&&!/\./.test(this.icon)&&(p=this.icon),this.command&&(g=l.getCommand(this.command),(g=l.getCommandKeystroke(g))&&(h=CKEDITOR.tools.keystrokeToString(l.lang.common.keyboard,g))),g=CKEDITOR.tools.htmlEncodeAttr(this.label),a={id:i,name:this.name,iconName:p,label:this.label,attrLabel:g,cls:this.className||"",state:m,hasPopup:n?"true":"false",disabled:j==CKEDITOR.TRISTATE_DISABLED,title:g+(h?" ("+h.display+")":""),ariaShortcut:h?l.lang.common.keyboardShortcut+" "+h.aria:"",href:"javascript:void('"+(g||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(p,"rtl"==this.editor.lang.dir,p==this.icon?null:this.icon,this.iconOffset),shortcutHtml:h?f.output({shortcut:h.display}):"",arrowHtml:n?e.output({label:o}):"",role:this.role?this.role:"menuitem",ariaChecked:k
},d.output(a,c)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{css:a.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,b){function c(){e=!1}var d,e;if(a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?d:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!(b&&c||(a.preventDefault(),e))){if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,f=new CKEDITOR.dom.elementPath(a.getTarget(),c.editable()).contains(function(a){return a.hasAttribute("contenteditable")},!0);f&&"false"==f.getAttribute("contenteditable")&&c.getSelection().fake(f)}var f=a.getTarget().getDocument(),g=a.getTarget().getDocument().getDocumentElement(),c=!f.equals(CKEDITOR.document),f=f.getWindow().getScrollPosition(),h=c?a.$.clientX:a.$.pageX||f.x+a.$.clientX,i=c?a.$.clientY:a.$.pageY||f.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(g,null,h,i)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var f=function(){d=0};a.on("keydown",function(a){d=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),a.on("keyup",f),a.on("contextmenu",f)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(a.on("keydown",function(a){a.data.$.shiftKey&&121===a.data.$.keyCode&&(e=!0)},null,null,0),a.on("keyup",c),a.on("contextmenu",c))},open:function(a,b,c,d){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,b,c,d))}}})},beforeInit:function(a){var b=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){b.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)}),a.addCommand("contextMenu",{exec:function(a){var b=0,c=0,d=a.getSelection().getRanges(),d=d[d.length-1].getClientRects(a.editable().isInline());(d=d[d.length-1])&&(b=d["rtl"===a.lang.dir?"left":"right"],c=d.bottom),a.contextMenu.open(a.document.getBody().getParent(),null,b,c)}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a,c){function e(b){b=i.list[b];var c;b.equals(a.editable())||"true"==b.getAttribute("contenteditable")?(c=a.createRange(),c.selectNodeContents(b),c=c.select()):(c=a.getSelection(),c.selectElement(b)),CKEDITOR.env.ie&&a.fire("selectionChange",{selection:c,path:new CKEDITOR.dom.elementPath(b)}),a.focus()}function f(){g&&g.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete i.list}var g,h=a.ui.spaceId("path"),i=a._.elementsPath,j=i.idBase;c.html+='<span id="'+h+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+h+'" class="cke_path" role="group" aria-labelledby="'+h+'_label"><span class="cke_path_empty">&nbsp;</span></span>',a.on("uiReady",function(){var b=a.ui.space("path");b&&a.focusManager.add(b,1)}),i.onClick=e;var k=CKEDITOR.tools.addFunction(e),l=CKEDITOR.tools.addFunction(function(b,c){var d,f=i.idBase;switch(c=new CKEDITOR.dom.event(c),d="rtl"==a.lang.dir,c.getKeystroke()){case d?39:37:case 9:return(d=CKEDITOR.document.getById(f+(b+1)))||(d=CKEDITOR.document.getById(f+"0")),d.focus(),!1;case d?37:39:case CKEDITOR.SHIFT+9:return(d=CKEDITOR.document.getById(f+(b-1)))||(d=CKEDITOR.document.getById(f+(i.list.length-1))),d.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return e(b),!1}return!0});a.on("selectionChange",function(b){for(var c=[],e=i.list=[],f=[],m=i.filters,n=!0,o=b.data.path.elements,p=o.length;p--;){var q=o[p],r=0;b=q.data("cke-display-name")?q.data("cke-display-name"):q.data("cke-real-element-type")?q.data("cke-real-element-type"):q.getName(),(n=q.hasAttribute("contenteditable")?"true"==q.getAttribute("contenteditable"):n)||q.hasAttribute("contenteditable")||(r=1);for(var s=0;s<m.length;s++){var t=m[s](q,b);if(!1===t){r=1;break}b=t||b}r||(e.unshift(q),f.unshift(b))}for(e=e.length,m=0;m<e;m++)b=f[m],n=a.lang.elementspath.eleTitle.replace(/%1/,b),b=d.output({id:j+m,label:n,text:b,jsTitle:"javascript:void('"+b+"')",index:m,keyDownFn:l,clickFn:k}),c.unshift(b);g||(g=CKEDITOR.document.getById(h)),f=g,f.setHtml(c.join("")+'<span class="cke_path_empty">&nbsp;</span>'),a.fire("elementsPathUpdate",{space:f})}),a.on("readOnly",f),a.on("contentDomUnload",f),a.addCommand("elementsPathFocus",b.toolbarFocus),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var b={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},c="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var d=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+c+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(b){b._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},b.on("uiSpace",function(c){"bottom"==c.data.space&&a(b,c.data)})}})}(),function(){function a(a,d){var e,f;d.on("refresh",function(a){var d,e=[b];for(d in a.data.states)e.push(a.data.states[d]);this.setState(CKEDITOR.tools.search(e,c)?c:b)},d,null,100),d.on("exec",function(b){e=a.getSelection(),f=e.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},d,null,0),d.on("exec",function(){a.forceNextSelectionCheck(),e.selectBookmarks(f)},d,null,100)}var b=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(b){var c=CKEDITOR.plugins.indent.genericDefinition;a(b,b.addCommand("indent",new c((!0)))),a(b,b.addCommand("outdent",new c)),b.ui.addButton&&(b.ui.addButton("Indent",{label:b.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),b.ui.addButton("Outdent",{label:b.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),b.on("dirChanged",function(a){var c=b.createRange(),d=a.data.node;c.setStartBefore(d),c.setEndAfter(d);for(var e,f=new CKEDITOR.dom.walker(c);e=f.next();)if(e.type==CKEDITOR.NODE_ELEMENT)if(!e.equals(d)&&e.getDirection())c.setStartAfter(e),f=new CKEDITOR.dom.walker(c);else{var g=b.config.indentClasses;if(g)for(var h="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],i=0;i<g.length;i++)e.hasClass(g[i]+h[0])&&(e.removeClass(g[i]+h[0]),e.addClass(g[i]+h[1]));g=e.getStyle("margin-right"),h=e.getStyle("margin-left"),g?e.setStyle("margin-left",g):e.removeStyle("margin-left"),h?e.setStyle("margin-right",h):e.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,c){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!c,this.relatedGlobal=c?"indent":"outdent",this.indentKey=c?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var c,d=a.getCommand(b.relatedGlobal);for(c in b.jobs)d.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),d.on("refresh",function(d){d.data.states||(d.data.states={}),d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,c){var d=this.jobs[c];if(d.state!=b)return d.exec.call(this,a)},refreshJob:function(a,c,d){return c=this.jobs[c],a.activeFilter.checkFeature(this)?c.state=c.refresh.call(this,a,d):c.state=b,c.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a){function d(b){for(var d=e.startContainer,i=e.endContainer;d&&!d.getParent().equals(b);)d=d.getParent();for(;i&&!i.getParent().equals(b);)i=i.getParent();if(!d||!i)return!1;for(var j=[],k=!1;!k;)d.equals(i)&&(k=!0),j.push(d),d=d.getNext();if(1>j.length)return!1;for(d=b.getParents(!0),i=0;i<d.length;i++)if(d[i].getName&&h[d[i].getName()]){b=d[i];break}for(var d=f.isIndent?1:-1,i=j[0],j=j[j.length-1],k=CKEDITOR.plugins.list.listToArray(b,g),l=k[j.getCustomData("listarray_index")].indent,i=i.getCustomData("listarray_index");i<=j.getCustomData("listarray_index");i++)if(k[i].indent+=d,0<d){for(var m=k[i].parent,n=i-1;0<=n;n--)if(k[n].indent===d){m=k[n].parent;break}k[i].parent=new CKEDITOR.dom.element(m.getName(),m.getDocument())}for(i=j.getCustomData("listarray_index")+1;i<k.length&&k[i].indent>l;i++)k[i].indent+=d;if(d=CKEDITOR.plugins.list.arrayToList(k,g,null,a.config.enterMode,b.getDirection()),!f.isIndent){var o;if((o=b.getParent())&&o.is("li"))for(var p,j=d.listNode.getChildren(),q=[],i=j.count()-1;0<=i;i--)(p=j.getItem(i))&&p.is&&p.is("li")&&q.push(p)}if(d&&d.listNode.replace(b),q&&q.length)for(i=0;i<q.length;i++){for(p=b=q[i];(p=p.getNext())&&p.is&&p.getName()in h;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(c)&&b.append(e.document.createText(" ")),b.append(p);b.insertAfter(o)}return d&&a.fire("contentDomInvalidated"),!0}for(var e,f=this,g=this.database,h=this.context,i=a.getSelection(),i=(i&&i.getRanges()).createIterator();e=i.getNextRange();){for(var j=e.getCommonAncestor();j&&(j.type!=CKEDITOR.NODE_ELEMENT||!h[j.getName()]);){if(a.editable().equals(j)){j=!1;break}j=j.getParent()}if(j||(j=e.startPath().contains(h))&&e.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),!j){var k=e.getEnclosedNode();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in h&&(e.setStartAt(k,CKEDITOR.POSITION_AFTER_START),e.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),j=k)}if(j&&e.startContainer.type==CKEDITOR.NODE_ELEMENT&&e.startContainer.getName()in h&&(k=new CKEDITOR.dom.walker(e),k.evaluator=b,e.startContainer=k.next()),j&&e.endContainer.type==CKEDITOR.NODE_ELEMENT&&e.endContainer.getName()in h&&(k=new CKEDITOR.dom.walker(e),k.evaluator=b,e.endContainer=k.previous()),j)return d(j)}return 0}function b(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function c(a){return d(a)&&e(a)}var d=CKEDITOR.dom.walker.whitespaces(!0),e=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.TRISTATE_DISABLED,g=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(b){function c(b){d.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],b.on("key",function(a){var c=b.elementPath();if("wysiwyg"==b.mode&&a.data.keyCode==this.indentKey&&c){var d=this.getContext(c);!d||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c,d)||(b.execCommand(this.relatedGlobal),a.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var c=this.getContext(b),d=CKEDITOR.plugins.indentList.firstItemInPath(this.context,b,c);return c&&this.isIndent&&!d?g:f}:function(a,b){return!this.getContext(b)||this.isIndent?f:g},exec:CKEDITOR.tools.bind(a,this)}}var d=CKEDITOR.plugins.indent;d.registerCommands(b,{indentlist:new c(b,"indentlist",(!0)),outdentlist:new c(b,"outdentlist")}),CKEDITOR.tools.extend(c.prototype,d.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(a,c,d){var e=c.contains(b);return d||(d=c.contains(a)),d&&e&&e.equals(d.getFirst(b))}}(),function(){function a(a,b,c,d){for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(c,h,"list_item_processed",!0))}for(var i,j,h=b.root.getDocument(),g=0;g<f.length;g++){var k=f[g].getCustomData("listarray_index");i=e[k].parent,i.is(this.type)||(j=h.createElement(this.type),i.copyAttributes(j,{start:1,type:1}),j.removeStyle("list-style-type"),e[k].parent=j)}c=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode);for(var l,e=c.listNode.getChildCount(),g=0;g<e&&(l=c.listNode.getChild(g));g++)l.getName()==this.type&&d.push(l);c.listNode.replace(b.root),a.fire("contentDomInvalidated")}function b(a,b,c){var d=b.contents,e=b.root.getDocument(),f=[];if(1==d.length&&d[0].equals(b.root)){var g=e.createElement("div");d[0].moveChildren&&d[0].moveChildren(g),d[0].append(g),d[0]=g}for(b=b.contents[0].getParent(),g=0;g<d.length;g++)b=b.getCommonAncestor(d[g].getParent());a=a.config.useComputedState;var h,i;for(a=void 0===a||a,g=0;g<d.length;g++)for(var j,k=d[g];j=k.getParent();){if(j.equals(b)){f.push(k),!i&&k.getDirection()&&(i=1),k=k.getDirection(a),null!==h&&(h=h&&h!=k?null:k);break}k=j}if(!(1>f.length)){for(d=f[f.length-1].getNext(),g=e.createElement(this.type),c.push(g);f.length;)c=f.shift(),a=e.createElement("li"),k=c,k.is("pre")||o.test(k.getName())||"false"==k.getAttribute("contenteditable")?c.appendTo(a):(c.copyAttributes(a),h&&c.getDirection()&&(a.removeStyle("direction"),a.removeAttribute("dir")),c.moveChildren(a),c.remove()),a.appendTo(g);h&&i&&g.setAttribute("dir",h),d?g.insertBefore(d):g.appendTo(b)}}function c(a,b,c){function d(c){!(i=k[c?"getFirst":"getLast"]())||i.is&&i.isBlockBoundary()||!(j=b.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||j.is&&j.isBlockBoundary({br:1})||a.document.createElement("br")[c?"insertBefore":"insertAfter"](i)}for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(c,h,"list_item_processed",!0))}for(h=null,g=0;g<f.length;g++)h=f[g].getCustomData("listarray_index"),e[h].indent=-1;for(g=h+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){for(f=e[g-1].indent+1-e[g].indent,h=e[g].indent;e[g]&&e[g].indent>=h;)e[g].indent+=f,g++;g--}var i,j,k=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;d(!0),d(),k.replace(b.root),a.fire("contentDomInvalidated")}function d(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function e(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](p);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d),c=e}function f(a){function b(b){var c=a[b?"getPrevious":"getNext"](m);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(a.getName())&&(e(a,c,null,!b),a.remove(),a=c)}b(),b(1)}function g(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function h(a,b,c){a.fire("saveSnapshot"),c.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var d=c.extractContents();b.trim(!1,!0);var g=b.createBookmark(),h=new CKEDITOR.dom.elementPath(b.startContainer),j=h.block,h=h.lastElement.getAscendant("li",1)||j,k=new CKEDITOR.dom.elementPath(c.startContainer),l=k.contains(CKEDITOR.dtd.$listItem),k=k.contains(CKEDITOR.dtd.$list);for(j?(j=j.getBogus())&&j.remove():k&&(j=k.getPrevious(m))&&n(j)&&j.remove(),(j=d.getLast())&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("br")&&j.remove(),(j=b.startContainer.getChild(b.startOffset))?d.insertBefore(j):b.startContainer.append(d),l&&(d=i(l))&&(h.contains(l)?(e(d,l.getParent(),l),d.remove()):h.append(d));c.checkStartOfBlock()&&c.checkEndOfBlock()&&(k=c.startPath(),d=k.block,d);)d.is("li")&&(h=d.getParent(),d.equals(h.getLast(m))&&d.equals(h.getFirst(m))&&(d=h)),c.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d.remove();c=c.clone(),d=a.editable(),c.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(c),c.evaluator=function(a){return m(a)&&!n(a)},(c=c.next())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in CKEDITOR.dtd.$list&&f(c),b.moveToBookmark(g),b.select(),a.fire("saveSnapshot")}function i(a){return(a=a.getLast(m))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in j?a:null}var j={ol:1,ul:1},k=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),m=function(a){return!(k(a)||l(a))},n=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,c,d,e){if(!j[a.getName()])return[];d||(d=0),c||(c=[]);for(var f=0,g=a.getChildCount();f<g;f++){var h=a.getChild(f);if(h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,b,c,d+1),"li"==h.$.nodeName.toLowerCase()){var i={parent:a,indent:d,element:h,contents:[]};e?i.grandparent=e:(i.grandparent=a.getParent(),i.grandparent&&"li"==i.grandparent.$.nodeName.toLowerCase()&&(i.grandparent=i.grandparent.getParent())),b&&CKEDITOR.dom.element.setMarker(b,h,"listarray_index",c.length),c.push(i);for(var k,l=0,m=h.getChildCount();l<m;l++)k=h.getChild(l),k.type==CKEDITOR.NODE_ELEMENT&&j[k.getName()]?CKEDITOR.plugins.list.listToArray(k,b,c,d+1,i.grandparent):i.contents.push(k)}}return c},arrayToList:function(a,b,c,d,e){if(c||(c=0),!a||a.length<c+1)return null;for(var f,g,h,i=a[c].parent.getDocument(),k=new CKEDITOR.dom.documentFragment(i),n=null,o=c,p=Math.max(a[c].indent,0),q=null,r=d==CKEDITOR.ENTER_P?"p":"div";;){var s=a[o];if(f=s.grandparent,g=s.element.getDirection(1),s.indent==p){for(n&&a[o].parent.getName()==n.getName()||(n=a[o].parent.clone(!1,1),e&&n.setAttribute("dir",e),k.append(n)),q=n.append(s.element.clone(0,1)),g!=n.getDirection(1)&&q.setAttribute("dir",g),f=0;f<s.contents.length;f++)q.append(s.contents[f].clone(1,1));o++}else if(s.indent==Math.max(p,0)+1)s=a[o-1].element.getDirection(1),o=CKEDITOR.plugins.list.arrayToList(a,null,o,d,s!=g?g:null),!q.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=i.$.documentMode&&q.append(i.createText(" ")),q.append(o.listNode),o=o.nextIndex;else{if(-1!=s.indent||c||!f)return null;j[f.getName()]?(q=s.element.clone(!1,!0),g!=f.getDirection(1)&&q.setAttribute("dir",g)):q=new CKEDITOR.dom.documentFragment(i);var t,u,n=f.getDirection(1)!=g,v=s.element,w=v.getAttribute("class"),x=v.getAttribute("style"),y=q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(d!=CKEDITOR.ENTER_BR||n||x||w),z=s.contents.length;for(f=0;f<z;f++)if(t=s.contents[f],l(t)&&1<z)y?u=t.clone(1,1):q.append(t.clone(1,1));else if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){n&&!t.getDirection()&&t.setAttribute("dir",g),h=t;var A=v.getAttribute("style");A&&h.setAttribute("style",A.replace(/([^;])$/,"$1;")+(h.getAttribute("style")||"")),w&&t.addClass(w),h=null,u&&(q.append(u),u=null),q.append(t.clone(1,1))}else y?(h||(h=i.createElement(r),q.append(h),n&&h.setAttribute("dir",g)),x&&h.setAttribute("style",x),w&&h.setAttribute("class",w),u&&(h.append(u),u=null),h.append(t.clone(1,1))):q.append(t.clone(1,1));u&&((h||q).append(u),u=null),q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&o!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(g=q.getLast())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("br")&&g.remove(),(g=q.getLast(m))&&g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.$block)||q.append(i.createElement("br"))),g=q.$.nodeName.toLowerCase(),"div"!=g&&"p"!=g||q.appendBogus(),k.append(q),n=null,o++}if(h=null,a.length<=o||Math.max(a[o].indent,0)<p)break}if(b)for(a=k.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(c=a,i=e=d=void 0,d=c.getDirection()))){for(e=c.getParent();e&&!(i=e.getDirection());)e=e.getParent();d==i&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:k,nextIndex:o}}};var o=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);d.prototype={exec:function(d){function e(a){return j[a.root.getName()]&&!g(a.root,[CKEDITOR.NODE_COMMENT])}function g(a,b){return CKEDITOR.tools.array.filter(a.getChildren().toArray(),function(a){return-1===CKEDITOR.tools.array.indexOf(b,a.type)}).length}function h(a){var b=!0;return 0!==a.getChildCount()&&(a.forEach(function(a){if(a.type!==CKEDITOR.NODE_COMMENT)return b=!1},null,!0),b)}this.refresh(d,d.elementPath());var i=d.config,k=d.getSelection(),l=k&&k.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var n=d.editable();if(n.getFirst(m)){var o=1==l.length&&l[0];(i=o&&o.getEnclosedNode())&&i.is&&this.type==i.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else i.enterMode==CKEDITOR.ENTER_BR?n.appendBogus():l[0].fixBlock(1,i.enterMode==CKEDITOR.ENTER_P?"p":"div"),k.selectRanges(l)}for(var i=k.createBookmarks(!0),n=[],p={},l=l.createIterator(),q=0;(o=l.getNextRange())&&++q;){var r=o.getBoundaryNodes(),s=r.startNode,t=r.endNode;for(s.type==CKEDITOR.NODE_ELEMENT&&"td"==s.getName()&&o.setStartAt(r.startNode,CKEDITOR.POSITION_AFTER_START),t.type==CKEDITOR.NODE_ELEMENT&&"td"==t.getName()&&o.setEndAt(r.endNode,CKEDITOR.POSITION_BEFORE_END),o=o.createIterator(),o.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;r=o.getNextParagraph();)if(!r.getCustomData("list_block")&&!h(r)){CKEDITOR.dom.element.setMarker(p,r,"list_block",1);for(var u,v=d.elementPath(r),s=v.elements,t=0,v=v.blockLimit,w=s.length-1;0<=w&&(u=s[w]);w--)if(j[u.getName()]&&v.contains(u)){v.removeCustomData("list_group_object_"+q),(s=u.getCustomData("list_group_object"))?s.contents.push(r):(s={root:u,contents:[r]},n.push(s),CKEDITOR.dom.element.setMarker(p,u,"list_group_object",s)),t=1;break}t||(t=v,t.getCustomData("list_group_object_"+q)?t.getCustomData("list_group_object_"+q).contents.push(r):(s={root:t,contents:[r]},CKEDITOR.dom.element.setMarker(p,t,"list_group_object_"+q,s),n.push(s)))}}for(u=[];0<n.length;)s=n.shift(),this.state==CKEDITOR.TRISTATE_OFF?e(s)||(j[s.root.getName()]?a.call(this,d,s,p,u):b.call(this,d,s,u)):this.state==CKEDITOR.TRISTATE_ON&&j[s.root.getName()]&&!e(s)&&c.call(this,d,s,p);for(w=0;w<u.length;w++)f(u[w]);CKEDITOR.dom.element.clearAllMarkers(p),k.selectBookmarks(i),d.focus()},refresh:function(a,b){var c=b.contains(j,1),d=b.blockLimit||b.root;c&&d.contains(c)?this.setState(c.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new d("numberedlist","ol")),a.addCommand("bulletedlist",new d("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(b){var c,d=b.data.domEvent.getKey();if("wysiwyg"==a.mode&&d in{8:1,46:1}){var e=a.getSelection().getRanges()[0],f=e&&e.startPath();if(e&&e.collapsed){var k=8==d,l=a.editable(),o=new CKEDITOR.dom.walker(e.clone());if(o.evaluator=function(a){return m(a)&&!n(a)},o.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},d=e.clone(),k){var p;if((p=f.contains(j))&&e.checkBoundaryOfElement(p,CKEDITOR.START)&&(p=p.getParent())&&p.is("li")&&(p=i(p))?(c=p,p=p.getPrevious(m),d.moveToPosition(p&&n(p)?p:c,CKEDITOR.POSITION_BEFORE_START)):(o.range.setStartAt(l,CKEDITOR.POSITION_AFTER_START),o.range.setEnd(e.startContainer,e.startOffset),(p=o.previous())&&p.type==CKEDITOR.NODE_ELEMENT&&(p.getName()in j||p.is("li"))&&(p.is("li")||(o.range.selectNodeContents(p),o.reset(),o.evaluator=g,p=o.previous()),c=p,d.moveToElementEditEnd(c),d.moveToPosition(d.endPath().block,CKEDITOR.POSITION_BEFORE_END))),c)h(a,d,e),b.cancel();else{var q=f.contains(j);q&&e.checkBoundaryOfElement(q,CKEDITOR.START)&&(c=q.getFirst(m),e.checkBoundaryOfElement(c,CKEDITOR.START)&&(p=q.getPrevious(m),i(c)?p&&(e.moveToElementEditEnd(p),e.select()):a.execCommand("outdent"),b.cancel()))}}else if(c=f.contains("li")){if(o.range.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),k=(l=c.getLast(m))&&g(l)?l:c,f=0,(p=o.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in j&&p.equals(l)?(f=1,p=o.next()):e.checkBoundaryOfElement(k,CKEDITOR.END)&&(f=2),f&&p){if(e=e.clone(),e.moveToElementEditStart(p),1==f&&(d.optimize(),!d.startContainer.equals(c))){for(c=d.startContainer;c.is(CKEDITOR.dtd.$inline);)q=c,c=c.getParent();q&&d.moveToPosition(q,CKEDITOR.POSITION_AFTER_END)}2==f&&(d.moveToPosition(d.endPath().block,CKEDITOR.POSITION_BEFORE_END),e.endPath().block&&e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_AFTER_START)),h(a,d,e),b.cancel()}}else o.range.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),(p=o.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.is(j)&&(p=p.getFirst(m),f.block&&e.checkStartOfBlock()&&e.checkEndOfBlock()?(f.block.remove(),e.moveToElementEditStart(p),e.select()):i(p)?(e.moveToElementEditStart(p),e.select()):(e=e.clone(),e.moveToElementEditStart(p),h(a,d,e)),b.cancel());setTimeout(function(){a.selectionChange(1)})}}}))}})}(),function(){function a(a,b,c){if(c=a.config.forceEnterMode||c,"wysiwyg"==a.mode){b||(b=a.activeEnterMode);var d=a.elementPath();d&&!d.isContextFor("p")&&(b=CKEDITOR.ENTER_BR,c=1),a.fire("saveSnapshot"),b==CKEDITOR.ENTER_BR?e(a,b,null,c):f(a,b,null,c),a.fire("saveSnapshot")}}function b(a){a=a.getSelection().getRanges(!0);for(var b=a.length-1;0<b;b--)a[b].deleteContents();return a[0]}function c(a){var b=a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},!0);return a.root.equals(b)?a:(b=new CKEDITOR.dom.range(b),b.moveToRange(a),b)}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b)}}),b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b,b.activeShiftEnterMode,1)}}),b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var d,e,f,g,h=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(a,d,f,j){function k(a){var b;return a!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],p.lastElement.getName())&&1===p.lastElement.getChildCount()&&(a=p.lastElement.getChild(0).clone(!0),(b=a.getBogus())&&b.remove(),!a.getText().length)}if(f=f||b(a)){f=c(f);var l,m=f.document,n=f.checkStartOfBlock(),o=f.checkEndOfBlock(),p=a.elementPath(f.startContainer),q=p.block,r=d==CKEDITOR.ENTER_DIV?"div":"p";if(q&&n&&o){if(n=q.getParent(),n.is("li")&&1<n.getChildCount())return m=new CKEDITOR.dom.element("li"),l=a.createRange(),m.insertAfter(n),q.remove(),l.setStart(m,0),void a.getSelection().selectRanges([l]);if(q.is("li")||q.getParent().is("li")){q.is("li")||(q=q.getParent(),n=q.getParent()),l=n.getParent(),f=!q.hasPrevious();var s=!q.hasNext();j=a.getSelection();var r=j.createBookmarks(),t=q.getDirection(1),o=q.getAttribute("class"),u=q.getAttribute("style"),v=l.getDirection(1)!=t;if(a=a.enterMode!=CKEDITOR.ENTER_BR||v||u||o,l.is("li"))f||s?(f&&s&&n.remove(),q[s?"insertAfter":"insertBefore"](l)):q.breakParent(l);else{if(a)p.block.is("li")?(l=m.createElement(d==CKEDITOR.ENTER_P?"p":"div"),v&&l.setAttribute("dir",t),u&&l.setAttribute("style",u),o&&l.setAttribute("class",o),q.moveChildren(l)):l=p.block,f||s?l[f?"insertBefore":"insertAfter"](n):(q.breakParent(n),l.insertAfter(n));else if(q.appendBogus(!0),f||s)for(;m=q[f?"getFirst":"getLast"]();)m[f?"insertBefore":"insertAfter"](n);else for(q.breakParent(n);m=q.getLast();)m.insertAfter(n);q.remove()}return void j.selectBookmarks(r)}if(q&&q.getParent().is("blockquote"))return q.breakParent(q.getParent()),q.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||q.getPrevious().remove(),q.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||q.getNext().remove(),f.moveToElementEditStart(q),void f.select()}else if(q&&q.is("pre")&&!o)return void e(a,d,f,j);if(u=f.splitBlock(r)){if(a=u.previousBlock,q=u.nextBlock,n=u.wasStartOfBlock,o=u.wasEndOfBlock,q?(s=q.getParent(),s.is("li")&&(q.breakParent(s),q.move(q.getNext(),1))):a&&(s=a.getParent())&&s.is("li")&&(a.breakParent(s),s=a.getNext(),f.moveToElementEditStart(s),a.move(a.getPrevious())),n||o)if(k(d))f.moveToElementEditStart(f.getTouchedStartNode());else{if(a?(a.is("li")||!g.test(a.getName())&&!a.is("pre"))&&(l=a.clone()):q&&(l=q.clone()),l?j&&!l.is("li")&&l.renameNode(r):s&&s.is("li")?l=s:(l=m.createElement(r),a&&(t=a.getDirection())&&l.setAttribute("dir",t)),m=u.elementPath)for(d=0,j=m.elements.length;d<j&&(r=m.elements[d],!r.equals(m.block)&&!r.equals(m.blockLimit));d++)CKEDITOR.dtd.$removeEmpty[r.getName()]&&(r=r.clone(),l.moveChildren(r),l.append(r));l.appendBogus(),l.getParent()||f.insertNode(l),l.is("li")&&l.removeAttribute("value"),!CKEDITOR.env.ie||!n||o&&a.getChildCount()||(f.moveToElementEditStart(o?a:l),f.select()),f.moveToElementEditStart(n&&!o?q:l)}else q.is("li")&&(l=f.clone(),l.selectNodeContents(q),l=new CKEDITOR.dom.walker(l),l.evaluator=function(a){return!(i(a)||h(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(s=l.next())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?m.createElement("br"):m.createText(" ")).insertBefore(s)),q&&f.moveToElementEditStart(q);f.select(),f.scrollIntoView()}}},enterBr:function(a,c,d,e){if(d=d||b(a)){var h=d.document,i=d.checkEndOfBlock(),j=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),k=j.block,l=k&&j.block.getName();e||"li"!=l?(!e&&i&&g.test(l)?(i=k.getDirection())?(h=h.createElement("div"),h.setAttribute("dir",i),h.insertAfter(k),d.setStart(h,0)):(h.createElement("br").insertAfter(k),CKEDITOR.env.gecko&&h.createText("").insertAfter(k),d.setStartAt(k.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==l&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?h.createText("\r"):h.createElement("br"),d.deleteContents(),d.insertNode(a),CKEDITOR.env.needsBrFiller?(h.createText("\ufeff").insertAfter(a),i&&(k||j.blockLimit).appendBogus(),a.getNext().$.nodeValue="",d.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START)):d.setStartAt(a,CKEDITOR.POSITION_AFTER_END)),d.collapse(!0),d.select(),d.scrollIntoView()):f(a,c,d,e)}}},d=CKEDITOR.plugins.enterkey,e=d.enterBr,f=d.enterBlock,g=/^h[1-6]$/}(),function(){function a(a,b){var c={},d=[],e={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,f){var g=b?"&"+f+";":e[f];return c[g]=b?e[f]:"&"+f+";",d.push(g),""}),a=a.replace(/,$/,""),!b&&a){a=a.split(",");var f,g=document.createElement("div");for(g.innerHTML="&"+a.join(";&")+";",f=g.innerHTML,g=null,g=0;g<f.length;g++){var h=f.charAt(g);c[h]="&"+a[g]+";",d.push(h)}}return c.regex=d.join(b?"|":""),c}CKEDITOR.plugins.add("entities",{afterInit:function(b){function c(a){return i[a]}function d(a){return"force"!=e.entities_processNumerical&&g[a]?g[a]:"&#"+a.charCodeAt(0)+";"}var e=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var f=[];!1!==e.basicEntities&&f.push("nbsp,gt,lt,amp"),e.entities&&(f.length&&f.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),e.entities_latin&&f.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),
e.entities_greek&&f.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),e.entities_additional&&f.push(e.entities_additional));var g=a(f.join(",")),h=g.regex?"["+g.regex+"]":"a^";delete g.regex,e.entities&&e.entities_processNumerical&&(h="[^ -~]|"+h);var h=new RegExp(h,"g"),i=a("nbsp,gt,lt,amp,shy",!0),j=new RegExp(i.regex,"g");b.addRules({text:function(a){return a.replace(j,c).replace(h,d)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,b,c,d){b=b||"80%",c=c||"70%","string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),"string"==typeof c&&1<c.length&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),640>b&&(b=640),420>c&&(c=420);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10);d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+b+",height="+c+",top="+e+",left="+f;var g=window.open("",null,d,!0);if(!g)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(g.moveTo(f,e),g.resizeTo(b,c)),g.focus(),g.location.href=a}catch(h){window.open(a,null,d,!0)}return!0}}),function(){function a(a){this.editor=a,this.loaders=[]}function b(a,b,d){var e=a.config.fileTools_defaultFileName;this.editor=a,this.lang=a.lang,"string"==typeof b?(this.data=b,this.file=c(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=b,this.total=this.file.size,this.loaded=0),d?this.fileName=d:this.file.name?this.fileName=this.file.name:(a=this.file.type.split("/"),e&&(a[0]=e),this.fileName=a.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}function c(a){var b=a.match(d)[1];a=a.replace(d,""),a=atob(a);var c,e,f,g,h=[];for(c=0;c<a.length;c+=512){for(e=a.slice(c,c+512),f=Array(e.length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);e=new Uint8Array(f),h.push(e)}return new Blob(h,{type:b})}CKEDITOR.plugins.add("filetools",{beforeInit:function(b){b.uploadRepository=new a(b),b.on("fileUploadRequest",function(a){var b=a.data.fileLoader;b.xhr.open("POST",b.uploadUrl,!0),a.data.requestData.upload={file:b.file,name:b.fileName}},null,null,5),b.on("fileUploadRequest",function(a){var c=a.data.fileLoader,d=new FormData;a=a.data.requestData;var e,f,g=b.config.fileTools_requestHeaders;for(f in a){var h=a[f];"object"==typeof h&&h.file?d.append(f,h.file,h.name):d.append(f,h)}if(d.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),g)for(e in g)c.xhr.setRequestHeader(e,g[e]);c.xhr.send(d)},null,null,999),b.on("fileUploadResponse",function(a){var b=a.data.fileLoader,c=b.xhr,d=a.data;try{var e=JSON.parse(c.responseText);if(e.error&&e.error.message&&(d.message=e.error.message),e.uploaded)for(var f in e)d[f]=e[f];else a.cancel()}catch(g){d.message=b.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:c.responseText}),a.cancel()}},null,null,999)}}),a.prototype={create:function(a,c,d){d=d||b;var e=this.loaders.length;return a=new d(this.editor,a,c),a.id=e,this.loaders[e]=a,this.fire("instanceCreated",a),a},isFinished:function(){for(var a=0;a<this.loaders.length;++a)if(!this.loaders[a].isFinished())return!1;return!0}},b.prototype={loadAndUpload:function(a,b){var c=this;this.once("loaded",function(d){d.cancel(),c.once("update",function(a){a.cancel()},null,null,0),c.upload(a,b)},null,null,0),this.load()},load:function(){var a=this,b=this.reader=new FileReader;a.changeStatus("loading"),this.abort=function(){a.reader.abort()},b.onabort=function(){a.changeStatus("abort")},b.onerror=function(){a.message=a.lang.filetools.loadError,a.changeStatus("error")},b.onprogress=function(b){a.loaded=b.loaded,a.update()},b.onload=function(){a.loaded=a.total,a.data=b.result,a.changeStatus("loaded")},b.readAsDataURL(this.file)},upload:function(a,b){var c=b||{};a?(this.uploadUrl=a,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:c})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function a(){"error"!=c.status&&(c.message=c.lang.filetools.networkError,c.changeStatus("error"))}function b(){"abort"!=c.status&&c.changeStatus("abort")}var c=this,d=this.xhr;c.abort=function(){d.abort(),b()},d.onerror=a,d.onabort=b,d.upload?(d.upload.onprogress=function(a){a.lengthComputable&&(c.uploadTotal||(c.uploadTotal=a.total),c.uploaded=a.loaded,c.update())},d.upload.onerror=a,d.upload.onabort=b):(c.uploadTotal=c.total,c.update()),d.onload=function(){if(c.update(),"abort"!=c.status)if(c.uploaded=c.uploadTotal,200>d.status||299<d.status)c.message=c.lang.filetools["httpError"+d.status],c.message||(c.message=c.lang.filetools.httpError.replace("%1",d.status)),c.changeStatus("error");else{for(var a={fileLoader:c},b=["message","fileName","url"],e=c.editor.fire("fileUploadResponse",a),f=0;f<b.length;f++){var g=b[f];"string"==typeof a[g]&&(c[g]=a[g])}c.responseData=a,delete c.responseData.fileLoader,!1===e?c.changeStatus("error"):c.changeStatus("uploaded")}}},changeStatus:function(a){this.status=a,"error"!=a&&"abort"!=a&&"loaded"!=a&&"uploaded"!=a||(this.abort=function(){}),this.fire(a),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(a.prototype),CKEDITOR.event.implementOn(b.prototype);var d=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:a,fileLoader:b,getUploadUrl:function(a,b){var c=CKEDITOR.tools.capitalize;return b&&a[b+"UploadUrl"]?a[b+"UploadUrl"]:a.uploadUrl?a.uploadUrl:b&&a["filebrowser"+c(b,1)+"UploadUrl"]?a["filebrowser"+c(b,1)+"UploadUrl"]+"&responseType=json":a.filebrowserUploadUrl?a.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(a,b){return!!a.type.match(b)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function a(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function b(b){return!b.match(/command=QuickUpload/)||b.match(/(\?|&)responseType=json/)?b:a(b,{responseType:"json"})}function c(a){return a+="",a.charAt(0).toUpperCase()+a.substr(1)}function d(){var b=this.getDialog(),d=b.getParentEditor();d._.filebrowserSe=this;var e=d.config["filebrowser"+c(b.getName())+"WindowWidth"]||d.config.filebrowserWindowWidth||"80%",b=d.config["filebrowser"+c(b.getName())+"WindowHeight"]||d.config.filebrowserWindowHeight||"70%",f=this.filebrowser.params||{};f.CKEditor=d.name,f.CKEditorFuncNum=d._.filebrowserFn,f.langCode||(f.langCode=d.langCode),f=a(this.filebrowser.url,f),d.popup(f,e,b,d.config.filebrowserWindowFeatures||d.config.fileBrowserWindowFeatures)}function e(a){var b=new CKEDITOR.dom.element(a.$.form);b&&((a=b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function f(){var a=this.getDialog();return a.getParentEditor()._.filebrowserSe=this,!(!a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!a.getContentElement(this["for"][0],this["for"][1]).getAction())}function g(b,c,d){var e=d.params||{};e.CKEditor=b.name,e.CKEditorFuncNum=b._.filebrowserFn,e.langCode||(e.langCode=b.langCode),c.action=a(d.url,e),c.filebrowser=d}function h(a,j,l,m){if(m&&m.length)for(var n,o=m.length;o--;)if(n=m[o],"hbox"!=n.type&&"vbox"!=n.type&&"fieldset"!=n.type||h(a,j,l,n.children),n.filebrowser)if("string"==typeof n.filebrowser&&(n.filebrowser={action:"fileButton"==n.type?"QuickUpload":"Browse",target:n.filebrowser}),"Browse"==n.filebrowser.action){var p=n.filebrowser.url;void 0===p&&(p=a.config["filebrowser"+c(j)+"BrowseUrl"],void 0===p&&(p=a.config.filebrowserBrowseUrl)),p&&(n.onClick=d,n.filebrowser.url=p,n.hidden=!1)}else if("QuickUpload"==n.filebrowser.action&&n["for"]&&(p=n.filebrowser.url,void 0===p&&(p=a.config["filebrowser"+c(j)+"UploadUrl"],void 0===p&&(p=a.config.filebrowserUploadUrl)),p)){var q=n.onClick;n.onClick=function(c){var d=c.sender,g=d.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement(),h=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!q||!1!==q.call(d,c))&&(!!f.call(d,c)&&("form"!==a.config.filebrowserUploadMethod&&h?(c=a.uploadRepository.create(g.$.files[0]),c.on("uploaded",function(a){var b=a.sender.responseData;k.call(a.sender.editor,b.url,b.message)}),c.on("error",i.bind(this)),c.on("abort",i.bind(this)),c.loadAndUpload(b(p)),"xhr"):(e(g),!0)))},n.filebrowser.url=p,n.hidden=!1,g(a,l.getContents(n["for"][0]).get(n["for"][1]),n.filebrowser)}}function i(a){var b={};try{b=JSON.parse(a.sender.xhr.response)||{}}catch(c){}this.enable(),alert(b.error?b.error.message:a.sender.message)}function j(a,b,c){if(-1!==c.indexOf(";")){c=c.split(";");for(var d=0;d<c.length;d++)if(j(a,b,c[d]))return!0;return!1}return(a=a.getContents(b).get(c).filebrowser)&&a.url}function k(a,b){var c=this._.filebrowserSe.getDialog(),d=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;d&&c.getContentElement(d[0],d[1]).reset(),"function"==typeof b&&!1===b.call(this._.filebrowserSe)||e&&!1===e.call(this._.filebrowserSe,a,b)||("string"==typeof b&&b&&alert(b),a&&(d=this._.filebrowserSe,c=d.getDialog(),d=d.filebrowser.target||null)&&(d=d.split(":"),(e=c.getContentElement(d[0],d[1]))&&(e.setValue(a),c.selectPage(d[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(k,a),a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var b,c=a.data.definition,d=0;d<c.contents.length;++d)(b=c.contents[d])&&(h(a.editor,a.data.name,c,b.elements),b.hidden&&b.filebrowser&&(b.hidden=!j(c,b.id,b.filebrowser)))})}(),function(){function a(a){var d=a.config,e=a.fire("uiSpace",{space:"top",html:""}).html,f=function(){function e(a,b,d){h.setStyle(b,c(d)),h.setStyle("position",a)}function g(a){var b=j.getDocumentPosition();switch(a){case"top":e("absolute","top",b.y-n-q);break;case"pin":e("fixed","top",s);break;case"bottom":e("absolute","top",b.y+(l.height||l.bottom-l.top)+q)}i=a}var i,j,k,l,m,n,o,p=d.floatSpaceDockedOffsetX||0,q=d.floatSpaceDockedOffsetY||0,r=d.floatSpacePinnedOffsetX||0,s=d.floatSpacePinnedOffsetY||0;return function(e){if(j=a.editable()){var s=e&&"focus"==e.name;s&&h.show(),a.fire("floatingSpaceLayout",{show:s}),h.removeStyle("left"),h.removeStyle("right"),k=h.getClientRect(),l=j.getClientRect(),m=b.getViewPaneSize(),n=k.height,o="pageXOffset"in b.$?b.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,i?(g(n+q<=l.top?"top":n+q>m.height-l.bottom?"pin":"bottom"),e=m.width/2,e=d.floatSpacePreferRight?"right":0<l.left&&l.right<m.width&&l.width>k.width?"rtl"==d.contentsLangDirection?"right":"left":e-l.left>l.right-e?"left":"right",k.width>m.width?(e="left",s=0):(s="left"==e?0<l.left?l.left:0:l.right<m.width?m.width-l.right:0,s+k.width>m.width&&(e="left"==e?"right":"left",s=0)),h.setStyle(e,c(("pin"==i?r:p)+s+("pin"==i?0:"left"==e?o:-o)))):(i="pin",g("pin"),f(e))}}}();if(e){var g=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),h=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(g.output({content:e,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(d.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),i=CKEDITOR.tools.eventsBuffer(500,f),j=CKEDITOR.tools.eventsBuffer(100,f);h.unselectable(),h.on("mousedown",function(a){a=a.data,a.getTarget().hasAscendant("a",1)||a.preventDefault()}),a.on("focus",function(c){f(c),a.on("change",i.input),b.on("scroll",j.input),b.on("resize",j.input)}),a.on("blur",function(){h.hide(),a.removeListener("change",i.input),b.removeListener("scroll",j.input),b.removeListener("resize",j.input)}),a.on("destroy",function(){b.removeListener("scroll",j.input),b.removeListener("resize",j.input),h.clearCustomData(),h.remove()}),a.focusManager.hasFocus&&h.show(),a.focusManager.add(h,1)}}var b=CKEDITOR.document.getWindow(),c=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(b){b.on("loaded",function(){a(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),b=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  onclick="{onclick}CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),c=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),d=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0),!c.role&&(c.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",c.role),c=this.keys,c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var b=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(b),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);this.onClick&&this.onClick(a,b)},this)),this._.click}},proto:{add:function(a,c,e){var f=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=f;var g;g=CKEDITOR.tools.htmlEncodeAttr(a).replace(d,"\\'"),a={id:f,val:g,onclick:CKEDITOR.env.ie?'return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&':"",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(e||a),text:c||a},this._.pendingList.push(b.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b,this._.pendingHtml.push(c.output({id:b,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a,b=this._.items,c=this._.groups,d=this.element.getDocument();for(a in b)d.getById(b[a]).setStyle("display","");for(var e in c)b=d.getById(c[e]),a=b.getNext(),b.setStyle("display",""),a&&"ul"==a.getName()&&a.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll(),a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(b)},markFirstDisplayed:function(){var a=this;this._.markFirstDisplayed(function(){a.multiSelect||a.unmarkAll()})},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected"),b.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a,b=this._.items,c=this.element.getDocument();for(a in b){var d=b[a];c.getById(d).removeClass("cke_selected"),c.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b,c=this.element.getElementsByTag("a"),d=-1;if(a){for(b=this.element.getDocument().getById(this._.items[a]).getFirst();a=c.getItem(++d);)if(a.equals(b)){this._.focusIndex=d;break}}else this.element.focus();b&&setTimeout(function(){b.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"',b="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"'),CKEDITOR.env.ie&&(b='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+b+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),c=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{},listeners:[]}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,b){function d(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var b=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(b=CKEDITOR.TRISTATE_DISABLED),this.setState(b),this.setValue(""),b!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var e,f,g=CKEDITOR.env,h="cke_"+this.id,i=CKEDITOR.tools.addFunction(function(b){f&&(a.unlockSelection(1),f=0),e.execute(b)},this),j=this;e={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(b){var c=j._;if(c.state!=CKEDITOR.TRISTATE_DISABLED)if(j.createPanel(a),c.on)c.panel.hide();else{j.commit();var d=j.getValue();d?c.list.mark(d):c.list.unmarkAll(),c.panel.showBlock(j.id,new CKEDITOR.dom.element(b),4)}},clickFn:i},this._.listeners.push(a.on("activeFilterChange",d,this)),this._.listeners.push(a.on("mode",d,this)),this._.listeners.push(a.on("selectionChange",d,this)),!this.readOnly&&this._.listeners.push(a.on("readOnly",d,this));var k=CKEDITOR.tools.addFunction(function(a,b){a=new CKEDITOR.dom.event(a);var c=a.getKeystroke();switch(c){case 13:case 32:case 40:CKEDITOR.tools.callFunction(i,b);break;default:e.onkey(e,c)}a.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){e.onfocus&&e.onfocus()});return f=0,e.keyDownFn=k,g={id:h,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:g.gecko&&!g.hc?"":(this.title||"").replace("'",""),keydownFn:k,focusFn:l,clickFn:i},c.output(g,b),this.onRender&&this.onRender(),e},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,c=this._.panelDefinition.block,d=b.parent||CKEDITOR.document.getBody(),e="cke_combopanel__"+this.name,f=new CKEDITOR.ui.floatPanel(a,d,b),b=f.addListBlock(this.id,c),g=this;f.onShow=function(){this.element.addClass(e),g.setState(CKEDITOR.TRISTATE_ON),g._.on=1,g.editorFocus&&!a.focusManager.hasFocus&&a.focus(),g.onOpen&&g.onOpen()},f.onHide=function(b){this.element.removeClass(e),g.setState(g.modes&&g.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),g._.on=0,!b&&g.onClose&&g.onClose()},f.onEscape=function(){f.hide(1)},b.onClick=function(a,b){g.onClick&&g.onClick.call(g,a,b),f.hide()},this._.panel=f,this._.list=b,f.getBlock(this.id).onHide=function(){g._.on=0,g.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,b){this._.value=a;var c=this.document.getById("cke_"+this.id+"_text");c&&(a||b?c.removeClass("cke_combo_inlinelabel"):(b=this.label,c.addClass("cke_combo_inlinelabel")),c.setText("undefined"!=typeof b?b:a));var c="undefined"!=typeof b?b:a,d=this.label,c=c===d?c:c+", "+d;(d=this.document.getById("cke_"+this.id+"_label"))&&d.setText(c)},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id),c=b.getElementsByTag("a").getItem(0);b.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),c&&c.setAttribute("aria-expanded",a==CKEDITOR.TRISTATE_ON),this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(a){a.removeListener()}),this._.listeners=[]},select:function(a){if(!CKEDITOR.tools.isEmpty(this._.items))for(var b in this._.items)if(a({value:b,text:this._.items[b]})){this.setValue(b);break}}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var b=a.config,c=a.lang.format,d=b.format_tags.split(";"),e={},f=0,g=[],h=0;h<d.length;h++){var i=d[h],j=new CKEDITOR.style(b["format_"+i]);a.filter.customConfig&&!a.filter.check(j)||(f++,e[i]=j,e[i]._.enterMode=a.config.enterMode,g.push(j))}0!==f&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:g,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(b.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in e){var b=c["tag_"+a];this.add(a,e[a].buildPreview(b),b)}},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=e[b];var c=a.elementPath();a.fire("stylesRemove",{type:CKEDITOR.STYLE_BLOCK}),b.checkActive(c,a)||a.applyStyle(b),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path,this.refresh();for(var d in e)if(e[d].checkActive(b,a))return void(d!=c&&this.setValue(d,a.lang.format["tag_"+d]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in e)a.activeFilter.check(e[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in e)if(a.activeFilter.check(e[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(b){b.blockless||(b.addCommand("horizontalrule",a),b.ui.addButton&&b.ui.addButton("HorizontalRule",{label:b.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){var b=new CKEDITOR.htmlWriter;b.forceSimpleAmpersand=a.config.forceSimpleAmpersand,b.indentationChars="string"==typeof a.config.dataIndentationChars?a.config.dataIndentationChars:"\t",a.dataProcessor.writer=b}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var a,b=CKEDITOR.dtd;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var b=this._.rules[a];this._.afterCloser&&b&&b.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():b&&b.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",a),this._.afterCloser=0},openTagClose:function(a,b){var c=this._.rules[a];b?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push(">"),c&&c.indent&&(this._.indentation+=this.indentationChars)),c&&c.breakAfterOpen&&this.lineBreak(),"pre"==a&&(this._.inPre=1)},attribute:function(a,b){"string"==typeof b&&(b=CKEDITOR.tools.htmlEncodeAttr(b),this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&"))),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this._.rules[a];b&&b.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():b&&b.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",a,">"),"pre"==a&&(this._.inPre=0),b&&b.breakAfterClose&&(this.lineBreak(),this._.needsSpace=b.needsSpace),this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))),this._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(a,b){var c=this._.rules[a];c?CKEDITOR.tools.extend(c,b,!0):this._.rules[a]=b}}}),function(){function a(a,b){if(b||(b=a.getSelection().getSelectedElement()),b&&b.is("img")&&!b.data("cke-realelement")&&!b.isReadOnly())return b}function b(a){var b=a.getStyle("float");return"inherit"!=b&&"none"!=b||(b=0),b||(b=a.getAttribute("align")),b}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var c="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(c="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:c,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"}),b.on("doubleclick",function(a){var b=a.data.element;!b.is("img")||b.data("cke-realelement")||b.isReadOnly()||(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(c){if(a(b,c))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(c){function d(d){var e=c.getCommand("justify"+d);e&&("left"!=d&&"right"!=d||e.on("exec",function(e){var f,g=a(c);g&&(f=b(g),f==d?(g.removeStyle("float"),d==b(g)&&g.removeAttribute("align")):g.setStyle("float",d),e.cancel())}),e.on("refresh",function(e){var f=a(c);f&&(f=b(f),this.setState(f==d?CKEDITOR.TRISTATE_ON:"right"==d||"left"==d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),e.cancel())}))}c.plugins.image2||(d("left"),d("right"),d("center"),d("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function a(a,b){var c=d.exec(a),e=d.exec(b);if(c){if(!c[2]&&"px"==e[2])return e[1];if("px"==c[2]&&!e[2])return e[1]+"px"}return b}var b=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,d=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,e={elements:{$:function(c){var d=c.attributes;if((d=(d=(d=d&&d["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(d)))&&d.children[0])&&c.attributes["data-cke-resizable"]){var e=new b(c).rules;c=d.attributes;var f=e.width,e=e.height;f&&(c.width=a(c.width,f)),e&&(c.height=a(c.height,e))}return d}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(e,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,d,e,f){var g=this.lang.fakeobjects,g=g[e]||g.unknown;return d={"class":d,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,
alt:g,title:g,align:a.getAttribute("align")||""},CKEDITOR.env.hc||(d.src=CKEDITOR.tools.transparentImageData),e&&(d["data-cke-real-element-type"]=e),f&&(d["data-cke-resizable"]=f,e=new b,f=a.getAttribute("width"),a=a.getAttribute("height"),f&&(e.rules.width=c(f)),a&&(e.rules.height=c(a)),e.populate(d)),this.document.createElement("img",{attributes:d})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,d,e,f){var g,h=this.lang.fakeobjects,h=h[e]||h.unknown;return g=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(g),g=g.getHtml(),d={"class":d,"data-cke-realelement":encodeURIComponent(g),"data-cke-real-node-type":a.type,alt:h,title:h,align:a.attributes.align||""},CKEDITOR.env.hc||(d.src=CKEDITOR.tools.transparentImageData),e&&(d["data-cke-real-element-type"]=e),f&&(d["data-cke-resizable"]=f,f=a.attributes,a=new b,e=f.width,f=f.height,void 0!==e&&(a.rules.width=c(e)),void 0!==f&&(a.rules.height=c(f)),a.populate(d)),new CKEDITOR.htmlParser.element("img",d)},CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var c=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var d=b.getStyle("width");b=b.getStyle("height"),d&&c.setAttribute("width",a(c.getAttribute("width"),d)),b&&c.setAttribute("height",a(c.getAttribute("height"),b))}return c}}(),function(){function a(a){return a.replace(/'/g,"\\$&")}function b(a){for(var b,c=a.length,d=[],e=0;e<c;e++)b=a.charCodeAt(e),d.push(b);return"String.fromCharCode("+d.join(",")+")"}function c(b,c){for(var d,e,f=b.plugins.link,g=f.compiledProtectionFunction.params,f=[f.compiledProtectionFunction.name,"("],h=0;h<g.length;h++)d=g[h].toLowerCase(),e=c[d],0<h&&f.push(","),f.push("'",e?a(encodeURIComponent(c[d])):"","'");return f.push(")"),f.join("")}function d(a){a=a.config.emailProtection||"";var b;return a&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,d){b.name=c,b.params=[],d.replace(/[^,\s]+/g,function(a){b.params.push(a)})})),b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(a){return c.replace(/%1/g,"rtl"==a?"right":"left").replace(/%2/g,"cke_contents_"+a)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]")),a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"})),a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),a.addCommand("unlink",new CKEDITOR.unlinkCommand),a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),a.setKeystroke(CKEDITOR.CTRL+76,"link"),a.setKeystroke(CKEDITOR.CTRL+75,"link"),a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),a.on("doubleclick",function(b){var c=b.data.element.getAscendant({a:1,img:1},!0);c&&!c.isReadOnly()&&(c.is("a")?(b.data.dialog=!c.getAttribute("name")||c.getAttribute("href")&&c.getChildCount()?"link":"anchor",b.data.link=c):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,c)&&(b.data.dialog="anchor"))},null,null,0),a.on("doubleclick",function(b){b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,20),a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){if(!b||b.isReadOnly())return null;if(b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b),!b&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var c={};return b.getAttribute("href")&&b.getChildCount()&&(c={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),b&&b.hasAttribute("name")&&(c.anchor=c.removeAnchor=CKEDITOR.TRISTATE_OFF),c}),this.compiledProtectionFunction=d(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}});var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push(function(b,c){if("a"==c&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)||b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())))return"anchor"})}});var e=/^javascript:/,f=/^(?:mailto)(?:(?!\?(subject|body)=).)+/i,g=/subject=([^;?:@&=$,\/]*)/i,h=/body=([^;?:@&=$,\/]*)/i,i=/^#(.*)$/,j=/^((?:http|https|ftp|news):\/\/)?(.*)$/,k=/^(_(?:self|top|parent|blank))$/,l=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,m=/^javascript:([^(]+)\(([^)]+)\)$/,n=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,o=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p=/^tel:(.*)$/,q={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a,b){var c,d=a.getSelection(),e=d.getSelectedElement(),f=d.getRanges(),g=[];if(!b&&e&&e.is("a"))return e;for(e=0;e<f.length;e++)if(c=d.getRanges()[e],c.shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(c=a.elementPath(c.getCommonAncestor()).contains("a",1))&&b)g.push(c);else if(c)return c;return b?g:null},getEditorAnchors:function(a){for(var b,c=a.editable(),d=c.isInline()&&!a.plugins.divarea?a.document:c,c=d.getElementsByTag("a"),d=d.getElementsByTag("img"),e=[],f=0;b=c.getItem(f++);)(b.data("cke-saved-name")||b.hasAttribute("name"))&&e.push({name:b.data("cke-saved-name")||b.getAttribute("name"),id:b.getAttribute("id")});for(f=0;b=d.getItem(f++);)(b=this.tryRestoreFakeAnchor(a,b))&&e.push({name:b.getAttribute("name"),id:b.getAttribute("id")});return e},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}},parseLinkAttributes:function(a,b){var c,d=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",r=a.plugins.link.compiledProtectionFunction,s=a.config.emailProtection,t={};if(d.match(e)&&("encode"==s?d=d.replace(l,function(a,b,c){return c=c||"","mailto:"+String.fromCharCode.apply(String,b.split(","))+c.replace(/\\'/g,"'")}):s&&d.replace(m,function(a,b,c){if(b==r.name){t.type="email",a=t.email={},b=/(^')|('$)/g,c=c.match(/[^,\s]+/g);for(var d,e,f=c.length,g=0;g<f;g++)d=decodeURIComponent,e=c[g].replace(b,"").replace(/\\'/g,"'"),e=d(e),d=r.params[g].toLowerCase(),a[d]=e;a.address=[a.name,a.domain].join("@")}})),!t.type)if(s=d.match(i))t.type="anchor",t.anchor={},t.anchor.name=t.anchor.id=s[1];else if(s=d.match(p))t.type="tel",t.tel=s[1];else if(s=d.match(f)){c=d.match(g);var d=d.match(h),u=t.email={};t.type="email",u.address=s[0].replace("mailto:",""),c&&(u.subject=decodeURIComponent(c[1])),d&&(u.body=decodeURIComponent(d[1]))}else d&&(c=d.match(j))&&(t.type="url",t.url={},t.url.protocol=c[1],t.url.url=c[2]);if(b){if(d=b.getAttribute("target"))t.target={type:d.match(k)?d:"frame",name:d};else if(d=(d=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&d.match(n))for(t.target={type:"popup",name:d[1]};s=o.exec(d[2]);)"yes"!=s[2]&&"1"!=s[2]||s[1]in{height:1,width:1,top:1,left:1}?isFinite(s[2])&&(t.target[s[1]]=s[2]):t.target[s[1]]=!0;null!==b.getAttribute("download")&&(t.download=!0);var v,d={};for(v in q)(s=b.getAttribute(v))&&(d[q[v]]=s);(v=b.data("cke-saved-name")||d.advName)&&(d.advName=v),CKEDITOR.tools.isEmpty(d)||(t.advanced=d)}return t},getLinkAttributes:function(d,e){var f=d.config.emailProtection||"",g={};switch(e.type){case"url":var f=e.url&&void 0!==e.url.protocol?e.url.protocol:"http://",h=e.url&&CKEDITOR.tools.trim(e.url.url)||"";g["data-cke-saved-href"]=0===h.indexOf("/")?h:f+h;break;case"anchor":f=e.anchor&&e.anchor.id,g["data-cke-saved-href"]="#"+(e.anchor&&e.anchor.name||f||"");break;case"email":var i=e.email,h=i.address;switch(f){case"":case"encode":var j=encodeURIComponent(i.subject||""),k=encodeURIComponent(i.body||""),i=[];j&&i.push("subject="+j),k&&i.push("body="+k),i=i.length?"?"+i.join("&"):"","encode"==f?(f=["javascript:void(location.href='mailto:'+",b(h)],i&&f.push("+'",a(i),"'"),f.push(")")):f=["mailto:",h,i];break;default:f=h.split("@",2),i.name=f[0],i.domain=f[1],f=["javascript:",c(d,i)]}g["data-cke-saved-href"]=f.join("");break;case"tel":g["data-cke-saved-href"]="tel:"+e.tel}if(e.target)if("popup"==e.target.type){for(var f=["window.open(this.href, '",e.target.name||"","', '"],l="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),h=l.length,j=function(a){e.target[a]&&l.push(a+"="+e.target[a])},i=0;i<h;i++)l[i]+=e.target[l[i]]?"=yes":"=no";j("width"),j("left"),j("height"),j("top"),f.push(l.join(","),"'); return false;"),g["data-cke-pa-onclick"]=f.join("")}else"notSet"!=e.target.type&&e.target.name&&(g.target=e.target.name);if(e.download&&(g.download=""),e.advanced){for(var m in q)(f=e.advanced[q[m]])&&(g[m]=f);g.name&&(g["data-cke-saved-name"]=g.name)}g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]),m={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},e.advanced&&CKEDITOR.tools.extend(m,q);for(var n in g)delete m[n];return{set:g,removed:CKEDITOR.tools.object.keys(m)}},showDisplayTextForElement:function(a,b){var c={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1},d=b.getSelection();return!(b.widgets&&b.widgets.focused||d&&1<d.getRanges().length)&&(!a||!a.getName||!a.is(c))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(a){if(CKEDITOR.env.ie){var b,c=a.getSelection().getRanges()[0],d=c.getPreviousEditableNode()&&c.getPreviousEditableNode().getAscendant("a",!0)||c.getNextEditableNode()&&c.getNextEditableNode().getAscendant("a",!0);c.collapsed&&d&&(b=c.createBookmark(),c.selectNodeContents(d),c.select())}d=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),a.removeStyle(d),b&&(c.moveToBookmark(b),c.select())},refresh:function(a,b){var c=b.lastElement&&b.lastElement.getAscendant("a",!0);c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var b,c=a.getSelection(),d=c.createBookmarks();c&&(b=c.getSelectedElement())&&(b.getChildCount()?b.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b))?b.remove(1):(b=CKEDITOR.plugins.link.getSelectedLink(a))&&(b.hasAttribute("href")?(b.removeAttributes({name:1,"data-cke-saved-name":1}),b.removeClass("cke_anchor")):b.remove(1)),c.selectBookmarks(d)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0,linkDefaultProtocol:"http://"})}(),function(){function a(a,b,c){return l(b)&&l(c)&&c.equals(b.getNext(function(a){return!(W(a)||X(a)||m(a))}))}function b(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function c(a){var b=a.element;if(b&&l(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var c=g(b);if("true"==c.getAttribute("contenteditable"))return b;if(c.is(a.triggers))return c}return null}function d(a,b,c){return u(a,b),u(a,c),a=b.size.bottom,c=c.size.top,a&&c?0|(a+c)/2:a||c}function e(a,b,c){return b=b[c?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!W(b)||l(b)&&!m(b)&&!k(a,b)})}function f(a,b,c){return a>b&&a<c}function g(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function h(a){var b=a.doc,c=A('<span contenteditable="false" data-cke-magic-line="1" style="'+S+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),d=CKEDITOR.getUrl(this.path+"images/"+(B.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");for(y(c,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[y(A('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:S+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+d+") center no-repeat "+a.boxColor+";cursor:pointer;"+(B.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(B.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),y(A(U,b),{base:T+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),y(A(U,b),{base:T+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){u(a,this);var b=a.holdDistance,c=this.size;return!!(c&&f(a.mouse.y,c.top-b,c.bottom+b)&&f(a.mouse.x,c.left-b,c.right+b))},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,g=d.lower,h=e||g,i=h.getParent(),j={};this.trigger=d,e&&u(a,e,!0),g&&u(a,g,!0),u(a,i,!0),a.inInlineMode&&v(a,!0),i.equals(c)?(j.left=b.scroll.x,j.right=-b.scroll.x,j.width=""):(j.left=h.size.left-h.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),j.width=h.size.outerWidth+h.size.margin.left+h.size.margin.right+b.scroll.x,j.right=""),e&&g?j.top=e.size.margin.bottom===g.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<g.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-g.size.margin.top:e?g||(j.top=e.size.bottom+e.size.margin.bottom):j.top=g.size.top-g.size.margin.top,d.is(J)||f(j.top,b.scroll.y-15,b.scroll.y+5)?(j.top=a.inInlineMode?0:b.scroll.y,this.look(J)):d.is(K)||f(j.top,b.pane.bottom-5,b.pane.bottom+15)?(j.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(K)):(a.inInlineMode&&(j.top-=b.editable.top+b.editable.border.top),this.look(L)),a.inInlineMode&&(j.top--,j.top+=b.editable.scroll.top,j.left+=b.editable.scroll.left);for(var k in j)j[k]=CKEDITOR.tools.cssLength(j[k]);this.setStyles(j)},look:function(a){if(this.oldLook!=a){for(var b,c=this.lineChildren.length;c--;)(b=this.lineChildren[c]).setAttribute("style",b.base+b.looks[0|a/2]);this.oldLook=a}},wrap:new z("span",a.doc)}),b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(L),c.appendTo(c.wrap),c.unselectable(),c.lineChildren[0].on("mouseup",function(b){c.detach(),i(a,function(b){var c=a.line.trigger;b[c.is(F)?"insertBefore":"insertAfter"](c.is(F)?c.lower:c.upper)},!0),a.editor.focus(),B.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),c.on("mousedown",function(a){a.data.preventDefault(!0)}),a.line=c}function i(a,b,c){var d,e=new CKEDITOR.dom.range(a.doc),f=a.editor;B.ie&&a.enterMode==CKEDITOR.ENTER_BR?d=a.doc.createText(M):(d=(d=g(a.element,!0))&&d.data("cke-enter-mode")||a.enterMode,d=new z(E[d],a.doc),d.is("br")||a.doc.createText(M).appendTo(d)),c&&f.fire("saveSnapshot"),b(d),e.moveToPosition(d,CKEDITOR.POSITION_AFTER_START),f.getSelection().selectRanges([e]),a.hotNode=d,c&&f.fire("saveSnapshot")}function j(a,b){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(c){var d=B.ie&&9>B.version?" ":M,e=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!b;i(a,function(d){e&&a.hotNode&&a.hotNode.remove(),d[b?"insertAfter":"insertBefore"](c),d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!b}),a.lastCmdDirection=!!b}),B.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),a.line.detach()}return function(f){f=f.getSelection().getStartElement();var h;if(f=f.getAscendant(Q,1),!p(a,f)&&f&&!f.equals(a.editable)&&!f.contains(a.editable)){(h=g(f))&&"false"==h.getAttribute("contenteditable")&&(f=h),a.element=f,h=e(a,f,!b);var i;l(h)&&h.is(a.triggers)&&h.is(P)&&(!e(a,h,!b)||(i=e(a,h,!b))&&l(i)&&i.is(a.triggers))?d(h):(i=c(a,f),l(i)&&(e(a,i,!b)?(f=e(a,i,!b))&&l(f)&&f.is(a.triggers)&&d(i):d(i)))}}}()}}function k(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var c=a.line;return c.wrap.equals(b)||c.wrap.contains(b)}function l(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function m(a){if(!l(a))return!1;var b;return(b=n(a))||(l(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1),b}function n(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function o(a,b){return l(b)?b.is(a.triggers):null}function p(a,b){if(!b)return!1;for(var c=b.getParents(1),d=c.length;d--;)for(var e=a.tabuList.length;e--;)if(c[d].hasAttribute(a.tabuList[e]))return!0;return!1}function q(a,b,c){return!!(b=b[c?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(O)}))&&(u(a,b),c?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y)}function r(a){var c=a.editable,d=a.mouse,e=a.view,g=a.triggerOffset;v(a);var h=d.y>(a.inInlineMode?e.editable.top+e.editable.height/2:Math.min(e.editable.height,e.pane.height)/2),c=c[h?"getLast":"getFirst"](function(a){return!(W(a)||X(a))});return c?(k(a,c)&&(c=a.line.wrap[h?"getPrevious":"getNext"](function(a){return!(W(a)||X(a))})),l(c)&&!m(c)&&o(a,c)?(u(a,c),!h&&0<=c.size.top&&f(d.y,0,c.size.top+g)?(a=a.inInlineMode||0===e.scroll.y?J:L,new b([null,c,F,I,a])):h&&c.size.bottom<=e.pane.height&&f(d.y,c.size.bottom-g,e.pane.height)?(a=a.inInlineMode||f(c.size.bottom,e.pane.height-g,e.pane.height)?K:L,new b([c,null,G,I,a])):null):null):null}function s(a){var d=a.mouse,g=a.view,h=a.triggerOffset,i=c(a);if(!i)return null;u(a,i);var j,k,h=Math.min(h,0|i.size.outerHeight/2),n=[];if(f(d.y,i.size.top-1,i.size.top+h))k=!1;else{if(!f(d.y,i.size.bottom-h,i.size.bottom+1))return null;k=!0}if(m(i)||q(a,i,k)||i.getParent().is(N))return null;var p=e(a,i,!k);if(p){if(p&&p.type==CKEDITOR.NODE_TEXT)return null;if(l(p)){if(m(p)||!o(a,p)||p.getParent().is(N))return null;n=[p,i][k?"reverse":"concat"]().concat([H,I])}}else i.equals(a.editable[k?"getLast":"getFirst"](a.isRelevant))?(v(a),k&&f(d.y,i.size.bottom-h,g.pane.height)&&f(i.size.bottom,g.pane.height-h,g.pane.height)?j=K:f(d.y,0,i.size.top+h)&&(j=J)):j=L,n=[null,i][k?"reverse":"concat"]().concat([k?G:F,I,j,i.equals(a.editable[k?"getLast":"getFirst"](a.isRelevant))?k?K:J:L]);return 0 in n?new b(n):null}function t(a,b,c,d){for(var e=b.getDocumentPosition(),f={},g={},h={},i={},j=Z.length;j--;)f[Z[j]]=parseInt(b.getComputedStyle.call(b,"border-"+Z[j]+"-width"),10)||0,h[Z[j]]=parseInt(b.getComputedStyle.call(b,"padding-"+Z[j]),10)||0,g[Z[j]]=parseInt(b.getComputedStyle.call(b,"margin-"+Z[j]),10)||0;return c&&!d||w(a,d),i.top=e.y-(c?0:a.view.scroll.y),i.left=e.x-(c?0:a.view.scroll.x),i.outerWidth=b.$.offsetWidth,i.outerHeight=b.$.offsetHeight,i.height=i.outerHeight-(h.top+h.bottom+f.top+f.bottom),i.width=i.outerWidth-(h.left+h.right+f.left+f.right),i.bottom=i.top+i.outerHeight,i.right=i.left+i.outerWidth,a.inInlineMode&&(i.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),y({border:f,padding:h,margin:g,ignoreScroll:c},i,!0)}function u(a,b,c){if(!l(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==c&&b.size.date>new Date-R)return null}else b.size={};return y(b.size,t(a,b,c),{date:+new Date},!0)}function v(a,b){a.view.editable=t(a,a.editable,b,!0)}function w(a,b){a.view||(a.view={});var c=a.view;if(!(!b&&c&&c.date>new Date-R)){var d=a.win,c=d.getScrollPosition(),d=d.getViewPaneSize();y(a.view,{scroll:{x:c.x,y:c.y,width:a.doc.$.documentElement.scrollWidth-d.width,height:a.doc.$.documentElement.scrollHeight-d.height},pane:{width:d.width,height:d.height,bottom:d.height+c.y},date:+new Date},!0)}}function x(a,c,d,e){for(var f=e,g=e,h=0,i=!1,j=!1,k=a.view.pane.height,l=a.mouse;l.y+h<k&&0<l.y-h&&(i||(i=c(f,e)),j||(j=c(g,e)),!i&&0<l.y-h&&(f=d(a,{x:l.x,y:l.y-h})),!j&&l.y+h<k&&(g=d(a,{x:l.x,y:l.y+h})),!i||!j);)h+=2;return new b([f,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var d,f,g,o=a.config,q=o.magicline_triggerOffset||30,u={editor:a,enterMode:o.enterMode,triggerOffset:q,holdDistance:0|q*(o.magicline_holdDistance||.5),boxColor:o.magicline_color||"#ff0000",rtl:"rtl"==o.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(o.magicline_tabuList||[]),triggers:o.magicline_everywhere?Q:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};u.isRelevant=function(a){return l(a)&&!k(u,a)&&!m(a)},a.on("contentDom",function(){var l=a.editable(),m=a.document,q=a.window;y(u,{editable:l,inInlineMode:l.isInline(),doc:m,win:q,hotNode:null},!0),u.boundary=u.inInlineMode?u.editable:u.doc.getDocumentElement(),l.is(D.$inline)||(u.inInlineMode&&!n(l)&&l.setStyles({position:"relative",top:null,left:null}),h.call(this,u),w(u),l.attachListener(a,"beforeUndoImage",function(){u.line.detach()}),l.attachListener(a,"beforeGetData",function(){u.line.wrap.getParent()&&(u.line.detach(),a.once("getData",function(){u.line.attach()},null,null,1e3))},null,null,0),l.attachListener(u.inInlineMode?m:m.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(u.inInlineMode){var c=b.data.$.clientX;b=b.data.$.clientY,w(u),v(u,!0);var d=u.view.editable,e=u.view.scroll;c>d.left-e.x&&c<d.right-e.x&&b>d.top-e.y&&b<d.bottom-e.y||(clearTimeout(g),g=null,u.line.detach())}else clearTimeout(g),g=null,u.line.detach()}),l.attachListener(l,"keyup",function(){u.hiddenMode=0}),l.attachListener(l,"keydown",function(b){if("wysiwyg"==a.mode)switch(b.data.getKeystroke()){case 2228240:case 16:u.hiddenMode=1,u.line.detach()}}),l.attachListener(u.inInlineMode?l:m,"mousemove",function(b){if(f=!0,"wysiwyg"==a.mode&&!a.readOnly&&!g){var c={x:b.data.$.clientX,y:b.data.$.clientY};g=setTimeout(function(){u.mouse=c,g=u.trigger=null,w(u),f&&!u.hiddenMode&&a.focusManager.hasFocus&&!u.line.mouseNear()&&(u.element=V(u,!0))&&((u.trigger=r(u)||s(u)||Y(u))&&!p(u,u.trigger.upper||u.trigger.lower)?u.line.attach().place():(u.trigger=null,u.line.detach()),f=!1)},30)}}),l.attachListener(q,"scroll",function(){"wysiwyg"==a.mode&&(u.line.detach(),B.webkit&&(u.hiddenMode=1,clearTimeout(d),d=setTimeout(function(){u.mouseDown||(u.hiddenMode=0)},50)))}),l.attachListener(C?m:q,"mousedown",function(){"wysiwyg"==a.mode&&(u.line.detach(),u.hiddenMode=1,u.mouseDown=1)}),l.attachListener(C?m:q,"mouseup",function(){u.hiddenMode=0,u.mouseDown=0}),a.addCommand("accessPreviousSpace",j(u)),a.addCommand("accessNextSpace",j(u,!0)),a.setKeystroke([[o.magicline_keystrokePrevious,"accessPreviousSpace"],[o.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,c,d,e;for(e in{p:1,br:1,div:1})for(b=a.document.getElementsByTag(e),d=b.count();d--;)if((c=b.getItem(d)).data("cke-magicline-hot"))return u.hotNode=c,void(u.lastCmdDirection="true"===c.data("cke-magicline-dir"))}),a._.magiclineBackdoor={accessFocusSpace:i,boxTrigger:b,isLine:k,getAscendantTrigger:c,getNonEmptyNeighbour:e,getSize:t,that:u,triggerEdge:s,triggerEditable:r,triggerExpand:Y})},this)}});var y=CKEDITOR.tools.extend,z=CKEDITOR.dom.element,A=z.createFromHtml,B=CKEDITOR.env,C=CKEDITOR.env.ie&&9>CKEDITOR.env.version,D=CKEDITOR.dtd,E={},F=128,G=64,H=32,I=16,J=4,K=2,L=1,M=" ",N=D.$listItem,O=D.$tableContent,P=y({},D.$nonEditable,D.$empty),Q=D.$block,R=100,S="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",T=S+"border-color:transparent;display:block;border-style:solid;",U="<span>"+M+"</span>";E[CKEDITOR.ENTER_BR]="br",E[CKEDITOR.ENTER_P]="p",E[CKEDITOR.ENTER_DIV]="div",b.prototype={set:function(a,b,c){return this.properties=a+b+(c||L),this},is:function(a){return(this.properties&a)==a}};var V=function(){function a(a,b){var c=a.$.elementFromPoint(b.x,b.y);return c&&c.nodeType?new CKEDITOR.dom.element(c):null}return function(b,c,d){if(!b.mouse)return null;var e=b.doc,f=b.line.wrap;d=d||b.mouse;var g=a(e,d);return c&&k(b,g)&&(f.hide(),g=a(e,d),f.show()),!g||g.type!=CKEDITOR.NODE_ELEMENT||!g.$||B.ie&&9>B.version&&!b.boundary.equals(g)&&!b.boundary.contains(g)?null:g}}(),W=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Y=function(){function b(b){var e,g,h,i=b.element;if(!l(i)||i.contains(b.editable)||i.isReadOnly())return null;if(h=x(b,function(a,b){return!b.equals(a)},function(a,b){return V(a,!0,b)},i),e=h.upper,g=h.lower,a(b,e,g))return h.set(H,8);if(e&&i.contains(e))for(;!e.getParent().equals(i);)e=e.getParent();else e=i.getFirst(function(a){return c(b,a)});if(g&&i.contains(g))for(;!g.getParent().equals(i);)g=g.getParent();else g=i.getLast(function(a){return c(b,a)});if(!e||!g)return null;if(u(b,e),u(b,g),!f(b.mouse.y,e.size.top,g.size.bottom))return null;for(var j,k,m,n,i=Number.MAX_VALUE;g&&!g.equals(e)&&(k=e.getNext(b.isRelevant));)j=Math.abs(d(b,e,k)-b.mouse.y),j<i&&(i=j,m=e,n=k),e=k,u(b,e);return m&&n&&f(b.mouse.y,m.size.top,n.size.bottom)?(h.upper=m,h.lower=n,h.set(H,8)):null}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||X(b)||m(b)||k(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var d,e=b(c);if(d=e){d=e.upper;var f=e.lower;d=!(!d||!f||m(f)||m(d)||f.equals(d)||d.equals(f)||f.contains(d)||d.contains(f))&&!!(o(c,d)&&o(c,f)&&a(c,d,f))}return d?e:null}}(),Z=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var b=[],c=["style","className"],d=0;d<c.length;d++){var e=a.$.elements.namedItem(c[d]);e&&(e=new CKEDITOR.dom.element(e),b.push([e,e.nextSibling]),e.remove())}return b}function b(a,b){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function c(c,d){var e=a(c),f={},g=c.$;return d||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",d||(g.style.cssText="position: static; overflow: visible"),b(e),f}function d(c,d){var e=a(c),f=c.$;"class"in d&&(f.className=d["class"]),"inline"in d&&(f.style.cssText=d.inline),b(e)}function e(a){if(!a.editable().isInline()){var b,c=CKEDITOR.instances;for(b in c){var d=c[b];"wysiwyg"!=d.mode||d.readOnly||(d=d.document.getBody(),d.setAttribute("contentEditable",!1),d.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function b(){var b=k.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f,g,h,i=a.lang,j=CKEDITOR.document,k=j.getWindow(),l=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var m=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),n=a.ui.space("contents");if("wysiwyg"==a.mode){var o=a.getSelection();f=o&&o.getRanges(),g=k.getScrollPosition()}else{var p=a.editable().$;f=!CKEDITOR.env.ie&&[p.selectionStart,p.selectionEnd],g=[p.scrollLeft,p.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(k.on("resize",b),h=k.getScrollPosition(),o=a.container;o=o.getParent();)o.setCustomData("maximize_saved_styles",c(o)),o.setStyle("z-index",a.config.baseFloatZIndex-5);n.setCustomData("maximize_saved_styles",c(n,!0)),m.setCustomData("maximize_saved_styles",c(m,!0)),n={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},j.getDocumentElement().setStyles(n),!CKEDITOR.env.gecko&&j.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||j.getBody().setStyles(n),CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(0,0)},0):k.$.scrollTo(0,0),m.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),m.$.offsetLeft,m.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"}),m.addClass("cke_maximized"),b(),n=m.getDocumentPosition(),m.setStyles({left:-1*n.x+"px",top:-1*n.y+"px"}),CKEDITOR.env.gecko&&e(a)}else if(this.state==CKEDITOR.TRISTATE_ON){k.removeListener("resize",b);for(var o=[n,m],q=0;q<o.length;q++)d(o[q],o[q].getCustomData("maximize_saved_styles")),o[q].removeCustomData("maximize_saved_styles");for(o=a.container;o=o.getParent();)d(o,o.getCustomData("maximize_saved_styles")),o.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(h.x,h.y)},0):k.$.scrollTo(h.x,h.y),m.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(m.setStyle("display","inline"),setTimeout(function(){m.setStyle("display","block")},0)),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:n.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState(),(o=this.uiItems[0])&&(n=this.state==CKEDITOR.TRISTATE_OFF?i.maximize.maximize:i.maximize.minimize,o=CKEDITOR.document.getById(o._.id),o.getChild(1).setHtml(n),o.setAttribute("title",n),o.setAttribute("href",'javascript:void("'+n+'");')),"wysiwyg"==a.mode?f?(CKEDITOR.env.gecko&&e(a),a.getSelection().selectRanges(f),(p=a.getSelection().getStartElement())&&p.scrollIntoView(!0)):k.$.scrollTo(g.x,g.y):(f&&(p.selectionStart=f[0],p.selectionEnd=f[1]),p.scrollLeft=g[0],p.scrollTop=g[1]),f=g=null,l=this.state,a.fire("maximize",this.state)},canUndo:!1}),a.ui.addButton&&a.ui.addButton("Maximize",{label:i.maximize.maximize,command:"maximize",toolbar:"tools,10"}),a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:l)},null,null,100)}}})}(),function(){CKEDITOR.plugins.add("xml",{}),CKEDITOR.xml=function(a){var b=null;if("object"==typeof a)b=a;else if(a=(a||"").replace(/&nbsp;/g," "),"ActiveXObject"in window){try{b=new ActiveXObject("MSXML2.DOMDocument")}catch(c){try{b=new ActiveXObject("Microsoft.XmlDom")}catch(d){}}b&&(b.async=!1,b.resolveExternals=!1,b.validateOnParse=!1,b.loadXML(a))}else window.DOMParser&&(b=(new DOMParser).parseFromString(a,"text/xml"));this.baseXml=b},CKEDITOR.xml.prototype={selectSingleNode:function(a,b){var c=this.baseXml;if(b||(b=c)){if("selectSingleNode"in b)return b.selectSingleNode(a);if(c.evaluate)return(c=c.evaluate(a,b,null,9,null))&&c.singleNodeValue||null}return null},selectNodes:function(a,b){var c=this.baseXml,d=[];if(b||(b=c)){if("selectNodes"in b)return b.selectNodes(a);if(c.evaluate&&(c=c.evaluate(a,b,null,5,null)))for(var e;e=c.iterateNext();)d.push(e)}return d},getInnerXml:function(a,b){var c=this.selectSingleNode(a,b),d=[];if(c)for(c=c.firstChild;c;)c.xml?d.push(c.xml):window.XMLSerializer&&d.push((new XMLSerializer).serializeToString(c)),
c=c.nextSibling;return d.length?d.join(""):null}}}(),function(){CKEDITOR.plugins.add("ajax",{requires:"xml"}),CKEDITOR.ajax=function(){function a(){if(!CKEDITOR.env.ie||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return null}function b(a,b){if(4!=a.readyState||!(200<=a.status&&300>a.status||304==a.status||0===a.status||1223==a.status))return null;switch(b){case"text":return a.responseText;case"xml":var c=a.responseXML;return new CKEDITOR.xml(c&&c.firstChild?c:a.responseText);case"arraybuffer":return a.response;default:return null}}function c(c,d,e){var f=!!d,g=a();return g?(f&&"text"!==e&&"xml"!==e&&(g.responseType=e),g.open("GET",c,f),f&&(g.onreadystatechange=function(){4==g.readyState&&(d(b(g,e)),g=null)}),g.send(null),f?"":b(g,e)):null}function d(c,d,e,f,g){var h=a();return h?(h.open("POST",c,!0),h.onreadystatechange=function(){4==h.readyState&&(f&&f(b(h,g)),h=null)},h.setRequestHeader("Content-type",e||"application/x-www-form-urlencoded; charset=UTF-8"),void h.send(d)):null}return{load:function(a,b,d){return c(a,b,d||"text")},post:function(a,b,c,e){return d(a,b,c,e,"text")},loadXml:function(a,b){return c(a,b,"xml")},loadText:function(a,b){return c(a,b,"text")},loadBinary:function(a,b){return c(a,b,"arraybuffer")}}}()}(),function(){function a(a,b){return CKEDITOR.tools.array.filter(a,function(a){return a.canHandle(b)}).sort(function(a,b){return a.priority===b.priority?0:a.priority-b.priority})}function b(a,c){var d=a.shift();d&&d.handle(c,function(){b(a,c)})}function c(a){var b=CKEDITOR.tools.array.reduce(a,function(a,b){return CKEDITOR.tools.array.isArray(b.filters)?a.concat(b.filters):a},[]);return CKEDITOR.tools.array.filter(b,function(a,c){return CKEDITOR.tools.array.indexOf(b,a)===c})}function d(a,b){var c,d,f=0;if(!CKEDITOR.tools.array.isArray(a)||0===a.length)return!0;if(c=CKEDITOR.tools.array.filter(a,function(a){return-1===CKEDITOR.tools.array.indexOf(e,a)}),0<c.length)for(d=0;d<c.length;d++)(function(a){CKEDITOR.scriptLoader.queue(a,function(d){d&&e.push(a),++f===c.length&&b()})})(c[d]);return 0===c.length}var e=[],f=CKEDITOR.tools.createClass({$:function(){this.handlers=[]},proto:{register:function(a){"number"!=typeof a.priority&&(a.priority=10),this.handlers.push(a)},addPasteListener:function(e){e.on("paste",function(f){var g,h=a(this.handlers,f);if(0!==h.length){if(g=c(h),g=d(g,function(){return e.fire("paste",f.data)}),!g)return f.cancel();b(h,f)}},this,null,3)}}});CKEDITOR.plugins.add("pastetools",{requires:["clipboard","ajax"],beforeInit:function(a){a.pasteTools=new f,a.pasteTools.addPasteListener(a)}}),CKEDITOR.plugins.pastetools={filters:{},loadFilters:d,createFilter:function(a){var b=CKEDITOR.tools.array.isArray(a.rules)?a.rules:[a.rules],c=a.additionalTransforms;return function(a,d){var e,f=new CKEDITOR.htmlParser.basicWriter,g=new CKEDITOR.htmlParser.filter;return c&&(a=c(a,d)),CKEDITOR.tools.array.forEach(b,function(b){g.addRules(b(a,d,g))}),e=CKEDITOR.htmlParser.fragment.fromHtml(a),g.applyTo(e),e.writeHtml(f),f.getHtml()}},getClipboardData:function(a,b){var c;return CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"text/html"===b?(c=a.dataTransfer.getData(b,!0))||"text/html"!==b?c:a.dataValue:null},getConfigValue:function(a,b){if(a&&a.config){var c=CKEDITOR.tools,d=a.config,e=c.object.keys(d),f=["pasteTools_"+b,"pasteFromWord_"+b,"pasteFromWord"+c.capitalize(b,!0)],f=c.array.find(f,function(a){return-1!==c.array.indexOf(e,a)});return d[f]}},getContentGeneratorName:function(a){if((a=/<meta\s+name=["']?generator["']?\s+content=["']?(\w+)/gi.exec(a))&&a.length)return a=a[1].toLowerCase(),0===a.indexOf("microsoft")?"microsoft":0===a.indexOf("libreoffice")?"libreoffice":"unknown"}},CKEDITOR.pasteFilters=CKEDITOR.plugins.pastetools.filters}(),function(){CKEDITOR.plugins.add("pastefromgdocs",{requires:"pastetools",init:function(a){var b=CKEDITOR.plugins.getPath("pastetools"),c=this.path;a.pasteTools.register({filters:[CKEDITOR.getUrl(b+"filter/common.js"),CKEDITOR.getUrl(c+"filter/default.js")],canHandle:function(a){return/id=(\"|\')?docs\-internal\-guid\-/.test(a.data.dataValue)},handle:function(b,c){var d=b.data,e=CKEDITOR.plugins.pastetools.getClipboardData(d,"text/html");d.dontFilter=!0,d.dataValue=CKEDITOR.pasteFilters.gdocs(e,a),!0===a.config.forcePasteAsPlainText&&(d.type="text"),c()}})}})}(),function(){CKEDITOR.plugins.add("pastefromlibreoffice",{requires:"pastetools",isSupportedEnvironment:function(){var a=CKEDITOR.env.ie&&11>=CKEDITOR.env.version;return!(CKEDITOR.env.webkit&&!CKEDITOR.env.chrome||a)},init:function(a){if(this.isSupportedEnvironment()){var b=CKEDITOR.plugins.getPath("pastetools"),c=this.path;a.pasteTools.register({priority:100,filters:[CKEDITOR.getUrl(b+"filter/common.js"),CKEDITOR.getUrl(b+"filter/image.js"),CKEDITOR.getUrl(c+"filter/default.js")],canHandle:function(a){return a=a.data,!!(a=a.dataTransfer.getData("text/html",!0)||a.dataValue)&&"libreoffice"===CKEDITOR.plugins.pastetools.getContentGeneratorName(a)},handle:function(b,c){var d=b.data,e=d.dataValue||CKEDITOR.plugins.pastetools.getClipboardData(d,"text/html");d.dontFilter=!0,e=CKEDITOR.pasteFilters.image(e,a,CKEDITOR.plugins.pastetools.getClipboardData(d,"text/rtf")),d.dataValue=CKEDITOR.pasteFilters.libreoffice(e,a),!0===a.config.forcePasteAsPlainText&&(d.type="text"),c()}})}}})}(),function(){CKEDITOR.plugins.add("pastefromword",{requires:"pastetools",init:function(a){var b=0,c=CKEDITOR.plugins.getPath("pastetools"),d=this.path,e=void 0===a.config.pasteFromWord_inlineImages||a.config.pasteFromWord_inlineImages,c=[CKEDITOR.getUrl(c+"filter/common.js"),CKEDITOR.getUrl(c+"filter/image.js"),CKEDITOR.getUrl(d+"filter/default.js")];a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a,c){b=1,a.execCommand("paste",{type:"html",notification:!c||"undefined"==typeof c.notification||c.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(a,"PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),a.pasteTools.register({filters:a.config.pasteFromWordCleanupFile?[a.config.pasteFromWordCleanupFile]:c,canHandle:function(a){a=CKEDITOR.plugins.pastetools.getClipboardData(a.data,"text/html");var c=CKEDITOR.plugins.pastetools.getContentGeneratorName(a),d=/(class="?Mso|style=["'][^"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,c=c?"microsoft"===c:d.test(a);return a&&(b||c)},handle:function(c,d){var f=c.data,g=CKEDITOR.plugins.pastetools.getClipboardData(f,"text/html"),h=CKEDITOR.plugins.pastetools.getClipboardData(f,"text/rtf"),g={dataValue:g,dataTransfer:{"text/rtf":h}};(!1!==a.fire("pasteFromWord",g)||b)&&(f.dontFilter=!0,(b||!a.config.pasteFromWordPromptCleanup||confirm(a.lang.pastefromword.confirmCleanup))&&(g.dataValue=CKEDITOR.cleanWord(g.dataValue,a),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&e&&CKEDITOR.pasteFilters.image&&(g.dataValue=CKEDITOR.pasteFilters.image(g.dataValue,a,h)),a.fire("afterPasteFromWord",g),f.dataValue=g.dataValue,!0===a.config.forcePasteAsPlainText?f.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==a.config.forcePasteAsPlainText||(f.type="html")),b=0,d())}})}})}(),function(){var a={canUndo:!1,async:!0,exec:function(a,b){var c=a.lang,d=CKEDITOR.tools.keystrokeToString(c.common.keyboard,a.getCommandKeystroke(CKEDITOR.env.ie?a.commands.paste:this)),e=b&&"undefined"!=typeof b.notification?b.notification:!b||!b.from||"keystrokeHandler"===b.from&&CKEDITOR.env.ie,c=e&&"string"==typeof e?e:c.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+d.aria+'">'+d.display+"</kbd>");a.execCommand("paste",{type:"text",notification:!!e&&c})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(b){var c=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;b.addCommand("pastetext",a),b.setKeystroke(c,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(b,"PasteText",{label:b.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),b.config.forcePasteAsPlainText&&b.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),b.on("pasteState",function(a){b.getCommand("pastetext").setState(a.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var b,c=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),d=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=CKEDITOR.plugins.removeformat.filter,f=a.getSelection().getRanges(),g=f.createIterator(),h=function(a){return a.type==CKEDITOR.NODE_ELEMENT};b=g.getNextRange();){b.enlarge(CKEDITOR.ENLARGE_INLINE);var i=b.createBookmark(),j=i.startNode,k=i.endNode,l=function(b){for(var d,f=a.elementPath(b),g=f.elements,h=1;(d=g[h])&&!d.equals(f.block)&&!d.equals(f.blockLimit);h++)c.test(d.getName())&&e(a,d)&&b.breakParent(d)};if(l(j),k)for(l(k),j=j.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);j&&!j.equals(k);)if(j.isReadOnly()){if(j.getPosition(k)&CKEDITOR.POSITION_CONTAINS)break;j=j.getNext(h)}else l=j.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==j.getName()&&j.data("cke-realelement")||!e(a,j)||(c.test(j.getName())?j.remove(1):(j.removeAttributes(d),a.fire("removeFormatCleanup",j))),j=l;b.moveToBookmark(i)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(f)}}},filter:function(a,b){for(var c=a._.removeFormatFilters||[],d=0;d<c.length;d++)if(!1===c[d](b))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){function b(b){var c=h.width,e=h.height,i=c+(b.data.$.screenX-g.x)*("rtl"==f?-1:1);b=e+(b.data.$.screenY-g.y),j&&(c=Math.max(d.resize_minWidth,Math.min(i,d.resize_maxWidth))),k&&(e=Math.max(d.resize_minHeight,Math.min(b,d.resize_maxHeight))),a.resize(j?c:null,e)}function c(){CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),a.document&&(a.document.removeListener("mousemove",b),a.document.removeListener("mouseup",c))}var d=a.config,e=a.ui.spaceId("resizer"),f=a.element?a.element.getDirection(1):"ltr";if(!d.resize_dir&&(d.resize_dir="vertical"),void 0===d.resize_maxWidth&&(d.resize_maxWidth=3e3),void 0===d.resize_maxHeight&&(d.resize_maxHeight=3e3),void 0===d.resize_minWidth&&(d.resize_minWidth=750),void 0===d.resize_minHeight&&(d.resize_minHeight=250),!1!==d.resize_enabled){var g,h,i=null,j=("both"==d.resize_dir||"horizontal"==d.resize_dir)&&d.resize_minWidth!=d.resize_maxWidth,k=("both"==d.resize_dir||"vertical"==d.resize_dir)&&d.resize_minHeight!=d.resize_maxHeight,l=CKEDITOR.tools.addFunction(function(e){i||(i=a.getResizable()),h={width:i.$.offsetWidth||0,height:i.$.offsetHeight||0},g={x:e.screenX,y:e.screenY},d.resize_minWidth>h.width&&(d.resize_minWidth=h.width),d.resize_minHeight>h.height&&(d.resize_minHeight=h.height),CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),a.document&&(a.document.on("mousemove",b),a.document.on("mouseup",c)),e.preventDefault&&e.preventDefault()});a.on("destroy",function(){CKEDITOR.tools.removeFunction(l)}),a.on("uiSpace",function(b){if("bottom"==b.data.space){var c="";j&&!k&&(c=" cke_resizer_horizontal"),!j&&k&&(c=" cke_resizer_vertical");var d='<span id="'+e+'" class="cke_resizer'+c+" cke_resizer_"+f+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+l+', event)">'+("ltr"==f?"◢":"◣")+"</span>";"ltr"==f&&"ltr"==c?b.data.html+=d:b.data.html=d+b.data.html}},a,null,100),a.on("maximize",function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(a){var b=this._,c=b.menu;b.state!==CKEDITOR.TRISTATE_DISABLED&&(b.on&&c?c.hide():(b.previousState=b.state,c||(c=b.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}}),c.onHide=CKEDITOR.tools.bind(function(){var c=this.command?a.getCommand(this.command).modes:this.modes;this.setState(!c||c[a.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED),b.on=0},this),this.onMenu&&c.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),b.on=1,setTimeout(function(){c.show(CKEDITOR.document.getById(b.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){delete b.panel,this.base(b),this.hasArrow="menu",this.click=a},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(a){"moono-lisa"==(CKEDITOR.skinName||a.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"));var b=!1;CKEDITOR.on("instanceLoaded",function(a){if(!b&&CKEDITOR.plugins.autocomplete){b=!0;var c=CKEDITOR.plugins.autocomplete.prototype.getModel;CKEDITOR.plugins.autocomplete.prototype.getModel=function(a){var b=this.editor;return a=c.bind(this)(a),a.on("change-isActive",function(a){a.data?b.fire("autocompletePanelShow"):b.fire("autocompletePanelHide")}),a}}})},init:function(a){var b=this,c=CKEDITOR.plugins.scayt;this.bindEvents(a),this.parseConfig(a),this.addRule(a),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(a);var d=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:d.text_title,title:a.plugins.wsc?a.lang.wsc.title:d.text_title,modes:{wysiwyg:!(e.ie&&(8>e.version||e.quirks))},toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=c.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&c.state.scayt[a.name]?"btn_disable":"btn_enable"];var d={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return a.config.scayt_uiTabs[0]||delete d.scaytOptions,a.config.scayt_uiTabs[1]||delete d.scaytLangs,a.config.scayt_uiTabs[2]||delete d.scaytDict,b&&!CKEDITOR.plugins.scayt.isNewUdSupported(b)&&(delete d.scaytDict,a.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),d}}),a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(c,d){var e,f,g=a.scayt;return g&&(f=g.getSelectionNode())&&(e=b.menuGenerator(a,f),g.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" ."))),e}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var c=a.scayt;return c&&c.hideBanner(),b.apply(this)}}))},addMenuItems:function(a){var b=this,c=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var d=a.config.scayt_contextMenuItemsOrder.split("|"),e=0;e<d.length;e++)d[e]="scayt_"+d[e];if((d=["grayt_description","grayt_suggest","grayt_control"].concat(d))&&d.length)for(e=0;e<d.length;e++)a.addMenuGroup(d[e],e-10);a.addCommand("scaytToggle",{exec:function(a){var b=a.scayt;c.state.scayt[a.name]=!c.state.scayt[a.name],!0===c.state.scayt[a.name]?b||c.createScayt(a):b&&c.destroy(a)}}),a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about",c.openDialog(b.dialogName,a)}}),a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options",c.openDialog(b.dialogName,a)}}),a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs",c.openDialog(b.dialogName,a)}}),a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries",c.openDialog(b.dialogName,a)}}),d={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},a.plugins.wsc&&(d.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,c=a.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(d=d.replace(/\s/g,""))?(c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!0),a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}}),a.addMenuItems(d)},bindEvents:function(a){var b=CKEDITOR.plugins.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,d=function(){b.destroy(a)},e=function(){!b.state.scayt[a.name]||a.readOnly||a.scayt||b.createScayt(a)},f=function(){var b=a.editable();b.attachListener(b,"focus",function(b){CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(e,0),b=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt;var d,f;if((c||b)&&a._.savedSelection){b=a._.savedSelection.getSelectedElement(),b=!b&&a._.savedSelection.getRanges();for(var g=0;g<b.length;g++)f=b[g],"string"==typeof f.startContainer.$.nodeValue&&(d=f.startContainer.getText().length,(d<f.startOffset||d<f.endOffset)&&a.unlockSelection(!1))}},this,null,-10)},g=function(){c?a.config.scayt_inlineModeImmediateMarkup?e():(a.on("blur",function(){setTimeout(d,0)}),a.on("focus",e),a.focusManager.hasFocus&&e()):e(),f();var b=a.editable();b.attachListener(b,"mousedown",function(b){b=b.data.getTarget();var c=a.widgets&&a.widgets.getByElement(b);c&&(c.wrapper=b.getAscendant(function(a){return a.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};a.on("contentDom",g),a.on("beforeCommandExec",function(c){var d=a.scayt,e=!1,f=!1,g=!0;c.data.name in b.options.disablingCommandExec&&"wysiwyg"==a.mode?d&&(b.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==c.data.name&&"italic"!==c.data.name&&"underline"!==c.data.name&&"strike"!==c.data.name&&"subscript"!==c.data.name&&"superscript"!==c.data.name&&"enter"!==c.data.name&&"cut"!==c.data.name&&"language"!==c.data.name||!d||("cut"===c.data.name&&(g=!1,f=!0),"language"===c.data.name&&(f=e=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:g,forceBookmark:f,language:e},timeout:0}))}),a.on("beforeSetMode",function(c){"source"==c.data&&((c=a.scayt)&&(b.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),a.document&&a.document.getBody().removeAttribute("_jquid"))}),a.on("afterCommandExec",function(c){"wysiwyg"!=a.mode||"undo"!=c.data.name&&"redo"!=c.data.name||setTimeout(function(){b.reloadMarkup(a.scayt)},250)}),a.on("readOnly",function(c){var d;c&&(d=a.scayt,!0===c.editor.readOnly?d&&d.fire("removeMarkupInDocument",{}):d?b.reloadMarkup(d):"wysiwyg"==c.editor.mode&&!0===b.state.scayt[c.editor.name]&&(b.createScayt(a),c.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),a.on("beforeDestroy",d),a.on("setData",function(){d(),(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&g()},this,null,50),a.on("reloadMarkupScayt",function(c){var d=c.data&&c.data.removeOptions,e=c.data&&c.data.timeout,f=c.data&&c.data.language,g=a.scayt;g&&setTimeout(function(){f&&(d.selectionNode=a.plugins.language.getCurrentLangElement(a),d.selectionNode=d.selectionNode&&d.selectionNode.$||null),g.removeMarkupInSelectionNode(d),b.reloadMarkup(g)},e||0)}),a.on("insertElement",function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),a.on("insertHtml",function(){a.scayt&&a.scayt.setFocused&&a.scayt.setFocused(!0),a.fire("reloadMarkupScayt")},this,null,50),a.on("insertText",function(){a.scayt&&a.scayt.setFocused&&a.scayt.setFocused(!0),a.fire("reloadMarkupScayt")},this,null,50),a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)}),a.on("autocompletePanelShow",function(b){(b=a.scayt)&&b.setMarkupPaused&&b.setMarkupPaused(!0)}),a.on("autocompletePanelHide",function(b){(b=a.scayt)&&b.setMarkupPaused&&b.setMarkupPaused(!1)})},parseConfig:function(a){var b=CKEDITOR.plugins.scayt;if(b.replaceOldOptionsNames(a.config),"boolean"!=typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=!1),b.state.scayt[a.name]=a.config.scayt_autoStartup,"boolean"!=typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1),"boolean"!=typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1),b.state.grayt[a.name]=a.config.grayt_autoStartup,a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignoreall|add"),a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),a.config.scayt_sLang||(a.config.scayt_sLang="en_US"),(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)&&(a.config.scayt_maxSuggestions=3),(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)&&(a.config.scayt_minWordLength=3),void 0!==a.config.scayt_customDictionaryIds&&"string"==typeof a.config.scayt_customDictionaryIds||(a.config.scayt_customDictionaryIds=""),void 0!==a.config.scayt_userDictionaryName&&"string"==typeof a.config.scayt_userDictionaryName||(a.config.scayt_userDictionaryName=null),"string"==typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var c=[],d=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(d.push(!0),c.push(Number(a))):d.push(!1)}),null===CKEDITOR.tools.search(d,!1)?a.config.scayt_uiTabs=c:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];if("string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null),"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null),"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null),"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null),a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on"),"string"!=typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof a.config.scayt_customPunctuation&&(a.config.scayt_customPunctuation="-"),"string"!=typeof a.config.scayt_srcUrl&&(b=document.location.protocol,b=-1!=b.search(/https?:/)?b:"http:",a.config.scayt_srcUrl=b+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,a.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1),a.config.scayt_ignoreDomainNames&&"boolean"!=typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1),a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof a.config.scayt_ignoreWordsWithMixedCases&&(a.config.scayt_ignoreWordsWithMixedCases=!1),a.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1),a.config.scayt_disableOptionsStorage){var b=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"==typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,e="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],g=CKEDITOR.tools.search,h=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],i=!!g(a,"options");if(!g(e,d)||i&&g(f,function(a){if("lang"===a)return!1}))return;if(g(f,d)&&f.splice(h(f,d),1),"all"===d||i&&g(a,"lang"))return[];"options"===d&&(f=["lang"])}return b=b.concat(f)}(b)}},addRule:function(a){var b=CKEDITOR.plugins.scayt,c=a.dataProcessor,d=c&&c.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters,c=c&&c.dataFilter,f=a.addRemoveFormatFilter,g=function(c){if(a.scayt&&(c.hasAttribute(b.options.data_attribute_name)||c.hasAttribute(b.options.problem_grammar_data_attribute)))return!1},h=function(c){var d=!0;return a.scayt&&(c.hasAttribute(b.options.data_attribute_name)||c.hasAttribute(b.options.problem_grammar_data_attribute))&&(d=!1),d};e&&e.push(g),c&&c.addRules({elements:{span:function(a){var c=a.hasClass(b.options.misspelled_word_class)&&a.attributes[b.options.data_attribute_name],d=a.hasClass(b.options.problem_grammar_class)&&a.attributes[b.options.problem_grammar_data_attribute];return b&&(c||d)&&delete a.name,a}}}),d&&d.addRules({elements:{span:function(a){var c=a.hasClass(b.options.misspelled_word_class)&&a.attributes[b.options.data_attribute_name],d=a.hasClass(b.options.problem_grammar_class)&&a.attributes[b.options.problem_grammar_data_attribute];return b&&(c||d)&&delete a.name,a}}}),f&&f.call(a,h)},scaytMenuDefinition:function(a){var b=this,c=CKEDITOR.plugins.scayt;return a=a.scayt,{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(a){a.scayt.tabToOpen="options",c.openDialog(b.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[0]}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs",c.openDialog(b.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[1]}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen="dictionaries",c.openDialog(b.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[2]}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about",c.openDialog(b.dialogName,a)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(a){a.scayt.ignorePhrase()}},grayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(a){a.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(a,b,c){var d={},e={},f=c?"word":"phrase",g=c?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<b.length&&"no_any_suggestions"!==b[0])if(c)for(c=0;c<b.length;c++){var i="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[c].replace(" ","_");a.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[c],f,g)),c<a.config.scayt_maxSuggestions?(a.addMenuItem(i,{label:b[c],command:i,group:"scayt_suggest",order:c+1}),d[i]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(i,{label:b[c],command:i,group:"scayt_moresuggest",order:c+1}),e[i]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),d.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(c=0;c<b.length;c++)i="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[c].replace(" ","_"),a.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[c],f,g)),a.addMenuItem(i,{label:b[c],command:i,group:"grayt_suggest",order:c+1}),d[i]=CKEDITOR.TRISTATE_OFF;else d.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return d},menuGenerator:function(a,b){var c,d,e,f,g=a.scayt,h=this.scaytMenuDefinition(a),i={},j=a.config.scayt_contextCommands.split("|"),k=b.getAttribute(g.getLangAttribute())||g.getLang();if(d=g.isScaytNode(b),e=g.isGraytNode(b),d?(h=h.scayt,c=b.getAttribute(g.getScaytNodeAttributeName()),g.fire("getSuggestionsList",{lang:k,word:c}),i=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,d)):e&&(h=h.grayt,i=b.getAttribute(g.getGraytNodeAttributeName()),g.getGraytNodeRuleAttributeName?(c=b.getAttribute(g.getGraytNodeRuleAttributeName()),g.getProblemDescriptionText(i,c,k)):g.getProblemDescriptionText(i,k),f=g.getProblemDescriptionText(i,c,k),h.grayt_problemdescription&&f&&(f=f.replace(/([.!?])\s/g,"$1<br>"),h.grayt_problemdescription.label=f),g.fire("getGrammarSuggestionsList",{lang:k,phrase:i,rule:c}),i=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,d)),d&&"off"==a.config.scayt_contextCommands)return i;for(var l in h)d&&-1==CKEDITOR.tools.indexOf(j,l.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||e&&"grayt_problemdescription"!==l&&-1==CKEDITOR.tools.indexOf(j,l.replace("grayt_",""))&&"all"!=a.config.scayt_contextCommands||(i[l]="undefined"!=typeof h[l].state?h[l].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof h[l].verification||h[l].verification(a)||delete i[l],a.addCommand(l,{exec:h[l].exec}),a.addMenuItem(l,{label:a.lang.scayt[h[l].label]||h[l].label,command:l,group:h[l].group,order:h[l].order}));return i},createCommand:function(a,b,c){return{exec:function(d){d=d.scayt;var e={};e[b]=a,d.replaceSelectionNode(e),"startGrammarCheck"===c&&d.removeMarkupInSelectionNode({grammarOnly:!0}),d.fire(c)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var a,b,c=CKEDITOR.version,d=[4,5,6],e=String.fromCharCode(8203),f=Array(8).join(e);if(!c)return e;for(var c=c.split("."),g=0;g<d.length;g++){if(a=d[g],b=Number(c[g]),b>a)return f;if(b<a)break}return e}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(a,b){var c=b.scayt;c.isAllModulesReady&&!1===c.isAllModulesReady()||(b.lockSelection(),
b.openDialog(a))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(a){return!!a.getUserDictionary},reloadMarkup:function(a){var b;a&&(b=a.getScaytLangList(),a.reloadMarkup?a.reloadMarkup():(this.alarmCompatibilityMessage(),b&&b.ltr&&b.rtl&&a.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(a){for(var b in a)b in this.backCompatibilityMap&&(a[this.backCompatibilityMap[b]]=a[b],delete a[b])},createScayt:function(a){var b=this,c=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(a){function d(a){return new SCAYT.CKSCAYT(a,function(){},function(){})}var e;if(a.window&&(e="BODY"==a.editable().$.nodeName?a.window.getFrame():a.editable()),e){e={lang:a.config.scayt_sLang,container:e.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,customPunctuation:a.config.scayt_customPunctuation,debug:a.config.scayt_debug,data_attribute_name:b.options.data_attribute_name,misspelled_word_class:b.options.misspelled_word_class,problem_grammar_data_attribute:b.options.problem_grammar_data_attribute,problem_grammar_class:b.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:a.config.grayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,graytAutoStartup:a.config.grayt_autoStartup,charsToObserve:c.charsToObserve},a.config.scayt_serviceProtocol&&(e.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(e.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(e.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(e.service_path=a.config.scayt_servicePath),"boolean"==typeof a.config.scayt_ignoreAllCapsWords&&(e["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"==typeof a.config.scayt_ignoreDomainNames&&(e["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"==typeof a.config.scayt_ignoreWordsWithMixedCases&&(e["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof a.config.scayt_ignoreWordsWithNumbers&&(e["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers);var f;try{f=d(e)}catch(g){b.alarmCompatibilityMessage(),delete e.charsToObserve,f=d(e)}f.subscribe("suggestionListSend",function(a){for(var b={},c=[],d=0;d<a.suggestionList.length;d++)b["word_"+a.suggestionList[d]]||(b["word_"+a.suggestionList[d]]=a.suggestionList[d],c.push(a.suggestionList[d]));CKEDITOR.plugins.scayt.suggestions=c}),f.subscribe("selectionIsChanged",function(b){a.getSelection().isLocked&&"restoreSelection"!==b.action&&a.lockSelection(),"restoreSelection"===b.action&&a.selectionChange(!0)}),f.subscribe("graytStateChanged",function(b){c.state.grayt[a.name]=b.state}),f.addMarkupHandler&&f.addMarkupHandler(function(b){var c=a.editable(),d=c.getCustomData(b.charName);d&&(d.$=b.node,c.setCustomData(b.charName,d))}),a.scayt=f,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else c.state.scayt[a.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy(),delete a.scayt,a.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,b){var c,d=function(){CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"==typeof b&&b(a)};"undefined"==typeof window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(c=a.config.scayt_srcUrl,CKEDITOR.scriptLoader.load(c,function(a){a&&d()})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&d()}},CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;a=a.data.definition.dialog,"scaytDialog"!==b&&"checkspell"!==b&&(a.on("show",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!0)}),a.on("hide",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1)})),"scaytDialog"===b&&a.on("cancel",function(a){return!1},this,null,-1),"checkspell"===b&&a.on("cancel",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1),a.unlockSelection()},this,null,-2),"link"===b&&a.on("ok",function(a){var b=a.sender&&a.sender.getParentEditor();b&&setTimeout(function(){b.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)}),"replace"===b&&a.on("hide",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;a&&setTimeout(function(){c&&(c.fire("removeMarkupInDocument",{}),b.reloadMarkup(c))},0)})}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(b="ready"==this.status)var d=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==d}else b=a.call(this);return b}}),a.resetDirty=CKEDITOR.tools.override(a.resetDirty,function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,b="function"==typeof a.equalsContent?"equalsContent":"equals";a[b]=CKEDITOR.tools.override(a[b],function(a){return function(b){var c=b.editor.scayt,d=this.contents,e=b.contents,f=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(d)||"",b.contents=c.removeMarkupFromString(e)||""),f=a.apply(this,arguments),this.contents=d,b.contents=e,f}})}}),function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(a)},init:function(b){var c=b.addCommand("showborders",a);c.canUndo=!1,!1!==b.config.startupShowBorders&&c.setState(CKEDITOR.TRISTATE_ON),b.on("mode",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(b)},null,null,100),b.on("contentDom",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(b)}),b.on("removeFormatCleanup",function(a){a=a.data,b.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||0>=parseInt(a.getAttribute("border"),10))&&a.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter,b=b&&b.htmlFilter,a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}}),b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;"table"!=b&&"tableProperties"!=b||(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var d=parseInt(this.getValue(),10);c[!d||0>=d?"addClass":"removeClass"]("cke_show_border")}}),(a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))&&(a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments),parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(b){function c(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),a&&this.focus()}if(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var d=CKEDITOR.plugins.sourcearea;b.addMode("source",function(d){var e=b.ui.space("contents").getDocument().createElement("textarea");e.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",b.config.sourceAreaTabSize||4))),e.setAttribute("dir","ltr"),e.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),b.ui.space("contents").append(e),e=b.editable(new a(b,e)),e.setData(b.getData(1)),CKEDITOR.env.ie&&(e.attachListener(b,"resize",c,e),e.attachListener(CKEDITOR.document.getWindow(),"resize",c,e),CKEDITOR.tools.setTimeout(c,0,e)),b.fire("ariaWidget",this),d()}),b.addCommand("source",d.commands.source),b.ui.addButton&&b.ui.addButton("Source",{label:b.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),b.on("mode",function(){b.getCommand("source").setState("source"==b.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var b=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var c=a.langCode,c=b.availableLangs[c]?c:b.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"dialogs/lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,b.langEntries[c]),a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var b=a.config,c=a.lang.stylescombo,d={},e=[],f=[];a.on("stylesSet",function(c){if(c=c.data.styles){for(var g,h,i,j=0,k=c.length;j<k;j++)g=c[j],a.blockless&&g.element in CKEDITOR.dtd.$block||"string"==typeof g.type&&!CKEDITOR.style.customHandlers[g.type]||(h=g.name,g=new CKEDITOR.style(g),a.filter.customConfig&&!a.filter.check(g))||(g._name=h,g._.enterMode=b.enterMode,g._.type=i=g.assignedTo||g.type,g._.weight=j+1e3*(i==CKEDITOR.STYLE_OBJECT?1:i==CKEDITOR.STYLE_BLOCK?2:3),d[h]=g,e.push(g),f.push(g));e.sort(function(a,b){return a._.weight-b._.weight})}}),a.on("stylesRemove",function(b){b=b.data&&b.data.type;var c,e=void 0===b;for(c in d){var f=d[c];(e||f.type===b)&&a.removeStyle(f)}}),a.ui.addRichCombo("Styles",{label:c.label,title:c.panelTitle,toolbar:"styles,10",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(b.contentsCss),multiSelect:!0,attributes:{"aria-label":c.panelTitle}},init:function(){var a,b,d,f,g,h;for(g=0,h=e.length;g<h;g++)a=e[g],b=a._name,f=a._.type,f!=d&&(this.startGroup(c["panelTitle"+String(f)]),d=f),this.add(b,a.type==CKEDITOR.STYLE_OBJECT?b:a.buildPreview(),b);this.commit()},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=d[b];var c=a.elementPath();b.group&&b.removeStylesFromSameGroup(a)?a.applyStyle(b):a[b.checkActive(c,a)?"removeStyle":"applyStyle"](b),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path.elements;for(var e,f=0,g=b.length;f<g;f++){e=b[f];for(var h in d)if(d[h].checkElementRemovable(e,!0,a))return void(h!=c&&this.setValue(h))}this.setValue("")},this)},onOpen:function(){var b=a.getSelection(),b=b.getSelectedElement()||b.getStartElement()||a.editable(),b=a.elementPath(b),e=[0,0,0,0];this.showAll(),this.unmarkAll();for(var f in d){var g=d[f],h=g._.type;g.checkApplicable(b,a,a.activeFilter)?e[h]++:this.hideItem(f),g.checkActive(b,a)&&this.mark(f)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),e[CKEDITOR.STYLE_INLINE]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=a.elementPath();if(b){for(var c in d)if(d[c].checkApplicable(b,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){d={},e=[]}})}})}(),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.editable().hasFocus){var c,d=b.getSelection();if(c=new CKEDITOR.dom.elementPath(d.getCommonAncestor(),d.root).contains({td:1,th:1},1)){var d=b.createRange(),e=CKEDITOR.tools.tryThese(function(){var b=c.getParent().$.cells[c.$.cellIndex+(a?-1:1)];return b.parentNode.parentNode,b},function(){var b=c.getParent(),b=b.getAscendant("table").$.rows[b.$.rowIndex+(a?-1:1)];return b.cells[a?b.cells.length-1:0]});if(e||a){if(!e)return!0;e=new CKEDITOR.dom.element(e),d.moveToElementEditStart(e),d.checkStartOfBlock()&&d.checkEndOfBlock()||d.selectNodeContents(e)}else{for(var f=c.getAscendant("table").$,e=c.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),b.document),g=0,h=e.length;g<h;g++)f.append(new CKEDITOR.dom.element(e[g],b.document).clone(!1,!1)).appendBogus();d.moveToElementEditStart(f)}return d.select(!0),!0}}return!1}}}var b={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},d={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(e){for(var f=!1!==e.config.enableTabKeyTools,g=e.config.tabSpaces||0,h="";g--;)h+=" ";h&&e.on("key",function(a){9==a.data.keyCode&&(e.insertText(h),a.cancel())}),f&&e.on("key",function(a){(9==a.data.keyCode&&e.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&e.execCommand("selectPreviousCell"))&&a.cancel()}),e.addCommand("blur",CKEDITOR.tools.extend(c,b)),e.addCommand("blurBack",CKEDITOR.tools.extend(d,b)),e.addCommand("selectNextCell",a()),e.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,b){var c,d,e,f,g,h,i=void 0===b?this.getTabIndex():b;if(0>=i)for(g=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);g;){if(g.isVisible()&&0===g.getTabIndex()){e=g;break}g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(g=this.getDocument().getBody().getFirst();g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&g.equals(this)){if(d=!0,a){if(!(g=g.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(g)&&(c=1);if(g.isVisible()&&!(0>(h=g.getTabIndex()))){if(c&&h==i){e=g;break}h>i&&(!e||!f||h<f)?(e=g,f=h):e||0!==h||(e=g,f=h)}}e&&e.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,b){for(var c,d,e,f,g=void 0===b?this.getTabIndex():b,h=0,i=this.getDocument().getBody().getLast();i=i.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&i.equals(this)){if(d=!0,a){if(!(i=i.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(i)&&(c=1);if(i.isVisible()&&!(0>(f=i.getTabIndex())))if(0>=g){if(c&&0===f){e=i;break}f>h&&(e=i,h=f)}else{if(c&&f==g){e=i;break}f<g&&(!e||f>h)&&(e=i,h=f)}}e&&e.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function b(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(a){if(a.styles){var b;if(a.styles.border)b=CKEDITOR.tools.style.parse.border(a.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var c=a.styles;c["border-left"]&&c["border-left"]===c["border-right"]&&c["border-right"]===c["border-top"]&&c["border-top"]===c["border-bottom"]&&(b=CKEDITOR.tools.style.parse.border(c["border-top"]))}b&&b.style&&"solid"===b.style&&b.width&&0!==parseFloat(b.width)&&(a.attributes.border=1),"collapse"==a.styles["border-collapse"]&&(a.attributes.cellspacing=0)}}}]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",b())),a.addCommand("tableDelete",b({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var c=b.getParent(),d=a.editable();1!=c.getChildCount()||c.is("td","th")||c.equals(d)||(b=c),a=a.createRange(),a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function a(a,b){function c(a){return!b||b.contains(a)&&a.getAscendant("table",!0).equals(b)}function d(a){var b=/^(?:td|th)$/;0<e.length||a.type!=CKEDITOR.NODE_ELEMENT||!b.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(f,a,"selected_cell",!0),e.push(a))}var e=[],f={};if(!a)return e;for(var g=a.getRanges(),h=0;h<g.length;h++){var i=g[h];if(i.collapsed)(i=i.getCommonAncestor().getAscendant({td:1,th:1},!0))&&c(i)&&e.push(i);else{var j,i=new CKEDITOR.dom.walker(i);for(i.guard=d;j=i.next();)j.type==CKEDITOR.NODE_ELEMENT&&j.is(CKEDITOR.dtd.table)||(j=j.getAscendant({td:1,th:1},!0))&&!j.getCustomData("selected_cell")&&c(j)&&(CKEDITOR.dom.element.setMarker(f,j,"selected_cell",!0),e.push(j))}}return CKEDITOR.dom.element.clearAllMarkers(f),e}function b(b,c){for(var d=o(b)?b:a(b),e=d[0],f=e.getAscendant("table"),e=e.getDocument(),g=d[0].getParent(),h=g.$.rowIndex,d=d[d.length-1],i=d.getParent().$.rowIndex+d.$.rowSpan-1,d=new CKEDITOR.dom.element(f.$.rows[i]),h=c?h:i,g=c?g:d,d=CKEDITOR.tools.buildTableMap(f),f=d[h],h=c?d[h-1]:d[h+1],d=d[0].length,e=e.createElement("tr"),i=0;f[i]&&i<d;i++){var j;1<f[i].rowSpan&&h&&f[i]==h[i]?(j=f[i],j.rowSpan+=1):(j=new CKEDITOR.dom.element(f[i]).clone(),j.removeAttribute("rowSpan"),j.appendBogus(),e.append(j),j=j.$),i+=j.colSpan-1}return c?e.insertBefore(g):e.insertAfter(g),e}function c(b){if(b instanceof CKEDITOR.dom.selection){var d=b.getRanges(),e=a(b),f=e[0].getAscendant("table"),g=CKEDITOR.tools.buildTableMap(f),h=e[0].getParent().$.rowIndex,e=e[e.length-1],i=e.getParent().$.rowIndex+e.$.rowSpan-1,e=[];for(b.reset(),b=h;b<=i;b++){for(var j=g[b],k=new CKEDITOR.dom.element(f.$.rows[b]),l=0;l<j.length;l++){var m=new CKEDITOR.dom.element(j[l]),n=m.getParent().$.rowIndex;1==m.$.rowSpan?m.remove():(--m.$.rowSpan,n==b&&(n=g[b+1],n[l-1]?m.insertAfter(new CKEDITOR.dom.element(n[l-1])):new CKEDITOR.dom.element(f.$.rows[b+1]).append(m,1))),l+=m.$.colSpan-1}e.push(k)}for(g=f.$.rows,d[0].moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),h=new CKEDITOR.dom.element(g[i+1]||(0<h?g[h-1]:null)||f.$.parentNode),b=e.length;0<=b;b--)c(e[b]);return f.$.parentNode?h:(d[0].select(),null)}return b instanceof CKEDITOR.dom.element&&(f=b.getAscendant("table"),1==f.$.rows.length?f.remove():b.remove()),null}function d(a){for(var b=a.getParent().$.cells,c=0,d=0;d<b.length;d++){var e=b[d],c=c+e.colSpan;if(e==a.$)break}return c-1}function e(a,b){for(var c=b?1/0:0,e=0;e<a.length;e++){var f=d(a[e]);(b?f<c:f>c)&&(c=f)}return c}function f(b,c){for(var d=o(b)?b:a(b),f=d[0].getAscendant("table"),g=e(d,1),d=e(d),h=c?g:d,i=CKEDITOR.tools.buildTableMap(f),f=[],g=[],d=[],j=i.length,k=0;k<j;k++){var l=c?i[k][h-1]:i[k][h+1];f.push(i[k][h]),g.push(l)}for(k=0;k<j;k++)f[k]&&(1<f[k].colSpan&&g[k]==f[k]?(i=f[k],i.colSpan+=1):(h=new CKEDITOR.dom.element(f[k]),i=h.clone(),i.removeAttribute("colSpan"),i.appendBogus(),i[c?"insertBefore":"insertAfter"].call(i,h),d.push(i),i=i.$),k+=i.rowSpan-1);return d}function g(b){function c(a){var b,c,d=a.getRanges();if(1!==d.length)return a;if(d=d[0],d.collapsed||0!==d.endOffset)return a;if(b=d.endContainer,c=b.getName().toLowerCase(),"td"!==c&&"th"!==c)return a;for((c=b.getPrevious())||(c=b.getParent().getPrevious().getLast());c.type!==CKEDITOR.NODE_TEXT&&"br"!==c.getName().toLowerCase();)if(c=c.getLast(),!c)return a;return d.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),d.select()}CKEDITOR.env.webkit&&!b.isFake&&(b=c(b));var d,e,f=b.getRanges(),g=a(b),h=g[0],i=g[g.length-1],g=h.getAscendant("table"),j=CKEDITOR.tools.buildTableMap(g),k=[];b.reset();var l=0;for(b=j.length;l<b;l++)for(var m=0,n=j[l].length;m<n;m++)void 0===d&&j[l][m]==h.$&&(d=m),j[l][m]==i.$&&(e=m);for(l=d;l<=e;l++)for(m=0;m<j.length;m++)i=j[m],h=new CKEDITOR.dom.element(g.$.rows[m]),i=new CKEDITOR.dom.element(i[l]),i.$&&(1==i.$.colSpan?i.remove():--i.$.colSpan,m+=i.$.rowSpan-1,h.$.cells.length||k.push(h));return d=j[0].length-1>e?new CKEDITOR.dom.element(j[0][e+1]):d&&-1!==j[0][d-1].cellIndex?new CKEDITOR.dom.element(j[0][d-1]):new CKEDITOR.dom.element(g.$.parentNode),k.length==b&&(f[0].moveToPosition(g,CKEDITOR.POSITION_AFTER_END),f[0].select(),g.remove()),d}function h(a,b){var c=a.getStartElement().getAscendant({td:1,th:1},!0);if(c){var d=c.clone();d.appendBogus(),b?d.insertBefore(c):d.insertAfter(c)}}function i(b){if(b instanceof CKEDITOR.dom.selection){var c,d=b.getRanges(),e=a(b),f=e[0]&&e[0].getAscendant("table");a:{var g=0;c=e.length-1;for(var h,k,l={};h=e[g++];)CKEDITOR.dom.element.setMarker(l,h,"delete_cell",!0);for(g=0;h=e[g++];)if((k=h.getPrevious())&&!k.getCustomData("delete_cell")||(k=h.getNext())&&!k.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(l),c=k;break a}CKEDITOR.dom.element.clearAllMarkers(l),g=e[0].getParent(),(g=g.getPrevious())?c=g.getLast():(g=e[c].getParent(),c=(g=g.getNext())?g.getChild(0):null)}for(b.reset(),b=e.length-1;0<=b;b--)i(e[b]);c?j(c,!0):f&&(d[0].moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),d[0].select(),f.remove())}else b instanceof CKEDITOR.dom.element&&(d=b.getParent(),1==d.getChildCount()?d.remove():b.remove())}function j(a,b){var c=a.getDocument(),d=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(d.focus(),c.focus()),c=new CKEDITOR.dom.range(c),c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(!b)),c.select(!0)}function k(a,b,c){if(a=a[b],"undefined"==typeof c)return a;for(b=0;a&&b<a.length;b++){if(c.is&&a[b]==c.$)return b;if(b==c)return new CKEDITOR.dom.element(a[b])}return c.is?-1:null}function l(b,c,d){var e,f=a(b);if((c?1!=f.length:2>f.length)||(e=b.getCommonAncestor())&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))return!1;b=f[0],e=b.getAscendant("table");var g,h=CKEDITOR.tools.buildTableMap(e),i=h.length,j=h[0].length,l=b.getParent().$.rowIndex,m=k(h,l,b);if(c){var n;try{var o=parseInt(b.getAttribute("rowspan"),10)||1;g=parseInt(b.getAttribute("colspan"),10)||1,n=h["up"==c?l-o:"down"==c?l+o:l]["left"==c?m-g:"right"==c?m+g:m]}catch(p){return!1}if(!n||b.$==n)return!1;f["up"==c||"left"==c?"unshift":"push"](new CKEDITOR.dom.element(n))}c=b.getDocument();var q=l,o=n=0,r=!d&&new CKEDITOR.dom.documentFragment(c),s=0;for(c=0;c<f.length;c++){g=f[c];var t=g.getParent(),u=g.getFirst(),v=g.$.colSpan,w=g.$.rowSpan,t=t.$.rowIndex,x=k(h,t,g),s=s+v*w,o=Math.max(o,x-m+v);n=Math.max(n,t-l+w),d||(v=g,(w=v.getBogus())&&w.remove(),v.trim(),g.getChildren().count()&&(t==q||!u||u.isBlockBoundary&&u.isBlockBoundary({br:1})||(q=r.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!q||q.is&&q.is("br")||r.append("br")),g.moveChildren(r)),c?g.remove():g.setHtml("")),q=t}if(d)return n*o==s;for(r.moveChildren(b),b.appendBogus(),o>=j?b.removeAttribute("rowSpan"):b.$.rowSpan=n,n>=i?b.removeAttribute("colSpan"):b.$.colSpan=o,d=new CKEDITOR.dom.nodeList(e.$.rows),f=d.count(),c=f-1;0<=c;c--)e=d.getItem(c),e.$.cells.length||(e.remove(),f++);return b}function m(b,c){var d=a(b);if(1<d.length)return!1;if(c)return!0;var e,d=d[0],f=d.getParent(),g=f.getAscendant("table"),h=CKEDITOR.tools.buildTableMap(g),i=f.$.rowIndex,j=k(h,i,d),l=d.$.rowSpan;if(1<l){e=Math.ceil(l/2);for(var m,l=Math.floor(l/2),f=i+e,g=new CKEDITOR.dom.element(g.$.rows[f]),h=k(h,f),f=d.clone(),i=0;i<h.length;i++){if(m=h[i],m.parentNode==g.$&&i>j){f.insertBefore(new CKEDITOR.dom.element(m));break}m=null}m||g.append(f)}else for(l=e=1,g=f.clone(),g.insertAfter(f),g.append(f=d.clone()),m=k(h,i),j=0;j<m.length;j++)m[j].rowSpan++;return f.appendBogus(),d.$.rowSpan=e,f.$.rowSpan=l,1==e&&d.removeAttribute("rowSpan"),1==l&&f.removeAttribute("rowSpan"),f}function n(b,c){var d=a(b);if(1<d.length)return!1;if(c)return!0;var d=d[0],e=d.getParent(),f=e.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(f),g=k(f,e.$.rowIndex,d),h=d.$.colSpan;if(1<h)e=Math.ceil(h/2),h=Math.floor(h/2);else{for(var h=e=1,i=[],j=0;j<f.length;j++){var l=f[j];i.push(l[g]),1<l[g].rowSpan&&(j+=l[g].rowSpan-1)}for(f=0;f<i.length;f++)i[f].colSpan++}return f=d.clone(),f.insertAfter(d),f.appendBogus(),d.$.colSpan=e,f.$.colSpan=h,1==e&&d.removeAttribute("colSpan"),1==h&&f.removeAttribute("colSpan"),f}var o=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(d){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function k(a,b){var c=d.addCommand(a,b);d.addFeature(c)}var o=d.lang.table,p=CKEDITOR.tools.style.parse,q="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");k("cellProperties",new CKEDITOR.dialogCommand("cellProperties",e({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:q,contentTransformations:[[{element:"td",left:function(a){return a.styles.background&&p.background(a.styles.background).color},right:function(a){a.styles["background-color"]=p.background(a.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(a){return a.attributes&&a.attributes.valign},right:function(a){a.styles["vertical-align"]=a.attributes.valign,delete a.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(a){return a.styles&&a.styles.height},right:function(a){CKEDITOR.tools.array.forEach(a.children,function(b){b.name in{td:1,th:1}&&(b.attributes["cke-row-height"]=a.styles.height)}),delete a.styles.height}}],[{element:"td",check:"td{height}",left:function(a){return(a=a.attributes)&&a["cke-row-height"]},right:function(a){a.styles.height=a.attributes["cke-row-height"],delete a.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),k("rowDelete",e({requiredContent:"table",exec:function(a){a=a.getSelection(),(a=c(a))&&j(a)}})),k("rowInsertBefore",e({requiredContent:"table",exec:function(c){c=c.getSelection(),c=a(c),b(c,!0)}})),k("rowInsertAfter",e({requiredContent:"table",exec:function(c){c=c.getSelection(),c=a(c),b(c)}})),k("columnDelete",e({requiredContent:"table",exec:function(a){a=a.getSelection(),(a=g(a))&&j(a,!0)}})),k("columnInsertBefore",e({requiredContent:"table",exec:function(b){b=b.getSelection(),b=a(b),f(b,!0)}})),k("columnInsertAfter",e({requiredContent:"table",exec:function(b){b=b.getSelection(),b=a(b),f(b)}})),k("cellDelete",e({requiredContent:"table",exec:function(a){a=a.getSelection(),i(a)}})),k("cellMerge",e({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a,b){b.cell=l(a.getSelection()),j(b.cell,!0)}})),k("cellMergeRight",e({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a,b){b.cell=l(a.getSelection(),"right"),j(b.cell,!0)}})),k("cellMergeDown",e({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a,b){b.cell=l(a.getSelection(),"down"),j(b.cell,!0)}})),k("cellVerticalSplit",e({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){j(n(a.getSelection()))}})),k("cellHorizontalSplit",e({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){j(m(a.getSelection()))}})),k("cellInsertBefore",e({
requiredContent:"table",exec:function(a){a=a.getSelection(),h(a,!0)}})),k("cellInsertAfter",e({requiredContent:"table",exec:function(a){a=a.getSelection(),h(a)}})),d.addMenuItems&&d.addMenuItems({tablecell:{label:o.cell.menu,group:"tablecell",order:1,getItems:function(){var b=d.getSelection(),c=a(b),b={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:l(b,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:l(b,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:l(b,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:n(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:m(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return d.filter.check(q)&&(b.tablecell_properties=0<c.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),b}},tablecell_insertBefore:{label:o.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:o.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:o.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:o.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:o.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:o.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:o.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:o.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:o.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:o.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:o.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:o.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:o.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:o.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:o.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:o.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:o.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),d.contextMenu&&d.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:d,insertRow:b,insertColumn:f,getSelectedCells:a},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a,b,c,d,e){a=a.$.rows,c=c||0,d="number"==typeof d?d:a.length-1,e="number"==typeof e?e:-1;var f=-1,g=[];for(b=b||0;b<=d;b++){f++,!g[f]&&(g[f]=[]);for(var h=-1,i=c;i<=(-1===e?a[b].cells.length-1:e);i++){var j=a[b].cells[i];if(!j)break;for(h++;g[f][h];)h++;for(var k=isNaN(j.colSpan)?1:j.colSpan,j=isNaN(j.rowSpan)?1:j.rowSpan,l=0;l<j&&!(b+l>d);l++){g[f+l]||(g[f+l]=[]);for(var m=0;m<k;m++)g[f+l][h+m]=a[b].cells[i]}if(h+=k-1,-1!==e&&h>=e)break}}return g},function(){function a(a){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(a)}function b(a,b){var c,d,e=a.getAscendant("table"),f=b.getAscendant("table"),g=CKEDITOR.tools.buildTableMap(e),h=i(a),j=i(b),k=[],l={};for(e.contains(f)&&(b=b.getAscendant({td:1,th:1}),j=i(b)),h>j&&(e=h,h=j,j=e,e=a,a=b,b=e),e=0;e<g[h].length;e++)if(a.$===g[h][e]){c=e;break}for(e=0;e<g[j].length;e++)if(b.$===g[j][e]){d=e;break}for(c>d&&(e=c,c=d,d=e),e=h;e<=j;e++)for(h=c;h<=d;h++)f=new CKEDITOR.dom.element(g[e][h]),f.$&&!f.getCustomData("selected_cell")&&(k.push(f),CKEDITOR.dom.element.setMarker(l,f,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(l),k}function c(a){return(a=a.editable().findOne(".cke_table-faked-selection"))&&a.getAscendant("table")}function d(a,b){var c,d=a.editable().find(".cke_table-faked-selection"),e=a.editable().findOne("[data-cke-table-faked-selection-table]");for(a.fire("lockSnapshot"),a.editable().removeClass("cke_table-faked-selection-editor"),c=0;c<d.count();c++)d.getItem(c).removeClass("cke_table-faked-selection");e&&e.data("cke-table-faked-selection-table",!1),a.fire("unlockSnapshot"),b&&(u={active:!1},a.getSelection().isInTable()&&a.getSelection().reset())}function e(a,b){var c,d,e=[];for(d=0;d<b.length;d++)c=a.createRange(),c.setStartBefore(b[d]),c.setEndAfter(b[d]),e.push(c);a.getSelection().selectRanges(e)}function f(a){var c=a.editable().find(".cke_table-faked-selection");1>c.count()||(c=b(c.getItem(0),c.getItem(c.count()-1)),e(a,c))}function g(c,f,g){var h=q(c.getSelection(!0));f=f.is("table")?null:f;var i;if((i=u.active&&!u.first)&&!(i=f)&&(i=c.getSelection().getRanges(),i=!!(1<h.length||i[0]&&!i[0].collapsed)),i)u.first=f||h[0],u.dirty=!f&&1!==h.length;else if(u.active&&f&&u.first.getAscendant("table").equals(f.getAscendant("table"))){if(h=b(u.first,f),!u.dirty&&1===h.length&&!a(g.data.getTarget()))return d(c,"mouseup"===g.name);u.dirty=!0,u.last=f,e(c,h)}}function h(a){var b,c=(a=a.editor||a.sender.editor)&&a.getSelection(),e=c&&c.getRanges()||[],f=e&&e[0].getEnclosedNode(),f=f&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("img");if(c&&(d(a),c.isInTable()&&c.isFake))if(f)a.getSelection().reset();else if(!e[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===e.length&&e[0]._getTableElement()&&e[0]._getTableElement().is("table")&&(b=e[0]._getTableElement()),b=q(c,b),a.fire("lockSnapshot"),c=0;c<b.length;c++)b[c].addClass("cke_table-faked-selection");0<b.length&&(a.editable().addClass("cke_table-faked-selection-editor"),b[0].getAscendant("table").data("cke-table-faked-selection-table","")),a.fire("unlockSnapshot")}}function i(a){return a.getAscendant("tr",!0).$.rowIndex}function j(b){function e(a,b){return!(!a||!b)&&(a.equals(b)||a.contains(b)||b.contains(a)||a.getCommonAncestor(b).is(p))}function h(a){return!a.getAscendant("table",!0)&&a.getDocument().equals(k.document)}function i(a,b,c,d){return!("mousedown"!==a.name||CKEDITOR.tools.getMouseButton(a)!==CKEDITOR.MOUSE_BUTTON_LEFT&&d)||((b=a.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!h(a.data.getTarget()))&&(a=a.data.getTarget().getAscendant({td:1,th:1},!0),b=!(a&&a.hasClass("cke_table-faked-selection"))),b)}if(b.data.getTarget().getName&&("mouseup"===b.name||!a(b.data.getTarget()))){var k=b.editor||b.listenerData.editor,l=k.getSelection(1),m=c(k),n=b.data.getTarget(),o=n&&n.getAscendant({td:1,th:1},!0),n=n&&n.getAscendant("table",!0),p={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};n&&n.hasAttribute("data-cke-tableselection-ignored")||(i(b,l,m,n)&&d(k,!0),!u.active&&"mousedown"===b.name&&CKEDITOR.tools.getMouseButton(b)===CKEDITOR.MOUSE_BUTTON_LEFT&&n&&(u={active:!0},CKEDITOR.document.on("mouseup",j,null,{editor:k})),(o||n)&&g(k,o||n,b),"mouseup"===b.name&&(CKEDITOR.tools.getMouseButton(b)===CKEDITOR.MOUSE_BUTTON_LEFT&&(h(b.data.getTarget())||e(m,n))&&f(k),u={active:!1},CKEDITOR.document.removeListener("mouseup",j)))}}function k(a){var b=a.data.getTarget().getAscendant("table",!0);b&&b.hasAttribute("data-cke-tableselection-ignored")||(b=a.data.getTarget().getAscendant({td:1,th:1},!0))&&!b.hasClass("cke_table-faked-selection")&&(a.cancel(),a.data.preventDefault())}function l(a,b){function c(a){a.cancel()}var d,e,f,g,h=a.getSelection(),i=h.createBookmarks(),j=a.document,k=a.createRange(),l=j.getDocumentElement().$,m=CKEDITOR.env.ie&&9>CKEDITOR.env.version,n=a.blockless||CKEDITOR.env.ie?"span":"div";j.getById("cke_table_copybin")||(d=j.createElement(n),e=j.createElement(n),e.setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),d.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),d.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-5000px"),d.setHtml(a.getSelectedHtml(!0)),a.fire("lockSnapshot"),e.append(d),a.editable().append(e),g=a.on("selectionChange",c,null,null,0),m&&(f=l.scrollTop),k.selectNodeContents(d),k.select(),m&&(l.scrollTop=f),setTimeout(function(){e.remove(),h.selectBookmarks(i),g.removeListener(),a.fire("unlockSnapshot"),b&&(a.extractSelectedHtml(),a.fire("saveSnapshot"))},100))}function m(a){var b=a.editor||a.sender.editor,c=b.getSelection();c.isInTable()&&(c.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||l(b,"cut"===a.name))}function n(a){this._reset(),a&&this.setSelectedCells(a)}function o(a,b,c){a.on("beforeCommandExec",function(c){-1!==CKEDITOR.tools.array.indexOf(b,c.data.name)&&(c.data.selectedCells=q(a.getSelection()))}),a.on("afterCommandExec",function(d){-1!==CKEDITOR.tools.array.indexOf(b,d.data.name)&&c(a,d.data)})}var p,q,r,s,t,u={active:!1};n.prototype={},n.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},n.prototype.setSelectedCells=function(a){this._reset(),a=a.slice(0),this._arraySortByDOMOrder(a),this.cells.all=a,this.cells.first=a[0],this.cells.last=a[a.length-1],this.rows.first=a[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},n.prototype.getTableMap=function(){var a,b=r(this.cells.first);a:{a=this.cells.last;var c,d=a.getAscendant("table"),e=i(a),d=CKEDITOR.tools.buildTableMap(d);for(c=0;c<d[e].length;c++)if(new CKEDITOR.dom.element(d[e][c]).equals(a)){a=c;break a}a=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),i(this.rows.first),b,i(this.rows.last),a)},n.prototype._getTable=function(){return this.rows.first.getAscendant("table")},n.prototype.insertRow=function(a,b,c){if("undefined"==typeof a)a=1;else if(0>=a)return;for(var d,e=this.cells.first.$.cellIndex,f=this.cells.last.$.cellIndex,g=c?[]:this.cells.all,h=0;h<a;h++)d=s(c?this.cells.all:g,b),d=CKEDITOR.tools.array.filter(d.find("td, th").toArray(),function(a){return!!c||a.$.cellIndex>=e&&a.$.cellIndex<=f}),g=b?d.concat(g):g.concat(d);this.setSelectedCells(g)},n.prototype.insertColumn=function(a){function b(a){return a=i(a),a>=e&&a<=f}if("undefined"==typeof a)a=1;else if(0>=a)return;for(var c=this.cells,d=c.all,e=i(c.first),f=i(c.last),c=0;c<a;c++)d=d.concat(CKEDITOR.tools.array.filter(t(d),b));this.setSelectedCells(d)},n.prototype.emptyCells=function(a){a=a||this.cells.all;for(var b=0;b<a.length;b++)a[b].setHtml("")},n.prototype._arraySortByDOMOrder=function(a){a.sort(function(a,b){return a.getPosition(b)&CKEDITOR.POSITION_PRECEDING?-1:1})};var v={onPaste:function(a){function c(a){var b=h.createRange();b.selectNodeContents(a),b.select()}function d(a){return Math.max.apply(null,CKEDITOR.tools.array.map(a,function(a){return a.length},0))}var f,g,h=a.editor,i=h.getSelection(),j=q(i),k=i.isInTable(!0)&&this.isBoundarySelection(i),l=this.findTableInPastedContent(h,a.data.dataValue);(function(a,b,c,d){a=a.getRanges();var e=a.length&&a[0]._getTableElement({table:1});return!(!b.length||e&&e.hasAttribute("data-cke-tableselection-ignored")||d&&!c)&&((b=!d)&&((b=a[0])?(b=b.clone(),b.enlarge(CKEDITOR.ENLARGE_ELEMENT),b=(b=b.getEnclosedNode())&&b.is&&b.is(CKEDITOR.dtd.$tableContent)):b=void 0,b=!b),!b)})(i,j,l,k)&&(j=j[0].getAscendant("table"),f=new n(q(i,j)),h.once("afterPaste",function(){var a;if(g){a=new CKEDITOR.dom.element(g[0][0]);var c=g[g.length-1];a=b(a,new CKEDITOR.dom.element(c[c.length-1]))}else a=f.cells.all;e(h,a)}),l?(a.stop(),k?(f.insertRow(1,1===k,!0),i.selectElement(f.rows.first)):(f.emptyCells(),e(h,f.cells.all)),a=f.getTableMap(),g=CKEDITOR.tools.buildTableMap(l),f.insertRow(g.length-a.length),f.insertColumn(d(g)-d(a)),a=f.getTableMap(),this.pasteTable(f,a,g),h.fire("saveSnapshot"),setTimeout(function(){h.fire("afterPaste")},0)):(c(f.cells.first),h.once("afterPaste",function(){h.fire("lockSnapshot"),f.emptyCells(f.cells.all.slice(1)),e(h,f.cells.all),h.fire("unlockSnapshot")})))},isBoundarySelection:function(a){a=a.getRanges()[0];var b=a.endContainer.getAscendant("tr",!0);if(b&&a.collapsed){if(a.checkBoundaryOfElement(b,CKEDITOR.START))return 1;if(a.checkBoundaryOfElement(b,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(a,b){var c=a.dataProcessor,d=new CKEDITOR.dom.element("body");return c||(c=new CKEDITOR.htmlDataProcessor(a)),d.setHtml(c.toHtml(b),{fixForBody:!1}),1<d.getChildCount()?null:d.findOne("table")},pasteTable:function(a,b,c){var d,e,f,g,h,i=r(a.cells.first),j=a._getTable(),k={};for(g=0;g<c.length;g++)for(e=new CKEDITOR.dom.element(j.$.rows[a.rows.first.$.rowIndex+g]),h=0;h<c[g].length;h++)f=new CKEDITOR.dom.element(c[g][h]),d=b[g]&&b[g][h]?new CKEDITOR.dom.element(b[g][h]):null,f&&!f.getCustomData("processed")?(d&&d.getParent()?f.replace(d):(0===h||c[g][h-1])&&((d=0!==h?new CKEDITOR.dom.element(c[g][h-1]):null)&&e.equals(d.getParent())?f.insertAfter(d):0<i?e.$.cells[i]?f.insertAfter(new CKEDITOR.dom.element(e.$.cells[i])):e.append(f):e.append(f,!0)),CKEDITOR.dom.element.setMarker(k,f,"processed",!0)):f.getCustomData("processed")&&d&&d.remove();CKEDITOR.dom.element.clearAllMarkers(k)}};CKEDITOR.plugins.tableselection={getCellsBetween:b,keyboardIntegration:function(a){function b(a){var b=a.getEnclosedNode();b&&"function"==typeof b.is&&b.is({td:1,th:1})?b.setText(""):a.deleteContents(),CKEDITOR.tools.array.forEach(a._find("td"),function(a){a.appendBogus()})}var c=a.editable();c.attachListener(c,"keydown",function(a){function c(b,c){if(!c.length)return null;var d=a.createRange(),f=CKEDITOR.dom.range.mergeRanges(c);CKEDITOR.tools.array.forEach(f,function(a){a.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var g=f[0].getBoundaryNodes(),h=g.startNode,g=g.endNode;if(h&&h.is&&h.is(e)){for(var i=h.getAscendant("table",!0),j=h.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,i),k=!1,l=function(a){return!h.contains(a)&&a.is&&a.is("td","th")};j&&!l(j);)j=j.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,i);return!j&&g&&g.is&&!g.is("table")&&g.getNext()&&(j=g.getNext().findOne("td, th"),k=!0),j?d["moveToElementEdit"+(k?"Start":"End")](j):(d.setStartBefore(h.getAscendant("table",!0)),d.collapse(!0)),f[0].deleteContents(),[d]}return h?(d.moveToElementEditablePosition(h),[d]):void 0}var d={37:1,38:1,39:1,40:1,8:1,46:1,13:1},e=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete e.td,delete e.th,function(e){var f,g,h,i,j=e.data.getKey(),k=e.data.getKeystroke(),l=37===j||38==j;if(d[j]&&!a.readOnly&&(f=a.getSelection())&&f.isInTable()&&f.isFake)if(g=f.getRanges(),h=g[0]._getTableElement(),i=g[g.length-1]._getTableElement(),(13!==j||a.plugins.enterkey)&&(e.data.preventDefault(),e.cancel()),36<j&&41>j)g[0].moveToElementEditablePosition(l?h:i,!l),f.selectRanges([g[0]]);else if(13!==j||13===k||k===CKEDITOR.SHIFT+13){for(e=0;e<g.length;e++)b(g[e]);(e=c(h,g))?g=e:g[0].moveToElementEditablePosition(h),f.selectRanges(g),13===j&&a.plugins.enterkey?(a.fire("lockSnapshot"),13===k?a.execCommand("enter"):a.execCommand("shiftEnter"),a.fire("unlockSnapshot"),a.fire("saveSnapshot")):13!==j&&a.fire("saveSnapshot")}}}(a),null,null,-1),c.attachListener(c,"keypress",function(c){var d,e=a.getSelection(),f=c.data.$.charCode||13===c.data.getKey();if(!a.readOnly&&e&&e.isInTable()&&e.isFake&&f&&!(c.data.getKeystroke()&CKEDITOR.CTRL)){for(c=e.getRanges(),f=c[0].getEnclosedNode().getAscendant({td:1,th:1},!0),d=0;d<c.length;d++)b(c[d]);f&&(c[0].moveToElementEditablePosition(f),e.selectRanges([c[0]]))}},null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){p=CKEDITOR.plugins.tabletools,q=p.getSelectedCells,r=p.getCellColIndex,s=p.insertRow,t=p.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(a){this.isSupportedEnvironment()&&(a.addContentsCss&&a.addContentsCss(this.path+"styles/tableselection.css"),a.on("contentDom",function(){var b=a.editable(),c=b.isInline()?b:a.document,d={editor:a};b.attachListener(c,"mousedown",j,null,d),b.attachListener(c,"mousemove",j,null,d),b.attachListener(c,"mouseup",j,null,d),b.attachListener(b,"dragstart",k),b.attachListener(a,"selectionCheck",h),CKEDITOR.plugins.tableselection.keyboardIntegration(a),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(b.attachListener(b,"cut",m),b.attachListener(b,"copy",m))}),a.on("paste",v.onPaste,v),o(a,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(a,b){e(a,b.selectedCells)}),o(a,["cellMerge","cellMergeRight","cellMergeDown"],function(a,b){e(a,[b.commandData.cell])}),o(a,["cellDelete"],function(a){d(a,!0)}))}})}(),function(){function a(a,b){return CKEDITOR.tools.array.reduce(b,function(a,b){return b(a)},a)}var b=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],c={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(a){function c(a){f.enabled&&!1!==a.data.command.canUndo&&f.save()}function e(){f.enabled=!a.readOnly&&"wysiwyg"==a.mode,f.onChange()}var f=a.undoManager=new d(a),h=f.editingHandler=new g(f),i=a.addCommand("undo",{exec:function(){f.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),j=a.addCommand("redo",{exec:function(){f.redo()&&(a.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});a.setKeystroke([[b[0],"undo"],[b[1],"redo"],[b[2],"redo"]]),f.onChange=function(){i.setState(f.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),j.setState(f.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},a.on("beforeCommandExec",c),a.on("afterCommandExec",c),a.on("saveSnapshot",function(a){f.save(a.data&&a.data.contentOnly)}),a.on("contentDom",h.attachListeners,h),a.on("instanceReady",function(){a.fire("saveSnapshot")}),a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&f.save(!0)}),a.on("mode",e),a.on("readOnly",e),a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"})),a.resetUndo=function(){f.reset(),a.fire("saveSnapshot")},a.on("updateSnapshot",function(){f.currentImage&&f.update()}),a.on("lockSnapshot",function(a){a=a.data,f.lock(a&&a.dontUpdate,a&&a.forceUpdate)}),a.on("unlockSnapshot",f.unlock,f)}}),CKEDITOR.plugins.undo={};var d=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=a.config.undoStackSize||20,this.strokesLimit=25,this._filterRules=[],this.editor=a,this.reset(),CKEDITOR.env.ie&&this.addFilterRule(function(a){return a.replace(/\s+data-cke-expando=".*?"/g,"")})};d.prototype={type:function(a,b){var c=d.getKeyGroup(a),e=this.strokesRecorded[c]+1;b=b||e>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),b?(e=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[c]=e,this.previousKeyGroup=c},keyGroupChanged:function(a){return d.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,c){var d=this.editor;if(this.locked||"ready"!=d.status||"wysiwyg"!=d.mode)return!1;var f=d.editable();if(!f||"ready"!=f.status)return!1;if(f=this.snapshots,b||(b=new e(d)),!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&d.fire("change");return f.splice(this.index+1,f.length-this.index-1),f.length==this.limit&&f.shift(),this.index=f.push(b)-1,this.currentImage=b,!1!==c&&this.refreshState(),!0},restoreImage:function(a){var b,c=this.editor;a.bookmarks&&(c.focus(),b=c.getSelection()),this.locked={level:999},this.editor.loadSnapshot(a.contents),a.bookmarks?b.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(b=this.editor.document.getBody().$.createTextRange(),b.collapse(!0),b.select()),this.locked=null,this.index=a.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),c.fire("change")},getNextImage:function(a){var b,c=this.snapshots,d=this.currentImage;if(d)if(a){for(b=this.index-1;0<=b;b--)if(a=c[b],!d.equalsContent(a))return a.index=b,a}else for(b=this.index+1;b<c.length;b++)if(a=c[b],!d.equalsContent(a))return a.index=b,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new e(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)--b;c.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return!(!c.equalsContent(a)||c.equalsSelection(a))&&(this.currentImage=b[b.length-1]=a,!0)},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var d=new e(this.editor,(!0));this.currentImage&&this.currentImage.equalsContent(d)&&(c=d)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;if(this.locked=null,!0===a)this.update();else if(a){var b=new e(this.editor,(!0));a.equalsContent(b)||this.update()}}},addFilterRule:function(a){this._filterRules.push(a)}},d.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},d.keyGroups={PRINTABLE:0,FUNCTIONAL:1},d.isNavigationKey=function(a){return!!d.navigationKeyCodes[a]},d.getKeyGroup=function(a){var b=d.keyGroups;return c[a]?b.FUNCTIONAL:b.PRINTABLE},d.getOppositeKeyGroup=function(a){var b=d.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL},d.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&d.getKeyGroup(a)==d.keyGroups.FUNCTIONAL};var e=CKEDITOR.plugins.undo.Image=function(b,c){this.editor=b,b.fire("beforeUndoImage");var d=b.getSnapshot();d&&(this.contents=a(d,b.undoManager._filterRules)),c||(this.bookmarks=(d=d&&b.getSelection())&&d.createBookmarks2(!0)),b.fire("afterUndoImage")},f=/\b(?:href|src|name)="[^"]*?"/gi;e.prototype={equalsContent:function(a){var b=this.contents;return a=a.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(f,""),a=a.replace(f,"")),b==a},equalsSelection:function(a){var b=this.bookmarks;if(a=a.bookmarks,b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,e.end))return!1}}return!0}};var g=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a,this.ignoreInputEvent=!1,this.keyEventsStack=new h,this.lastKeydownImage=null};g.prototype={onKeydown:function(a){var c=a.data.getKey();229!==c&&(-1<CKEDITOR.tools.indexOf(b,a.data.getKeystroke())?a.data.preventDefault():(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(c)||this.keyEventsStack.push(c),this.lastKeydownImage=new e(a.editor),(d.isNavigationKey(c)||this.undoManager.keyGroupChanged(c))&&(a.strokesRecorded[0]||a.strokesRecorded[1])&&(a.save(!1,this.lastKeydownImage,!1),a.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0)),this.keyEventsStack.increment(a.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager;a=a.data.getKey();var c=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a),d.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new e(b.editor,(!0)))||(0<c?b.type(a):d.isNavigationKey(a)&&this.onNavigationKey(!0))},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new e(b.editor)),b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var a=this.undoManager.editor,b=a.editable(),c=this;b.attachListener(b,"keydown",function(a){c.onKeydown(a),d.ieFunctionalKeysBug(a.data.getKey())&&c.onInput()},null,null,999),b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",c.onInput,c,null,999),b.attachListener(b,"keyup",c.onKeyup,c,null,999),b.attachListener(b,"paste",c.ignoreInputEventListener,c,null,999),b.attachListener(b,"drop",c.ignoreInputEventListener,c,null,999),a.on("afterPaste",c.activateInputEventListener,c,null,999),b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){c.onNavigationKey()},null,null,999),b.attachListener(this.undoManager.editor,"blur",function(){c.keyEventsStack.remove(9)},null,null,999)}};var h=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};h.prototype={push:function(a){return a=this.stack.push({keyCode:a,inputs:0}),this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){return a=this.getLastIndex(a),-1!=a?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a),-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$,a.ctrlKey||a.metaKey||this.remove(17),a.shiftKey||this.remove(16),a.altKey||this.remove(18)}}}(),function(){function a(a,b){CKEDITOR.tools.extend(this,{editor:a,editable:a.editable(),doc:a.document,win:a.window},b,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function b(a,b){CKEDITOR.tools.extend(this,b,{editor:a},!0)}function c(a,b){var c=a.editable();CKEDITOR.tools.extend(this,{editor:a,editable:c,inline:c.isInline(),doc:a.document,win:a.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},b,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var d=CKEDITOR.tools.bind(this.queryViewport,this),g=CKEDITOR.tools.bind(this.hideVisible,this),h=CKEDITOR.tools.bind(this.removeAll,this);c.attachListener(this.winTop,"resize",d),c.attachListener(this.winTop,"scroll",d),c.attachListener(this.winTop,"resize",g),c.attachListener(this.win,"scroll",g),c.attachListener(this.inline?c:this.frame,"mouseout",function(a){var b=a.data.$.clientX;a=a.data.$.clientY,this.queryViewport(),(b<=this.rect.left||b>=this.rect.right||a<=this.rect.top||a>=this.rect.bottom)&&this.hideVisible(),(0>=b||b>=this.winTopPane.width||0>=a||a>=this.winTopPane.height)&&this.hideVisible()},this),c.attachListener(a,"resize",d),c.attachListener(a,"mode",h),a.on("destroy",h),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},f,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},e,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},e,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function d(a){var b;return(b=a&&a.type==CKEDITOR.NODE_ELEMENT)&&(b=!(g[a.getComputedStyle("float")]||g[a.getAttribute("align")])),b&&!h[a.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,a.prototype={start:function(a){var b,c,d,e,f=this,g=this.editor,h=this.doc,i=CKEDITOR.tools.eventsBuffer(50,function(){g.readOnly||"wysiwyg"!=g.mode||(f.relations={},(c=h.$.elementFromPoint(d,e))&&c.nodeType&&(b=new CKEDITOR.dom.element(c),f.traverseSearch(b),isNaN(d+e)||f.pixelSearch(b,d,e),a&&a(f.relations,d,e)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(a){d=a.data.$.clientX,e=a.data.$.clientY,i.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){i.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var a={};return a[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,a[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,a[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(b){var c=this.editor.createRange();return c.moveToPosition(this.relations[b.uid].element,a[b.type]),c}}(),store:function(){function a(a,b,c){var d=a.getUniqueId();d in c?c[d].type|=b:c[d]={element:a,type:b}}return function(b,c){var e;c&CKEDITOR.LINEUTILS_AFTER&&d(e=b.getNext())&&e.isVisible()&&(a(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),c^=CKEDITOR.LINEUTILS_AFTER),c&CKEDITOR.LINEUTILS_INSIDE&&d(e=b.getFirst())&&e.isVisible()&&(a(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),c^=CKEDITOR.LINEUTILS_INSIDE),a(b,c,this.relations)}}(),traverseSearch:function(a){var b,c,e;do if(e=a.$["data-cke-expando"],!(e&&e in this.relations)){if(a.equals(this.editable))break;if(d(a))for(b in this.lookups)(c=this.lookups[b](a))&&this.store(a,c)}while((!a||a.type!=CKEDITOR.NODE_ELEMENT||"true"!=a.getAttribute("contenteditable"))&&(a=a.getParent()))},pixelSearch:function(){function a(a,c,e,f,g){for(var h,i=0;g(e)&&(e+=f,25!=++i);)if(h=this.doc.$.elementFromPoint(c,e))if(h==a)i=0;else if(b(a,h)&&(i=0,d(h=new CKEDITOR.dom.element(h))))return h}var b=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a,b){return a.contains(b)}:function(a,b){return!!(16&a.compareDocumentPosition(b))};return function(b,c,e){var f=this.win.getViewPaneSize().height,g=a.call(this,b.$,c,e,-1,function(a){return 0<a});if(c=a.call(this,b.$,c,e,1,function(a){return a<f}),g)for(this.traverseSearch(g);!g.getParent().equals(b);)g=g.getParent();if(c)for(this.traverseSearch(c);!c.getParent().equals(b);)c=c.getParent();for(;(g||c)&&(g&&(g=g.getNext(d)),g&&!g.equals(c))&&(this.traverseSearch(g),c&&(c=c.getPrevious(d)),c&&!c.equals(g));)this.traverseSearch(c)}}(),greedySearch:function(){this.relations={};for(var a,b,c,e=this.editable.getElementsByTag("*"),f=0;a=e.getItem(f++);)if(!a.equals(this.editable)&&a.type==CKEDITOR.NODE_ELEMENT&&(a.hasAttribute("contenteditable")||!a.isReadOnly())&&d(a)&&a.isVisible())for(c in this.lookups)(b=this.lookups[c](a))&&this.store(a,b);return this.relations}},b.prototype={locate:function(){function a(a,b){var c=a.element[b===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return c&&d(c)?(a.siblingRect=c.getClientRect(),b==CKEDITOR.LINEUTILS_BEFORE?(a.siblingRect.bottom+a.elementRect.top)/2:(a.elementRect.bottom+a.siblingRect.top)/2):b==CKEDITOR.LINEUTILS_BEFORE?a.elementRect.top:a.elementRect.bottom;
}return function(b){var c;this.locations={};for(var d in b)c=b[d],c.elementRect=c.element.getClientRect(),c.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(d,CKEDITOR.LINEUTILS_BEFORE,a(c,CKEDITOR.LINEUTILS_BEFORE)),c.type&CKEDITOR.LINEUTILS_AFTER&&this.store(d,CKEDITOR.LINEUTILS_AFTER,a(c,CKEDITOR.LINEUTILS_AFTER)),c.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(d,CKEDITOR.LINEUTILS_INSIDE,(c.elementRect.top+c.elementRect.bottom)/2);return this.locations}}(),sort:function(){var a,b,c,d;return function(e,f){a=this.locations,b=[];for(var g in a)for(var h in a[g])if(c=Math.abs(e-a[g][h]),b.length){for(d=0;d<b.length;d++)if(c<b[d].dist){b.splice(d,0,{uid:+g,type:h,dist:c});break}d==b.length&&b.push({uid:+g,type:h,dist:c})}else b.push({uid:+g,type:h,dist:c});return"undefined"!=typeof f?b.slice(0,f):b}}(),store:function(a,b,c){this.locations[a]||(this.locations[a]={}),this.locations[a][b]=c}};var e={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},f={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};c.prototype={removeAll:function(){for(var a in this.hidden)this.hidden[a].remove(),delete this.hidden[a];for(a in this.visible)this.visible[a].remove(),delete this.visible[a]},hideLine:function(a){var b=a.getUniqueId();a.hide(),this.hidden[b]=a,delete this.visible[b]},showLine:function(a){var b=a.getUniqueId();a.show(),this.visible[b]=a,delete this.hidden[b]},hideVisible:function(){for(var a in this.visible)this.hideLine(this.visible[a])},placeLine:function(a,b){var c,d,e;if(c=this.getStyle(a.uid,a.type)){for(e in this.visible)if(this.visible[e].getCustomData("hash")!==this.hash){d=this.visible[e];break}if(!d)for(e in this.hidden)if(this.hidden[e].getCustomData("hash")!==this.hash){this.showLine(d=this.hidden[e]);break}d||this.showLine(d=this.addLine()),d.setCustomData("hash",this.hash),this.visible[d.getUniqueId()]=d,d.setStyles(c),b&&b(d)}},getStyle:function(a,b){var c=this.relations[a],d=this.locations[a][b],e={};if(e.width=c.siblingRect?Math.max(c.siblingRect.width,c.elementRect.width):c.elementRect.width,e.top=this.inline?d+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+d,e.top-this.winTopScroll.y<this.rect.top||e.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?e.left=c.elementRect.left-this.rect.relativeX:(0<c.elementRect.left?e.left=this.rect.left+c.elementRect.left:(e.width+=c.elementRect.left,e.left=this.rect.left),0<(c=e.left+e.width-(this.rect.left+this.winPane.width))&&(e.width-=c)),e.left+=this.winTopScroll.x;for(var f in e)e[f]=CKEDITOR.tools.cssLength(e[f]);return e},addLine:function(){var a=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return a.appendTo(this.container),a},prepare:function(a,b){this.relations=a,this.locations=b,this.hash=Math.random()},cleanup:function(){var a,b;for(b in this.visible)a=this.visible[b],a.getCustomData("hash")!==this.hash&&this.hideLine(a)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(a){a=a.getClientRect();var b=this.container.getDocumentPosition(),c=this.container.getComputedStyle("position");return a.relativeX=a.relativeY=0,"static"!=c&&(a.relativeY=b.y,a.relativeX=b.x,a.top-=a.relativeY,a.bottom-=a.relativeY,a.left-=a.relativeX,a.right-=a.relativeX),a}};var g={left:1,right:1,center:1},h={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:a,locator:b,liner:c}}(),function(){function a(a){return a.getName&&!a.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(a){if(CKEDITOR.env.webkit){var b=CKEDITOR.plugins.widgetselection;a.on("contentDom",function(a){a=a.editor;var c=a.editable();c.attachListener(c,"keydown",function(a){a.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){b.addFillers(c)||b.removeFillers(c)},0)},null,null,-1),a.on("selectionCheck",function(a){b.removeFillers(a.editor.editable())}),a.on("paste",function(a){a.data.dataValue=b.cleanPasteData(a.data.dataValue)}),"selectall"in a.plugins&&b.addSelectAllIntegration(a)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(b){var c=b.editor;if(!this.isWholeContentSelected(b)&&0<b.getChildCount()){var d=b.getFirst(a),e=b.getLast(a);if(d&&d.type==CKEDITOR.NODE_ELEMENT&&!d.isEditable()&&(this.startFiller=this.createFiller(),b.append(this.startFiller,1)),e&&e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable()&&(this.endFiller=this.createFiller(!0),b.append(this.endFiller,0)),this.hasFiller(b))return c=c.createRange(),c.selectNodeContents(b),c.select(),!0}return!1},removeFillers:function(a){if(this.hasFiller(a)&&!this.isWholeContentSelected(a)){var b=a.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),c=a.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&b&&this.startFiller.equals(b)?this.removeFiller(this.startFiller,a):this.startFiller=b,this.endFiller&&c&&this.endFiller.equals(c)?this.removeFiller(this.endFiller,a):this.endFiller=c}},cleanPasteData:function(a){return a&&a.length&&(a=a.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),a},isWholeContentSelected:function(a){var b=a.editor.getSelection().getRanges()[0];return!(!b||b&&b.collapsed)&&(b=b.clone(),b.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(b&&a&&b.startContainer&&b.endContainer&&0===b.startOffset&&b.endOffset===a.getChildCount()&&b.startContainer.equals(a)&&b.endContainer.equals(a)))},hasFiller:function(a){return 0<a.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(a){var b=new CKEDITOR.dom.element(this.fillerTagName);return b.setHtml(this.fillerContent),b.setAttribute(this.fillerAttribute,a?"end":"start"),b.setAttribute("data-cke-temp",1),b.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),b},removeFiller:function(a,b){if(a){var c,d,e=b.editor,f=b.editor.getSelection().getRanges()[0].startPath(),g=e.createRange();f.contains(a)&&(c=a.getHtml(),d=!0),f="start"==a.getAttribute(this.fillerAttribute),a.remove(),c&&0<c.length&&c!=this.fillerContent?(b.insertHtmlIntoRange(c,e.getSelection().getRanges()[0]),g.setStartAt(b.getChild(b.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),e.getSelection().selectRanges([g])):d&&(f?g.setStartAt(b.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):g.setEndAt(b.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),b.editor.getSelection().selectRanges([g]))}},createFillerRegex:function(a){var b=this.createFiller(a).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((a?"":"^")+b+(a?"$":""))},addSelectAllIntegration:function(a){var b=this;a.editable().attachListener(a,"beforeCommandExec",function(c){var d=a.editable();"selectAll"==c.data.name&&d&&b.addFillers(d)},null,null,9999)}}}(),function(){function a(a){this.editor=a,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},z(this),y(this),this.on("checkWidgets",g),this.editor.on("contentDomInvalidated",this.checkWidgets,this),x(this),u(this),v(this),t(this),w(this)}function b(a,c,d,e,f){var g=a.editor;CKEDITOR.tools.extend(this,e,{editor:g,id:c,inline:"span"==d.getParent().getName(),element:d,data:CKEDITOR.tools.extend({},"function"==typeof e.defaults?e.defaults():e.defaults),dataReady:!1,inited:!1,ready:!1,edit:b.prototype.edit,focusedEditable:null,definition:e,repository:a,draggable:!1!==e.draggable,_:{downcastFn:e.downcast&&"string"==typeof e.downcast?e.downcasts[e.downcast]:e.downcast}},!0),a.fire("instanceCreated",this),J(this,e),this.init&&this.init(),this.inited=!0,(a=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(a))),f&&this.setData(f),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,U(this),this.fire("data",this.data),this.isInited()&&g.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function c(a,b,c){CKEDITOR.dom.element.call(this,b.$),this.editor=a,this._={},b=this.filter=c.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=b?b.getAllowedEnterMode(a.enterMode):a.enterMode,this.shiftEnterMode=b?b.getAllowedEnterMode(a.shiftEnterMode,!0):a.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function d(a,b){a.addCommand(b.name,{exec:function(a,c){function d(){a.widgets.finalizeCreation(h)}var e=a.widgets.focused;if(e&&e.name==b.name)e.edit();else if(b.insert)b.insert({editor:a,commandData:c});else if(b.template){var f,e="function"==typeof b.defaults?b.defaults():b.defaults,e=CKEDITOR.dom.element.createFromHtml(b.template.output(e),a.document),g=a.widgets.wrapElement(e,b.name),h=new CKEDITOR.dom.documentFragment(g.getDocument());h.append(g),(f=a.widgets.initOn(e,b,c&&c.startupData))?(e=f.once("edit",function(b){b.data.dialog?f.once("dialog",function(b){b=b.data;var c,e;c=b.once("ok",d,null,null,20),e=b.once("cancel",function(b){b.data&&!1===b.data.hide||a.widgets.destroy(f,!0)}),b.once("hide",function(){c.removeListener(),e.removeListener()})}):d()},null,null,999),f.edit(),e.removeListener()):d()}},allowedContent:b.allowedContent,requiredContent:b.requiredContent,contentForms:b.contentForms,contentTransformations:b.contentTransformations})}function e(a,b){function c(a,c){var d,e,f=b.upcast.split(",");for(e=0;e<f.length;e++)if(d=f[e],d===a.name)return b.upcasts[d].call(this,a,c);return!1}function d(b,c,d){var e=CKEDITOR.tools.getIndex(a._.upcasts,function(a){return a[2]>d});0>e&&(e=a._.upcasts.length),a._.upcasts.splice(e,0,[CKEDITOR.tools.bind(b,c),c.name,d])}var e=b.upcast,f=b.upcastPriority||10;e&&("string"==typeof e?d(c,b,f):d(e,b,f))}function f(a,b){if(a.focused=null,b.isInited()){var c=b.editor.checkDirty();a.fire("widgetBlurred",{widget:b}),b.setFocused(!1),!c&&b.editor.resetDirty()}}function g(a){if(a=a.data,"wysiwyg"==this.editor.mode){var c,d,e,f,g=this.editor.editable(),h=this.instances;if(g){for(c in h)h[c].isReady()&&!g.contains(h[c].wrapper)&&this.destroy(h[c],!0);if(a&&a.initOnlyNew)h=this.initOnAll();else{var i=g.find(".cke_widget_wrapper"),h=[];for(c=0,d=i.count();c<d;c++){if(e=i.getItem(c),f=!this.getByElement(e,!0)){a:{f=p;for(var j=e;j=j.getParent();)if(f(j)){f=!0;break a}f=!1}f=!f}f&&g.contains(e)&&(e.addClass("cke_widget_new"),h.push(this.initOn(e.getFirst(b.isDomWidgetElement))))}}a&&a.focusInited&&1==h.length&&h[0].focus()}}}function h(a){if("undefined"!=typeof a.attributes&&a.attributes["data-widget"]){var b=i(a),c=j(a),d=!1;b&&b.value&&b.value.match(/^\s/g)&&(b.parent.attributes["data-cke-white-space-first"]=1,b.value=b.value.replace(/^\s/g,"&nbsp;"),d=!0),c&&c.value&&c.value.match(/\s$/g)&&(c.parent.attributes["data-cke-white-space-last"]=1,c.value=c.value.replace(/\s$/g,"&nbsp;"),d=!0),d&&(a.attributes["data-cke-widget-white-space"]=1)}}function i(a){return a.find(function(a){return 3===a.type},!0).shift()}function j(a){return a.find(function(a){return 3===a.type},!0).pop()}function k(a,b,c){if(!c.allowedContent&&!c.disallowedContent)return null;var d=this._.filters[a];return d||(this._.filters[a]=d={}),a=d[b],a||(a=c.allowedContent?new CKEDITOR.filter(c.allowedContent):this.editor.filter.clone(),d[b]=a,c.disallowedContent&&a.disallow(c.disallowedContent)),a}function l(a){var c=[],d=a._.upcasts,e=a._.upcastCallbacks;return{toBeWrapped:c,iterator:function(a){var f,g,h,i,j;if("data-cke-widget-wrapper"in a.attributes)return(a=a.getFirst(b.isParserWidgetElement))&&c.push([a]),!1;if("data-widget"in a.attributes)return c.push([a]),!1;if(j=d.length){if(a.attributes["data-cke-widget-upcasted"])return!1;for(i=0,f=e.length;i<f;++i)if(!1===e[i](a))return;for(i=0;i<j;++i)if(f=d[i],h={},g=f[0](a,h))return g instanceof CKEDITOR.htmlParser.element&&(a=g),a.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(h)),a.attributes["data-cke-widget-upcasted"]=1,c.push([a,f[1]]),!1}}}}function m(a,b){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(a?"inline":"block")+(b?" cke_widget_"+b:"")}}function n(a,b,c){if(a.type==CKEDITOR.NODE_ELEMENT){var d=CKEDITOR.dtd[a.name];if(d&&!d[c.name]){var d=a.split(b),e=a.parent;return b=d.getIndex(),a.children.length||(--b,a.remove()),d.children.length||d.remove(),n(e,b,c)}}a.add(c,b)}function o(a,b){return"boolean"==typeof a.inline?a.inline:!!CKEDITOR.dtd.$inline[b]}function p(a){return a.hasAttribute("data-cke-temp")}function q(a,b,c,d){var e=a.editor;e.fire("lockSnapshot"),c?(d=c.data("cke-widget-editable"),d=b.editables[d],a.widgetHoldingFocusedEditable=b,b.focusedEditable=d,c.addClass("cke_widget_editable_focused"),d.filter&&e.setActiveFilter(d.filter),e.setActiveEnterMode(d.enterMode,d.shiftEnterMode)):(d||b.focusedEditable.removeClass("cke_widget_editable_focused"),b.focusedEditable=null,a.widgetHoldingFocusedEditable=null,e.setActiveFilter(null),e.setActiveEnterMode(null,null)),e.fire("unlockSnapshot")}function r(a){a.contextMenu&&a.contextMenu.addListener(function(b){if(b=a.widgets.getByElement(b,!0))return b.fire("contextMenu",{})})}function s(a,b){return CKEDITOR.tools.trim(b)}function t(a){var c=a.editor,d=CKEDITOR.plugins.lineutils;c.on("dragstart",function(d){var e=d.data.target;b.isDomDragHandler(e)&&(e=a.getByElement(e),d.data.dataTransfer.setData("cke/widget-id",e.id),c.focus(),e.focus())}),c.on("drop",function(b){function d(a,b){return!(!a||!b)&&(a.wrapper.equals(b.wrapper)||a.wrapper.contains(b.wrapper))}var e=b.data.dataTransfer,f=e.getData("cke/widget-id"),g=e.getTransferType(c),e=c.createRange(),h=function(a){return a=a.getBoundaryNodes().startNode,a.type!==CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),c.widgets.getByElement(a)}(b.data.dropRange);""!==f&&g===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?b.cancel():g==CKEDITOR.DATA_TRANSFER_INTERNAL&&(""===f&&0<c.widgets.selected.length?b.data.dataTransfer.setData("text/html",I(c)):(f=a.instances[f])&&(d(f,h)?b.cancel():(e.setStartBefore(f.wrapper),e.setEndAfter(f.wrapper),b.data.dragRange=e,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,b.data.dataTransfer.setData("text/html",f.getClipboardHtml()),c.widgets.destroy(f,!0))))}),c.on("contentDom",function(){var e=c.editable();CKEDITOR.tools.extend(a,{finder:new d.finder(c,{lookups:{"default":function(c){if(!c.is(CKEDITOR.dtd.$listItem)&&c.is(CKEDITOR.dtd.$block)&&!b.isDomNestedEditable(c)&&!a._.draggedWidget.wrapper.contains(c)){var d=b.getNestedEditable(e,c);if(d){if(c=a._.draggedWidget,a.getByElement(d)==c)return;if(d=CKEDITOR.filter.instances[d.data("cke-filter")],c=c.requiredContent,d&&c&&!d.check(c))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new d.locator(c),liner:new d.liner(c,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function u(a){var c=a.editor;c.on("contentDom",function(){var d,e,f=c.editable(),g=f.isInline()?f:c.document;f.attachListener(g,"mousedown",function(f){var g=f.data.getTarget();d=g instanceof CKEDITOR.dom.element?a.getByElement(g):null,e=0,d&&(d.inline&&g.type==CKEDITOR.NODE_ELEMENT&&g.hasAttribute("data-cke-widget-drag-handler")?(e=1,a.focused!=d&&c.getSelection().removeAllRanges()):b.getNestedEditable(d.wrapper,g)?d=null:(f.data.preventDefault(),CKEDITOR.env.ie||d.focus()))}),f.attachListener(g,"mouseup",function(){e&&d&&d.wrapper&&(e=0,d.focus())}),CKEDITOR.env.ie&&f.attachListener(g,"mouseup",function(){setTimeout(function(){d&&d.wrapper&&f.contains(d.wrapper)&&(d.focus(),d=null)})})}),c.on("doubleclick",function(c){var d=a.getByElement(c.data.element);if(d&&!b.getNestedEditable(d.wrapper,c.data.element))return d.fire("doubleclick",{element:c.data.element})},null,null,1)}function v(a){a.editor.on("key",function(b){var c,d=a.focused,e=a.widgetHoldingFocusedEditable;return d?c=d.fire("key",{keyCode:b.data.keyCode}):e&&(d=b.data.keyCode,b=e.focusedEditable,d==CKEDITOR.CTRL+65?(d=b.getBogus(),e=e.editor.createRange(),e.selectNodeContents(b),d&&e.setEndAt(d,CKEDITOR.POSITION_BEFORE_START),e.select(),c=!1):8==d||46==d?(c=e.editor.getSelection().getRanges(),e=c[0],c=!(1==c.length&&e.collapsed&&e.checkBoundaryOfElement(b,CKEDITOR[8==d?"START":"END"]))):c=void 0),c},null,null,1)}function w(a){function b(b){1>a.selected.length||E(c,"cut"===b.name)}var c=a.editor;c.on("contentDom",function(){var a=c.editable();a.attachListener(a,"copy",b),a.attachListener(a,"cut",b)})}function x(a){function c(){var a=g.getSelection();if(a&&(a=a.getRanges()[0])&&!a.collapsed){var b=d(a.startContainer),c=d(a.endContainer);!b&&c?(a.setEndBefore(c.wrapper),a.select()):b&&!c&&(a.setStartAfter(b.wrapper),a.select())}}function d(a){return a?a.type==CKEDITOR.NODE_TEXT?d(a.getParent()):g.widgets.getByElement(a):null}function e(){a.fire("checkSelection")}var g=a.editor;g.on("selectionCheck",e),g.on("contentDom",function(){g.editable().attachListener(g,"key",function(){setTimeout(e,10)})}),CKEDITOR.env.ie||a.on("checkSelection",c),a.on("checkSelection",a.checkSelection,a),g.on("selectionChange",function(c){var d=(c=b.getNestedEditable(g.editable(),c.data.selection.getStartElement()))&&a.getByElement(c),e=a.widgetHoldingFocusedEditable;e?e===d&&e.focusedEditable.equals(c)||(q(a,e,null),d&&c&&q(a,d,c)):d&&c&&q(a,d,c)}),g.on("dataReady",function(){A(a).commit()}),g.on("blur",function(){var b;(b=a.focused)&&f(a,b),(b=a.widgetHoldingFocusedEditable)&&q(a,b,null)})}function y(a){var c=a.editor,d={};c.on("toDataFormat",function(c){var e=CKEDITOR.tools.getNextNumber(),f=[];c.data.downcastingSessionId=e,d[e]=f,c.data.dataValue.forEach(function(c){var d,e=c.attributes;if("data-cke-widget-white-space"in e){d=i(c);var g=j(c);d.parent.attributes["data-cke-white-space-first"]&&(d.value=d.value.replace(/^&nbsp;/g," ")),g.parent.attributes["data-cke-white-space-last"]&&(g.value=g.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in e)(e=a.instances[e["data-cke-widget-id"]])&&(d=c.getFirst(b.isParserWidgetElement),f.push({wrapper:c,element:d,widget:e,editables:{}}),"1"!=d.attributes["data-cke-widget-keep-attr"]&&delete d.attributes["data-widget"]);else if("data-cke-widget-editable"in e)return 0<f.length&&(f[f.length-1].editables[e["data-cke-widget-editable"]]=c),!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),c.on("toDataFormat",function(a){if(a.data.downcastingSessionId)for(var b,c,e,f,g,h,i=d[a.data.downcastingSessionId];b=i.shift();){c=b.widget,e=b.element,f=c._.downcastFn&&c._.downcastFn.call(c,e),a.data.widgetsCopy&&c.getClipboardHtml&&(f=CKEDITOR.htmlParser.fragment.fromHtml(c.getClipboardHtml()),f=f.children[0]);for(h in b.editables)g=b.editables[h],delete g.attributes.contenteditable,g.setHtml(c.editables[h].getData());f||(f=e),b.wrapper.replaceWith(f)}},null,null,13),c.on("contentDomUnload",function(){a.destroyAll(!0)})}function z(a){var c,d,e=a.editor;e.on("toHtml",function(d){var e,f=l(a);for(d.data.dataValue.forEach(f.iterator,CKEDITOR.NODE_ELEMENT,!0);e=f.toBeWrapped.pop();){var g=e[0],h=g.parent;h.type==CKEDITOR.NODE_ELEMENT&&h.attributes["data-cke-widget-wrapper"]&&h.replaceWith(g),a.wrapElement(e[0],e[1])}c=d.data.protectedWhitespaces?3==d.data.dataValue.children.length&&b.isParserWidgetWrapper(d.data.dataValue.children[1]):1==d.data.dataValue.children.length&&b.isParserWidgetWrapper(d.data.dataValue.children[0])},null,null,8),e.on("dataReady",function(){if(d)for(var c,f,g=e.editable().find(".cke_widget_wrapper"),h=0,i=g.count();h<i;++h)c=g.getItem(h),f=c.getFirst(b.isDomWidgetElement),f.type==CKEDITOR.NODE_ELEMENT&&f.data("widget")?(f.replace(c),a.wrapElement(f)):c.remove();d=0,a.destroyAll(!0),a.initOnAll()}),e.on("loadSnapshot",function(b){/data-cke-widget/.test(b.data)&&(d=1),a.destroyAll(!0)},null,null,9),e.on("paste",function(a){a=a.data,a.dataValue=a.dataValue.replace(W,s),a.range&&(a=b.getNestedEditable(e.editable(),a.range.startContainer))&&(a=CKEDITOR.filter.instances[a.data("cke-filter")])&&e.setActiveFilter(a)}),e.on("afterInsertHtml",function(b){b.data.intoRange?a.checkWidgets({initOnlyNew:!0}):(e.fire("lockSnapshot"),a.checkWidgets({initOnlyNew:!0,focusInited:c}),e.fire("unlockSnapshot"))})}function A(a){var b=a.selected,c=[],d=b.slice(0),e=null;return{select:function(a){return 0>CKEDITOR.tools.indexOf(b,a)&&c.push(a),a=CKEDITOR.tools.indexOf(d,a),0<=a&&d.splice(a,1),this},focus:function(a){return e=a,this},commit:function(){var g,h,i=a.focused!==e;for(a.editor.fire("lockSnapshot"),i&&(g=a.focused)&&f(a,g);g=d.pop();)b.splice(CKEDITOR.tools.indexOf(b,g),1),g.isInited()&&(h=g.editor.checkDirty(),g.setSelected(!1),!h&&g.editor.resetDirty());for(i&&e&&(h=a.editor.checkDirty(),a.focused=e,a.fire("widgetFocused",{widget:e}),e.setFocused(!0),!h&&a.editor.resetDirty());g=c.pop();)b.push(g),g.setSelected(!0);a.editor.fire("unlockSnapshot")}}}function B(a){a&&a.addFilterRule(function(a){return a.replace(/\s*cke_widget_selected/g,"").replace(/\s*cke_widget_focused/g,"").replace(/<span[^>]*cke_widget_drag_handler_container[^>]*.*?<\/span>/gim,"")})}function C(a,b,c){var d=0;b=F(b);var e,f=a.data.classes||{};if(b){for(f=CKEDITOR.tools.clone(f);e=b.pop();)c?f[e]||(d=f[e]=1):f[e]&&(delete f[e],d=1);d&&a.setData("classes",f)}}function D(a){a.cancel()}function E(a,b){var c,d,e,f=a.widgets.focused;Y.hasCopyBin(a)||(d=new Y(a,{beforeDestroy:function(){!b&&f&&f.focus(),e&&a.getSelection().selectBookmarks(e),c&&CKEDITOR.plugins.widgetselection.addFillers(a.editable())},afterDestroy:function(){b&&!a.readOnly&&(f?a.widgets.del(f):a.extractSelectedHtml(),a.fire("saveSnapshot"))}}),f||(c=CKEDITOR.env.webkit&&CKEDITOR.plugins.widgetselection.isWholeContentSelected(a.editable()),e=a.getSelection().createBookmarks(!0)),d.handle(I(a)))}function F(a){return(a=(a=a.getDefinition().attributes)&&a["class"])?a.split(/\s+/):null}function G(){var a=CKEDITOR.document.getActive(),b=this.editor,c=b.editable();(c.isInline()?c:b.document.getWindow().getFrame()).equals(a)&&b.focusManager.focus(c)}function H(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function I(a){var b=a.getSelectedHtml(!0);return a.widgets.focused?a.widgets.focused.getClipboardHtml():(a.once("toDataFormat",function(a){a.data.widgetsCopy=!0},null,null,-1),a.dataProcessor.toDataFormat(b))}function J(a,c){K(a),L(a),M(a),N(a),Q(a),S(a),T(a),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&a.wrapper.on("dragstart",function(c){var d=c.data.getTarget();b.getNestedEditable(a,d)||a.inline&&b.isDomDragHandler(d)||c.data.preventDefault()}),a.wrapper.removeClass("cke_widget_new"),a.element.addClass("cke_widget_element"),a.on("key",function(b){if(b=b.data.keyCode,13==b)a.edit();else{if(b==CKEDITOR.CTRL+67||b==CKEDITOR.CTRL+88)return void E(a.editor,b==CKEDITOR.CTRL+88);if(b in X||CKEDITOR.CTRL&b||CKEDITOR.ALT&b)return}return!1},null,null,999),a.on("doubleclick",function(b){a.edit()&&b.cancel()}),c.data&&a.on("data",c.data),c.edit&&a.on("edit",c.edit)}function K(a){(a.wrapper=a.element.getParent()).setAttribute("data-cke-widget-id",a.id)}function L(a,b){if(a.partSelectors||(a.partSelectors=a.parts),a.parts){var c,d,e={};for(d in a.partSelectors)b||!a.parts[d]||"string"==typeof a.parts[d]?(c=a.wrapper.findOne(a.partSelectors[d]),e[d]=c):e[d]=a.parts[d];a.parts=e}}function M(a){var b,c,d=a.editables;if(a.editables={},a.editables)for(b in d)c=d[b],a.initEditable(b,"string"==typeof c?{selector:c}:c)}function N(a){if(!0===a.mask)O(a);else if(a.mask){var b,c,d=new CKEDITOR.tools.buffers.throttle(250,P,a),e=CKEDITOR.env.gecko?300:0;if(a.on("focus",function(){d.input(),b=a.editor.on("change",d.input),c=a.on("blur",function(){b.removeListener(),c.removeListener()})}),a.editor.on("instanceReady",function(){setTimeout(function(){d.input()},e)}),a.editor.on("mode",function(){setTimeout(function(){d.input()},e)}),CKEDITOR.env.gecko){var f=a.element.find("img");CKEDITOR.tools.array.forEach(f.toArray(),function(a){a.on("load",function(){d.input()})})}for(var g in a.editables)a.editables[g].on("focus",function(){a.editor.on("change",d.input),c&&c.removeListener()}),a.editables[g].on("blur",function(){a.editor.removeListener("change",d.input)});d.input()}}function O(a){var b=a.wrapper.findOne(".cke_widget_mask");b||(b=new CKEDITOR.dom.element("img",a.editor.document),b.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_mask"}),a.wrapper.append(b)),a.mask=b}function P(){if(this.wrapper){this.maskPart=this.maskPart||this.mask;var a,b=this.parts[this.maskPart];if(b&&"string"!=typeof b){a=this.wrapper.findOne(".cke_widget_partial_mask"),a||(a=new CKEDITOR.dom.element("img",this.editor.document),a.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_partial_mask"}),this.wrapper.append(a)),this.mask=a;var c=a.$,d=b.$,e=!(c.offsetTop==d.offsetTop&&c.offsetLeft==d.offsetLeft);(c.offsetWidth!=d.offsetWidth||c.offsetHeight!=d.offsetHeight||e)&&(c=b.getParent(),d=CKEDITOR.plugins.widget.isDomWidget(c),a.setStyles({top:b.$.offsetTop+(d?0:c.$.offsetTop)+"px",left:b.$.offsetLeft+(d?0:c.$.offsetLeft)+"px",width:b.$.offsetWidth+"px",height:b.$.offsetHeight+"px"}))}}}function Q(a){if(a.draggable){var c,d=a.editor,e=a.wrapper.getLast(b.isDomDragHandlerContainer);e?c=e.findOne("img"):(e=new CKEDITOR.dom.element("span",d.document),e.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+d.plugins.widget.path+"images/handle.png);display:none;"}),c=new CKEDITOR.dom.element("img",d.document),c.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:d.lang.widget.move,height:15,role:"presentation"}),a.inline&&c.setAttribute("draggable","true"),e.append(c),a.wrapper.append(e)),a.wrapper.on("dragover",function(a){a.data.preventDefault()}),a.wrapper.on("mouseenter",a.updateDragHandlerPosition,a),setTimeout(function(){a.on("data",a.updateDragHandlerPosition,a)},50),!a.inline&&(c.on("mousedown",R,a),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&c.on("dragstart",function(a){a.data.preventDefault(!0)}),a.dragHandlerContainer=e}}function R(a){function b(){var b;for(m.reset();b=j.pop();)b.removeListener();var c=k;b=a.sender;var d=this.repository.finder,e=this.repository.liner,f=this.editor,g=this.editor.editable();CKEDITOR.tools.isEmpty(e.visible)||(c=d.getRange(c[0]),this.focus(),f.fire("drop",{dropRange:c,target:c.startContainer})),g.removeClass("cke_widget_dragging"),e.hideVisible(),f.fire("dragend",{target:b})}if(CKEDITOR.tools.getMouseButton(a)===CKEDITOR.MOUSE_BUTTON_LEFT){var c,d,e=this.repository.finder,f=this.repository.locator,g=this.repository.liner,h=this.editor,i=h.editable(),j=[],k=[];this.repository._.draggedWidget=this;var l=e.greedySearch(),m=CKEDITOR.tools.eventsBuffer(50,function(){c=f.locate(l),k=f.sort(d,1),k.length&&(g.prepare(l,c),g.placeLine(k[0]),g.cleanup())});i.addClass("cke_widget_dragging"),j.push(i.on("mousemove",function(a){d=a.data.$.clientY,m.input()})),h.fire("dragstart",{target:a.sender}),j.push(h.document.once("mouseup",b,this)),i.isInline()||j.push(CKEDITOR.document.once("mouseup",b,this))}}function S(a){var b=null;a.on("data",function(){var a,c=this.data.classes;if(b!=c){for(a in b)c&&c[a]||this.removeClass(a);for(a in c)this.addClass(a);b=c}})}function T(a){a.on("data",function(){if(a.wrapper){var b=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());a.wrapper.setAttribute("role","region"),a.wrapper.setAttribute("aria-label",b)}},null,null,9999)}function U(a){a.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(a.data)))}function V(){function a(){}function c(a,b,c){return!(!c||!this.checkElement(a))&&((a=c.widgets.getByElement(a,!0))&&a.checkStyleActive(this))}function d(a){function b(a,b,c){for(var d=a.length,e=0;e<d;){if(b.call(c,a[e],e,a))return a[e];e++}}function c(a){function b(a,c){var d=CKEDITOR.tools.object.keys(a),e=CKEDITOR.tools.object.keys(c);if(d.length!==e.length)return!1;for(var f in a)if(("object"!=typeof a[f]||"object"!=typeof c[f]||!b(a[f],c[f]))&&a[f]!==c[f])return!1;return!0}return function(c){return b(a.getDefinition(),c.getDefinition())}}var d,f=a.widget;e[f]||(e[f]={});for(var g=0,h=a.group.length;g<h;g++)d=a.group[g],e[f][d]||(e[f][d]=[]),d=e[f][d],b(d,c(a))||d.push(a)}var e={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(a){this.widget=a.widget,(this.group="string"==typeof a.group?[a.group]:a.group)&&d(this)},apply:function(a){var b;a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&(b=a.widgets.focused,this.group&&this.removeStylesFromSameGroup(a),b.applyStyle(this))},remove:function(a){a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&a.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(a){var b,c,d=!1;if(!(a instanceof CKEDITOR.editor))return!1;if(c=a.elementPath(),this.checkApplicable(c,a))for(var f=0,g=this.group.length;f<g;f++){b=e[this.widget][this.group[f]];for(var h=0;h<b.length;h++)b[h]!==this&&b[h].checkActive(c,a)&&(a.widgets.focused.removeStyle(b[h]),d=!0)}return d},checkActive:function(a,b){return this.checkElementMatch(a.lastElement,0,b)},checkApplicable:function(a,b){return b instanceof CKEDITOR.editor&&this.checkElement(a.lastElement)},checkElementMatch:c,checkElementRemovable:c,checkElement:function(a){return!!b.isDomWidgetWrapper(a)&&((a=a.getFirst(b.isDomWidgetElement))&&a.data("widget")==this.widget)},buildPreview:function(a){return a||this._.definition.name},toAllowedContentRules:function(a){if(!a)return null;a=a.widgets.registered[this.widget];var b,c={};return a?a.styleableElements?(b=this.getClassesArray())?(c[a.styleableElements]={classes:b,propertiesOnly:!0},c):null:a.styleToAllowedContentRules?a.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var a=this._.definition.attributes&&this._.definition.attributes["class"];return a?CKEDITOR.tools.trim(a).split(/\s+/):null},applyToRange:a,removeFromRange:a,applyToObject:a})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss('.cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:block;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}.cke_editable[contenteditable="false"] .cke_widget_drag_handler_container{display:none;}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_widget_partial_mask{position:absolute;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}'),V())},beforeInit:function(b){void 0!==CKEDITOR.document.$.querySelectorAll&&(b.widgets=new a(b))},afterInit:function(a){if(void 0!==CKEDITOR.document.$.querySelectorAll){
var b,c,d,e=a.widgets.registered;for(c in e)b=e[c],(d=b.button)&&a.ui.addButton&&a.ui.addButton(CKEDITOR.tools.capitalize(b.name,!0),{label:d,command:b.name,toolbar:"insert,10"});r(a),B(a.undoManager)}}}),a.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(a,b){var c=this.editor;if(b=CKEDITOR.tools.prototypedCopy(b),b.name=a,b._=b._||{},c.fire("widgetDefinition",b),b.template&&(b.template=new CKEDITOR.template(b.template)),d(c,b),e(this,b),this.registered[a]=b,b.dialog&&c.plugins.dialog)var f=CKEDITOR.on("dialogDefinition",function(a){a=a.data.definition;var d=a.dialog;a.getMode||d.getName()!==b.dialog||(a.getMode=function(){var a=d.getModel(c);return a&&a instanceof CKEDITOR.plugins.widget&&a.ready?CKEDITOR.dialog.EDITING_MODE:CKEDITOR.dialog.CREATION_MODE}),f.removeListener()});return b},addUpcastCallback:function(a){this._.upcastCallbacks.push(a)},checkSelection:function(){if(this.editor.getSelection()){var a,c=this.editor.getSelection(),d=c.getSelectedElement(),e=A(this);if(d&&(a=this.getByElement(d,!0)))return e.focus(a).select(a).commit();if(c=c.getRanges()[0],!c||c.collapsed)return e.commit();for(c=new CKEDITOR.dom.walker(c),c.evaluator=b.isDomWidgetWrapper;d=c.next();)e.select(this.getByElement(d));e.commit()}},checkWidgets:function(a){this.fire("checkWidgets",CKEDITOR.tools.copy(a||{}))},del:function(a){if(this.focused===a){var b,c=a.editor,d=c.createRange();(b=d.moveToClosestEditablePosition(a.wrapper,!0))||(b=d.moveToClosestEditablePosition(a.wrapper,!1)),b&&c.getSelection().selectRanges([d])}a.wrapper.remove(),this.destroy(a,!0)},destroy:function(a,b){this.widgetHoldingFocusedEditable===a&&q(this,a,null,b),a.destroy(b),delete this.instances[a.id],this.fire("instanceDestroyed",a)},destroyAll:function(a,b){var c,d,e=this.instances;if(b&&!a){d=b.find(".cke_widget_wrapper");for(var e=d.count(),f=0;f<e;++f)(c=this.getByElement(d.getItem(f),!0))&&this.destroy(c)}else for(d in e)c=e[d],this.destroy(c,a)},finalizeCreation:function(a){(a=a.getFirst())&&b.isDomWidgetWrapper(a)&&(this.editor.insertElement(a),a=this.getByElement(a),a.ready=!0,a.fire("ready"),a.focus())},getByElement:function(){function a(a){return a.is(b)&&a.data("cke-widget-id")}var b={div:1,span:1};return function(b,c){if(!b)return null;var d=a(b);if(!c&&!d){var e=this.editor.editable();do b=b.getParent();while(b&&!b.equals(e)&&!(d=a(b)))}return this.instances[d]||null}}(),initOn:function(a,c,d){if(c?"string"==typeof c&&(c=this.registered[c]):c=this.registered[a.data("widget")],!c)return null;var e=this.wrapElement(a,c.name);return e?e.hasClass("cke_widget_new")?(a=new b(this,(this._.nextId++),a,c,d),a.isInited()?this.instances[a.id]=a:null):this.getByElement(a):null},initOnAll:function(a){a=(a||this.editor.editable()).find(".cke_widget_new");for(var c,d=[],e=a.count();e--;)(c=this.initOn(a.getItem(e).getFirst(b.isDomWidgetElement)))&&d.push(c);return d},onWidget:function(a){var b=Array.prototype.slice.call(arguments);b.shift();for(var c in this.instances){var d=this.instances[c];d.name==a&&d.on.apply(d,b)}this.on("instanceCreated",function(c){c=c.data,c.name==a&&c.on.apply(c,b)})},parseElementClasses:function(a){if(!a)return null;a=CKEDITOR.tools.trim(a).split(/\s+/);for(var b,c={},d=0;b=a.pop();)-1==b.indexOf("cke_")&&(c[b]=d=1);return d?c:null},wrapElement:function(a,b){var c,d,e=null;if(a instanceof CKEDITOR.dom.element){if(b=b||a.data("widget"),c=this.registered[b],!c)return null;if((e=a.getParent())&&e.type==CKEDITOR.NODE_ELEMENT&&e.data("cke-widget-wrapper"))return e;a.hasAttribute("data-cke-widget-keep-attr")||a.data("cke-widget-keep-attr",a.data("widget")?1:0),a.data("widget",b),(d=o(c,a.getName()))&&h(a),e=new CKEDITOR.dom.element(d?"span":"div",a.getDocument()),e.setAttributes(m(d,b)),e.data("cke-display-name",c.pathName?c.pathName:a.getName()),a.getParent(!0)&&e.replace(a),a.appendTo(e)}else if(a instanceof CKEDITOR.htmlParser.element){if(b=b||a.attributes["data-widget"],c=this.registered[b],!c)return null;if((e=a.parent)&&e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-widget-wrapper"])return e;"data-cke-widget-keep-attr"in a.attributes||(a.attributes["data-cke-widget-keep-attr"]=a.attributes["data-widget"]?1:0),b&&(a.attributes["data-widget"]=b),(d=o(c,a.name))&&h(a),e=new CKEDITOR.htmlParser.element(d?"span":"div",m(d,b)),e.attributes["data-cke-display-name"]=c.pathName?c.pathName:a.name,c=a.parent;var f;c&&(f=a.getIndex(),a.remove()),e.add(a),c&&n(c,f,e)}return e},_tests_createEditableFilter:k},CKEDITOR.event.implementOn(a.prototype),b.prototype={addClass:function(a){this.element.addClass(a),this.wrapper.addClass(b.WRAPPER_CLASS_PREFIX+a)},applyStyle:function(a){C(this,a,1)},checkStyleActive:function(a){a=F(a);var b;if(!a)return!1;for(;b=a.pop();)if(!this.hasClass(b))return!1;return!0},destroy:function(a){if(this.fire("destroy"),this.editables)for(var b in this.editables)this.destroyEditable(b,a);a||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(a,b){var c=this.editables[a],d=!0;if(c.removeListener("focus",H),c.removeListener("blur",G),this.editor.focusManager.remove(c),c.filter){for(var e in this.repository.instances){var f=this.repository.instances[e];f.editables&&(f=f.editables[a])&&f!==c&&c.filter===f.filter&&(d=!1)}d&&(c.filter.destroy(),(d=this.repository._.filters[this.name])&&delete d[a])}b||(this.repository.destroyAll(!1,c),c.removeClass("cke_widget_editable"),c.removeClass("cke_widget_editable_focused"),c.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[a]},edit:function(){var a={dialog:this.dialog},b=this;return!(!1===this.fire("edit",a)||!a.dialog)&&(this.editor.openDialog(a.dialog,function(a){var c,d;!1!==b.fire("dialog",a)&&(c=a.on("show",function(){a.setupContent(b)}),d=a.on("ok",function(){var c,d=b.on("data",function(a){c=1,a.cancel()},null,null,0);b.editor.fire("saveSnapshot"),a.commitContent(b),d.removeListener(),c&&(b.fire("data",b.data),b.editor.fire("saveSnapshot"))}),a.once("hide",function(){c.removeListener(),d.removeListener()}))},b),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},getClipboardHtml:function(){var a=this.editor.createRange();return a.setStartBefore(this.wrapper),a.setEndAfter(this.wrapper),this.editor.editable().getHtmlFromRange(a).getHtml()},hasClass:function(a){return this.element.hasClass(a)},initEditable:function(a,b){var d=this._findOneNotNested(b.selector);return!(!d||!d.is(CKEDITOR.dtd.$editable))&&(d=new c(this.editor,d,{filter:k.call(this.repository,this.name,a,b)}),this.editables[a]=d,d.setAttributes({contenteditable:"true","data-cke-widget-editable":a,"data-cke-enter-mode":d.enterMode}),d.filter&&d.data("cke-filter",d.filter.id),d.addClass("cke_widget_editable"),d.removeClass("cke_widget_editable_focused"),b.pathName&&d.data("cke-display-name",b.pathName),this.editor.focusManager.add(d),d.on("focus",H,this),CKEDITOR.env.ie&&d.on("blur",G,this),d._.initialSetData=!0,d.setData(d.getHtml()),!0)},_findOneNotNested:function(a){a=this.wrapper.find(a);for(var c,d,e=0;e<a.count();e++)if(c=a.getItem(e),d=c.getAscendant(b.isDomWidgetWrapper),this.wrapper.equals(d))return c;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var a=this.editor.getSelection();if(a){var b=this.editor.checkDirty();a.fake(this.wrapper),!b&&this.editor.resetDirty()}this.editor.focus()},refreshMask:function(){N(this)},refreshParts:function(a){L(this,"undefined"==typeof a||a)},removeClass:function(a){this.element.removeClass(a),this.wrapper.removeClass(b.WRAPPER_CLASS_PREFIX+a)},removeStyle:function(a){C(this,a,0)},setData:function(a,b){var c=this.data,d=0;if("string"==typeof a)c[a]!==b&&(c[a]=b,d=1);else{var e=a;for(a in e)c[a]!==e[a]&&(d=1,c[a]=e[a])}return d&&this.dataReady&&(U(this),this.fire("data",c)),this},setFocused:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_focused"),this.fire(a?"focus":"blur"),this},setSelected:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_selected"),this.fire(a?"select":"deselect"),this},updateDragHandlerPosition:function(){var a=this.editor,b=this.element.$,c=this._.dragHandlerOffset,b={x:b.offsetLeft,y:b.offsetTop-15};c&&b.x==c.x&&b.y==c.y||(c=a.checkDirty(),a.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px"}),this.dragHandlerContainer.removeStyle("display"),a.fire("unlockSnapshot"),!c&&a.resetDirty(),this._.dragHandlerOffset=b)}},CKEDITOR.event.implementOn(b.prototype),b.getNestedEditable=function(a,c){return!c||c.equals(a)?null:b.isDomNestedEditable(c)?c:b.getNestedEditable(a,c.getParent())},b.isDomDragHandler=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")},b.isDomDragHandlerContainer=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_widget_drag_handler_container")},b.isDomNestedEditable=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-editable")},b.isDomWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-widget")},b.isDomWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-wrapper")},b.isDomWidget=function(a){return!!a&&(this.isDomWidgetWrapper(a)||this.isDomWidgetElement(a))},b.isParserWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-widget"]},b.isParserWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-cke-widget-wrapper"]},b.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",c.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(a){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,a=this.editor.dataProcessor.unprotectSource(a),a=this.editor.dataProcessor.toHtml(a,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(a),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var W=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,X={37:1,38:1,39:1,40:1,8:1,46:1};X[CKEDITOR.SHIFT+121]=1;var Y=CKEDITOR.tools.createClass({$:function(a,b){this._.createCopyBin(a,b),this._.createListeners(b)},_:{createCopyBin:function(a){var b=a.document,c=CKEDITOR.env.edge&&16<=CKEDITOR.env.version,d=!a.blockless&&!CKEDITOR.env.ie||c?"div":"span",c=b.createElement(d),b=b.createElement(d);b.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),c.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),c.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-5000px"),this.editor=a,this.copyBin=c,this.container=b},createListeners:function(a){a&&(a.beforeDestroy&&(this.beforeDestroy=a.beforeDestroy),a.afterDestroy&&(this.afterDestroy=a.afterDestroy))}},proto:{handle:function(a){var b,c,d,e=this.copyBin,f=this.editor,g=this.container,h=CKEDITOR.env.ie&&9>CKEDITOR.env.version,i=f.document.getDocumentElement().$,j=f.createRange(),k=this,l=CKEDITOR.env.mac&&CKEDITOR.env.webkit,m=l?100:0,n=window.requestAnimationFrame&&!l?requestAnimationFrame:setTimeout;return e.setHtml('<span data-cke-copybin-start="1">​</span>'+a+'<span data-cke-copybin-end="1">​</span>'),f.fire("lockSnapshot"),g.append(e),f.editable().append(g),b=f.on("selectionChange",D,null,null,0),c=f.widgets.on("checkSelection",D,null,null,0),h&&(d=i.scrollTop),j.selectNodeContents(e),j.select(),h&&(i.scrollTop=d),new CKEDITOR.tools.promise(function(a){n(function(){k.beforeDestroy&&k.beforeDestroy(),g.remove(),b.removeListener(),c.removeListener(),f.fire("unlockSnapshot"),k.afterDestroy&&k.afterDestroy(),a()},m)})}},statics:{hasCopyBin:function(a){return!!Y.getCopyBin(a)},getCopyBin:function(a){return a.document.getById("cke_copybin")}}});CKEDITOR.plugins.widget=b,b.repository=a,b.nestedEditable=c}(),function(){function a(a,b,c){this.editor=a,this.notification=null,this._message=new CKEDITOR.template(b),this._singularMessage=c?new CKEDITOR.template(c):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function b(a){this._weight=a||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),a.prototype={createTask:function(a){a=a||{};var b,c=!this.notification;return c&&(this.notification=this._createNotification()),b=this._addTask(a),b.on("updated",this._onTaskUpdate,this),b.on("done",this._onTaskDone,this),b.on("canceled",function(){this._removeTask(b)},this),this.update(),c&&this.notification.show(),b},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var a=this.getTaskCount(),b={current:this.getDoneTaskCount(),max:a,percentage:Math.round(100*this.getPercentage())};return(1==a&&this._singularMessage?this._singularMessage:this._message).output(b)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(a){return a=new b(a.weight),this._tasks.push(a),this._totalWeights+=a._weight,a},_removeTask:function(a){var b=CKEDITOR.tools.indexOf(this._tasks,a);-1!==b&&(a._doneWeight&&(this._doneWeights-=a._doneWeight),this._totalWeights-=a._weight,this._tasks.splice(b,1),this.update())},_onTaskUpdate:function(a){this._doneWeights+=a.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(a.prototype),b.prototype={done:function(){this.update(this._weight)},update:function(a){if(!this.isDone()&&!this.isCanceled()){a=Math.min(this._weight,a);var b=a-this._doneWeight;this._doneWeight=a,this.fire("updated",b),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(b.prototype),CKEDITOR.plugins.notificationAggregator=a,CKEDITOR.plugins.notificationAggregator.task=b}(),function(){CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(a){a.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(a,b,c){var d=CKEDITOR.fileTools,e=a.uploadRepository,f=c.supportedTypes?10:20;c.fileToElement&&a.on("paste",function(c){c=c.data;var f,g,h=a.widgets.registered[b],i=c.dataTransfer,j=i.getFilesCount(),k=h.loadMethod||"loadAndUpload";if(!c.dataValue&&j)for(g=0;g<j;g++)if(f=i.getFile(g),!h.supportedTypes||d.isTypeSupported(f,h.supportedTypes)){var l=h.fileToElement(f);f=e.create(f,void 0,h.loaderType),l&&(f[k](h.uploadUrl,h.additionalRequestParameters),CKEDITOR.fileTools.markElement(l,b,f.id),"loadAndUpload"!=k&&"upload"!=k||h.skipNotifications||CKEDITOR.fileTools.bindNotifications(a,f),c.dataValue+=l.getOuterHtml())}},null,null,f),CKEDITOR.tools.extend(c,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var b,c,d=this,f=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),g=e.loaders[f],h=CKEDITOR.tools.capitalize;g.on("update",function(e){"abort"===g.status&&"function"==typeof d.onAbort&&d.onAbort(g),d.wrapper&&d.wrapper.getParent()?(a.fire("lockSnapshot"),e="on"+h(g.status),"abort"!==g.status&&"function"==typeof d[e]&&!1===d[e](g)||(c="cke_upload_"+g.status,d.wrapper&&c!=b&&(b&&d.wrapper.removeClass(b),d.wrapper.addClass(c),b=c),"error"!=g.status&&"abort"!=g.status||a.widgets.del(d)),a.fire("unlockSnapshot")):(CKEDITOR.instances[a.name]&&a.editable().find('[data-cke-upload-id="'+f+'"]').count()||g.abort(),e.removeListener())}),g.update()},replaceWith:function(b,c){if(""===b.trim())a.widgets.del(this);else{var d,e,f=this==a.widgets.focused,g=a.editable(),h=a.createRange();f||(e=a.getSelection().createBookmarks()),h.setStartBefore(this.wrapper),h.setEndAfter(this.wrapper),f&&(d=h.createBookmark()),g.insertHtmlIntoRange(b,h,c),a.widgets.checkWidgets({initOnlyNew:!0}),a.widgets.destroy(this,!0),f?(h.moveToBookmark(d),h.select()):a.getSelection().selectBookmarks(e)}},_getLoader:function(){var a=this.wrapper.findOne("[data-cke-upload-id]");return a?this.editor.uploadRepository.loaders[a.data("cke-upload-id")]:null}}),a.widgets.add(b,c)},markElement:function(a,b,c){a.setAttributes({"data-cke-upload-id":c,"data-widget":b})},bindNotifications:function(a,b){function c(){d=a._.uploadWidgetNotificaionAggregator,d&&!d.isFinished()||(d=a._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(a,a.lang.uploadwidget.uploadMany,a.lang.uploadwidget.uploadOne),d.once("finished",function(){var b=d.getTaskCount();0===b?d.notification.hide():d.notification.update({message:1==b?a.lang.uploadwidget.doneOne:a.lang.uploadwidget.doneMany.replace("%1",b),type:"success",important:1})}))}var d,e=null;b.on("update",function(){!e&&b.uploadTotal&&(c(),e=d.createTask({weight:b.uploadTotal})),e&&"uploading"==b.status&&e.update(b.uploaded)}),b.on("uploaded",function(){e&&e.done()}),b.on("error",function(){e&&e.cancel(),a.showNotification(b.message,"warning")}),b.on("abort",function(){e&&e.cancel(),CKEDITOR.instances[a.name]&&a.showNotification(a.lang.uploadwidget.abort,"info")})}})}(),function(){function a(a){return 9>=a&&(a="0"+a),String(a)}function b(b){var d=new Date,d=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()];return c+=1,"image-"+CKEDITOR.tools.array.map(d,a).join("")+"-"+c+"."+b}var c=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(a){if(this.isSupportedEnvironment()){var c=CKEDITOR.fileTools,d=c.getUploadUrl(a.config,"image");d&&(c.addUploadWidget(a,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:d,fileToElement:function(){var a=new CKEDITOR.dom.element("img");return a.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),a},parts:{img:"img"},onUploading:function(a){this.parts.img.setAttribute("src",a.data)},onUploaded:function(a){var b=this.parts.img.$;this.replaceWith('<img src="'+a.url+'" width="'+(a.responseData.width||b.naturalWidth)+'" height="'+(a.responseData.height||b.naturalHeight)+'">')}}),a.on("paste",function(e){if(e.data.dataValue.match(/<img[\s\S]+data:/i)){e=e.data;var f,g,h,i=document.implementation.createHTMLDocument(""),i=new CKEDITOR.dom.element(i.body);for(i.data("cke-editable",1),i.appendHtml(e.dataValue),f=i.find("img"),h=0;h<f.count();h++){g=f.getItem(h);var j=g.getAttribute("src"),k=j&&"data:"==j.substring(0,5),l=null===g.data("cke-realelement");k&&l&&!g.data("cke-upload-id")&&!g.isReadOnly(1)&&(k=(k=j.match(/image\/([a-z]+?);/i))&&k[1]||"jpg",j=a.uploadRepository.create(j,b(k)),j.upload(d),c.markElement(g,"uploadimage",j.id),c.bindNotifications(a,j))}e.dataValue=i.getHtml()}}))}}})}(),function(){function a(a){function c(a){var b=!1;h.attachListener(h,"keydown",function(){var c=e.getBody().getElementsByTag(a);if(!b){for(var d=0;d<c.count();d++)c.getItem(d).setCustomData("retain",!0);b=!0}},null,null,1),h.attachListener(h,"keyup",function(){var c=e.getElementsByTag(a);b&&(1==c.count()&&!c.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(c.getItem(0).getAttributes())&&c.getItem(0).remove(1),b=!1)})}var d=this.editor;if(d&&!d.isDetached()){var e=a.document,f=e.body,g=e.getElementById("cke_actscrpt");g&&g.parentNode.removeChild(g),(g=e.getElementById("cke_shimscrpt"))&&g.parentNode.removeChild(g),(g=e.getElementById("cke_basetagscrpt"))&&g.parentNode.removeChild(g),f.contentEditable=!0,CKEDITOR.env.ie&&(f.hideFocus=!0,f.disabled=!0,f.removeAttribute("disabled")),delete this._.isLoadingData,this.$=f,e=new CKEDITOR.dom.document(e),this.setup(),this.fixInitialSelection();var h=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&e.getDocumentElement().addClass(e.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&d.enterMode!=CKEDITOR.ENTER_P?c("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&d.enterMode!=CKEDITOR.ENTER_DIV&&c("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&e.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){d.editable().focus()})}),b(d);try{d.document.$.execCommand("2D-position",!1,!0)}catch(i){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==d.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){d.getSelection().scrollIntoView()},0);else if(d.window.$.innerHeight>this.$.offsetHeight){var c=d.createRange();c[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),c.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(e,"blur",function(){try{e.$.selection.empty()}catch(a){}}),CKEDITOR.env.iOS&&this.attachListener(e,"touchend",function(){a.focus()}),f=d.document.getElementsByTag("title").getItem(0),f.data("cke-title",f.getText()),CKEDITOR.env.ie&&(d.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),d.fire("contentDom"),this._.isPendingFocus&&(d.focus(),this._.isPendingFocus=!1),setTimeout(function(){d.fire("dataReady")},0)},0,this)}}function b(a){function b(){var b;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(b&&(b.detachEvent("onresizestart",c),b=null),d.$.attachEvent("onresizestart",c),b=d.$)})}function c(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var d=a.document.$;d.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),d.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&b(a)}function c(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var b,c=[];for(b in CKEDITOR.dtd.$removeEmpty)c.push("html.CSS1Compat "+b+"[contenteditable=false]");a.push(c.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}var d;CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(b){function c(c){c&&c.removeListener(),a.isDestroyed()||a.isDetached()||(a.editable(new d(a,f.$.contentWindow.document.body)),a.setData(a.getData(1),b))}var e="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",f=CKEDITOR.dom.element.createFromHtml('<iframe src="'+e+'" frameBorder="0"></iframe>');f.setStyles({width:"100%",height:"100%"}),f.addClass("cke_wysiwyg_frame").addClass("cke_reset"),e=a.ui.space("contents"),e.append(f);var g=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;g&&f.on("load",c);var h=a.title,i=a.fire("ariaEditorHelpLabel",{}).label;if(h&&(CKEDITOR.env.ie&&i&&(h+=", "+i),f.setAttribute("title",h)),i){var h=CKEDITOR.tools.getNextId(),j=CKEDITOR.dom.element.createFromHtml('<span id="'+h+'" class="cke_voice_label">'+i+"</span>");e.append(j,1),f.setAttribute("aria-describedby",h)}a.on("beforeModeUnload",function(a){a.removeListener(),j&&j.remove()}),f.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!g&&c(),a.fire("ariaWidget",f)})}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var b=this.config,c=b.contentsCss;CKEDITOR.tools.isArray(c)||(b.contentsCss=c?[c]:[]),b.contentsCss.push(a)},d=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(b){CKEDITOR.tools.setTimeout(a,0,this,b)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,b){var d=this.editor;if(b)this.setHtml(a),this.fixInitialSelection(),d.fire("dataReady");else{this._.isLoadingData=!0,d._.dataStore={id:1};var e=d.config,f=e.fullPage,g=e.docType,h=CKEDITOR.tools.buildStyleHtml(c()).replace(/<style>/,'<style data-cke-temp="1">');f||(h+=CKEDITOR.tools.buildStyleHtml(d.config.contentsCss));var i=e.baseHref?'<base href="'+e.baseHref+'" data-cke-temp="1" />':"";f&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return d.docType=g=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return d.xmlDeclaration=a,""})),a=d.dataProcessor.toHtml(a),f?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),i&&(a=a.replace(/<head[^>]*?>/,"$&"+i)),a=a.replace(/<\/head\s*>/,h+"$&"),a=g+a):a=e.docType+'<html dir="'+e.contentsLangDirection+'" lang="'+(e.contentsLanguage||d.langCode)+'"><head><title>'+this._.docTitle+"</title>"+i+h+"</head><body"+(e.bodyId?' id="'+e.bodyId+'"':"")+(e.bodyClass?' class="'+e.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),e='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(e+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),i&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(e+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,e),this.clearCustomData(),this.clearListeners(),d.fire("contentDomUnload");var j=this.getDocument();try{j.write(a)}catch(k){setTimeout(function(){j.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var b=a.config,c=b.fullPage,d=c&&a.docType,e=c&&a.xmlDeclaration,f=this.getDocument(),c=c?f.getDocumentElement().getOuterHtml():f.getBody().getHtml();return CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),c=a.dataProcessor.toDataFormat(c),e&&(c=e+"\n"+c),d&&(c=d+"\n"+c),c},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:d.baseProto.focus.call(this)},detach:function(){var a=this.editor,b=a.document,a=a.container.findOne("iframe.cke_wysiwyg_frame");d.baseProto.detach.call(this),this.clearCustomData(this._.expandoNumber),b.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),a&&(a.clearCustomData(),(b=a.removeCustomData("onResize"))&&b.removeListener(),a.isDetached()||a.remove())}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,xml,ajax,pastetools,pastefromgdocs,pastefromlibreoffice,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var a=function(a,b){var c=CKEDITOR.getUrl("plugins/"+b);a=a.split(",");for(var d=0;d<a.length;d++)CKEDITOR.skin.icons[a[d]]={path:c,offset:-a[++d],bgsize:a[++d]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,exportpdf,792,,find-rtl,816,,find,840,,replace,864,,flash,888,,button,912,,checkbox,936,,form,960,,hiddenfield,984,,imagebutton,1008,,radio,1032,,select-rtl,1056,,select,1080,,textarea-rtl,1104,,textarea,1128,,textfield-rtl,1152,,textfield,1176,,horizontalrule,1200,,iframe,1224,,image,1248,,indent-rtl,1272,,indent,1296,,outdent-rtl,1320,,outdent,1344,,justifyblock,1368,,justifycenter,1392,,justifyleft,1416,,justifyright,1440,,language,1464,,anchor-rtl,1488,,anchor,1512,,link,1536,,unlink,1560,,bulletedlist-rtl,1584,,bulletedlist,1608,,numberedlist-rtl,1632,,numberedlist,1656,,mathjax,1680,,maximize,1704,,newpage-rtl,1728,,newpage,1752,,pagebreak-rtl,1776,,pagebreak,1800,,pastefromword-rtl,1824,,pastefromword,1848,,pastetext-rtl,1872,,pastetext,1896,,placeholder,1920,,preview-rtl,1944,,preview,1968,,print,1992,,removeformat,2016,,save,2040,,scayt,2064,,selectall,2088,,showblocks-rtl,2112,,showblocks,2136,,smiley,2160,,source-rtl,2184,,source,2208,,sourcedialog-rtl,2232,,sourcedialog,2256,,specialchar,2280,,table,2304,,templates-rtl,2328,,templates,2352,,uicolor,2376,,redo-rtl,2400,,redo,2424,,undo-rtl,2448,,undo,2472,,simplebox,4992,auto,spellchecker,2520,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,exportpdf,792,auto,find-rtl,816,auto,find,840,auto,replace,864,auto,flash,888,auto,button,912,auto,checkbox,936,auto,form,960,auto,hiddenfield,984,auto,imagebutton,1008,auto,radio,1032,auto,select-rtl,1056,auto,select,1080,auto,textarea-rtl,1104,auto,textarea,1128,auto,textfield-rtl,1152,auto,textfield,1176,auto,horizontalrule,1200,auto,iframe,1224,auto,image,1248,auto,indent-rtl,1272,auto,indent,1296,auto,outdent-rtl,1320,auto,outdent,1344,auto,justifyblock,1368,auto,justifycenter,1392,auto,justifyleft,1416,auto,justifyright,1440,auto,language,1464,auto,anchor-rtl,1488,auto,anchor,1512,auto,link,1536,auto,unlink,1560,auto,bulletedlist-rtl,1584,auto,bulletedlist,1608,auto,numberedlist-rtl,1632,auto,numberedlist,1656,auto,mathjax,1680,auto,maximize,1704,auto,newpage-rtl,1728,auto,newpage,1752,auto,pagebreak-rtl,1776,auto,pagebreak,1800,auto,pastefromword-rtl,1824,auto,pastefromword,1848,auto,pastetext-rtl,1872,auto,pastetext,1896,auto,placeholder,1920,auto,preview-rtl,1944,auto,preview,1968,auto,print,1992,auto,removeformat,2016,auto,save,2040,auto,scayt,2064,auto,selectall,2088,auto,showblocks-rtl,2112,auto,showblocks,2136,auto,smiley,2160,auto,source-rtl,2184,auto,source,2208,auto,sourcedialog-rtl,2232,auto,sourcedialog,2256,auto,specialchar,2280,auto,table,2304,auto,templates-rtl,2328,auto,templates,2352,auto,uicolor,2376,auto,redo-rtl,2400,auto,redo,2424,auto,undo-rtl,2448,auto,undo,2472,auto,simplebox,2496,auto,spellchecker,2520,auto","icons.png");
}())}(),function(){function a(a){var b=a.getStyle("overflow-y"),c=a.getDocument(),d=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",c);c[CKEDITOR.env.ie?"getBody":"getDocumentElement"]().append(d);var e=d.getDocumentPosition(c).y+d.$.offsetHeight;return d.remove(),a.setStyle("overflow-y",b),e}function b(a){var b=a.document,c=b.getBody(),d=b.getDocumentElement();return"BackCompat"==b.$.compatMode?c:d}var c=function(c,d){if(!c.window)return null;var e=c.getCommand("maximize");if(e&&e.state==CKEDITOR.TRISTATE_ON)return null;var f=b(c),g=c.window.getViewPaneSize().height,h=a(f);h+=c.config.autoGrow_bottomSpace||0;var i=void 0!=c.config.autoGrow_minHeight?c.config.autoGrow_minHeight:200,j=c.config.autoGrow_maxHeight||1/0;return h=Math.max(h,i),h=Math.min(h,j),h!=g&&d!=h&&(h=c.fire("autoGrow",{currentHeight:g,newHeight:h}).newHeight,c.resize(c.container.getStyle("width"),h,!0),d=h),f.$.scrollHeight>f.$.clientHeight&&h<j?f.setStyle("overflow-y","hidden"):f.removeStyle("overflow-y"),d};CKEDITOR.plugins.add("autogrow",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&a.on("instanceReady",function(){var d,e=a.editable();if(e.isInline())a.ui.space("contents").setStyle("height","auto");else{a.addCommand("autogrow",{exec:function(a){d=c(a,d)},modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var f={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};for(var g in f)a.on(g,function(a){"wysiwyg"==a.editor.mode&&setTimeout(function(){d=c(a.editor,d),d=c(a.editor,d)},100)});a.on("afterCommandExec",function(e){if("maximize"==e.data.name&&"wysiwyg"==e.editor.mode)if(e.data.command.state==CKEDITOR.TRISTATE_ON){var f=b(a);f.removeStyle("overflow")}else d=c(a,d)}),a.config.autoGrow_onStartup&&a.execCommand("autogrow")}})}})}(),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b,c){var d=b.nodeName.toLowerCase();if(a.inArray(d,c)!==-1)return a.inArray(d,f)===-1||Boolean(b.nodeValue.match(i)||b.nodeValue.match(j));for(var e=a(c).filter(function(a,b){return b instanceof RegExp}),g=0,h=e.length;g<h;g++)if(d.match(e[g]))return!0;return!1}function c(c,d,e){if(0===c.length)return c;if(e&&"function"==typeof e)return e(c);if(!document.implementation||!document.implementation.createHTMLDocument)return c;var f=document.implementation.createHTMLDocument("sanitization");f.body.innerHTML=c;for(var g=a.map(d,function(a,b){return b}),h=a(f.body).find("*"),i=0,j=h.length;i<j;i++){var k=h[i],l=k.nodeName.toLowerCase();if(a.inArray(l,g)!==-1)for(var m=a.map(k.attributes,function(a){return a}),n=[].concat(d["*"]||[],d[l]||[]),o=0,p=m.length;o<p;o++)b(m[o],n)||k.removeAttribute(m[o].nodeName);else k.parentNode.removeChild(k)}return f.body.innerHTML}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.tooltip"),e="object"==typeof b&&b;!d&&/destroy|hide/.test(b)||(d||c.data("bs.tooltip",d=new k(this,e)),"string"==typeof b&&d[b]())})}var e=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],g=/^aria-[\w-]*$/i,h={"*":["class","dir","id","lang","role",g],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},i=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,j=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,k=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};k.VERSION="3.4.1",k.TRANSITION_DURATION=150,k.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:h},k.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(document).find(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},k.prototype.getDefaults=function(){return k.DEFAULTS},k.prototype.getOptions=function(b){var d=this.$element.data();for(var f in d)d.hasOwnProperty(f)&&a.inArray(f,e)!==-1&&delete d[f];return b=a.extend({},this.getDefaults(),d,b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b.sanitize&&(b.template=c(b.template,b.whiteList,b.sanitizeFn)),b},k.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},k.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},k.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},k.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},k.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(a(document).find(this.options.container)):e.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var j=this.getPosition(),l=e[0].offsetWidth,m=e[0].offsetHeight;if(i){var n=g,o=this.getPosition(this.$viewport);g="bottom"==g&&j.bottom+m>o.bottom?"top":"top"==g&&j.top-m<o.top?"bottom":"right"==g&&j.right+l>o.width?"left":"left"==g&&j.left-l<o.left?"right":g,e.removeClass(n).addClass(g)}var p=this.getCalculatedOffset(g,j,l,m);this.applyPlacement(p,g);var q=function(){var a=d.hoverState;d.$element.trigger("shown.bs."+d.type),d.hoverState=null,"out"==a&&d.leave(d)};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(k.TRANSITION_DURATION):q()}},k.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},k.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},k.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();this.options.html?(this.options.sanitize&&(b=c(b,this.options.whiteList,this.options.sanitizeFn)),a.find(".tooltip-inner").html(b)):a.find(".tooltip-inner").text(b),a.removeClass("fade in top bottom left right")},k.prototype.hide=function(b){function c(){"in"!=d.hoverState&&e.detach(),d.$element&&d.$element.removeAttr("aria-describedby").trigger("hidden.bs."+d.type),b&&b()}var d=this,e=a(this.$tip),f=a.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one("bsTransitionEnd",c).emulateTransitionEnd(k.TRANSITION_DURATION):c(),this.hoverState=null,this},k.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},k.prototype.hasContent=function(){return this.getTitle()},k.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},k.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},k.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},k.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},k.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},k.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},k.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},k.prototype.enable=function(){this.enabled=!0},k.prototype.disable=function(){this.enabled=!1},k.prototype.toggleEnabled=function(){this.enabled=!this.enabled},k.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},k.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})},k.prototype.sanitizeHtml=function(a){return c(a,this.options.whiteList,this.options.sanitizeFn)};var l=a.fn.tooltip;a.fn.tooltip=d,a.fn.tooltip.Constructor=k,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=l,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.4.1",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();if(this.options.html){var d=typeof c;this.options.sanitize&&(b=this.sanitizeHtml(b),"string"===d&&(c=this.sanitizeHtml(c))),a.find(".popover-title").html(b),a.find(".popover-content").children().detach().end()["string"===d?"html":"append"](c)}else a.find(".popover-title").text(b),a.find(".popover-content").children().detach().end().text(c);a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.4.1",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var c=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",b+c),a(this.fixedContent).each(function(b,d){var e=d.style.paddingRight,f=a(d).css("padding-right");a(d).data("padding-right",e).css("padding-right",parseFloat(f)+c+"px")}))},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),a(this.fixedContent).each(function(b,c){var d=a(c).data("padding-right");a(c).removeData("padding-right"),c.style.paddingRight=d?d:""})},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""),g=a(document).find(f),h=g.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},g.data(),d.data());d.is("a")&&c.preventDefault(),g.one("show.bs.modal",function(a){a.isDefaultPrevented()||g.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(g,h,this)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d="#"!==c?a(document).find(c):null;return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.4.1",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;h<i;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),
d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):a(window.jQuery)}(function(a){"use strict";a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return!b.isDefaultPrevented()&&void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return!(!(this._isXHRUpload(b)&&k&&(i||j<h))||b.data)&&(!!c||(i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),i<h?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m)))},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!n||l&&void 0!==k[0].size||(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;g<l;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;g<l;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d.fileInput),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=b.dataTransfer;c&&a.inArray("Files",c.types)!==-1&&this._trigger("dragover",a.Event("dragover",{delegatedEvent:b}))!==!1&&(b.preventDefault(),c.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=a(this.element[0].cloneNode(!1));a.each(d.data(),function(a,e){var f="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();d.attr(f)&&(b._isRegExpOption(a,e)&&(e=b._getRegExp(e)),c[a]=e)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],a):a(window.jQuery)}(function(a){"use strict";var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(c,d){var e=a(this);d.process(function(){return e.fileupload("process",d)}),b.call(this,c,d)}},processActions:{},_processFile:function(b,c){var d=this,e=a.Deferred().resolveWith(d,[b]),f=e.promise();return this._trigger("process",null,b),a.each(b.processQueue,function(b,e){var g=function(b){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():d.processActions[e.action].call(d,b,e)};f=f.pipe(g,e.always&&g)}),f.done(function(){d._trigger("processdone",null,b),d._trigger("processalways",null,b)}).fail(function(){d._trigger("processfail",null,b),d._trigger("processalways",null,b)}),f},_transformProcessQueue:function(b){var c=[];a.each(b.processQueue,function(){var d={},e=this.action,f=this.prefix===!0?e:this.prefix;a.each(this,function(c,e){"string"===a.type(e)&&"@"===e.charAt(0)?d[c]=b[e.slice(1)||(f?f+c.charAt(0).toUpperCase()+c.slice(1):c)]:d[c]=e}),c.push(d)}),b.processQueue=c},processing:function(){return this._processing},process:function(b){var c=this,d=a.extend({},this.options,b);return d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),a.each(b.files,function(e){var f=e?a.extend({},d):d,g=function(){return b.errorThrown?a.Deferred().rejectWith(c,[b]).promise():c._processFile(f,b)};f.index=e,c._processing+=1,c._processingQueue=c._processingQueue.pipe(g,g).always(function(){c._processing-=1,0===c._processing&&c._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],a):a(window.jQuery)}(function(a){"use strict";a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(b,c){if(c.disabled)return b;var d,e=a.Deferred(),f=this.options,g=b.files[b.index];return(c.minFileSize||c.maxFileSize)&&(d=g.size),"number"===a.type(c.maxNumberOfFiles)&&(f.getNumberOfFiles()||0)+b.files.length>c.maxNumberOfFiles?g.error=f.i18n("maxNumberOfFiles"):!c.acceptFileTypes||c.acceptFileTypes.test(g.type)||c.acceptFileTypes.test(g.name)?d>c.maxFileSize?g.error=f.i18n("maxFileSize"):"number"===a.type(d)&&d<c.minFileSize?g.error=f.i18n("minFileSize"):delete g.error:g.error=f.i18n("acceptFileTypes"),g.error||b.files.error?(b.files.error=!0,e.rejectWith(this,[b])):e.resolveWith(this,[b]),e.promise()}}})}),function(social){"use strict";var window=social.window;social.$=window.$.noConflict(),social.Backbone=window.Backbone.noConflict(),social.underscore=window._.noConflict(),social.EventProvider=social.underscore.clone(social.Backbone.Events);var $=social.$;$.support.cors=!0,social.window.navigator.userAgent.toLowerCase().indexOf("firefox")===-1&&$.ajaxSetup({crossDomain:!0,xhrFields:{withCredentials:!0}}),social.define("request",$.ajax,!1),social.define("util",$.extend({},social.underscore,{emptyFn:social.noop,guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()}}(),get:function(a,b){return 1===arguments.length?social.get(a,window):social.get(b,a)},instance:function(a){var b,c,d=social.get(a)||social.get(a,window),e=Array.prototype.splice.call(arguments,1),f=function(){};return f.prototype=d.prototype,b=new f,c=d.apply(b,e),Object(c)===c?c:b},inherit:function(a,b,c){var d=function(){};return d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.superclass=b.prototype,$.extend(a.prototype,c||{}),b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b),a},template:function(a,b){var c=social.TemplateEngine.compile(a);return c(b)},isHTML:function(){var a=/(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;return function(b){return a.exec(b)}}(),fromJSON:function(a){return JSON.parse(a)},log:function(){if(!console||!console.log)return!1;var a=social.string.fmt.apply(social.string,arguments);console.log(a)},checkJSON:function(){var a=/^[\],:{}\s]*$/,b=/\\["\\\/bfnrtu]/g,c=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,d=/(?:^|:|,)(?:\s*\[)+/g;return function(e){return a.test(e.replace(b,"@").replace(c,"]").replace(d,""))}}()}),!1),String.prototype.fmt=function(){var a=Array.prototype.slice.call(arguments,0);return a.splice(0,0,this+""),social.string.fmt.apply(social.string,a)},String.prototype.loc=function(){return social.string.loc(this)},Array.prototype.j=function(a){return this.join(a||"")},Array.prototype.every||(Array.prototype.every=function(a){for(var b=!0,c=0,d=this.length;c<d&&(b=a(this[c],c),b);c++);return b}),Date.now||(Date.now=function(){return(new Date).getTime()}),window.JSON||(window.JSON={parse:function(json){var regExp=/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/,test=json.replace(/"(\\.|[^"\\])*"/g,"");if(regExp.test(test)){var error="Supplied content is not JSON";throw"Error"in window?new Error(error):error}return eval("("+json+")")}})}(crafter.social),function(a){"use strict";function b(f){var g=this,h=this.guid=d.guid();i[h]={CACHE:{}},this.cfg=e.extend({},b.DEFAULTS,f||{}),e.each(this.cfg.handlers,function(b,c){var e=c.dispatch?"self"===c.dispatch?g:c.dispatch:g,f=c.context?"self"===c.context?g:c.context:g,h=c.handler;g.listenTo(e,b,d.isFunction(h)?h:f[h]||a.noop)}),e(document).ajaxComplete(function(b,d){var e;if(200===d.status){if(d.getResponseHeader("Content-Type")&&d.getResponseHeader("Content-Type").toLowerCase().indexOf("text/html")>=0&&void 0!=d.responseText){var f=a.string.LOCALE.loginForm;void 0!=f&&d.responseText.indexOf(f)>=0&&window.location.reload(!0)}}else if(403===d.status)g.trigger(c.get("EVENT_UNAUTHORISED_RESPONSE"));else if(404===d.status)e=new a.view.Modal({events:{"click [data-dismiss]":"destroy"},modal:{show:!0}}).render(),e.set({title:"Not Found",body:"Sorry, the requested URL was not found.",footer:'<button data-dismiss class="btn btn-default">Close</button>'});else if(500===d.status||504===d.status||502===d.status||503===d.status||511===d.status){var h=window.location.href,i=/500=([^&]+)/.exec(h);if(i){var j=i?i:0;if(j&&j.length>=2){var k=0;isNaN(parseInt(j[1]))||(k=parseInt(j[1])),k<=2&&(k+=1,h=h.replace(/500=./gi,"500="+k.toString()),window.location.href=h)}}else h+=h.indexOf("?")>-1?"&500=1":"?500=1",window.location.href=h}else 403===d.status&&(e=new a.view.Modal({events:{"click [data-dismiss]":"destroy"},modal:{show:!0}}).render(),e.set({title:"Error",body:"You don't have permissions to access that resource.",footer:'<button data-dismiss class="btn btn-default">Close</button>'}))}),this.cache("profile",new a.model.Profile),this.checkSessionProfile()}var c=a.Constants,d=a.util,e=a.$,f=c.get("AREA_VISIBILITY_MODE_HOVER"),g=[c.get("AREA_VISIBILITY_MODE_HOVER"),c.get("AREA_VISIBILITY_MODE_REVEAL"),c.get("AREA_VISIBILITY_MODE_HIDE")],h=null,i={};b.DEFAULTS={socialbar:{cls:"",cfg:{}},view:{discussion:{cls:"view.Popover",cfg:{}},parasite:{cls:"view.Commentable",cfg:{}}},ctrl:{main:{cls:"controller.Base",cfg:{}}},handlers:function(){var a={};return a[c.get("EVENT_UNAUTHORISED_RESPONSE")]={handler:"authenticate"},a[c.get("EVENT_USER_AUTHENTICATION_SUCCESS")]={handler:"setProfile"},a}()},b.prototype=e.extend({},a.EventProvider,{cache:function(a,b){return 1===arguments.length?i[this.guid].CACHE[a]:void(i[this.guid].CACHE[a]=b)},getProfile:function(){return this.cache("profile")},setProfile:function(b){return b instanceof a.model.Profile||(b=new a.model.Profile(b)),this.cache("profile",b)},authenticate:function(){var b=new(a.get("view.Auth"))({model:this.getProfile(),modal:{show:!0}});b.$el.on("shown.bs.modal",function(){b.$el.find("input:first").select()}),b.render()},checkSessionProfile:function(){var a=this.getProfile();a.getFromSession()},getAreaVisibilityMode:function(){return f},setAreaVisibilityMode:function(b){if(a.util.indexOf(g,b)===-1)throw new Error("Unknown mode %@ supplied to Director (setAreaVisibilityMode)".fmt(b));f=b,this.trigger(c.get("EVENT_AREAS_VISIBILITY_CHANGE"),b)},setActiveDiscussionViewer:function(b,c){var d=this.cache(b);return d||(d=new(a.get(b))(c||{}),this.cache(b,d)),this.cache("activeView",b),d},getActiveDiscussionViewer:function(){return this.cache("activeView")||this.setActiveDiscussionViewer(this.cfg.view.discussion.cls,this.cfg.view.discussion.cfg),this.cache("activeView")},socialise:function(c){e.ajaxSetup({cache:!1});var d=e.extend(!0,{},b.DEFAULTS,c),f=a.get(d.ctrl.main.cls)||a.get(d.ctrl.main.cls,window),g=a.get(d.view.parasite.cls)||a.get(d.view.parasite.cls,window),i=!!d.socialbar&&a.get(d.socialbar.cls),j=new f(null,{target:d.target,context:d.context,model:a.model.Comment});this.cache(a.string.fmt("controller.%@.%@",d.context,d.target),j);var k=new g(e.extend({target:d.target,context:d.context,commentUrl:d.commentUrl,commentThreadName:d.commentThreadName,sortBy:"createdDate",sortOrder:"DESC",collection:j},d.view.parasite.cfg));this.cache(a.string.fmt("parasite.%@.%@",d.context,d.target),k),i&&!h&&(h=new i(d.socialbar.cfg),h.$el.appendTo("body"))}}),a.define("component.Director",b)}(crafter.social),function(a){"use strict";var b=window.CKEDITOR;a.define("Editor",b,"social.Editor"),b.basePath=a.resource("libs/ckeditor/"),b.plugins.basePath=a.resource("libs/ckeditor/"),b.config.customConfig=a.resource("scripts/component/ckeditor/config.js")}(crafter.social),function(a){"use strict";var b=a.window,c=b.Handlebars,d=a.util;a.define("TemplateEngine",c,"social.TemplateEngine"),c.registerHelper("html",function(a){return new c.SafeString(a)}),c.registerHelper("content-type",function(a){var b={"image/png":"Image (PNG)","image/jpeg":"Image (JPEG)","application/pdf":"PDF Document","text/plain":"Plain Text File","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Microsoft Excel Spreadsheet","application/msword":"Microsoft Word Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Microsoft Word Document","image/vnd.adobe.photoshop":"Photoshop File","application/zip":"Zip File","application/xml":"XML File"}[a]||a;return new c.SafeString(b)}),c.registerHelper("eq",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),c.registerHelper("gt",function(a,b,c){return a>b?c.fn(this):c.inverse(this)}),c.registerHelper("lt",function(a,b,c){return a<b?c.fn(this):c.inverse(this)}),c.registerHelper("ifm",function(a,b){return a.call()?b.fn(this):b.inverse(this)}),c.registerHelper("mif",function(a,b,c,e){switch(d.isFunction(a)&&(a=a.call(this)),d.isFunction(c)&&(c=c.call(this)),b){case"has":case"contains":return d.contains(a,c)?e.fn(this):e.inverse(this);case"||":case"or":return a||c?e.fn(this):e.inverse(this);case"gt":case">":return a>c?e.fn(this):e.inverse(this);case"lt":case"<":return a<c?e.fn(this):e.inverse(this);case"&&":case"and":return a&&c?e.fn(this):e.inverse(this)}}),c.registerHelper("munless",function(a,b,c){d.isFunction(a)&&(a=a.call(this)),d.isFunction(c)&&(c=c.call(this))}),c.registerHelper("ternary",function(a,b,e){return d.isFunction(a)&&(a=a.call(this)),new c.SafeString(a?b:e)}),c.registerHelper("multiplicity",function(a,b,d,e){var f=(0===a?e:a>1?b:d).fmt(a);return new c.SafeString(f)}),c.registerHelper("minusOne",function(a){return new c.SafeString((--a))}),c.registerHelper("round",function(a){return new c.SafeString(Math.round(a))}),c.registerHelper("divide",function(a,b){return new c.SafeString(Math.round(a/b))}),c.registerHelper("date",function(a){var b,d=new Date(a),e=(b||"{month} {date}, {year}").fmt({month:"months.%@".fmt(d.getMonth()).loc(),day:"days.%@".fmt(d.getDay()).loc(),date:d.getDate(),year:d.getFullYear()});return new c.SafeString(e)}),c.registerHelper("loc",function(a){return new c.SafeString(a.loc())}),c.registerHelper("formatFileSize",function(a){return"number"!=typeof a?"":a>=1e9?(a/1e9).toFixed(2)+" GB":a>=1e6?(a/1e6).toFixed(2)+" MB":(a/1e3).toFixed(2)+" KB"}),c.registerHelper("log",function(){console&&console.log&&console.log(this)}),a.noConflict("Handlebars")}(crafter.social),function(a){"use strict";var b=a.$,c=a.TemplateEngine.compile;b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&b.isArray(a.result.files)?a.result.files:[]},add:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this),e=d.data("blueimp-fileupload")||d.data("fileupload"),f=e.options;c.context=e._renderUpload(c.files).data("data",c).addClass("processing"),f.filesContainer[f.prependFiles?"prepend":"append"](c.context),e._forceReflow(c.context),b.when(e._transition(c.context),c.process(function(){return d.fileupload("process",c)})).always(function(){c.context.each(function(a){b(this).find(".size").text(e._formatFileSize(c.files[a].size));
}).removeClass("processing"),e._renderPreviews(c)}).done(function(){c.context.find(".start").prop("disabled",!1),e._trigger("added",a,c)!==!1&&(f.autoUpload||c.autoUpload)&&c.autoUpload!==!1&&c.submit()}).fail(function(){c.files.error&&c.context.each(function(a){var d=c.files[a].error;d&&b(this).find(".error").text(d)})})},send:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload");return c.context&&c.dataType&&"iframe"===c.dataType.substr(0,6)&&c.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),d._trigger("sent",a,c)},done:function(a,c){if(a.isDefaultPrevented())return!1;var d,e,f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),g=c.getFilesFromResponse||f.options.getFilesFromResponse,h=g(c);c.context?c.context.each(function(g){var i=h[g]||{error:"Empty file upload result"};e=f._addFinishedDeferreds(),f._transition(b(this)).done(function(){var g,h=b(this);try{var j=JSON.parse(c.xhr().responseText);g=[b.extend({},i,j)]}catch(k){g=[i]}d=f._renderDownload(g).replaceAll(h),f._forceReflow(d),f._transition(d).done(function(){c.context=b(this),f._trigger("completed",a,c),f._trigger("finished",a,c),e.resolve()})})}):(d=f._renderDownload(h)[f.options.prependFiles?"prependTo":"appendTo"](f.options.filesContainer),f._forceReflow(d),e=f._addFinishedDeferreds(),f._transition(d).done(function(){c.context=b(this),f._trigger("completed",a,c),f._trigger("finished",a,c),e.resolve()}))},fail:function(a,c){if(a.isDefaultPrevented())return!1;var d,e,f=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c.context?c.context.each(function(g){if("abort"!==c.errorThrown){var h=c.files[g];try{var i=c.xhr(),j=JSON.parse(i.responseText);h.error=j.localizedMessage||j.message}catch(k){h.error=h.error||c.errorThrown||!0}e=f._addFinishedDeferreds(),f._transition(b(this)).done(function(){var g=b(this);d=f._renderDownload([h]).replaceAll(g),f._forceReflow(d),f._transition(d).done(function(){c.context=b(this),f._trigger("failed",a,c),f._trigger("finished",a,c),e.resolve()})})}else e=f._addFinishedDeferreds(),f._transition(b(this)).done(function(){b(this).remove(),f._trigger("failed",a,c),f._trigger("finished",a,c),e.resolve()})}):"abort"!==c.errorThrown?(c.context=f._renderUpload(c.files)[f.options.prependFiles?"prependTo":"appendTo"](f.options.filesContainer).data("data",c),f._forceReflow(c.context),e=f._addFinishedDeferreds(),f._transition(c.context).done(function(){c.context=b(this),f._trigger("failed",a,c),f._trigger("finished",a,c),e.resolve()})):(f._trigger("failed",a,c),f._trigger("finished",a,c),f._addFinishedDeferreds().resolve())},progress:function(a,c){if(a.isDefaultPrevented())return!1;var d=Math.floor(c.loaded/c.total*100);c.context&&c.context.each(function(){b(this).find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")})},progressall:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this),e=Math.floor(c.loaded/c.total*100),f=d.find(".fileupload-progress"),g=f.find(".progress-extended");g.length&&g.html((d.data("blueimp-fileupload")||d.data("fileupload"))._renderExtendedProgress(c)),f.find(".progress").attr("aria-valuenow",e).children().first().css("width",e+"%")},start:function(a){if(a.isDefaultPrevented())return!1;var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c._resetFinishedDeferreds(),c._transition(b(this).find(".fileupload-progress")).done(function(){c._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented())return!1;var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=c._addFinishedDeferreds();b.when.apply(b,c._getFinishedDeferreds()).done(function(){c._trigger("stopped",a)}),c._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),b(this).find(".progress-extended").html("&nbsp;"),d.resolve()})},processstart:function(a){return!a.isDefaultPrevented()&&void b(this).addClass("fileupload-processing")},processstop:function(a){function c(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");!!(b>0||navigator.userAgent.match(/Trident.*rv\:11\./))}function d(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return b>0||navigator.userAgent.match(/Trident.*rv\:11\./)?parseInt(a.substring(b+5,a.indexOf(".",b))):0}if(a.isDefaultPrevented())return!1;if(b(this).removeClass("fileupload-processing"),c()&&d()<10){var e=b(this);e.find(".cs-file-data, .cs-file-upload, .btn.cancel").remove()}},destroy:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),e=function(){d._transition(c.context).done(function(){b(this).remove(),d._trigger("destroyed",a,c)})};c.url?(c.dataType=c.dataType||d.options.dataType,b.ajax(c).done(e).fail(function(){d._trigger("destroyfailed",a,c)})):e()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){return a||(a=b.Deferred()),this._finishedUploads.push(a),a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=b(this),c=a.prop("href"),d=a.prop("download"),e="application/octet-stream";a.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",[e,d,c].join(":"))}catch(b){}})},_formatFileSize:function(a){return"number"!=typeof a?"":a>=1e9?(a/1e9).toFixed(2)+" GB":a>=1e6?(a/1e6).toFixed(2)+" MB":(a/1e3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!=typeof a?"":a>=1e9?(a/1e9).toFixed(2)+" Gbit/s":a>=1e6?(a/1e6).toFixed(2)+" Mbit/s":a>=1e3?(a/1e3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1e3*a),c=Math.floor(a/86400);return c=c?c+"d ":"",c+("0"+b.getUTCHours()).slice(-2)+":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,c){if(!a)return b();var d=a({files:c,formatFileSize:this._formatFileSize,options:this.options});return d instanceof b?d:b(this.options.templatesContainer).html(d).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(c,d){b(d).append(a.files[c].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(b){for(var c=a.get("model.File"),d=[],e=0,f=b.length,g=new c;e<f;e++)d.push(g.parse(b[e]));return this._renderTemplate(this.options.downloadTemplate,d).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();var c=b(a.currentTarget),d=c.closest(".crafter-social-template-upload"),e=d.data("data");c.prop("disabled",!0),e&&e.submit&&e.submit()},_cancelHandler:function(a){a.preventDefault();var c=b(a.currentTarget).closest(".crafter-social-template-upload,.template-download"),d=c.data("data")||{};d.context=d.context||c,d.abort?d.abort():(d.errorThrown="abort",this._trigger("fail",a,d))},_deleteHandler:function(a){a.preventDefault();var c=b(a.currentTarget);this._trigger("destroy",a,b.extend({context:c.closest(".template-download"),type:"DELETE"},c.data()))},_forceReflow:function(a){return b.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var c=b.Deferred();return b.support.transition&&a.hasClass("fade")&&a.is(":visible")?a.bind(b.support.transition.end,function(d){d.target===a[0]&&(a.unbind(b.support.transition.end),c.resolveWith(a))}).toggleClass("in"):(a.toggleClass("in"),c.resolveWith(a)),c},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),c=this.options.filesContainer;this._on(a.find(".start"),{click:function(a){a.preventDefault(),c.find(".start").click()}}),this._on(a.find(".cancel"),{click:function(a){a.preventDefault(),c.find(".cancel").click()}}),this._on(a.find(".delete"),{click:function(b){b.preventDefault(),c.find(".toggle:checked").closest(".template-download").find(".delete").click(),a.find(".toggle").prop("checked",!1)}}),this._on(a.find(".toggle"),{change:function(a){c.find(".toggle").prop("checked",b(a.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName")),a.uploadTemplateId&&(a.uploadTemplate=c(document.getElementById(a.uploadTemplateId).innerHTML)),a.downloadTemplateId&&(a.downloadTemplate=c(document.getElementById(a.downloadTemplateId).innerHTML))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".cs-files-list"):a.filesContainer instanceof b||(a.filesContainer=b(a.filesContainer))},_initSpecialOptions:function(){if(this._super(),this._initFilesContainer(),this._initTemplates(),!function(){return["undefined"!=typeof window.FileReader,"draggable"in document.createElement("span"),!!window.FormData,"upload"in new XMLHttpRequest].join(" ").indexOf("false")!==-1}()){var a=b(this.element).parent();this.__dragenter=function(){a.addClass("dropbox-dragover")},this.__dragleave=function(){a.removeClass("dropbox-dragover")},b(document).bind("dragover dragenter",this.__dragenter).bind("dragleave drop",this.__dragleave),a.parent().prepend('<div style="margin-bottom: 10px; text-align: center"><i class="crafter-social-icon cs-icon-info-sign"></i> You may drag and drop files from your desktop to upload them.</div>')}},__dragenter:b.noop,__dragleave:b.noop,_create:function(){this._super(),this._resetFinishedDeferreds(),b.support.fileInput||this._disableFileInputButton()},_destroy:function(){this._destroyEventHandlers(),b(document).unbind("dragover dragenter",this.__dragenter).unbind("dragleave drop",this.__dragleave)},enable:function(){var a=!1;this.options.disabled&&(a=!0),this._super(),a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}(crafter.social),function(a){"use strict";var b=a.$,c=a.Constants,d=a.Backbone.Model.extend({idAttribute:"id",defaults:{username:"anonymous"},url:function(){this.isNew()},parse:function(a){return a?a.profile:void 0},authenticate:function(){return this.fetch({type:"POST",url:a.url("security"),data:b.param(this.toJSON()),success:function(b){a.getDirector().trigger(c.get("EVENT_USER_AUTHENTICATION_SUCCESS"),b)},error:function(){a.getDirector().trigger(c.get("EVENT_USER_AUTHENTICATION_FAILED"))}})},getFromSession:function(){var d,e={},f=this;return d=e.xhr=b.ajax({type:"GET",cache:!1,url:a.url("security.active"),success:function(b){204===d.status?a.getDirector().trigger(c.get("EVENT_USER_NOT_AUTHENTICATED")):(f.set(f.parse(b,e)),f.trigger("sync",f,b,e),a.getDirector().trigger(c.get("EVENT_USER_AUTHENTICATION_SUCCESS"),f))}}),this.trigger("request",f,d,e),d},hasRole:function(a,b){var c=!1,d=this.get("attributes");if(d){var e=d.socialContexts;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(g.id===b){for(var h=g.roles,i=0;i<h.length;i++)if(h[i]===a){c=!0;break}if(c)break}}}return c}});a.define("model.Profile",d)}(crafter.social),function(a){"use strict";var b=a.Backbone.Model.extend({idAttribute:"attachmentId",downloadUrl:function(){return"/"},url:function(){if(this.isNew())return a.url("comments.{_id}.attachments")},parse:function(b,c){try{b.url=a.url("comments.{_id}.attachments.{fileId}",{_id:b.attributes.owner,fileId:b.fileId,context:c.context||c.data.context}),b.urlPreview=this.getPreviewUrl(b)}catch(d){console&&console.log("crafter.social.model.File: ",d)}return b},detach:function(){},open:function(){},getPreviewUrl:function(b){var c=b.fileName.toLowerCase();return c.match(a.Constants.get("SUPPORTED_IMAGE_FORMATS"))?b.url:c.match(a.Constants.get("SUPPORTED_VIDEO_FORMATS"))?a.Constants.get("POSTER_URL"):""}});a.define("model.File",b)}(crafter.social),function(a){"use strict";function b(b,c,d,f,g){g||(g={});var h={type:d||"POST",url:a.url(b,e.extend({},this.toJSON()||{},f)),success:g.success,error:g.error};return c&&(h.data=e.param(c)),this.save(null,h)}var c=a.Constants,d=a.Backbone.Model,e=a.$,f=d.extend({idAttribute:"_id",defaults:{ancestors:[],body:"",thread:"",children:[],attributes:{},createdDate:Date.now(),attachments:[]},hasChildren:function(){return this.get("children").length>0},isReply:function(){return this.get("ancestors").length>0},url:function(){return a.url(this.isNew()?"comments":"comments.{_id}",this.toJSON())},isTrashed:function(){return this.get("moderationStatus")===c.get("MODERATION_STATUS_TRASH")},voteUp:function(a){b.call(this,"comments.{_id}.votes.up",a)},voteDown:function(a){b.call(this,"comments.{_id}.votes.down",a)},removeVote:function(a){b.call(this,"comments.{_id}.votes.neutral",a)},flag:function(a){b.call(this,"comments.{_id}.flags",a)},unflag:function(a){var c=this.flagId(a.profileId);c&&(this.get("flags").splice(c.index,1),b.call(this,"comments.{_id}.flags.{flagId}",a,"POST",{flagId:c.id}))},flagId:function(a){var b,c=this.attributes.flags,d=c.length;for(b=0;b<d;++b)if(c[b].userId===a)return{id:c[b]._id,index:b};return null},flaggedBy:function(a){if(void 0===a)return!1;var b,c=this.attributes.flags,d=c.length;for(b=0;b<d;++b)if(c[b].userId===a)return!0;return!1},trash:function(a){this.moderate(c.get("MODERATION_STATUS_TRASH"),a)},moderate:function(a,c){b.call(this,"comments.{_id}.moderate",e.extend({},c||{},{status:a}),"POST",{context:c.context})},update:function(a,c){b.call(this,"comments.{_id}.update",{id:"",body:this.get("body")},"POST",{context:a.context},c)},reply:function(a,b){var c=this.attributes,d=c.ancestors.slice();d.push(c);var e={body:a.body,parent:c._id,dateAdded:Date.now(),thread:c.targetId,context:a.context,targetId:c.targetId,attributes:{commentUrl:c.attributes.commentUrl,commentThreadName:c.attributes.commentThreadName}};this.collection.create(e,b)},fetch:function(b){return b=b||{},b.cache=!1,a.Backbone.Collection.prototype.fetch.call(this,b)}});a.define("model.Comment",f)}(crafter.social),function(a){"use strict";function b(b,c,e,f,g){g||(g={});var h={type:e||"POST",url:a.url(b,d.extend({},this.toJSON()||{},f)),success:g.success,error:g.error};return c&&(h.data=d.param(c)),this.save(null,h)}var c=(a.Constants,a.Backbone.Model),d=a.$,e=c.extend({trashAttachment:function(a,c){b.call(this,"comments.{_id}.attachments.{fileId}.delete",{context:a.context},"POST",a,c)}});a.define("model.AttachmentPreview",e)}(crafter.social),function(a){"use strict";var b=a.$,c=a.util,d=a.Backbone,e=d.Collection.extend({model:a.model.Comment,isWatched:!1,create:function(a,c){var e=new FormData,f=a.toJSON?a.toJSON():a;return b.each(f,function(a,b){e.append(a,"attributes"===a?JSON.stringify(b):b)}),d.Collection.prototype.create.call(this,a,b.extend({data:e,contentType:!1},c||{}))},initialize:function(a,b){this.guid=c.guid(),this.extendCfg(this.constructor.DEFAULTS,b)},extendCfg:function(a,c){return this.cfg||(this.cfg={}),b.extend(!0,this.cfg,a,c)},url:function(){return a.url("threads.{target}.comments",b.extend({},this.cfg,{sortBy:a.Cfg("global.threadSortBy"),sortOrder:a.Cfg("global.threadSortOrder")}))},parse:function(a){var b=a.comments||a;return this.setIsWatched(a.watched||!1),b},getGUID:function(){return this.guid},setIsWatched:function(b){this.isWatched=b,this.trigger(a.Constants.get("EVENT_DISCUSSION_WATCHED",this.cfg),b)},getIsWatched:function(){return this.isWatched}});e.DEFAULTS={context:null,target:null},a.define("controller.Base",e)}(crafter.social),function(a){"use strict";var b=a.controller.Base,c=b.extend({model:a.model.File,url:function(){return a.url("comments.{_id}.attachments",{_id:this.cfg.comment.get("_id")})},parse:function(a){return a}});c.DEFAULTS={},a.define("controller.Files",c)}(crafter.social),function(a){"use strict";var b=0,c=a.util,d=a.$,e=a.Backbone.View.extend({className:"crafter-social-view",initialize:function(a){this.cache("initialised")||(this.guid=c.guid(),this.extendCfg(this.constructor.DEFAULTS,a||{}),this.cfg.classes&&this.$el.addClass(c.isArray(this.cfg.classes)?this.cfg.classes.join(" "):this.cfg.classes),this.delegateActions(this,this.element()),this.listen&&this.listen(),this.createUI&&this.createUI(),this.events&&(this.events=this.parseEvents()),this.handleIdentifyRequests(),this.cache("initialised",!0))},listen:function(){},delegateActions:function(a,b){b.delegate("[data-action]","click",function(b){b.preventDefault(),b.stopImmediatePropagation(),b.stopPropagation();var c=d(this).data("action");if(""!==c){var e=c.match(/\(([\s\S]+?)\)/)||[];e.length&&(e=e[1].split(",")),e.splice(0,0,b),c=c.replace(/\(([\s\S]+?)\)/,""),a[c]&&a[c].apply(a,e)}})},extendCfg:function(a,b){return!this.cfg&&(this.cfg={}),d.extend(!0,this.cfg,a,b)},parseEvents:function(a){var b={};return a=d.extend(a||{},{guid:this.guid}),this.events&&d.each(this.events,function(c,d){var e=c.fmt(a.guid).fmt(a);b[e]=d}),b},handleIdentifyRequests:function(){var a=this;this.$("[data-indentifyme]").each(function(){a.identify(this,d(this).data("indentifyme")),d(this).removeAttr("data-indentifyme")})},cmpID:function(a,b){return 1===arguments.length&&(b=!0),"%@%@_%@".fmt(b?"#":"",a,this.guid)},identify:function(a,c){d(a).attr({id:this.cmpID(c||"elem"+b++,!1)})},createUI:function(){this.cache("created")||(this.element().html(this.getTemplate("main")),this.cache("created",!0))},element:function(){return this.$el},getTemplate:function(b){var d,e='id="$1_'+this.guid+'"',g=this.cfg.templates[b];"function"==typeof g&&(g=g.call(this,b));var i=h.get(g);return"undefined"==typeof g||null===g?d="":c.isHTML(g)?d=g:null!==i?d=i:a.request({async:!1,url:g,success:function(a){d=a,h.set(g,d)},error:function(){throw new Error('Failed to load template "%@"'.fmt(g))}}),d.replace(f,e)},cache:function(b,c){return!g[this.guid]&&(g[this.guid]={}),arguments.length>1?(c===a.Constants.get("DESTROY")?delete g[this.guid][b]:g[this.guid][b]=c,!0):g[this.guid][b]}}),f=/data-identifyme="(.*?)"/g;e.DEFAULTS={};var g={},h={cache:{},set:function(a,b){return this.cache[a]=b,!0},get:function(a){return this.cache[a]||null}};a.define("view.Base",e)}(crafter.social),function(a){"use strict";if(!a.$.fn.modal)throw new Error("Modal requires bootstrap modal");var b,c=a.view.Base,d=a.util,e=a.$,f=e.extend({},e.fn.modal.Constructor.prototype,{className:[c.prototype.className,"crafter-social-modal-view","fade"].join(" "),initialize:function(){c.prototype.initialize.apply(this,arguments),this.initModal()},listen:function(){c.prototype.listen.call(this);var a=this;this.$el.on("shown.bs.modal",function(){a.trigger("shown")}),this.$el.on("hidden.bs.modal",function(){a.trigger("hidden"),a.cfg.destroyOnClose&&a.destroy(!0)}),this.listenTo(this,"shown",function(){e("body, html").css("overflow","hidden")}),this.listenTo(this,"hidden",function(){e("body, html").css("overflow","")})},initModal:function(){var a=e(this.el),b=a.data("bs.modal");!b&&a.data("bs.modal",this),this.options=this.cfg.modal,this.$element=a,this.$backdrop=this.isShown=null,this.$body=e(document.body),this.$dialog=this.$element.find(".modal-dialog"),this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},backdrop:function(){e.fn.modal.Constructor.prototype.backdrop.apply(this,arguments),this.$backdrop&&this.$backdrop.removeClass("modal-backdrop").addClass("crafter-social-modal-view-backdrop")},render:function(){return this.cfg.modal.show&&this.show(),this},set:function(a,b){if(1===arguments.length){var c=this,f=a;e.each(f,function(a,b){c.set(a,b)})}var g=this.$({header:".modal-header",title:".modal-title",body:".modal-body",footer:".modal-footer"}[a]);"object"==typeof b&&("nodeType"in b||b instanceof e)?g.html("").append(b):d.isHTML(b)?g.html(b):g.text(b)},destroy:function(a){a!==!0&&this.trigger("hidden"),this.$el.remove(),this.$backdrop&&this.$backdrop.remove()}});delete f.constructor,b=c.extend(f),b.DEFAULTS=e.extend({},{templates:{main:"%@modal.hbs".fmt(a.Cfg("url.templates"))},destroyOnClose:!1,modal:e.extend({},e.fn.modal.Constructor.DEFAULTS,{backdrop:!0,keyboard:!0,show:!1,remote:!1})}),a.define("view.Modal",b)}(crafter.social),function(a){"use strict";var b=a.view.Base,c=a.model.Comment,d=a.util,e=a.$,f=a.getDirector(),g="undefined"==typeof a.Cfg("comments.acceptTerms")||a.Cfg("comments.acceptTerms"),h=b.extend({className:[b.prototype.className,"crafter-social-comment"].join(" "),createUI:d.emptyFn,events:{"click [data-action-reply]":"reply","click [data-action-flag]":"flag","click [data-action-terms]":"acceptTerms"},initialize:function(a){b.prototype.initialize.apply(this,arguments),this.model.collection=this.model.collection||a.collection},listen:function(){this.model&&(this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change",this.render))},submissionDetails:function(){var a="commenting.submissionLabel".loc(),b="commenting.agreeTermsLabel".loc(),c="commenting.agreeTermsLinkText".loc(),d="commenting.agreeTermsLink".loc(),f=e(this.el).find(".reply-controls");f.find(".submission-label").text(a),f.find(".attachments-tip").text("commenting.attachmentsTip".loc()),f.find(".agree-terms-label").append(b),f.find(".terms-link").append(c),f.find(".terms-link").attr("href",d)},acceptTerms:function(){var a=e(this.el).find(".reply-controls .btn.btn-primary"),b=e(this.el).find(".reply-controls input[type=checkbox]");b.is(":checked")?a.removeClass("disabled"):a.addClass("disabled")},render:function(){var b=this,i=f.getProfile(),j=e.extend(this.model.toJSON(),{sessionUserId:i.id,isTrashed:function(){return b.model.isTrashed()},isAdmin:function(){return i.hasRole("SOCIAL_ADMIN")},isModerator:function(){return i.hasRole("SOCIAL_MODERATOR")},isOwner:function(){return j.createdBy===i.id},isLogged:function(){return void 0!==i&&void 0!==i.id},avatarUrl:function(){var c=b.model.ts;return void 0!==j.reloadAvatar&&(c=j.reloadAvatar),a.url("profile.avatar",{id:j.user?j.user.id:i.id,context:b.cfg.context,ts:c})},showTermsAcceptance:g===!0});this.$el.html(d.template(this.getTemplate("main"),j));var k=this.$(".comment-children:first");this.$(".change-avatar").mouseleave(function(){j.createdBy===i.id&&(b.$(".change-avatar").addClass("hidden"),b.$(".current-avatar").removeClass("hidden"))}),this.$(".current-avatar").mouseover(function(){j.createdBy===i.id&&(b.$(".current-avatar").addClass("hidden"),b.$(".change-avatar").removeClass("hidden"))});var l=this.$(".comment-attachments:first");return j.children.forEach(function(a){var d=new c(a),f=new h(e.extend({},b.cfg,{model:d}));k.append(f.render().el)}),j.attachments.forEach(function(c){var d=a.get("model.File"),f=new d;f=f.parse(c,b.cfg);var g=e.extend(f,{commentId:j._id,showOverlay:j.isOwner()}),h=new a.model.AttachmentPreview(g),i=new a.view.AttachmentPreview({model:h,context:b.cfg.context});l.append(i.render().el)}),this},voteUp:function(a){a.preventDefault();var b=this.getRequestParams();this.model.voteUp(b)},voteDown:function(){var a=this.getRequestParams();this.model.voteDown(a)},uploadAvatar:function(){var b=this,c=[],d=a.util.instance("view.Modal",{modal:{show:!0},events:{"change input[type=file]":function(a){c=a.target.files},"click .btn-primary":function(g){e(g.target).addClass("disabled");var h=new FormData;e.each(c,function(a,b){h.append(a,b)}),a.request({type:"POST",cache:!1,contentType:!1,processData:!1,data:h,url:a.url("profile.avatar",{_id:f.getProfile().id,context:b.cfg.context}),success:function(){e(g.target).removeClass("disabled"),d.hide(),b.model.collection.each(function(a){a.get("user").id===f.getProfile().id&&a.set("reloadAvatar",(new Date).getTime())})},error:function(){e(g.target).removeClass("disabled"),d.$(".modal-body").prepend('<div class="alert alert-danger">Unable to Upload profile image</div>')}})}}});d.set({title:"Upload Profile Image",body:'<div class="form-group"><p>If you choose to upload a photo, select a current business relevant photo of yourself (recommended dimensions are 100x100 pixels).</p><br/><input id="avatarFileupload" type="file" name="avatar" value="Choose new profile picture"><br/><div id="progress"><div class="bar" style="width: 0%;"></div></div>     </div>',footer:'<button class="btn btn-primary">Upload</button>'}),d.render()},removeVote:function(){var a=this.getRequestParams();this.model.removeVote(a)},edit:function(a){var b=this.$(".comment-data").addClass("editing"),c=b.find(".editor");c.html(b.find(".content-wrapper").html()),c.attr("contenteditable","true");var d=CKEDITOR.inline(c.get(0),{startupFocus:!0,toolbar:"Basic"});this.cache("editor",d)},cancelEdit:function(b){this.cache("editor")&&(this.cache("editor").destroy(),this.cache("editor",a.Constants.get("DESTROY")),this.$(".comment-data").removeClass("editing").find(".editor").html(""))},doEdit:function(b){var c;if(c=this.cache("editor")){var d=this,e=c.getData();if(!e)return;this.model.set("body",e),this.model.update(this.getRequestParams(),{success:function(){c.destroy(),d.cache("editor",a.Constants.get("DESTROY"))}})}},reply:function(a){a.preventDefault(),a.stopPropagation();var b=this.$(".comment-body-reply:first").addClass("replying"),c=b.find(".editor");c.html(b.find(".content-wrapper").html()),c.attr("contenteditable","true");var d=CKEDITOR.inline(c.get(0),{startupFocus:!0,toolbar:"Basic"});this.cache("editor",d),this.submissionDetails()},cancelReply:function(b){this.cache("editor")&&(this.cache("editor").destroy(),this.cache("editor",a.Constants.get("DESTROY")),this.$(".comment-body-reply").removeClass("replying").find(".editor").html(""))},doReply:function(b){var c,d=e(this.el).find(".reply-controls input[type=checkbox]"),f=g===!0&&!d.is(":checked");if((c=this.cache("editor"))||f){var h=this,i=c.getData();i&&this.model.reply(this.getRequestParams({body:i}),{success:function(){c.destroy(),h.cache("editor",a.Constants.get("DESTROY")),h.collection.fetch({data:{target:h.cfg.target,context:h.cfg.context}})},error:function(a){c.setData("<div>"+a.get("body")+"</div>"+c.getData());var b=c.createRange();b.moveToPosition(b.root,CKEDITOR.POSITION_BEFORE_END),c.getSelection().selectRanges([b]),collection.remove(a)}})}},flag:function(b){b.preventDefault(),b.stopPropagation();var c=this,d=this.model.flaggedBy(f.getProfile().get("id")),e=a.util.instance("view.Modal",{modal:{show:!0},events:{"click .btn-primary":function(){this.$(".alert").remove();var a=this.$("textarea").val().trim();""!==a?(c.model[d?"unflag":"flag"](c.getRequestParams({reason:a,profileId:f.getProfile().get("id")})),this.destroy()):this.$(".modal-body").prepend('<div class="alert alert-danger">Please provide the reason.</div>').find("textarea").focus()}}});e.set({title:d?"Discard  Report":"Report Comment",body:(d?"<p>You previously reported this comment. This form allows you to retreat your report.</p>":"")+'<div class="form-group"><label>Reason</label><textarea class="form-control"></textarea></div>',footer:'<button class="btn btn-primary">Submit</button>'}),e.render()},unflag:function(a){this.model.unflag(a)},trash:function(){this.model.isTrashed()||(this.model.trash(this.getRequestParams()),this.$el.remove())},_dragOverFn:function(a){a.preventDefault()},getRequestParams:function(a){return e.extend({context:this.cfg.context},a||{})},files:function(){var b=this,c=this.model,d=a.util.instance("controller.Files",null,{comment:c}),e=a.util.instance("view.Files",{collection:d});e.render();var f=a.get("view.Modal"),g=new f({modal:{show:!0,keyboard:!1,backdrop:"static"}}),h={data:{context:b.cfg.context}};g.$el.on("hidden.bs.modal",function(){g.uploader&&g.uploader.fileupload("destroy"),g.destroy()});var i=a.url("comments.{_id}.attachments",c.toJSON(),h.data);g.$el.on("shown.bs.modal",function(){(g.uploader=e.$("#fileupload")).fileupload({autoUpload:!0,dataType:"json",singleFileUploads:!0,url:i,xhrFields:{withCredentials:!0},paramName:"attachment",uploadPostKey:"attachment",formData:h.data,getFilesFromResponse:function(a){return a.files||[]}}).attr("action",i).bind("fileuploadfinished",function(){b.collection.fetch()})}),g.set("title","Upload Photo(s)"),g.set("body",e.el),g.set("footer",'<button class="btn btn-default" data-dismiss="modal">Close</button>'),g.render(),d.fetch(h)},remove:function(){this.trigger("remove",this.model),this.$el.remove()}});h.DEFAULTS=e.extend(!0,{},b.DEFAULTS,{templates:{main:"%@comment.hbs".fmt(a.Cfg("url.templates"))},commenting:{templates:{main:function(){return"%@commenting.hbs".fmt(a.Cfg("url.templates"))}},editor:{extraPlugins:"",toolbar:"Full",height:800}}}),a.define("view.Comment",h)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.Editor,e=a.util,f=a.$,g=a.getDirector(),h="undefined"==typeof a.Cfg("comments.acceptTerms")||a.Cfg("comments.acceptTerms");b=c.extend({className:[c.prototype.className,"crafter-social-commenting-view"].join(" "),createUI:e.emptyFn,events:{"click [data-action-comment]":"comment","click [data-action-terms]":"acceptTerms"},initialize:function(a){c.prototype.initialize.apply(this,arguments)},listen:function(){this.model&&(this.listenTo(this.model,"change",this.render),this.listenTo(this.collection,"change",this.render))},editor:function(b){var c=this.cache("editor");if("destroy"===b)return void(c&&(c.removeAllListeners(),d.remove(c),this.cache("editor",a.Constants.get("DESTROY"))));if(!c){var e=this;if(c=e.cache("editor"),!c){var g=e.cfg.editorMode,h=e.$(".textarea:first"),i=h.find("textarea:first");h.addClass("editor-mode-"+g),c=d[g](i.get(0),f.extend({on:{pluginsLoaded:function(){this.addCommand("_enterpressed_",{exec:function(){e.comment()}}),this.keystrokeHandler.keystrokes[d.SHIFT+13]="_enterpressed_"}}},e.cfg.editor)),e.cache("editor",c)}}return c},comment:function(){var a=this.editor(),b=f(this.el).find("[data-action-terms]"),c=h===!0&&!b.is(":checked"),e=a.getData();if(e&&!c){var g={body:e,dateAdded:Date.now(),thread:this.cfg.target,context:this.cfg.context,attributes:{commentUrl:this.cfg.commentUrl,commentThreadName:this.cfg.commentThreadName}};"view.Inline"==this.cfg.discussionView&&f("html, body").animate({scrollTop:f(this.cfg.target+"-comments").offset().top},800);var i=this.collection;i.create(g,{at:0,wait:!0,error:function(b){a.setData("<div>"+b.get("body")+"</div>"+a.getData());var c=a.createRange();c.moveToPosition(c.root,d.POSITION_BEFORE_END),a.getSelection().selectRanges([c]),i.remove(b)}}),a.setData("")}},acceptTerms:function(){var a=f(this.el).find(".btn.reply"),b=f(this.el).find("[data-action-terms]");b.is(":checked")?a.removeClass("disabled"):a.addClass("disabled")},submissionDetails:function(){var a="commenting.submissionLabel".loc(),b="commenting.agreeTermsLabel".loc(),c="commenting.agreeTermsLinkText".loc(),d="commenting.agreeTermsLink".loc(),e=f(this.el).find(".submission-details");
f(this.el).find(".btn.reply");e.find(".submission-label").text(a),e.find(".attachments-tip").text("commenting.attachmentsTip".loc()),e.find(".agree-terms-label").append(b),e.find(".terms-link").append(c),e.find(".terms-link").attr("href",d)},render:function(b){var c=this,d=g.getProfile(),i=this.cache("editor"),j=f.extend(this.model.toJSON(),{avatarUrl:function(){var b=(new Date).getTime();return void 0!==j.reloadAvatar&&(b=j.reloadAvatar),a.url("profile.avatar",{id:d.id,context:c.cfg.context,ts:b})},showTermsAcceptance:h===!0});return this.$el.html(e.template(this.getTemplate("main"),j)),this.$(".change-avatar").mouseleave(function(){c.$(".change-avatar").addClass("hidden"),c.$(".current-avatar").removeClass("hidden")}),this.$(".current-avatar").mouseover(function(){c.$(".current-avatar").addClass("hidden"),c.$(".change-avatar").removeClass("hidden")}),(i||b&&b.changed)&&this.editor("destroy"),this.editor(),this.submissionDetails(),this},uploadAvatar:function(){var b=this,c=[],d=a.util.instance("view.Modal",{modal:{show:!0},events:{"change input[type=file]":function(a){c=a.target.files},"click .btn-primary":function(e){f(e.target).addClass("disabled");var h=new FormData;f.each(c,function(a,b){h.append(a,b)}),a.request({type:"POST",cache:!1,contentType:!1,processData:!1,data:h,url:a.url("profile.avatar",{_id:g.getProfile().id,context:b.cfg.context}),success:function(){var a=(new Date).getTime();f(e.target).removeClass("disabled"),d.hide(),b.collection.each(function(b){b.get("user").id===g.getProfile().id&&b.set("reloadAvatar",a)}),b.model.set("reloadAvatar",a)},error:function(){f(e.target).removeClass("disabled"),d.$(".modal-body").prepend('<div class="alert alert-danger">Unable to Upload profile image</div>')}})}}});d.set({title:"Upload Profile Image",body:'<div class="form-group"><p>If you choose to upload a photo, select a current business relevant photo of yourself (recommended dimensions are 100x100 pixels).</p><br/><input id="avatarFileupload" type="file" name="avatar" value="Choose new profile picture"><br/><div id="progress"><div class="bar" style="width: 0%;"></div></div>     </div>',footer:'<button class="btn btn-primary">Upload</button>'}),d.render()}}),b.DEFAULTS=f.extend({},c.DEFAULTS,{templates:{main:function(){return"%@commenting.hbs".fmt(a.Cfg("url.templates"))}},editorMode:"replace",editor:{autoGrow_bottomSpace:0,autoGrow_maxHeight:800,autoGrow_minHeight:0,autoGrow_onStartup:!1,autoParagraph:!0,autoUpdateElement:!0,baseFloatZIndex:1e4,baseHref:"",basicEntities:!0,blockedKeystrokes:[d.CTRL+66,d.CTRL+73,d.CTRL+85],bodyClass:"",bodyId:"",browserContextMenuOnCtrl:!0,colorButton_backStyle:{element:"span",styles:{"background-color":"#(color)"}},colorButton_colors:"000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",colorButton_enableMore:!0,colorButton_foreStyle:{element:"span",styles:{color:"#(color)"}},contentsLangDirection:"ui",contentsLanguage:"en",corePlugins:"",coreStyles_bold:{element:"strong",overrides:"b"},coreStyles_italic:{element:"em",overrides:"i"},coreStyles_strike:{element:"strike"},coreStyles_subscript:{element:"sub"},coreStyles_superscript:{element:"sup"},coreStyles_underline:{element:"u"},customConfig:"",defaultLanguage:"en",devtools_styles:["#cke_tooltip { padding: 5px; border: 2px solid #333; background: #ffffff }","#cke_tooltip h2 { font-size: 1.1em; border-bottom: 1px solid; margin: 0; padding: 1px; }","#cke_tooltip ul { padding: 0pt; list-style-type: none; }"].join(""),dialog_backgroundCoverColor:"white",dialog_backgroundCoverOpacity:.5,dialog_buttonsOrder:"OS",dialog_magnetDistance:20,dialog_startupFocusTab:!1,disableNativeSpellChecker:!0,disableNativeTableHandles:!0,disableObjectResizing:!1,disableReadonlyStyling:!1,docType:"<!DOCTYPE html>",editingBlock:!0,emailProtection:"",enableTabKeyTools:!0,enterMode:d.ENTER_P,entities:!0,entities_additional:"#39",entities_greek:!0,entities_latin:!0,entities_processNumerical:!1,extraPlugins:"",filebrowserBrowseUrl:"",filebrowserFlashBrowseUrl:"",filebrowserFlashUploadUrl:"",filebrowserImageBrowseLinkUrl:"",filebrowserImageBrowseUrl:"",filebrowserImageUploadUrl:"",filebrowserUploadUrl:"",filebrowserWindowFeatures:"",filebrowserWindowHeight:"",filebrowserWindowWidth:"",fillEmptyBlocks:!0,find_highlight:{element:"span",styles:{"background-color":"#ff0",color:"#00f"}},font_defaultLabel:"Arial",font_names:"Arial;Times New Roman;Verdana",font_style:{element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},fontSize_defaultLabel:"12px",fontSize_sizes:"8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",fontSize_style:{element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},forceEnterMode:!1,forcePasteAsPlainText:!1,forceSimpleAmpersand:!1,format_address:{element:"address"},format_div:{element:"div"},format_h1:{element:"h1"},format_h2:{element:"h2"},format_h3:{element:"h3"},format_h4:{element:"h4"},format_h5:{element:"h5"},format_h6:{element:"h6"},format_p:{element:"p"},format_pre:{element:"pre"},format_tags:"p;h1;h2;h3;h4;h5;h6;pre;address;div",fullPage:!1,height:30,htmlEncodeOutput:!1,ignoreEmptyParagraph:!0,image_previewText:" ",image_removeLinkByEmptyURL:!0,indentClasses:null,indentOffset:40,indentUnit:"px",jqueryOverrideVal:!0,justifyClasses:null,keystrokes:[[d.ALT+121,"toolbarFocus"],[d.ALT+122,"elementsPathFocus"],[d.SHIFT+121,"contextMenu"],[d.CTRL+90,"undo"],[d.CTRL+89,"redo"],[d.CTRL+d.SHIFT+90,"redo"],[d.CTRL+76,"link"],[d.CTRL+66,"bold"],[d.CTRL+73,"italic"],[d.CTRL+85,"underline"],[d.ALT+109,"toolbarCollapse"]],language:"",menu_groups:"clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea",newpage_html:"",pasteFromWordCleanupFile:"default",pasteFromWordNumberedHeadingToList:!1,pasteFromWordPromptCleanup:void 0,pasteFromWordRemoveFontStyles:!1,pasteFromWordRemoveStyles:!0,plugins:"dialogui,dialog,about,a11yhelp,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,button,toolbar,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,undo,wsc",protectedSource:[],readOnly:!1,removeDialogTabs:"link:advanced",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign",removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removePlugins:"elementspath,resize,save,font",resize_dir:"both",resize_enabled:!0,resize_maxHeight:800,resize_maxWidth:0,resize_minHeight:100,resize_minWidth:290,scayt_autoStartup:!1,scayt_contextCommands:"all",scayt_contextMenuItemsOrder:"suggest|moresuggest|control",scayt_customDictionaryIds:"",scayt_customerid:"",scayt_maxSuggestions:5,scayt_moreSuggestions:"on",scayt_sLang:"en_US",scayt_srcUrl:"",scayt_uiTabs:"1,1,1",scayt_userDictionaryName:"",sharedSpaces:void 0,shiftEnterMode:d.ENTER_BR,skin:"moono",smiley_columns:8,smiley_descriptions:["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"],smiley_images:["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"],smiley_path:d.basePath+"plugins/smiley/images/",specialChars:[],startupFocus:!1,startupMode:"wysiwyg",startupOutlineBlocks:!1,startupShowBorders:!0,stylesheetParser_skipSelectors:/(^body\.|^\.)/i,stylesheetParser_validSelectors:/\w+\.\w+/,stylesSet:[],tabIndex:0,tabSpaces:0,templates:"default",templates_files:["plugins/templates/templates/default.js"],templates_replaceContent:!0,toolbar:"Basic",toolbar_Basic:[["Bold","Italic","Underline","-","NumberedList","BulletedList","-","Link"]],toolbar_Full:[{name:"document",items:["Source","-","Save","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","SpellChecker","Scayt"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],toolbarCanCollapse:!1,toolbarGroupCycling:!0,toolbarLocation:"bottom",toolbarStartupExpanded:!0,uiColor:"#EBEBEB",undoStackSize:20,useComputedState:!0,width:""}}),a.define("view.Commenting",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.$,e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=a.Cfg;b=c.extend({tagName:"ul",className:"list-inline list-unstyled crafter-social-view-options-view",initialize:function(){c.prototype.initialize.apply(this,arguments);var b=this,e=this.collection,f=e.getIsWatched();this.cfg.hidden.push("options.watch"),d.each(this.cfg.hidden,function(c,d){b.$(a.string.fmt('[data-option="%@"]',d)).hide()}),this.$("[data-toggle]").dropdown(),this.setWatched(f)},sortBy:function(a,b,c){g("global.threadSortBy",b),g("global.threadSortOrder",c),this.refresh()},refresh:function(){this.collection.fetch({data:{target:this.cfg.target,context:this.cfg.context,sortBy:g("global.threadSortBy"),sortOrder:g("global.threadSortOrder")}})},watch:function(){var b=this,c=this.collection,d=c.getIsWatched();a.request({type:"POST",context:this,data:{frequency:"INSTANT"},url:a.url(d?"threads.{_id}.unsubscribe":"threads.{_id}.subscribe",{_id:this.cfg.target,context:this.cfg.context}),success:function(){c.setIsWatched(!d),b.setWatched(!d)},error:function(){}})},setWatched:function(a){var b=d(this.el).find('[data-action="watch"]');b.parents("li:first")[null===a?"addClass":"removeClass"]("hide"),a?(b.find("i").removeClass("fa-bell-slash").addClass("fa-bell"),b.find(".text").text("Disable Notifications")):(b.find("i").removeClass("fa-bell").addClass("fa-bell-slash"),b.find(".text").text("Enable Notifications"))},changeView:function(a,b){this.closeDropdown(),this.trigger("view.change.request",b)},close:function(){this.closeDropdown(),this.trigger("view.close.request")},closeDropdown:function(){this.$(e).remove(),this.$(f).removeClass("open").parents("li.open").removeClass("open")}}),b.DEFAULTS={hidden:[],templates:{main:function(){return a.string.fmt("%@options.hbs",a.Cfg("url.templates"))}}},a.define("view.Options",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.getDirector(),e=a.Constants,f=a.$;b=c.extend({className:[c.prototype.className,"crafter-social-discussion-view"].join(" "),listen:function(){var a=this.collection;a&&(this.listenTo(a,"add",this.addOne),this.listenTo(a,"sync",this.addAll))},createUI:function(){c.prototype.createUI.call(this),this.cfg.initCommentingView&&this.initCommentingView();var b=this.$(".options-view-container");if(b.size()){var d=new a.view.Options(f.extend({target:this.cfg.target,context:this.cfg.context,collection:this.collection},this.cfg.viewOptions||{}));d.render(),b.append(d.el),this.listenTo(d,"view.change.request",this.changeView),this.listenTo(d,"view.close.request",this.hide||a.util.emptyFn)}},initCommentingView:function(){var b=this.$(".reply-box"),c=a.getDirector().getProfile(),d=c.hasRole("SOCIAL_AUTHOR",this.cfg.context)||c.hasRole("SOCIAL_SUPERADMIN",this.cfg.context)||c.hasRole("SOCIAL_MODERATOR",this.cfg.context)||c.hasRole("SOCIAL_ADMIN",this.cfg.context);if(!d&&b.hide(),b.size()&&d){var e=new a.view.Commenting(f.extend({collection:this.collection,context:this.cfg.context,target:this.cfg.target,discussionView:this.cfg.discussionView,commentUrl:this.cfg.commentUrl,commentThreadName:this.cfg.commentThreadName,model:new a.Backbone.Model({avatarUrl:""})},this.cfg.commenting));b.append(e.render().el),this.cache("commentingView",e)}},changeView:function(a){this.trigger("view.change.request",a)},addAll:function(){var b=a.getDirector().getProfile(),c="";if(this.$(".comments:first").html(""),0===this.collection.length){c="discussion.comment".loc(),f(this.el).find(".comments:empty").append('<span class="sui-log-event">'+c+"</span>");var g=f(this.el).find(".sui-log-event")}else if(!(b.hasRole("SOCIAL_USER",this.cfg.context)||b.hasRole("SOCIAL_ADMIN",this.cfg.context)||b.hasRole("SOCIAL_MODERATOR",this.cfg.context))&&f(this.el).find(".sui-comment-nonempty").length<=0){c="discussion.login-comment".loc(),f(this.el).find(".comments:last").after('<span class="sui-comment-nonempty">'+c+"</span>");var g=f(this.el).find(".sui-comment-nonempty")}f(g).on("click",function(){d.trigger(e.get("EVENT_SOCIAL_NOCOMMENT"))}),this.collection.each(this.addOne,this)},addOne:function(b){if(!b.isTrashed()){var c=(new Date).getTime();if(b.ts=c,this.$(".no-comments").remove(),!b.isReply()){var d=new a.view.Comment({model:b,context:this.cfg.context,collection:this.collection});this.$(".comments:first").append(d.render().element())}}}}),b.DEFAULTS=f.extend({},c.DEFAULTS,{initCommentingView:!0,commenting:{editor:{extraPlugins:"autogrow",autoGrow_maxHeight:800,removePlugins:"resize"}}}),a.define("view.Discussion",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Discussion,d=a.$;b=c.extend({className:[c.prototype.className,"crafter-social-inline-view","panel-group"].join(" "),render:function(){c.prototype.render.apply(this,arguments);var a=this,b=(this.$(a.cmpID("panel")),this.$(this.cmpID("toggler")),a.cfg.target);return this.$(this.cmpID("toggler")).attr("name",b.substring(1,b.length)+"-comments"),this.$(this.cmpID("toggler")).attr("id",b.substring(1,b.length)+"-comments"),this.$(".panel-title span").text("discussion.title".loc()),this},show:function(){this.$el.insertAfter(this.cfg.target),this.addAll();var a=this.cache("commentingView");a&&a.editor()},hide:function(){var a=this.cache("commentingView");a&&a.editor("destroy"),this.$el.detach()},destroy:function(){var a=this.cache("commentingView");a&&a.editor("destroy"),this.$el.remove()}}),b.DEFAULTS=d.extend({},c.DEFAULTS,{viewOptions:{hidden:["inline.request"]},templates:{main:"%@inline.hbs".fmt(a.Cfg("url.templates"))}}),a.define("view.Inline",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Modal,d=a.view.Discussion,e=a.util,f=a.$,g=f.extend({},d.prototype,{className:[c.prototype.className,d.prototype.className,"crafter-social-lightbox-view"].join(" "),initialize:function(){c.prototype.initialize.apply(this,arguments),d.prototype.initialize.apply(this,arguments)},listen:function(){c.prototype.listen.apply(this,arguments),d.prototype.listen.apply(this,arguments);var a=this;f(this.$el).one("shown.bs.modal",function(){a.initCommentingView()})},createUI:function(){c.prototype.createUI.apply(this,arguments),this.$(".modal-header").prepend('<div class="options-view-container pull-right"></div>').find(".modal-title").text("Full Thread View").end().find(".close").remove(),this.$(".modal-body").after(this.getTemplate("comment-box")),this.$("footer.modal-footer").addClass("reply-box"),d.prototype.createUI.apply(this,arguments)},render:function(){var a=f(this.cfg.target),b=a.clone(),d={"font-size":"inherit","text-align":"inherit"},e=this;b.css(this.compileStyles(a,null,{"margin-bottom":0})),b.find(">*, >*>*, >*>*>*").each(function(){f(this).css(e.compileStyles(this,d))}),b.removeClass("reveal crafter-social-commentable");var g=this.$(".modal-body");return g.html(""),g.append(b),this.addAll(),c.prototype.render.apply(this,arguments)},compileStyles:function(b,c,d){try{if("getMatchedCSSRules"in a.window){var g,h={},i=a.window.getMatchedCSSRules(b instanceof f?b.get(0):b),j=[];return i&&f.each(i,function(a,b){var c=b.cssText;if(c.indexOf("crafter-social")===-1){var d=c.match(/\{(.+?)\}/g)[0].replace(/\{/g,"").replace(/\}/g,"")+";";j.push(d)}}),g=j.j().split(";"),f.each(g,function(a,b){if(""!==b.trim()){var c=b.split(":");h[c[0].trim()]=c[1].trim()}}),f.extend({},c||{},h,d||{})}return{}}catch(k){return e.log(k.message||k),{}}}});delete g.constructor,b=c.extend(g),b.DEFAULTS=f.extend(!0,{},c.DEFAULTS,d.DEFAULTS,{classes:null,initCommentingView:!1,viewOptions:{hidden:["lightbox.request"]},templates:{"comment-box":['<div class="modal-comment-box">','<h4 class="comment-box-title">Comments</h4>','<div class="comments crafter-social-comment-thread">','<div class="no-comments">(no comments)</div>',"</div>","</div>"].join("")}}),b.DEFAULTS.classes=[].concat(c.DEFAULTS.classes||[]).concat(d.DEFAULTS.classes||[]),b.DEFAULTS.classes.push("crafter-social-lightbox-view"),a.define("view.Lightbox",b)}(crafter.social),function(a){"use strict";if(!a.$.fn.popover)throw new Error("Popover requires bootstrap popover");var b,c=a.view.Discussion,d=a.$,e=d.extend({},d.fn.popover.Constructor.prototype,{className:[c.prototype.className,"crafter-social-popover","popover","fade"].join(" "),events:{"click button.close":"hide"},initialize:function(){this.visible=!1,c.prototype.initialize.apply(this,arguments),this.init("popover",this.cfg.target,this.cfg.popover),this.$tip=this.element(),this.addAll()},addOne:function(){c.prototype.addOne.apply(this,arguments)},listen:function(){c.prototype.listen.apply(this,arguments);var a=this;d(this.cfg.target).on("hidden.bs.popover",function(){a.trigger("visibility.change",!1),a.visible=!1}).on("shown.bs.popover",function(){var b=a.cache("commentingView");b&&b.editor(),a.trigger("visibility.change",!0),a.visible=!0})},render:function(){c.prototype.render();var a=this.$(".crafter-social-comment-thread");return a.on("mousewheel DOMMouseScroll",function(b){var c=this.scrollTop,d=b.originalEvent.detail<0||b.originalEvent.wheelDelta>0?1:-1;d<0&&a.outerHeight()+this.scrollTop===this.scrollHeight?b.preventDefault():d>=0&&0===c&&b.preventDefault()}),this},refresh:function(){this.collection.fetch({data:{target:this.cfg.target,context:this.cfg.context}})},replacement:function(){this.show()},hide:function(){var a=this.cache("commentingView");a&&a.editor("destroy");var b=d.Event("hide.bs."+this.type);return this.$tip.removeClass("in"),"in"!==this.hoverState&&this.$tip.detach(),this.$element.trigger(b),this.$element.trigger("hidden.bs."+this.type),this},getDefaults:function(){return b.DEFAULTS},getOptions:function(a){return a=d.extend({},this.getDefaults(),a,this.$element.data()),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},setContent:function(){this.tip().removeClass("fade top bottom left right in hide")},tip:function(){return this.element()}});delete e.constructor,b=c.extend(e),b.DEFAULTS=d.extend({},c.DEFAULTS,{templates:{main:"%@popover.hbs".fmt(a.Cfg("url.templates")),comment:"%@comment.hbs".fmt(a.Cfg("url.templates"))},popover:d.extend({},d.fn.popover.Constructor.DEFAULTS,{placement:"bottom",trigger:"manual",container:"body",content:"(not.empty)"}),viewOptions:{hidden:["close","popover.request"]}}),a.define("view.Popover",b)}(crafter.social),function(a){"use strict";var b,c="reveal",d=a.view.Base,e=a.Constants,f=a.getDirector(),g=a.util,h=a.$,i=a.window.setTimeout;a.window.clearTimeout;b=d.extend({hide:!1,reveal:!0,timeout:null,className:"crafter-social-commentable",revealed:!1,events:{mouseenter:"mouseenter"},initialize:function(b){var c=this;this.pageWidth=h(window).width();var e=this.pageWidth<768;b.sortOrder&&a.Cfg("global.threadSortOrder",b.sortOrder),b.sortBy&&a.Cfg("global.threadSortBy",b.sortBy),this.setElement(b.target),d.prototype.initialize.apply(this,arguments),this.delegateActions(this,this.$options),this.collection.fetch({data:{id:this.cfg.target}}),(!e&&"view.Inline"==b.discussionView||e&&1==b.mobileExpanded)&&i(function(){c.revealDiscussion()},500),i(function(){c.mouseenter()},500)},listen:function(){var b=this;h(a.window).resize(function(){b.windowWidthChanged()}),this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,e.get("EVENT_DISCUSSION_WATCHED",this.cfg),this.setWatched),this.listenTo(f,e.get("EVENT_AREAS_VISIBILITY_CHANGE"),this.visibilityModeChanged),this.listenTo(f,e.get("EVENT_REVEAL_DISCUSSIONS",this.cfg),this.revealDiscussion)},createUI:function(){var a=this.element();a.addClass("crafter-social-commentable");var b=h(g.template(this.getTemplate("main"),{count:""}));b.find("a.action").tooltip(),b.css({right:0,top:0}),this.$options=b,this.$el.append(b)},render:function(){for(var a=this.$options.find(".badge"),b=this.collection.length,c=0,d=0;d<b;d++){var e=this.collection.models[d];e&&e.attributes&&e.attributes.moderationStatus&&"TRASH"!=e.attributes.moderationStatus&&c++}b=0!=c?c:b;var f=this.cfg.target;return this.$options.find("#socialCommentBadge").attr("href","#"+f.substring(1,f.length)+"-comments"),0===b?a.text(""):a.text(b),this},visibilityModeChanged:function(a){switch(a){case e.get("AREA_VISIBILITY_MODE_REVEAL"):this.hide=!1,this.reveal=!0,this.$el.is(":visible")&&this.mouseenter();break;case e.get("AREA_VISIBILITY_MODE_HOVER"):this.hide=!1,this.reveal=!1,this.$el.is(":visible")&&this.mouseleave();break;case e.get("AREA_VISIBILITY_MODE_HIDE"):this.hide=!0,this.reveal=!1,this.$el.is(":visible")&&this.mouseleave()}},inline:function(){var b=this.cache("view.Inline");b&&(b.destroy(),this.stopListening(b)),b=new a.view.Inline({target:this.cfg.target,context:this.cfg.context,collection:this.collection,commentUrl:this.cfg.commentUrl,commentThreadName:this.cfg.commentThreadName,discussionView:this.cfg.discussionView}),b.render(),b.show(),this.cache("view.Inline",b),this.listenTo(b,"view.change.request",this.viewChangeRequest),this.setActiveView(b)},lightbox:function(){var b=this.cache("view.Lightbox");b||(b=new a.view.Lightbox({target:this.cfg.target,context:this.cfg.context,collection:this.collection,commentUrl:this.cfg.commentUrl,commentThreadName:this.cfg.commentThreadName}),this.cache("view.Lightbox",b),this.listenTo(b,"view.change.request",this.viewChangeRequest),b.render()),b.show(),this.setActiveView(b)},popover:function(){var b=this.cache("view.Popover");b||(b=new a.view.Popover({target:this.cfg.target,context:this.cfg.context,collection:this.collection,commentUrl:this.cfg.commentUrl,commentThreadName:this.cfg.commentThreadName}),this.cache("view.Popover",b),this.listenTo(b,"visibility.change",this.popoverVisibilityDidChange),this.listenTo(b,"view.change.request",this.viewChangeRequest),b.render()),b.show(),this.setActiveView(b)},setActiveView:function(a){this.activeView=a},popoverVisibilityDidChange:function(a){this.$el[a?"addClass":"removeClass"]("revealed-by-view")},revealDiscussion:function(a){var b=this;if(this.isMobile=h(window).width()<768,!(a instanceof h.Event)&&"object"==typeof arguments[0]){var c=arguments[0];c.view&&(this.cfg.discussionView=c.view)}this.isMobile&&this.cfg.mobileView?this.viewChangeRequest(this.cfg.mobileView):this.viewChangeRequest(this.cfg.discussionView,!0),a&&(!this.isMobile&&"view.Inline"==this.cfg.discussionView||this.isMobile&&"view.Inline"==this.cfg.mobileView)&&h("html, body").animate({scrollTop:h(h(a.currentTarget).attr("href")).offset().top},500),h.each(["view.Popover","view.Lightbox","view.Inline"],function(a,c){var d=b.cache(c);d&&d.render()})},viewChangeRequest:function(a,b){var c=this;switch(h.each(["view.Popover","view.Lightbox","view.Inline"],function(a,b){var d=c.cache(b);d&&d.hide()}),a){case"view.Popover":this.popover();break;case"view.Lightbox":this.lightbox();break;case"view.Inline":this.inline()}b&&(this.cfg.discussionView=a)},mouseenter:function(){var a=this.element();a.addClass(c)},mouseleave:function(){var a=this;a.element().removeClass(c)},windowWidthChanged:function(){var a=h(window).width(),b=this;(this.pageWidth>=767&&a<767||this.pageWidth<=768&&a>768)&&(h.each(["view.Popover","view.Lightbox","view.Inline"],function(a,c){var d=b.cache(c);d&&d.hide()}),(this.pageWidth<=767&&a>768&&"view.Inline"==this.cfg.discussionView||this.pageWidth>=767&&a<768&&1==this.cfg.mobileExpanded)&&i(function(){b.revealDiscussion(),b.mouseenter()},500)),this.pageWidth=a,b.revealed&&b.mouseenter()}}),b.DEFAULTS={templates:{main:function(){return a.string.fmt("%@commentable.hbs",a.Cfg("url.templates"))}},discussionView:"view.Popover"},a.define("view.Commentable",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.util,e=a.$,f=" ";b=c.extend({icon:"",title:"",shown:!1,attributes:{style:"display: none;"},events:{"click [data-dismiss]":"hide","click button.submit":"submit","keypress .form-control":"keypress"},initialize:function(d){d.classes&&(d.classes=(a.util.isArray(d.classes)?d.classes:d.classes.split(f)).concat(b.DEFAULTS.classes)),c.prototype.initialize.call(this,e.extend(!0,{},b.DEFAULTS,d));var g=this.bar,h=this.guid;this.listenTo(g,"%@.activate".fmt(h),this.activate),this.render()},render:function(){this.$el.appendTo(this.bar.el)},activate:function(a){this[this.shown?"hide":"show"]()},message:function(a){var b=this;this.$el.prepend(d.template(this.getTemplate("message"),a)),setTimeout(function(){b.$(".alert").remove(),a.callback&&a.callback.call(b,a)},3e3)},toggle:function(){this.$el.toggle("fast"),this.shown=!this.shown},show:function(){this.$el.show("fast"),this.shown=!0},hide:function(){this.$el.hide("fast"),this.shown=!1}}),b.DEFAULTS={classes:["crafter-social-bar-widget"],templates:{message:'<div class="alert alert-success"><i class="crafter-social-icon cs-icon-{{icon}}"></i> {{msg}}</div>'}},a.define("view.barget.Base",b)}(crafter.social),function(a){"use strict";var b,c=a.view.barget.Base,d=a.Constants;b=c.extend({icons:{reveal:"cs-icon-eye-open",hover:"cs-icon-hand-up"},icon:"eye-open",title:"Discussion",render:a.util.emptyFn,createUI:a.util.emptyFn,events:{"button .submit":"submit","keypress .form-control":"keypress"},listen:function(){this.listenTo(a.getDirector(),d.get("EVENT_AREAS_VISIBILITY_CHANGE"),this.visibilityModeChanged)},visibilityModeChanged:function(a){switch(a){case d.get("AREA_VISIBILITY_MODE_REVEAL"):this.$trigger.find(".text:first").text("Hover").end().find("i").removeClass(this.icons.reveal).addClass(this.icons.hover);break;case d.get("AREA_VISIBILITY_MODE_HIDE"):case d.get("AREA_VISIBILITY_MODE_HOVER"):this.$trigger.find(".text:first").text("Reveal").end().find("i").removeClass(this.icons.hover).addClass(this.icons.reveal)}},activate:function(b){a.getDirector().getAreaVisibilityMode()!==d.get("AREA_VISIBILITY_MODE_REVEAL")?a.getDirector().setAreaVisibilityMode(d.get("AREA_VISIBILITY_MODE_REVEAL")):a.getDirector().setAreaVisibilityMode(d.get("AREA_VISIBILITY_MODE_HOVER"))}}),a.define("view.barget.Reveal",b,!0)}(crafter.social),function(a){"use strict";var b,c=a.view.barget.Base,d=a.Constants;b=c.extend({icons:{enabled:"cs-icon-remove-sign",disabled:"cs-icon-ok-circle"},icon:"remove-sign",title:"Discussion",render:a.util.emptyFn,createUI:a.util.emptyFn,events:{"button .submit":"submit","keypress .form-control":"keypress"},listen:function(){this.listenTo(a.getDirector(),d.get("EVENT_AREAS_VISIBILITY_CHANGE"),this.visibilityModeChanged)},visibilityModeChanged:function(a){switch(a){case d.get("AREA_VISIBILITY_MODE_REVEAL"):case d.get("AREA_VISIBILITY_MODE_HOVER"):this.$trigger.find(".text:first").text("Disable").end().find("i").removeClass(this.icons.disabled).addClass(this.icons.enabled);break;case d.get("AREA_VISIBILITY_MODE_HIDE"):this.$trigger.find(".text:first").text("Enable").end().find("i").removeClass(this.icons.enabled).addClass(this.icons.disabled)}},activate:function(b){a.getDirector().getAreaVisibilityMode()!==d.get("AREA_VISIBILITY_MODE_HIDE")?a.getDirector().setAreaVisibilityMode(d.get("AREA_VISIBILITY_MODE_HIDE")):a.getDirector().setAreaVisibilityMode(d.get("AREA_VISIBILITY_MODE_HOVER"))}}),a.define("view.barget.Disable",b,!0)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.util,e=a.$;b=c.extend({events:{"click .control-element":"toggle","click [data-activate-widget]":"activate","click .social-utilities a":function(a){a.preventDefault()}},initialize:function(a){var d=e.extend({},b.DEFAULTS,a);c.prototype.initialize.call(this,d),this.initializeWidgets()},initializeWidgets:function(){var a=this.cfg.widgets,b=this.$(".social-utilities"),c=this.getTemplate("widget"),f={},g=this;e.each(a,function(a,h){if(h){var i,j=h.cls,k=e.extend({},h.cfg||{},{bar:g});"string"==typeof h.cls&&(j=d.get(h.cls)),i=new(j.extend(k))(h.instCfg),f[i.guid]=i,i.$trigger=e(d.template(c,i)),b.append(i.$trigger)}}),this.widgets=f},activate:function(a){var b=e(a.target),c=b.data("activateWidget");!c&&(c=b.parents("[data-activate-widget]:first").data("activateWidget")),e.each(this.widgets,function(a,b){c!==a&&b.hide()}),this.trigger("%@.activate".fmt(c),b)},collapsed:!1,_collapseData:null,toggle:function(){if(!this._collapseData){var a=this.$(".control-element");this._collapseData={$ctrl:a,width:this.$el.outerWidth(),ctrlWidth:a.outerWidth()}}var b=this.$el,c=this._collapseData;b.animate({right:this.collapsed?0:c.ctrlWidth-c.width},100,function(){}),this.collapsed=!this.collapsed}}),b.DEFAULTS={templates:{main:"%@social-bar.hbs".fmt(a.Cfg("url.templates")),widget:['<li class="subordinate">','<a data-activate-widget="{{guid}}">','<i class="crafter-social-icon cs-icon-{{icon}}"></i> <span class="text">{{title}}</span>',"</a>","</li>"].j()},classes:["crafter-social-bar"],widgets:[{cls:"crafter.social.view.barget.Reveal",cfg:{title:"Reveal"},instCfg:{}},{cls:"crafter.social.view.barget.Disable",cfg:{title:"Disable"},instCfg:{}}]},a.define("view.SocialBar",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Modal,d=a.Constants,e=a.getDirector(),f=a.model.Profile,g=a.$,h=a.util;b=c.extend({className:[c.prototype.className,"crafter-social-auth-view"].join(" "),events:{"click #submitBtn_%@":"submit"},initialize:function(){c.prototype.initialize.apply(this,arguments),!this.model&&(this.model=new f)},login:function(){c.prototype.login.apply(this,arguments),f.authenticate()},listen:function(){c.prototype.listen.apply(this,arguments);var a=this;this.$el.on("shown.bs.modal",function(){a.$("input:first").select()}),this.listenTo(e,d.get("EVENT_USER_AUTHENTICATION_SUCCESS"),this.destroy),this.listenTo(e,d.get("EVENT_USER_AUTHENTICATION_FAILED"),this.failure)},createUI:function(){c.prototype.createUI.apply(this,arguments),this.$(".modal-title:first").text("Login"),this.$(".modal-body:first").html(h.template(this.getTemplate("form"),{guid:this.guid,action:a.Cfg("url.security"),method:"post"})),this.$(".modal-footer:first").html(h.template(this.getTemplate("submit"),this))},render:function(){c.prototype.render.apply(this,arguments);var a=this.model.toJSON();this.setFormData(a);var b=this;return this.$el.on("hidden.bs.modal",function(){b.destroy()}),this},setFormData:function(a){this.$("form").find("input, textarea, select").each(function(){var b=g(this);b.val(a[b.attr("name")])})},getFormData:function(){var a={};return this.$("form").find("input, textarea, select").each(function(){var b=g(this);a[b.attr("name")]=b.val()}),a},submit:function(){
this.setMessage({type:"info",icon:"info-sign",message:"Loading, please wait&hellip;"});var a=this.getFormData();this.model.set(a),this.model.authenticate()},failure:function(){this.setMessage({type:"danger",icon:"warning-sign",message:"Your credentials were not recognized"}),this.$("input:first").select()},setMessage:function(a){var b=this.$(".modal-body");b.find(".alert").remove(),a&&b.prepend(h.template(this.getTemplate("message"),a))}}),b.DEFAULTS=g.extend(!0,{},c.DEFAULTS,{templates:{form:"%@auth-form.hbs".fmt(a.Cfg("url.templates")),submit:'<button data-indentifyme="submitBtn" class="btn btn-primary">Submit</button>',message:['<div class="alert alert-{{type}}">','<i class="crafter-social-icon cs-icon-{{icon}}"></i> {{html message}}',"</div>"].join("")}}),a.define("view.Auth",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.util,e=a.$;b=c.extend({createUI:null,className:[c.prototype.className,"crafter-social-file-view"].join(" "),open:function(){},detach:function(){},render:function(){var a=this.getTemplate("main");return this.$el.html(d.template(a,this.model.toJSON())),this}}),b.DEFAULTS=e.extend(!0,{},c.DEFAULTS,{templates:{main:function(){return a.string.fmt("%@file.hbs",a.Cfg("url.templates"))}}}),a.define("view.File",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.util,e=a.$;b=c.extend({className:[c.prototype.className,"crafter-social-view","crafter-social-files-view","crafter-social-dropbox-element"].join(" "),listen:function(){var a=this.collection;this.listenTo(a,"add",this.addOne),this.listenTo(a,"sync",this.addAll)},addAll:function(){this.$(".cs-files-list:first").html(""),this.collection.each(this.addOne,this)},addOne:function(b){var c=new a.view.File({model:b});this.$(".cs-files-list:first").append(c.render().el)},uploadComplete:function(a){e(a.ui).remove();var b=d.fromJSON(a.e.target.responseText),c=new File(b);this.addOne(c)}}),b.DEFAULTS=e.extend(!0,{},c.DEFAULTS,{templates:{main:function(){return a.string.fmt("%@files.hbs",a.Cfg("url.templates"))},file:function(){return a.string.fmt("%@file.hbs",a.Cfg("url.templates"))}}}),a.define("view.Files",b)}(crafter.social),function(a){"use strict";var b,c=a.view.Base,d=a.util,e=a.$;b=c.extend({createUI:d.emptyFn,className:[c.prototype.className,"file-wrapper"].join(" "),initialize:function(){c.prototype.initialize.apply(this,arguments)},render:function(){var b=e.extend(this.model.toJSON(),{title:function(){return b.fileName},isVideo:function(){return b.contentType.indexOf("video/")!==-1},src:function(){var c="",d=b.fileName.toLowerCase();return c=d.match(a.Constants.get("SUPPORTED_IMAGE_FORMATS"))?b.url:d.match(a.Constants.get("SUPPORTED_VIDEO_FORMATS"))?a.Constants.get("POSTER_URL"):""}});return this.$el.html(d.template(this.getTemplate("main"),b)),this},trashAttachment:function(b){b.stopPropagation();var c=this,d=this.model,e=a.get("view.Modal"),f=new e({modal:{show:!0,keyboard:!1,backdrop:"static"},events:{"click .btn-danger":function(){c.model.trashAttachment(c.getRequestParams({fileId:d.get("fileId"),_id:d.get("commentId")}),{success:function(a){c.$el.remove(),f.destroy()},error:function(a){console.log("Error ",a)}})}}});b.target;f.set("title","Delete Attachment"),f.set("body","<span>Are you sure you want to delete the attachment <strong>"+c.getAttachmentName(d.get("fileName"))+"</strong>?</span>"),f.set("footer",'<button class="btn btn-danger">Delete</button><button class="btn btn-default" data-dismiss="modal">Cancel</button>'),f.render()},getAttachmentName:function(a){var b=a.split("."),c=b.length>1?b[0]:a.fileName;return c},getAttachmentType:function(a){var b=a.split("."),c=b.length>1?b[1]:"";return c},getRequestParams:function(a){return e.extend({context:this.cfg.context},a||{})},viewAttachment:function(b){var c=this,d=this.model,e=a.get("view.Modal"),f=new e({destroyOnClose:!0,modal:{show:!0,keyboard:!1,backdrop:"static"}});b.target;if(d.get("fileName").match(a.Constants.get("SUPPORTED_VIDEO_FORMATS"))){var g=c.getAttachmentType(d.get("fileName"));f.set("body",'<video controls autoplay class="img-file-full"><source src="'+d.get("url")+'" type="video/'+g+'" ></source></video>')}else f.set("body",'<img class="img-file-full" src="'+d.get("url")+'" alt="'+d.get("fileName")+'" title="'+d.get("fileName")+'" />');f.set("footer",'<button class="btn btn-default" data-dismiss="modal">Close</button>'),f.render()}}),b.DEFAULTS=e.extend(!0,{},c.DEFAULTS,{templates:{main:"%@attachment-preview.hbs".fmt(a.Cfg("url.templates"))}}),a.define("view.AttachmentPreview",b)}(crafter.social),function(a){"use strict";var b=a.window.crafterSocial_onAppReady,c=[a.getDirector(),a];a.util.isArray(b)?b.every(function(a){return a.apply(null,c)}):b&&b.apply(null,c)}(crafter.social);
//# sourceMappingURL=social.map